<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:type" content="website">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/page/7/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="坤">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aurora-lsk.asia/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.1vue%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.1vue%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">3.1vue的基本使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】动态组件</h1>
<h2 id="【1】基本使用">【1】基本使用</h2>
<ul>
<li>比如：</li>
</ul>
```python
<one :is="type"></one>
```````

<p>html</p>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./js2/vue.js"></script>
</head>
<body>
<div id="app">
    <div>
        <!--        三个按钮-->
        <button @click="type='home'">首页</button>
        <button @click="type='goods'">商品页</button>
        <button @click="type='order'">订单页</button>
    </div>
<pre><code>&lt;!--    方法一：判断--&gt;
</code></pre>
<!--    这里的为什么要用==应为是比较，不可以用=-->
<!--    <home v-if="type=='home'"></home>-->
<!--    <goods v-else-if="type=='goods'"></goods>-->
<!--    <order v-else></order>-->
<!--    方法二-->
<pre><code>&lt;!--    这个标签随便起名字，因为is绑定了属性--&gt;
&lt;one :is=&quot;type&quot;&gt;&lt;/one&gt;
</code></pre>
</div>
</body>
<script>
    // 全局组件
    Vue.component("home", {
        template: `<div>
                    <h1>首页</h1>
                   </div>`,
    })
    // 全局组件
    Vue.component("goods", {
        template: `<div>
                    <h1>商品页</h1>
                   </div>`,
    })
    // 全局组件
    Vue.component("order", {
        template: `<div>
                    <h1>订单页</h1>
                   </div>`,
    })
<pre><code>var vm = new Vue(&#123;
    el: &quot;#app&quot;,
    data: &#123;
        type: &quot;home&quot;
    &#125;
&#125;)
</code></pre>
</script>
</html>
````



## 【2】keep-alive

- `keep-alive`可以让输入框内有的内容一致保持，不会因为切换而重置



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;./js2/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!--        三个按钮--&gt;</span><br><span class="line">        &lt;button @click=&quot;type=&#x27;home&#x27;&quot;&gt;首页&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;type=&#x27;goods&#x27;&quot;&gt;商品页&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;type=&#x27;order&#x27;&quot;&gt;订单页&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!--    方法一：判断--&gt;</span><br><span class="line">&lt;!--    这里的为什么要用==应为是比较，不可以用=--&gt;</span><br><span class="line">    &lt;keep-alive&gt;</span><br><span class="line">    &lt;home v-if=&quot;type==&#x27;home&#x27;&quot;&gt;&lt;/home&gt;</span><br><span class="line">    &lt;goods v-else-if=&quot;type==&#x27;goods&#x27;&quot;&gt;&lt;/goods&gt;</span><br><span class="line">    &lt;order v-else&gt;&lt;/order&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--    方法二--&gt;</span><br><span class="line">&lt;!--    &lt;keep-alive&gt;--&gt;</span><br><span class="line">&lt;!--        &lt;component :is=&quot;type&quot;&gt;&lt;/component&gt;--&gt;</span><br><span class="line">&lt;!--    &lt;/keep-alive&gt;--&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 全局组件</span><br><span class="line">    Vue.component(&quot;home&quot;, &#123;</span><br><span class="line">        template: `&lt;div&gt;</span><br><span class="line">                    &lt;h1&gt;首页&lt;/h1&gt;</span><br><span class="line">                   &lt;/div&gt;`,</span><br><span class="line">    &#125;)</span><br><span class="line">    Vue.component(&quot;goods&quot;, &#123;</span><br><span class="line">        template: `&lt;div&gt;</span><br><span class="line">                    &lt;h1&gt;商品页&lt;/h1&gt;</span><br><span class="line">                   &lt;/div&gt;`,</span><br><span class="line">    &#125;)</span><br><span class="line">    Vue.component(&quot;order&quot;, &#123;</span><br><span class="line">        template: `&lt;div&gt;</span><br><span class="line">                    &lt;h1&gt;订单页&lt;/h1&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot;&gt;</span><br><span class="line">                   &lt;/div&gt;`,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el: &quot;#app&quot;,</span><br><span class="line">        data: &#123;</span><br><span class="line">            type: &quot;home&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【二】插槽</span><br><span class="line"></span><br><span class="line">## 【1】基本插槽</span><br><span class="line"></span><br><span class="line">- 插槽：你写的全局组件，在body里面使用，然后你又在里面添加了标签</span><br><span class="line"></span><br><span class="line">  - ````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">    &lt;home&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;img src=&quot;./img/1.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">            &lt;img src=&quot;./img/2.png&quot; alt=&quot;&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/home&gt;</span><br><span class="line">    &#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line">- `&lt;slot&gt;&lt;/slot&gt;`:写在组件中的数据，都会被赋值并替换掉组件中得&lt;slot&gt;&lt;/slot&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./js2/vue.js"></script>
</head>
<body>
<div id="app">
<home>
    <div>
        <img src="./img/1.png" alt="">
        <img src="./img/2.png" alt="">
    </div>
</home>
</div>
</body>
<script>
    Vue.component("home", {
        template: `<div>
                    <h1>首页</h1>
                    <slot></slot>
                   </div>
                   `,
<pre><code>&#125;)


var vm=new Vue(&#123;
    el:&quot;#app&quot;,
    data:&#123;

    &#125;
&#125;)
</code></pre>
</script>
</html>
````



## 【2】具名卡槽

- 就是有名的卡槽，指定使用的卡槽的位置



`````

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./js2/vue.js"></script>
</head>
<body>
<div id="app">
<home>
    <div slot="two">
        <img src="./img/3.png" alt="">
        <img src="./img/4.png" alt="">
    </div>
    <div slot="one">
        <img src="./img/1.png" alt="">
        <img src="./img/2.png" alt="">
    </div>
</home>
</div>
</body>
<script>
    Vue.component("home", {
        template: `<div>
                     <slot name="one"></slot>
                    <h1>首页</h1>
                    <slot name="two"></slot>
                   </div>
                   `,
<pre><code>&#125;)


var vm=new Vue(&#123;
    el:&quot;#app&quot;,
    data:&#123;

    &#125;
&#125;)
</code></pre>
</script>
</html>
`````



# 【三】`Vue`的项目创建和运行

## 【1】前言



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">- 版本</span><br><span class="line">  - `vue2`：只能用`vue-cli`创建</span><br><span class="line">  - `vue3`：即可用`vue-cli`创建又可以用`vite`</span><br><span class="line"></span><br><span class="line">- `vue-cli`：又称之为vue的脚手架。`vue-cli` 是一个官方提供的命令行工具，用于简化 `Vue.js` 项目的创建和管理。它提供了一些便捷的命令来生成新项目、配置开发环境、运行开发服务器、构建生产版本等。`vue-cli` 能够帮助你快速启动一个` Vue.js `项目，自动配置所需的工具和插件，使得开发过程更加高效</span><br><span class="line">	# 安装必须依赖于：nodejs的环境---》就好比django-admin</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】安装`nodejs`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

python
# 搭建node环境
-我们需要nodejs：20.16版本
- 下载安装包
- 下一部安装就可以
# 在cmd命令中检验
- 有两个命令
	node:就是python
    npm:就是pip
````



- npm换源



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">-npm 下载第三方包时，去国外下，速度很慢</span><br><span class="line">-替换一下国内镜像站：阿里云源</span><br><span class="line">	-npm config set registry http://registry.npmmirror.com </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">-使用阿里云提供的cnpm替代npm：提示和显示更友好</span><br><span class="line">	-npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line">    -以后用cnpm替代npm即可</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- nodejs的包管理工具</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

python
npm、yarn、cnpm
```



- ` 安装 vue-cli--就能创建vue项目`



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line"># 去官网下载：npm install -g @vue/cli</span><br><span class="line">	-------我们要换成cnpm install -g @vue/cli</span><br><span class="line"># 安装成功过后会释放出一个命令：vue命令</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240812161748349](D:\pycharm\Temporary_notes\图片\image-20240812161748349.png)</span><br><span class="line"></span><br><span class="line">- 创建vue的项目</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

shell
# 你需要将路径切换到你存储vue项目的路径
vue create 项目名
````



- 上下选择自定义设置

![image-20240812162348912](D:\pycharm\Temporary_notes\图片\image-20240812162348912.png)

- 上下选择自定义设置

![image-20240812162451356](D:\pycharm\Temporary_notes\图片\image-20240812162451356.png)

- 选择版本

![image-20240812162531852](D:\pycharm\Temporary_notes\图片\image-20240812162531852.png)

![image-20240812162555274](D:\pycharm\Temporary_notes\图片\image-20240812162555274.png)

- 选则下面那个即可

![image-20240812162621736](D:\pycharm\Temporary_notes\图片\image-20240812162621736.png)

- 是否保存（保存到的话，下次你可以直接使用这个配置）

![image-20240812162659362](D:\pycharm\Temporary_notes\图片\image-20240812162659362.png)

## 【3】运行vue项目

- 在terminal中



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line"># 第一：切换到你的vue项目：cd 项目名字</span><br><span class="line"># 第二：运行：npm run serve</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 在pycharm中:找到你创建的vue项目直接打开</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

python
# 上面运行的绿色按钮：
	- 添加一个npm命令，脚本的地方写：serve
```



![image-20240812163859226](D:\pycharm\Temporary_notes\图片\image-20240812163859226.png)

![image-20240812163940475](D:\pycharm\Temporary_notes\图片\image-20240812163940475.png)

# 【四】vue项目目录的结构



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line"># vue_demo001 项目名</span><br><span class="line">	-node_modules：黄色是被git管理了表示忽略文件--》当前项目的所有依赖--》如果没有项目运行不了</span><br><span class="line">    			  相当于python项目中有个文件夹 .venv</span><br><span class="line">        		   特别多小文件--》把项目发送给别人，这个文件夹删除</span><br><span class="line">                    cnpm install  #项目根路径下执行，就会重新创建出来，根据package.json安装</span><br><span class="line">                </span><br><span class="line">    -public # 文件夹</span><br><span class="line">    	-favicon.ico  # 网页小图标</span><br><span class="line">        -index.html   # vue：spa 单页面应用--》只有一个html页面--》不要动它</span><br><span class="line">        </span><br><span class="line">    -src             #文件夹 ，vue的核心代码，后期我们都在这里面写代码</span><br><span class="line">        -assets      # 文件夹，放公共静态资源，js，css，图片</span><br><span class="line">        	-logo.png  # 静态图片</span><br><span class="line">	   -components   #文件夹 组件，以后小组件放在这个文件夹内【页面组件和小组件】</span><br><span class="line">    		-HelloWorld.vue # 默认提供的小组件</span><br><span class="line">       		-后期我们写的小组件放这里</span><br><span class="line">       -router      #文件夹，第三方包，vue-routr的东西，后面会详细学   路由</span><br><span class="line">			-index.js # vue-router的代码</span><br><span class="line">       -store       #文件夹，第三方包，vuex的东西，后面会详细学   状态管理器</span><br><span class="line">    		-index.js # vuex的代码</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">   	  -views      # #文件夹 组件，以后页面组件放在这个文件夹内【页面组件和小组件】</span><br><span class="line">        	-AboutView.vue  # 关于页面</span><br><span class="line">        	-HomeView.vue   # 首页</span><br><span class="line">        </span><br><span class="line">      -App.vue   # 根组件</span><br><span class="line">      -main.js   # vue项目的核心js文件，项目运行从他开始</span><br><span class="line">        </span><br><span class="line">   -.gitignore       # git管理软件的忽略文件--》后面会学git</span><br><span class="line">   -babel.config.js  # babel的配置文件，不用动，vue支持最新es语法--》把新版本语法--转成es5语法</span><br><span class="line">   -jsconfig.json    # 不用管</span><br><span class="line">   -package.json     # 配置信息，项目依赖,后面会用axios，装完后，在里面就有</span><br><span class="line">   -package-lock.json# package锁定文件，锁定版本</span><br><span class="line">   -README.md        # 项目描述文件</span><br><span class="line">   -vue.config.js    # vue项目配置文件--》settings.py</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"># 补充：</span><br><span class="line">	svg图片：可以无限放大缩小</span><br><span class="line">    ico，png，jpg：图片文件，放大后看不清</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"># pycharm中删除的文件找回</span><br><span class="line">	-项目上点右键--》show history--——》revert回来即可</span><br><span class="line">&#123;% raw %&#125;```````python</span><br><span class="line">dist: 打包的项目目录(打包后会生成)</span><br><span class="line">node_modules: 项目依赖(删掉，不上传git，使用npm install重新安装)</span><br><span class="line">public: 共用资源</span><br><span class="line">	--favicon.ico</span><br><span class="line">	--index.html:项目入口页面，单页面</span><br><span class="line">src: 项目目标,书写代码的地方</span><br><span class="line">	-- assets:资源</span><br><span class="line">	-- components:组件</span><br><span class="line">	-- views:视图组件</span><br><span class="line">	-- App.vue:根组件</span><br><span class="line">	-- main.js: 入口js</span><br><span class="line">	-- router.js: 路由文件</span><br><span class="line">	-- store.js: 状态库文件</span><br><span class="line">vue.config.js: 项目配置文件(没有可以自己新建)</span><br><span class="line">package.json：项目配置依赖（等同于python项目的reqirement.txt）</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【五】vue的开发规范</span><br><span class="line"></span><br><span class="line">## 【1】vue项目的执行流程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 1 我们运行：npm run serve  --》编译并运行项目</span><br><span class="line">	-xx.vue---&gt;浏览器识别不了--》浏览器只能识别 html，css，js</span><br><span class="line">    -把vue项目--》编译--》编译成功纯粹的  html，css，js--》运行起来--》浏览器中访问xxxxxxxxxx # # 1 我们运行：npm run serve  --》编译并运行项目    -xx.vue---&gt;浏览器识别不了--》浏览器只能识别 html，css，js    -把vue项目--》编译--》编译成功纯粹的  html，css，js--》运行起来--》浏览器中访问</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"># 2：重点</span><br><span class="line">- index.html---&gt;div--&gt;id叫app</span><br><span class="line">-  App.vue ---&gt; 组件--》在固定的位置写固定的代码即可</span><br><span class="line">    	-&lt;template&gt;   html内容</span><br><span class="line">        -&lt;style&gt;       css内容</span><br><span class="line">        -&lt;script&gt;       js内容</span><br><span class="line">-  main.js--》js代码</span><br><span class="line">    	# 找到 index.html--&gt;app这个div--》把App.vue组件中写的东西，放到index.html中</span><br><span class="line">    	new Vue(&#123;</span><br><span class="line">              render: h =&gt; h(App.vue)</span><br><span class="line">           &#125;).$mount(&#x27;#app&#x27;)</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】vue的开发</span><br><span class="line"></span><br><span class="line">- 访问根路径，显示`HomeView.vue`这个组件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">- 通过vue-router来控制：在router--&gt;index.js中</span><br><span class="line">		# 这个就好比我们的路由</span><br><span class="line">	- 找打：const routes = [</span><br><span class="line">                  &#123;</span><br><span class="line">                    # 这个就是根路径的意思</span><br><span class="line">                    path: &#x27;/&#x27;,</span><br><span class="line">                    name: &#x27;home&#x27;,</span><br><span class="line">                    component: HomeView</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &#123;</span><br><span class="line">                      # 这个是about的路径</span><br><span class="line">                    path: &#x27;/about&#x27;,</span><br><span class="line">                    name: &#x27;about&#x27;,</span><br><span class="line">                    component: () =&gt; import(/* webpackChunkName: &quot;about&quot; */ &#x27;../views/AboutView.vue&#x27;)</span><br><span class="line">                  &#125;</span><br><span class="line">                ]</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- vue-routeru用来控制访问的路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">- 访问这个路径：http://192.168.1.252:8081/  ---》显示 HomeView 组件</span><br><span class="line">- 访问这个路径：http://192.168.1.252:8081/about---》显示 AboutView 组件</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- `App.vue`：根组件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 如果没有vue-router，访问 根路径会显示 App.vue中写的东西</span><br><span class="line"># 我们想每次访问的都只我们写的组件内容：方法</span><br><span class="line">		- 将App.vue里面只保留：</span><br><span class="line">                &lt;template&gt;</span><br><span class="line">                  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">                    &lt;router-view/&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 总结</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">- 在view文件夹下创建  xx.vue--- &gt;页面组件</span><br><span class="line">- 在router---》index.js  注册路由</span><br><span class="line">- 浏览器中访问路径，就会显示 刚刚创建的组件</span><br></pre></td></tr></table></figure>

<ul>
<li>页面组件编写规范：三部分</li>
</ul>
```python
# <template>   html内容
# <style>       css内容
# <script>       js内容
	# 必须加下面的内容 
    export default {
    }
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 引入组件使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">	1 导入</span><br><span class="line">    2 注册成局部组件</span><br><span class="line">    3 在template 写即可</span><br><span class="line">    	-自定义属性--》父传子</span><br><span class="line">        -自定义事件--》子传父</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【六】es6语法</span><br><span class="line"></span><br><span class="line">## 【1】let、const</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># let :定义变量</span><br><span class="line"># const ：定义常量</span><br><span class="line">------块级作用域----</span><br><span class="line"># var 以后尽量少用，用它声明的都是全局作用域</span><br><span class="line"></span><br><span class="line"># 在ES6之前，我们都是用var来声明变量，而且JS只有函数作用域和全局作用域，没有块级作用域，所以&#123;&#125;限定不了var声明变量的访问范围。</span><br><span class="line"></span><br><span class="line"># ES6 新增了let命令，用来声明局部变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效，而且有暂时性死区的约束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># &quot;暂时性死区&quot;（Temporal Dead Zone，简称 TDZ）是指在 ES6 中使用 let 或 const 声明变量时，变量存在但无法访问的区域。这种行为是为了在 JavaScript 中引入块级作用域而设计的。</span><br><span class="line"></span><br><span class="line"># 在 JavaScript 中，使用 var 声明的变量在其声明语句之前就可以被访问，这种行为称为&quot;变量提升&quot;。而在使用 let 或 const 声明变量时，变量虽然存在于作用域中，但是在声明语句之前访问这些变量会导致引发 ReferenceError 异常。</span><br><span class="line">	# 下面是例子	</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;./js2/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function one()&#123;</span><br><span class="line">        console.log(two)</span><br><span class="line">         var two=76 // 得到的是undefined</span><br><span class="line">         let two=76 // 会报错</span><br><span class="line">    &#125;</span><br><span class="line">    one()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"># 暂时性死区的产生原因是，let 和 const 声明的变量在进入作用域时就已经被创建，并且被绑定到了该作用域中，但是在变量的声明语句之前，访问这些变量会进入暂时性死区，因为此时变量尚未初始化</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># python的LEGB---》查找顺序</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】箭头函数</span><br><span class="line"></span><br><span class="line">- 简化了代码</span><br><span class="line">- **想了解细节的话，笔记里面写了**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 记住一句话：箭头函数内部没有自己的this---使用上一级</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】this指向的问题</span><br><span class="line"></span><br><span class="line">- 在全局上下文中，this之现象全局对象[可以放值取值]</span><br><span class="line">  - 放值取值：![image-20240812184134918](D:\pycharm\Temporary_notes\图片\image-20240812184134918.png)</span><br><span class="line">- 在浏览器环境中通常是window对象，在`Node.js`中是global对象</span><br><span class="line">- ![image-20240812184332118](D:\pycharm\Temporary_notes\图片\image-20240812184332118.png)</span><br><span class="line"></span><br><span class="line">- 函数调用：</span><br><span class="line"></span><br><span class="line">  - 如果函数作为普通函数调用，this指向全局对象（在严格模式下为undefined）</span><br><span class="line"></span><br><span class="line">    - 什么是严格模式：是 JavaScript 中的一种运行模式，它通过对语言的某些特性进行限制或改进来帮助开发者写出更安全、更规范的代码</span><br><span class="line"></span><br><span class="line">    - &#123;% raw %&#125;````vue</span><br><span class="line">      &lt;script&gt;</span><br><span class="line">          function one()&#123;</span><br><span class="line">              console.log(this)</span><br><span class="line">              // window对象</span><br><span class="line">          &#125;</span><br><span class="line">          one()</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line">      ````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 如果函数作为对象的方法调用，this指向该方法的对象</span><br><span class="line"></span><br><span class="line">    - 尽头函数内部没有this，会往上找</span><br><span class="line"></span><br><span class="line">  &#123;% raw %&#125;```vue</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">      let this_one = &#123;</span><br><span class="line">              name: &quot;jack&quot;,</span><br><span class="line">              age: 18,</span><br><span class="line">              one: () =&gt; &#123;</span><br><span class="line">                  // 这里的this就是window对象</span><br><span class="line">                  console.log(this)</span><br><span class="line">              &#125;,</span><br><span class="line">          two: function()&#123;</span><br><span class="line">                  // 这里的this是one的对象</span><br><span class="line">              console.log(this)</span><br><span class="line">          &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">      this_one.one()</span><br><span class="line">      this_one.two()</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>只要记住：箭头函数没有this，会往上找，找不到就是window（在严格模式下为undefined）</li>
<li>箭头函数的 this 指向定义时所在的作用域的 this 值，而不是调用时的 this 值。换句话说，箭头函数的 this 是词法作用域，而不是动态作用域</li>
<li>在 ES6 类方法中，this 指向调用该方法的对象实例</li>
</ul>
<h2 id="【4】模板字符串">【4】模板字符串</h2>
<ul>
<li>插值表达式</li>
</ul>
```html
const name = "Alice";
const age = 25;
const message = `Hello, my name is ${name} and I am ${age} years old.`;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【5】解构赋值</span><br><span class="line"></span><br><span class="line">-  解构赋值允许从数组或对象中提取数据，并将其赋值给变量</span><br><span class="line">- 如果结构的值在对象中没有，就会的到`undefind`，可以赋初值</span><br><span class="line">- 解构赋值可以方便地交换变量的值，同时还支持默认值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 解对象</span><br><span class="line">    let resume=&#123;name:&quot;lsk&quot;,age:18,hobby:[&quot;dance&quot;,&quot;sing&quot;]&#125;</span><br><span class="line">    // 这里必须是个大括号</span><br><span class="line">    // 可以赋初值</span><br><span class="line">    let &#123;name,age,one=666,hobby,two&#125;=resume</span><br><span class="line">    console.log(name) // lsk</span><br><span class="line">    console.log(age) // 18</span><br><span class="line">    // 也可以用作赋值</span><br><span class="line">    console.log(one) // 666</span><br><span class="line">    hobby.pop()</span><br><span class="line">    // 就会将最后一个给pop掉</span><br><span class="line">    console.log(hobby)// [[&quot;dance&quot;]</span><br><span class="line">    console.log(two) // undefined</span><br><span class="line">    </span><br><span class="line">    // 解数组</span><br><span class="line">        let data=[67,11,99]</span><br><span class="line">        let [a,b]=data</span><br><span class="line">        console.log(a) //67</span><br><span class="line">    	console.log(b) //11</span><br><span class="line">    // 结构函数返回值</span><br><span class="line">    	function l()&#123;</span><br><span class="line">        return &#123;name:&quot;lsk&quot;,age:18,hobby:[&quot;dance&quot;,&quot;sing&quot;]&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let &#123;name,age,hobby&#125;=l()</span><br><span class="line">        console.log(name) // lsk</span><br><span class="line">        console.log(age) // 18</span><br><span class="line">        console.log(hobby) // [&quot;dance&quot;,&quot;sing&quot;]</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【6】默认参数">【6】默认参数</h2>
<ul>
<li><code>ES6</code> 允许在函数参数中设置默认值，当调用函数时未提供参数时，将使用默认值</li>
</ul>
````html
function dom(name,age=22){
        console.log(name)
        console.log(age)
    }
// 没有传age，使用默认的
dom('lsk')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【7】展开算法</span><br><span class="line"></span><br><span class="line">- 记住展开算法的符号`...`</span><br><span class="line">- 可以将可迭代对象（如数组，字符串，对象）展开为多个参数或元素，也可以用作函数的参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">    // 对象</span><br><span class="line">    let l = &#123;name: &quot;lsk&quot;, age: 18&#125;</span><br><span class="line">    let i = &#123;hobby: [&quot;dance&quot;, &quot;sing&quot;],...l&#125;</span><br><span class="line">    console.log(i) //&#123;hobby:[&quot;dance&quot;,&quot;sing&quot;],name:&quot;lsk&quot;,age:18&#125;</span><br><span class="line">    // 列表</span><br><span class="line">    let l = [1,2,3,4]</span><br><span class="line">    let i = [5,6,7,8,...l]</span><br><span class="line">    console.log(i) // [5,6,7,8,1,2,3,4]</span><br><span class="line">    // 函数</span><br><span class="line">    function l(a,...b)&#123;</span><br><span class="line">        console.log(a) // 接受一个值</span><br><span class="line">        console.log(b) // 接收剩下的所有</span><br><span class="line">    &#125;</span><br><span class="line">    // 方法一</span><br><span class="line">    // l(1,2,3,4,5,6,7)</span><br><span class="line">    //方法二</span><br><span class="line">    let i=[1,2,3,4,5,6,7]</span><br><span class="line">    l(...i)</span><br></pre></td></tr></table></figure>

<h2 id="【8】模块化">【8】模块化</h2>
<h3 id="（1）默认导入和导出">（1）默认导入和导出</h3>
````javascript
// 创建一个one.js文件 导出
// 定义一个常量
const NAME='lsk'
// 又名函数
function add(a,b){
    return a+b
}
// 默认的导出对象只能有一个
export default {NAME,add,dmo(){
        console.log("lsk")
    }}


// 在其他的vue的js里面使用
import one from "@/lsk/one";
console.log(one.add(1,2))
console.log(one.NAME)
one.dmo()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）命名导入导出</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````javascript</span><br><span class="line">// 命名导出</span><br><span class="line">function dom1()&#123;</span><br><span class="line">    console.log(&#x27;dom1&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function dom2()&#123;</span><br><span class="line">    console.log(&#x27;dom1&#x27;)</span><br><span class="line">    dom1()</span><br><span class="line">&#125;</span><br><span class="line">export const f=dom2</span><br><span class="line">export const NAME=&#x27;lsk&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 导入</span><br><span class="line">// 方式一</span><br><span class="line">// import &#123;f,NAME&#125; from &quot;@/lsk/one&quot;;</span><br><span class="line">// 方式二</span><br><span class="line">import * as a from &quot;@/lsk/one&quot;;</span><br><span class="line">// 这个a是一个对象</span><br><span class="line">a.f()</span><br><span class="line">console.log(a.NAME)</span><br></pre></td></tr></table></figure>

<h3 id="（3）导入路径">（3）导入路径</h3>
<ul>
<li>如果在一个文件夹下，js的名字为index.js，你只需要导入到这一层的文件就可以</li>
</ul>
```python
import index from "@/lsk";

console.log(index.add(1,2))
console.log(index.NAME)
index.dmo()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- @的意思就是当前的是src文件路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># import index from &quot;@/lsk&quot;; 和 import index from &quot;./lsk/index.js&quot;; 一样</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 定制别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">import one from &quot;@/lsk/one&quot;;</span><br><span class="line">// 这个import后面的one只是一个你别名，可以自定义定制</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 起别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">import &#123;f,NAME as a&#125; from &quot;@/lsk/one&quot;;</span><br><span class="line">// 给NAME起别名叫a</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （4）module使用</span><br><span class="line"></span><br><span class="line">- 这个方法是在html中是使用的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">// 定义一个js文件</span><br><span class="line">export default &#123;</span><br><span class="line">    function dom1(a,b)&#123;</span><br><span class="line">    return a+b</span><br><span class="line">	&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 在html中使用</span><br><span class="line">// 如果不加上type=&quot;module&quot;就会就会报错，加上就不会</span><br><span class="line">&lt;script type=&quot;module&quot;&gt;</span><br><span class="line">    import lsk from &#x27;./lsk&#x27;</span><br><span class="line">    console.log(lqz.dom1(4,5))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h1>【七】登录的跳转案例</h1>
<ul>
<li>前后端分离</li>
</ul>
<h2 id="【1】解决跨越问题">【1】解决跨越问题</h2>
<ul>
<li>在django的settings里面配置</li>
</ul>
```python
# 统一按如下方式解决跨域
	-1 安装
    	pip3 install django-cors-headers
    -2 app中注册
        INSTALLED_APPS = [
            。。。
            'corsheaders',
        ]
    -3 中间件中注册
        MIDDLEWARE = [

            'corsheaders.middleware.CorsMiddleware',
        ]
    -4 配置文件中配置
    # 允许跨域源
    CORS_ORIGIN_ALLOW_ALL = True
    # 允许的请求头
    CORS_ALLOW_HEADERS = (
        "accept",
        "accept-encoding",
        "authorization",
        "content-type",
        "dnt",
        "origin",
        "user-agent",
        "x-csrftoken",
        "x-requested-with",

        # 额外允许的请求头
        'token',
    )
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】前端</span><br><span class="line"></span><br><span class="line">- 路由</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">&#123;</span><br><span class="line">    path: &#x27;/login&#x27;,</span><br><span class="line">    name: &#x27;login&#x27;,</span><br><span class="line">    component: LoginView</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/film&#x27;,</span><br><span class="line">    name: &#x27;film&#x27;,</span><br><span class="line">    component: FilmView</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>
<p>登录</p>
<ul>
<li>
<p>这里面有一个新的知识，跳转页面</p>
<ul>
<li>
```python
      this.$router.push('/film')
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;用户名：&lt;input type=&quot;text&quot; v-model=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;密码：&lt;input type=&quot;password&quot; v-model=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">      &lt;button @click=&quot;handleLogin&quot;&gt;点击登录&lt;/button&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">&lt;!--      签发的token--&gt;</span><br><span class="line">      &#123;&#123; token &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  // 格式</span><br><span class="line">  name: &#x27;LoginView&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      username: &#x27;&#x27;,</span><br><span class="line">      password: &#x27;&#x27;,</span><br><span class="line">      token: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleLogin() &#123;</span><br><span class="line">      // 发送ajax请求到后端</span><br><span class="line">      axios.post(&#x27;http://localhost:8000/login/&#x27;, &#123;</span><br><span class="line">        // 验证的数据</span><br><span class="line">        username: this.username,</span><br><span class="line">        password: this.password</span><br><span class="line">      &#125;).then(res =&gt; &#123;</span><br><span class="line">        // 判罚</span><br><span class="line">        if (res.data.code == 100) &#123;</span><br><span class="line">          // 正确的请求，跳转到电影页面</span><br><span class="line">          this.$router.push(&#x27;/film&#x27;)</span><br><span class="line">          // 得到登录成功的token</span><br><span class="line">          this.token = res.data.token</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          alert(res.data.msg)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).catch(err =&gt; &#123;</span><br><span class="line">        alert(err)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
<li>
<p>展示电影</p>
</li>
</ul>
```vue
<template>
  <div>
    <h1>最新的电影</h1>
    <div v-for="film in film_list">
      <h2>电影的名字：{{ film.name }}</h2>
      <h2>电影的简介：{{ film.name }}</h2>
      <div><img :src="film.poster" alt=""></div>

    </div>
  </div>
</template>

<script>
import axios from "axios";

export default {
  name: 'FilmView',
  data() {
    return {
      film_list: []
    }
  },
  created() {
    axios.get('http://localhost:8000/api/v1/film/film/').then(res => {
      this.film_list = res.data.result.films
    })
  }
}

</script>

<style>

</style>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】后端</span><br><span class="line"></span><br><span class="line">- 登录：配一个签发有token的路由和定制返回格式，记得配置全局</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 全局配置</span><br><span class="line">SIMPLE_JWT = &#123;</span><br><span class="line">    &quot;TOKEN_OBTAIN_SERIALIZER&quot;: &quot;app1.common.TokenCommon.CommonToken&quot;,</span><br><span class="line">&#125;</span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    &#x27;EXCEPTION_HANDLER&#x27;: &#x27;app1.common.exception.common_exception_handler&#x27;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 定制返回的格式</span><br><span class="line">from rest_framework_simplejwt.serializers import TokenObtainPairSerializer</span><br><span class="line"></span><br><span class="line">class CommonToken(TokenObtainPairSerializer):</span><br><span class="line">    def validate(self, attrs):</span><br><span class="line">        res = super().validate(attrs)</span><br><span class="line">        data = &#123;</span><br><span class="line">            &quot;code&quot;: 100,</span><br><span class="line">            &quot;msg&quot;: &quot;登录成功！&quot;,</span><br><span class="line">            &quot;token&quot;: res[&quot;access&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">        return data</span><br><span class="line"></span><br><span class="line"># 全局异常</span><br><span class="line">from rest_framework.response import Response</span><br><span class="line">from rest_framework.views import exception_handler</span><br><span class="line"></span><br><span class="line">def common_exception_handler(exc, context):</span><br><span class="line">    res = exception_handler(exc, context)</span><br><span class="line">    if res:</span><br><span class="line">        response = Response(&#123;&#x27;code&#x27;: 101, &quot;msg&quot;: res.data.get(&#x27;detail&#x27;)&#125;)</span><br><span class="line">    else:</span><br><span class="line">        response = Response(&#123;&#x27;code&#x27;: 000, &quot;msg&quot;: &#x27;错误！&#x27;&#125;)</span><br><span class="line">    return response</span><br></pre></td></tr></table></figure>

<ul>
<li>视图层</li>
</ul>
```python
import json
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.viewsets import ViewSet

class FilmViewSet(ViewSet):
    @action(methods=["get"], detail=False)
    def film(self, request):
        # 以运行的py文件所在目录为根
        with open('./app1/package.json', 'r', encoding="utf-8") as fp:
            data = json.load(fp)
        return Response({
            'code': 100,
            'msg': '查看成功！',
            'result': data
        })
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【八】scoped的使用</span><br><span class="line"></span><br><span class="line">- 在你的style标签上添加scoped属性，表示当前style中的所有样式只对当前样式有效</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````html</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h1&#123;</span><br><span class="line">  color: darkmagenta;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt; </span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【九】开源的样式库地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 1 开源的样式库，方便在vue中使用</span><br><span class="line">	-elementui：饿了么团队开源的  web端</span><br><span class="line">    	https://element.eleme.cn/#/zh-CN</span><br><span class="line">    -vant：有赞团队，移动端,微信小程序</span><br><span class="line">    	https://vant-ui.github.io/vant/v2/#/zh-CN/grid</span><br><span class="line">    -ant design:阿里团队</span><br><span class="line">    	https://1x.antdv.com/docs/vue/introduce-cn/</span><br><span class="line">    -iView</span><br><span class="line">    	https://v2.iviewui.com/components/grid</span><br><span class="line">    -nutui：京东团队</span><br><span class="line">    	https://nutui.jd.com/2x/#/dialog 移动端</span><br><span class="line"></span><br><span class="line"># 使用            </span><br><span class="line"># elementui</span><br><span class="line"># 2 项目中集成</span><br><span class="line">	1 安装：cnpm install element-ui -S</span><br><span class="line">    2 集成到项目：main.js 中加入</span><br><span class="line">    import ElementUI from &#x27;element-ui&#x27;;</span><br><span class="line">    import &#x27;element-ui/lib/theme-chalk/index.css&#x27;;</span><br><span class="line">    Vue.use(ElementUI); // 使用插件</span><br><span class="line">    3 去官网，找样式，复制，粘贴</span><br></pre></td></tr></table></figure>

<h1>【作业】</h1>
````python

0 今天讲的代码都敲一遍



1 之前点击切换美女案例--》写在vue项目中--》创建页面组件
2 显示电影案例--》写在vue项目中--》创建页面组件
3 聊天案例--》写在vue项目中--》创建页面组件



<template>
  <div class="about">
    <h1>This is an about page</h1>
  </div>
</template>


<script>
import axios from 'axios'
export default {
  data(){
    return {
      name:''
    }
  },
  created() {
    axios.get().then(res=>{
      this.name=res.data.name
    })
  }
}


# 1 登录跳转电影案例--》使用elementui美化
	登录页面
    电影页面
    
 # 2 我讲的练习一下


# 3  聊天web
	-登陆，注册
    -登陆--》显示所有用户--表格
    -每条用户有一个按钮---》申请
    -对方同意--》是好友
    
    -进入好友列表
    -点用名字---》页面--》聊天
    	定时器
    -群聊
    # 思路
    - 你需要创建好用户，存到数据库中
    - 创建一个登录的vue组件
    - 点击登录，发送ajax请求，到后端
    - 后端，你需要判断用户名密码是否在正确，你也可以签发token
    - 登入成功，返回所有的用户信息
    - 前端接收后端返回的数据，渲染到页面，进行for循环，挨个显示用户信息
    - 给每个用户后面都加一个按钮，添加好友的按钮（这个你可以在建立一个多对多的表，来存放关系）
    - 点击按钮发送添加好友的请求（也就是建立关系），你点击添加好友的请求是发送给好友的当请求，而不是直接建立了关系
    
    - 注册的话，你可以在等率的页面上添加一个按钮，点击按钮进入到注册页面(前提是拟建立好了注册的vue组件)
    - 点击注册-将你的username和password发给后端，后端接收进行储存
    
    - 点击好友头像或名字，进行如到聊天页面（新的vue的组件），可以进行聊天，你可以给你发送的信息，添加定时器
````


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.3vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.3vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%86%99%E6%B3%95/" class="post-title-link" itemprop="url">3.3vue项目中的写法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【vue项目中的写法】</h1>
<h2 id="【1】let、const">【1】let、const</h2>
````python
# let :定义变量
# const ：定义常量
------块级作用域----
# var 以后尽量少用，用它声明的都是全局作用域

# 在ES6之前，我们都是用var来声明变量，而且JS只有函数作用域和全局作用域，没有块级作用域，所以{}限定不了var声明变量的访问范围。

# ES6 新增了let命令，用来声明局部变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效，而且有暂时性死区的约束


# "暂时性死区"（Temporal Dead Zone，简称 TDZ）是指在 ES6 中使用 let 或 const 声明变量时，变量存在但无法访问的区域。这种行为是为了在 JavaScript 中引入块级作用域而设计的。

# 在 JavaScript 中，使用 var 声明的变量在其声明语句之前就可以被访问，这种行为称为"变量提升"。而在使用 let 或 const 声明变量时，变量虽然存在于作用域中，但是在声明语句之前访问这些变量会导致引发 ReferenceError 异常。
	# 下面是例子	
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="./js2/vue.js"></script>
</head>
<body>

</body>
<script>
    function one(){
        console.log(two)
         var two=76 // 得到的是undefined
         let two=76 // 会报错
    }
    one()
</script>
</html>

# 暂时性死区的产生原因是，let 和 const 声明的变量在进入作用域时就已经被创建，并且被绑定到了该作用域中，但是在变量的声明语句之前，访问这些变量会进入暂时性死区，因为此时变量尚未初始化


# python的LEGB---》查找顺序
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】箭头函数</span><br><span class="line"></span><br><span class="line">- 简化了代码</span><br><span class="line">- **想了解细节的话，笔记里面写了**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 记住一句话：箭头函数内部没有自己的this---使用上一级</span><br></pre></td></tr></table></figure>

<h2 id="【3】this指向的问题">【3】this指向的问题</h2>
<ul>
<li>
<p>在全局上下文中，this之现象全局对象[可以放值取值]</p>
<ul>
<li>放值取值：<img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240812184134918.png" alt="image-20240812184134918"></li>
</ul>
</li>
<li>
<p>在浏览器环境中通常是window对象，在<code>Node.js</code>中是global对象</p>
</li>
<li>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240812184332118.png" alt="image-20240812184332118"></p>
</li>
<li>
<p>函数调用：</p>
<ul>
<li>
<p>如果函数作为普通函数调用，this指向全局对象（在严格模式下为undefined）</p>
<ul>
<li>
<p>什么是严格模式：是 JavaScript 中的一种运行模式，它通过对语言的某些特性进行限制或改进来帮助开发者写出更安全、更规范的代码</p>
</li>
<li>
````vue
      <script>
          function one(){
              console.log(this)
              // window对象
          }
          one()
      </script>
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 如果函数作为对象的方法调用，this指向该方法的对象</span><br><span class="line"></span><br><span class="line">    - 尽头函数内部没有this，会往上找</span><br><span class="line"></span><br><span class="line">  &#123;% raw %&#125;```vue</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">      let this_one = &#123;</span><br><span class="line">              name: &quot;jack&quot;,</span><br><span class="line">              age: 18,</span><br><span class="line">              one: () =&gt; &#123;</span><br><span class="line">                  // 这里的this就是window对象</span><br><span class="line">                  console.log(this)</span><br><span class="line">              &#125;,</span><br><span class="line">          two: function()&#123;</span><br><span class="line">                  // 这里的this是one的对象</span><br><span class="line">              console.log(this)</span><br><span class="line">          &#125;</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">      this_one.one()</span><br><span class="line">      this_one.two()</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  ```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 只要记住：箭头函数没有this，会往上找，找不到就是window（在严格模式下为undefined）</span><br><span class="line"></span><br><span class="line">- 箭头函数的 this 指向定义时所在的作用域的 this 值，而不是调用时的 this 值。换句话说，箭头函数的 this 是词法作用域，而不是动态作用域</span><br><span class="line"></span><br><span class="line">- 在 ES6 类方法中，this 指向调用该方法的对象实例</span><br><span class="line"></span><br><span class="line">## 【4】模板字符串</span><br><span class="line"></span><br><span class="line">- 插值表达式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">const name = &quot;Alice&quot;;</span><br><span class="line">const age = 25;</span><br><span class="line">const message = `Hello, my name is $&#123;name&#125; and I am $&#123;age&#125; years old.`;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【5】解构赋值</span><br><span class="line"></span><br><span class="line">-  解构赋值允许从数组或对象中提取数据，并将其赋值给变量</span><br><span class="line">-  如果结构的值在对象中没有，就会的到`undefind`，可以赋初值</span><br><span class="line">-  解构赋值可以方便地交换变量的值，同时还支持默认值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 解对象</span><br><span class="line">    let resume=&#123;name:&quot;lsk&quot;,age:18,hobby:[&quot;dance&quot;,&quot;sing&quot;]&#125;</span><br><span class="line">    // 这里必须是个大括号</span><br><span class="line">    // 可以赋初值</span><br><span class="line">    let &#123;name,age,one=666,hobby,two&#125;=resume</span><br><span class="line">    console.log(name) // lsk</span><br><span class="line">    console.log(age) // 18</span><br><span class="line">    // 也可以用作赋值</span><br><span class="line">    console.log(one) // 666</span><br><span class="line">    hobby.pop()</span><br><span class="line">    // 就会将最后一个给pop掉</span><br><span class="line">    console.log(hobby)// [[&quot;dance&quot;]</span><br><span class="line">    console.log(two) // undefined</span><br><span class="line">    </span><br><span class="line">    // 解数组</span><br><span class="line">        let data=[67,11,99]</span><br><span class="line">        let [a,b]=data</span><br><span class="line">        console.log(a) //67</span><br><span class="line">    	console.log(b) //11</span><br><span class="line">    // 结构函数返回值</span><br><span class="line">    	function l()&#123;</span><br><span class="line">        return &#123;name:&quot;lsk&quot;,age:18,hobby:[&quot;dance&quot;,&quot;sing&quot;]&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        let &#123;name,age,hobby&#125;=l()</span><br><span class="line">        console.log(name) // lsk</span><br><span class="line">        console.log(age) // 18</span><br><span class="line">        console.log(hobby) // [&quot;dance&quot;,&quot;sing&quot;]</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【6】默认参数</span><br><span class="line"></span><br><span class="line">- `ES6` 允许在函数参数中设置默认值，当调用函数时未提供参数时，将使用默认值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````html</span><br><span class="line">function dom(name,age=22)&#123;</span><br><span class="line">        console.log(name)</span><br><span class="line">        console.log(age)</span><br><span class="line">    &#125;</span><br><span class="line">// 没有传age，使用默认的</span><br><span class="line">dom(&#x27;lsk&#x27;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【7】展开算法">【7】展开算法</h2>
<ul>
<li>记住展开算法的符号<code>...</code></li>
<li>可以将可迭代对象（如数组，字符串，对象）展开为多个参数或元素，也可以用作函数的参数</li>
</ul>
````python
    // 对象
    let l = {name: "lsk", age: 18}
    let i = {hobby: ["dance", "sing"],...l}
    console.log(i) //{hobby:["dance","sing"],name:"lsk",age:18}
    // 列表
    let l = [1,2,3,4]
    let i = [5,6,7,8,...l]
    console.log(i) // [5,6,7,8,1,2,3,4]
    // 函数
    function l(a,...b){
        console.log(a) // 接受一个值
        console.log(b) // 接收剩下的所有
    }
    // 方法一
    // l(1,2,3,4,5,6,7)
    //方法二
    let i=[1,2,3,4,5,6,7]
    l(...i)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【8】模块化</span><br><span class="line"></span><br><span class="line">### （1）默认导入和导出</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````javascript</span><br><span class="line">// 创建一个one.js文件 导出</span><br><span class="line">// 定义一个常量</span><br><span class="line">const NAME=&#x27;lsk&#x27;</span><br><span class="line">// 又名函数</span><br><span class="line">function add(a,b)&#123;</span><br><span class="line">    return a+b</span><br><span class="line">&#125;</span><br><span class="line">// 默认的导出对象只能有一个</span><br><span class="line">export default &#123;NAME,add,dmo()&#123;</span><br><span class="line">        console.log(&quot;lsk&quot;)</span><br><span class="line">    &#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 在其他的vue的js里面使用</span><br><span class="line">import one from &quot;@/lsk/one&quot;;</span><br><span class="line"></span><br><span class="line">// </span><br><span class="line"></span><br><span class="line">console.log(one.add(1,2))</span><br><span class="line">console.log(one.NAME)</span><br><span class="line">one.dmo()</span><br></pre></td></tr></table></figure>

<h3 id="（2）命名导入导出">（2）命名导入导出</h3>
````javascript
// 命名导出
function dom1(){
    console.log('dom1')
}
function dom2(){
    console.log('dom1')
    dom1()
}
export const f=dom2
export const NAME='lsk'


// 导入
// 方式一
// import {f,NAME} from "@/lsk/one";
// 方式二
import * as a from "@/lsk/one";
// 这个a是一个对象
a.f()
console.log(a.NAME)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （3）导入路径</span><br><span class="line"></span><br><span class="line">- 如果在一个文件夹下，js的名字为index.js，你只需要导入到这一层的文件就可以</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import index from &quot;@/lsk&quot;;</span><br><span class="line"></span><br><span class="line">console.log(index.add(1,2))</span><br><span class="line">console.log(index.NAME)</span><br><span class="line">index.dmo()</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- @的意思就是当前的是src文件路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># import index from &quot;@/lsk&quot;; 和 import index from &quot;./lsk/index.js&quot;; 一样</span><br></pre></td></tr></table></figure>

<ul>
<li>定制别名</li>
</ul>
````python
import one from "@/lsk/one";
// 这个import后面的one只是一个你别名，可以自定义定制
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 起别名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">import &#123;f,NAME as a&#125; from &quot;@/lsk/one&quot;;</span><br><span class="line">// 给NAME起别名叫a</span><br></pre></td></tr></table></figure>

<h3 id="（4）module使用">（4）module使用</h3>
<ul>
<li>这个方法是在html中是使用的</li>
</ul>
```javascript
// 定义一个js文件
export default {
    function dom1(a,b){
    return a+b
	}}


// 在html中使用
// 如果不加上type="module"就会就会报错，加上就不会
<script type="module">
    import lsk from './lsk'
    console.log(lqz.dom1(4,5))
</script>
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.3%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.3%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4/" class="post-title-link" itemprop="url">3.3名称空间</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>名称空间</h1>
<h2 id="【一】什么是名称空间">【一】什么是名称空间</h2>
<ul>
<li>存放函数名和函数值对应关系的地方</li>
<li>变量名=变量值</li>
<li>先开辟一块内存空间，把函数值扔到内存空间中----》内存空间</li>
<li>然后将变量名和变量值进行绑定存放到名称空间中—》名称空间中</li>
</ul>
<h2 id="【二】名称空间的分类">【二】名称空间的分类</h2>
<h3 id="【1】内建名称空间">【1】内建名称空间</h3>
<ul>
<li>伴随Python解释器的代码启动而生成，随着代码结束而关闭
<ul>
<li>第一个被加载的名称空间，用来存放一些内置的名字，比如内建函数名</li>
</ul>
</li>
</ul>
```python
print(max)
# <built-in function max>
#翻译：max最大
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】全局名称空间</span><br><span class="line"></span><br><span class="line">- 随着内建名称空间加载完成</span><br><span class="line">- 伴随python文件的开始执行/执行完毕而产生/回收</span><br><span class="line">  - 是第二个被加载的名称空间，文件执行过程中产生的名字都会存放于该名称空间中，如下名字</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import sys #模块名sys</span><br><span class="line"></span><br><span class="line">x=1 #变量名x</span><br><span class="line"></span><br><span class="line">if x == 1:</span><br><span class="line">    y=2 #变量名y</span><br><span class="line"></span><br><span class="line">def foo(x): #函数名foo</span><br><span class="line">    y=1</span><br><span class="line">    def bar():</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">Class Bar: #类名Bar</span><br><span class="line">	pass</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"># 这个列表是全局的列表</span><br><span class="line"># 列表是可变数据类型 ---&gt; 列表被修改后id不变</span><br><span class="line">num_list = []</span><br><span class="line">print(id(num_list)) # 1200291395392</span><br><span class="line">def add_list(num):</span><br><span class="line">    num_list.append(num)</span><br><span class="line">    print(id(num_list)) # 1200291395392</span><br><span class="line">add_list(1)</span><br><span class="line">add_list(2)</span><br><span class="line">add_list(3)</span><br><span class="line">print(num_list) # [1, 2, 3]</span><br><span class="line">print(id(num_list)) # 1200291395392</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="【3】局部名称空间">【3】局部名称空间</h3>
<ul>
<li>
<p>在函数内部或者是类内部定义的变量</p>
</li>
<li>
<p>随着函数启动而创建，随着函数结束而消失</p>
</li>
<li>
<p>列表式是可变数据类型----》列表被修改后id不变</p>
</li>
<li>
<p>函数的形参，函数内定义的名字都会被存放于该名称空间中</p>
</li>
</ul>
<h3 id="【4】名称空间的加载顺序">【4】名称空间的加载顺序</h3>
<ul>
<li>内置–》全局–》局部</li>
<li>查找一个名字的顺序：</li>
<li>局部-》全局-》内置</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.4%E4%BD%9C%E7%94%A8%E5%9F%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.4%E4%BD%9C%E7%94%A8%E5%9F%9F/" class="post-title-link" itemprop="url">3.4作用域</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>作用域</h1>
<h1>【一】 变量作用域</h1>
<ul>
<li>变量的作用域
<ul>
<li>python是静态作用域，也就是说在python中，变量的作用域源于它在代码中的位置</li>
<li>在不同的位置，可能有不同的命名空间，命名空间是变量作用域的体现形式</li>
</ul>
</li>
</ul>
<h1>【二】四种作用域</h1>
<h2 id="【1】Local（局部作用域）">【1】Local（局部作用域）</h2>
<ul>
<li>在函数内部或者是类内部的名称空间</li>
</ul>
```python
# 定义一个函数，函数内部就是局部作用域
def fun():
    # 只有在函数内部的变量
    b = 2
    print(b)  # 输出2


fun()
# 调用函数后，发现找不到变量 b 是因为在全局作用域中找不到 变量 b
print(b)  # 报错

'''
Traceback (most recent call last):
  File "E:\PythonProjects\def_func.py", line 16, in <module>
    print(b)  # 报错
NameError: name 'b' is not defined
'''
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】Enclosed（嵌套）</span><br><span class="line"></span><br><span class="line">- 一般是在函数中嵌套函数的时候，外层函数的变量作用域</span><br><span class="line">- 嵌套就是函数里面在嵌套函数</span><br><span class="line">- 作用范围是闭包函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"> Enclosed(嵌套)作用域</span><br><span class="line">def fun1():</span><br><span class="line">    b = 2</span><br><span class="line">    print(&quot;这是fun1打印的：&quot;, b)</span><br><span class="line">    def fun2():</span><br><span class="line">        # 函数 func1 里面 嵌套的 函数 func2 里面的作用域就是 嵌套作用域</span><br><span class="line">        print(&quot;这是fun2打印的：&quot;, b)</span><br><span class="line">    # 将内部函数 func2 的内存地址返回</span><br><span class="line">    return fun2</span><br><span class="line"># 调用 函数 fun1 ， 函数 func1 的返回值是内部函数 fuc2的函数地址</span><br><span class="line">temp = fun1()</span><br><span class="line"># 调用 函数 fun1 的返回值(fuc2的函数地址) , 从而执行 函数 fuc2</span><br><span class="line">temp()</span><br><span class="line">#输出： 这是fun1打印的： 2</span><br><span class="line"># 输出：这是fun2打印的： 2</span><br></pre></td></tr></table></figure>

<ul>
<li>函数fun2里面并没有变量b，但是它可以引用外层函数定义的变量b，此时变量b的作用域就是Enclosed（嵌套）</li>
</ul>
<h2 id="【3】Global（全局）">【3】Global（全局）</h2>
<ul>
<li>
<p>一般模块文件顶层声明的变量具有全局作用域，从外部来看，模块的全局变量就是一个模块对象的属性，仅限于单个模块中。（意思是仅限于本次程序）</p>
</li>
<li>
<p>作用域范围：当前模块（文件）</p>
</li>
</ul>
```python
# Global(全局)作用域

# 定义在全局的变量，在本文件任意位置可调用该变量
a = 2


def fun1():
    print("这是fun1打印的：", a)


fun1()
print(a)

# 这是fun1打印的： 2
# 2
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】Built-in(内置)</span><br><span class="line"></span><br><span class="line">- 解释器内置的变量：列入数据类型</span><br><span class="line">- 作用范围：所有模块（文件）</span><br><span class="line">- python中没有块级作用域</span><br><span class="line">  - 块级作用域：代码块中的变量，比如if，while，for后面的代码</span><br><span class="line"></span><br><span class="line">## 【5】四种作用域的规则（LEGB规则）</span><br><span class="line"></span><br><span class="line">- LEGB规则：按照L---&gt;E---&gt;G---&gt;B的顺序查找变量。</span><br><span class="line"></span><br><span class="line">### （1）查看局部变量命令：locals()</span><br><span class="line"></span><br><span class="line">### （2）查看全局变量命令：globals()</span><br><span class="line"></span><br><span class="line">### （3）注意</span><br><span class="line"></span><br><span class="line">- 变量访问规则：从内到外</span><br><span class="line">- 全局变量和局部变量重名时，采用就近原则</span><br><span class="line"></span><br><span class="line">## 【6】综合题</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 定义了一个全局变量G，并把&quot;G全局&quot;赋值给a</span><br><span class="line">a = &quot;G全局&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def myfunc():#</span><br><span class="line">    # 定义了一个局部变量a，并把&quot;E局部1&quot;赋值给a</span><br><span class="line">    a = &quot;E局部&quot;</span><br><span class="line"></span><br><span class="line">    def inner():#翻译：inner内部的</span><br><span class="line">        # 定义了一个局部变量a，并把&quot;L局部2&quot;赋值给a</span><br><span class="line">        a = &quot;L局部2&quot;</span><br><span class="line">        print(f&quot;inner打印的a：&#123;a&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(f&quot;myfunc打印的a：&#123;a&#125;&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">myfunc()</span><br><span class="line">print(f&quot;__main__打印的a：&#123;a&#125;&quot;)</span><br><span class="line"># inner打印的a：L局部2</span><br><span class="line"># myfunc打印的a：E局部</span><br><span class="line"># __main__打印的a：G全局</span><br></pre></td></tr></table></figure>

<h2 id="【7】局部修改全局变量">【7】局部修改全局变量</h2>
```python
name = 'dream'
def func():
    # 在局部修改全局的变量
    # 使用关键字 global 在局部将局部变量的等级提升为全局
    #一般都是用在不可变数据类型身上
    global name
    name = 'opp'
    print(name)
func()#opp
print(name)#opp
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.3%E9%98%9F%E5%88%97queue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.3%E9%98%9F%E5%88%97queue/" class="post-title-link" itemprop="url">3.3队列queue</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>队列queue</h1>
<h2 id="【一】介绍">【一】介绍</h2>
<ul>
<li>
<p>queue队列</p>
<ul>
<li>
<p>用法：import queue</p>
</li>
<li>
<p>用法与进程Queue的一样</p>
</li>
</ul>
</li>
</ul>
```python
queue is especially useful in threaded programming when information must be exchanged safely between multiple threads.

当信息必须在多个线程之间安全交换时，队列在线程编程中特别有用。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- `class queue.Queue(maxsize=0)`先进先出</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import queue</span><br><span class="line"></span><br><span class="line">q = queue.PriorityQueue(3)</span><br><span class="line">q.put(&#x27;111&#x27;)</span><br><span class="line">q.put(&quot;222&quot;)</span><br><span class="line">q.put(&quot;333&quot;)</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"># 输出</span><br><span class="line"># 111</span><br><span class="line"># 222</span><br><span class="line"># 333</span><br></pre></td></tr></table></figure>

<h2 id="【二】补充">【二】补充</h2>
<ul>
<li>同一个进程下的多线程数据是共享的</li>
<li>同一个进程下使用队列的原因就是
<ul>
<li>因为对列是：管道 + 锁</li>
<li>可以确保数据的安全</li>
</ul>
</li>
</ul>
<h2 id="【三】后进后出">【三】后进后出</h2>
<ul>
<li><code>queue.LifoQueue</code></li>
</ul>
```python
import queue
q = queue.LifoQueue(3)
q.put("111")
q.put("222")
q.put("333")
print(q.get())
print(q.get())
print(q.get())
# 输出
# 333
# 222
# 111
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【四】`priorityQueue`设置队列的优先级</span><br><span class="line"></span><br><span class="line">- 数字越小优先级越高</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import queue</span><br><span class="line"></span><br><span class="line">q = queue.PriorityQueue(3)</span><br><span class="line"># 3代表可以存几个</span><br><span class="line"># 存的数量查过三了取得时候就会阻塞</span><br><span class="line">q.put((10,&quot;222&quot;))</span><br><span class="line">q.put((0,&quot;111&quot;))</span><br><span class="line">q.put((100, &#x27;222&#x27;))</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line">print(q.get())</span><br><span class="line"># 输出</span><br><span class="line"># (0, &#x27;111&#x27;)</span><br><span class="line"># (10, &#x27;222&#x27;)</span><br><span class="line"># (100, &#x27;222&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="【五】拓展">【五】拓展</h2>
```python
Constructor for a priority queue. maxsize is an integer that sets the upperbound limit on the number of items that can be placed in the queue. Insertion will block once this size has been reached, until queue items are consumed. If maxsize is less than or equal to zero, the queue size is infinite.

构造一个优先级队列,其中maxsize是一个整数,用于设置可以放入队列的项目数量的上限.一旦达到这个上限，插入就会阻塞，直到队列中有项目被消耗。如果maxsize小于或等于0，则队列长度为无穷大。

The lowest valued entries are retrieved first (the lowest valued entry is the one returned by sorted(list(entries))[0]). A typical pattern for entries is a tuple in the form: (priority_number, data).

首先检索最低值的条目(最低值的条目是指列表经过排序后取到的索引为0的那个元素,一般条目是(优先级数字,数据)这种元组的形式

exception queue.Empty
Exception raised when non-blocking get() (or get_nowait()) is called on a Queue object which is empty.

当表示非阻塞的get()或get_nowait()在一个空的队列对象中被调用时,会抛出异常

exception queue.Full
Exception raised when non-blocking put() (or put_nowait()) is called on a Queue object which is full.

当表示非阻塞的put()或put_nowait()在一个满的队列对象中被调用时,会抛出异常

Queue.qsize()
Queue.empty() #return True if empty  

当队列为空返回True

Queue.full() # return True if full 

当队列为满返回True

Queue.put(item, block=True, timeout=None)
Put item into the queue. If optional args block is true and timeout is None (the default), block if necessary until a free slot is available. If timeout is a positive number, it blocks at most timeout seconds and raises the Full exception if no free slot was available within that time. Otherwise (block is false), put an item on the queue if a free slot is immediately available, else raise the Full exception (timeout is ignored in that case).

将一个项放入队列。如果可选参数block为true并且timeout为None(默认值)，则在必要时阻塞，直到有空闲槽可用。如果参数timeout是一个正数，它最多阻塞timeout秒，如果在这段时间内没有可用的空闲槽，则会引发Full异常。否则(block为false)，如果有空闲槽可用，则将一个项目放入队列中，否则引发Full异常(在这种情况下，timeout被忽略)。

Queue.put_nowait(item)
Equivalent to put(item, False).

Queue.get(block=True, timeout=None)
Remove and return an item from the queue. If optional args block is true and timeout is None (the default), block if necessary until an item is available. If timeout is a positive number, it blocks at most timeout seconds and raises the Empty exception if no item was available within that time. Otherwise (block is false), return an item if one is immediately available, else raise the Empty exception (timeout is ignored in that case).

从队列中移除并返回一个项。如果可选参数block为true并且timeout为None(默认值)，则在必要时阻塞，直到有可用的项。如果timeout为正数，则最多阻塞timeout秒，如果在该时间内没有可用项，则抛出Empty异常。否则(block为false)，如果一个项目可用，则返回那个项目，否则引发Empty异常(在这种情况下，timeout被忽略)。

Queue.get_nowait()
Equivalent to get(False).

Two methods are offered to support tracking whether enqueued tasks have been fully processed by daemon consumer threads.

提供了两种方法来支持追踪进入队列的任务是否已被生产者的守护线程完全处理。

Queue.task_done()
Indicate that a formerly enqueued task is complete. Used by queue consumer threads. For each get() used to fetch a task, a subsequent call to task_done() tells the queue that the processing on the task is complete.

假定先前进入队列的任务已完成。并且被队列生产者使用。对于每个用于获取任务的get()，后续对task_done()的调用都会告诉队列任务的处理已经完成。

If a join() is currently blocking, it will resume when all items have been processed (meaning that a task_done() call was received for every item that had been put() into the queue).

如果join()当前正被阻塞，它将在所有项都被处理完时恢复(这意味着对于每个已经put()到队列中的项都接收到task_done()调用)。

Raises a ValueError if called more times than there were items placed in the queue.

如果调用次数超过放入队列的项数，将引发ValueError。

Queue.join() 

阻塞,直到queue被消费完毕
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.4%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.4%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">3.4解决跨域问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【解决跨域问题】</h1>
<ul>
<li>先这样解决</li>
</ul>
<h2 id="【1】解决跨越问题">【1】解决跨越问题</h2>
<ul>
<li>在django的settings里面配置</li>
</ul>
```python
# 统一按如下方式解决跨域
	-1 安装
    	pip3 install django-cors-headers
    -2 app中注册
        INSTALLED_APPS = [
            。。。
            'corsheaders',
        ]
    -3 中间件中注册
        MIDDLEWARE = [

            'corsheaders.middleware.CorsMiddleware',
        ]
    -4 配置文件中配置
    # 允许跨域源
    CORS_ORIGIN_ALLOW_ALL = True
    # 允许的请求头
    CORS_ALLOW_HEADERS = (
        "accept",
        "accept-encoding",
        "authorization",
        "content-type",
        "dnt",
        "origin",
        "user-agent",
        "x-csrftoken",
        "x-requested-with",

        # 额外允许的请求头
        'token',
    )
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.5%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.5%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1/" class="post-title-link" itemprop="url">3.5函数对象</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】函数对象</h1>
<ul>
<li>函数对象指的是函数可以被当做数据来处理 ，分四个方面。</li>
<li>python中一切皆为对象</li>
</ul>
<h2 id="【1】函数可以直接被引用">【1】函数可以直接被引用</h2>
<ul>
<li>定义一个函数用一个新的变量来存，用新的变量名调用</li>
</ul>
```python
# 定义一个函数
def add(x, y):
    return x + y


# 将函数地址绑定给一个变量
func = add
# 通过这个变量找到对应的地址，从而调用函数
res = func(1, 2)
print(res) # 3
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】可以作为元素被储存</span><br><span class="line"></span><br><span class="line">- 功能字典中的函数地址</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def add(x, y):</span><br><span class="line">    return x + y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dic = &#123;&#x27;add&#x27;: add, &#x27;max&#x27;: max&#125;</span><br><span class="line">print(dic)  # &#123;&#x27;add&#x27;: &lt;function add at 0x0000020523843E20&gt;, &#x27;max&#x27;: &lt;built-in function max&gt;&#125;</span><br><span class="line">res = dic[&#x27;add&#x27;](1, 2)</span><br><span class="line">print(res)  # 3</span><br></pre></td></tr></table></figure>

<h2 id="【3】函数可以作为一个参数传给另一函数">【3】函数可以作为一个参数传给另一函数</h2>
<ul>
<li>将函数的内存地址作为参数传递</li>
</ul>
```python
f add(x, y):
    return x + y


def foo(x, y, func):
    return func(x, y)


res = foo(1, 2, add)
print(res) # 3
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】函数的返回值可以是一个函数</span><br><span class="line"></span><br><span class="line">- 我们直接将函数的内存地址返回</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def add(x, y):</span><br><span class="line">    return x + y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def bar():</span><br><span class="line">    return add</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func = bar()</span><br><span class="line">print(func)  # &lt;function add at 0x00000239EC363E20&gt;</span><br><span class="line">res = func(1, 2)</span><br><span class="line">print(res)  # 3</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.6IO%E6%A8%A1%E5%9E%8B%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.6IO%E6%A8%A1%E5%9E%8B%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">3.6IO模型简介</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【零】IO模型简介</h1>
<ul>
<li>
<p>我们研究的 IO 都是基于网络 IO 的</p>
</li>
<li>
<p>Stevens在文章中一共比较了五种IO Model：</p>
</li>
<li>
<ul>
<li><em>blocking IO</em></li>
<li>nonblocking IO</li>
<li><em>IO multiplexing</em></li>
<li>signal driven IO —（忽略）</li>
<li>asynchronous IO 由signal driven IO（信号驱动IO）在实际中并不常用，所以主要介绍其余四种IO Model。</li>
</ul>
</li>
<li>
<p>当一个read操作发生时，该操作会经历两个阶段：</p>
</li>
<li>
<ul>
<li>1、等待数据准备 (Waiting for the data to be ready)</li>
<li>2、将数据从内核拷贝到进程中(Copying the data from the kernel to the process)</li>
</ul>
</li>
<li>
<p>同步</p>
</li>
<li>
<ul>
<li>在同步模式下，一个组件必须等待另一个组件完成某个操作，然后再进行下一个操作。</li>
</ul>
</li>
<li>
<p>异步</p>
</li>
<li>
<ul>
<li>在异步模式下，组件之间互不干扰，它们可以独立地执行任务。当一个组件完成任务后，它可以直接通知另一个组件继续执行操作。</li>
</ul>
</li>
<li>
<p>阻塞</p>
</li>
<li>
<ul>
<li>在阻塞模式下，一个进程或线程在执行某个操作时，如果该操作没有完成，它将立即停止一切操作，并等待操作完成后再继续进行后续操作。</li>
</ul>
</li>
<li>
<p>非阻塞</p>
</li>
<li>
<ul>
<li>在非阻塞模式下，一个进程或线程在执行某个操作时，即使该操作没有完成，也会立即返回执行下一个操作，不会出现停滞等待的情况。 如果下一个操作需要依赖于上一个还未完成的操作，它将定期检查上一个操作是否完成，保证这些未完成的操作不会影响后续任务的执行。</li>
</ul>
</li>
<li>
<p>常见的网络IO</p>
</li>
<li>
<ul>
<li>accept</li>
<li>recv</li>
<li>recvfrom</li>
</ul>
</li>
</ul>
<h1>【一】阻塞IO模型</h1>
<p>我们之前写的都是阻塞 IO 模型 （协程除外）</p>
<h2 id="【1】TCP-UDP协议模型">【1】TCP/UDP协议模型</h2>
<p><a target="_blank" rel="noopener" href="https://img2023.cnblogs.com/blog/2322215/202306/2322215-20230630215817953-1689712558.png"><img src="http://zhaochunze.dream521.site/2322215-20230630215817953-1689712558.png" alt="img"></a></p>
<h2 id="【2】TCP-经典IO">【2】TCP 经典IO</h2>
<ul>
<li>客户端</li>
</ul>
```python
from socket import *

client = socket()

IP = '127.0.0.1'
PORT = 8083
client.connect((IP, PORT))

while True:
    msg_to_server = 'hello world'
    msg_to_server = msg_to_server.encode('utf-8')

    client.send(msg_to_server)

    msg_from_server = client.recv(1024)
    msg_from_server = msg_from_server.decode('utf-8')

    print(msg_from_server)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 服务端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from socket import *</span><br><span class="line"></span><br><span class="line">server = socket()</span><br><span class="line"></span><br><span class="line">IP = &#x27;127.0.0.1&#x27;</span><br><span class="line">PORT = 8082</span><br><span class="line">server.bind((IP, PORT))</span><br><span class="line"></span><br><span class="line">server.listen(5)</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    conn, addr = server.accept()</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        try:</span><br><span class="line">            msg_from_client = conn.recv(1024)</span><br><span class="line"></span><br><span class="line">            if len(msg_from_client) == 0:</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">            print(msg_from_client.decode(&#x27;utf8&#x27;))</span><br><span class="line"></span><br><span class="line">            conn.send(msg_from_client.upper())</span><br><span class="line"></span><br><span class="line">        except  Exception as e:</span><br><span class="line">            print(e)</span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<ul>
<li>问题：服务端只能接待一个客户端</li>
</ul>
<h2 id="【3】问题解决方案">【3】问题解决方案</h2>
<ul>
<li>在服务端开设多进程或多线程，进程池线程池，以此来解决IO问题</li>
<li>但是还没在根本上解决IO问题</li>
<li>因为在服务端 虽然解决了 请求数据这部分的IO 但是没有从根本上解决 向内核要数据和拷贝数据给客户端这个IO</li>
</ul>
<h1>【二】非阻塞IO模型</h1>
<ul>
<li>将所有的阻塞操作变为非阻塞</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://img2023.cnblogs.com/blog/2322215/202306/2322215-20230630215827590-2025602751.png"><img src="http://zhaochunze.dream521.site/2322215-20230630215827590-2025602751.png" alt="img"></a></p>
<h2 id="【1】TCP-非阻塞经典IO">【1】TCP 非阻塞经典IO</h2>
<ul>
<li>服务端</li>
</ul>
```python
from socket import *
import time

server = socket()

IP = '127.0.0.1'
PORT = 8083
server.bind((IP, PORT))

server.listen(5)

# 将所有的网络阻塞 变为 非阻塞
# BlockingIOError: [WinError 10035] 无法立即完成一个非阻止性套接字操作。 ---- 表示服务端并没有立即建立链接，导致了资源无法接收
server.setblocking(False)

conn_list = []
del_conn_list = []
while True:
    try:
        conn, addr = server.accept()
        conn_list.append(conn)

    # 检测进程资源利用错误
    except BlockingIOError as e:
        print(f'当前无阻塞,可进行其他工作')
        for conn in conn_list:
            try:
                data_from_client = conn.recv(1024)  # 没有消息则报错
                if len(data_from_client) == 0:
                    # 如果接收到的消息为 0  则表示当前链接无效：关闭当前链接
                    conn.close()  # （客户端断开连接）
                    # 将无用的conn链接从链接列表中删除掉
                    del_conn_list.append(conn)  # (将无用的链接放到无用的链接列表里)
                    continue
                    
                # 链接对象正常：反馈消息给客户端
                conn.send(data_from_client.upper())
            # 检测进程资源利用错误
            except BlockingIOError as e:
                # 查看其他链接对象是否有消息发过来
                continue

            # 检测到客户端断开链接错误
            except ConnectionError as e:
                # 断开链接
                conn.close()
                # 将无效的链接添加到废弃列表里
                del_conn_list.append(conn)

        # 回收无用的链接对象
        for conn in del_conn_list:
            # 在有效列表内删除无效的链接对象
            conn_list.remove(conn)

        # 清空无效链接列表
        del_conn_list.clear()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 客户端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from socket import *</span><br><span class="line"></span><br><span class="line">client = socket()</span><br><span class="line"></span><br><span class="line">IP = &#x27;127.0.0.1&#x27;</span><br><span class="line">PORT = 8083</span><br><span class="line">client.connect((IP, PORT))</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    msg_to_server = &#x27;hello world&#x27;</span><br><span class="line">    msg_to_server = msg_to_server.encode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">    client.send(msg_to_server)</span><br><span class="line"></span><br><span class="line">    msg_from_server = client.recv(1024)</span><br><span class="line">    msg_from_server = msg_from_server.decode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">    print(msg_from_server)</span><br></pre></td></tr></table></figure>

<h2 id="【2】总结">【2】总结</h2>
<ul>
<li>
<p>虽然非阻塞 IO 看起来十分优秀</p>
</li>
<li>
<ul>
<li>但是该模型会长时间占用 CPU 而不处理数据（大部分资源都浪费在反复发起请求 请求数据上）</li>
</ul>
</li>
<li>
<p>实际应用中不会考虑使用非阻塞 IO 模型</p>
</li>
<li>
<ul>
<li>占用资源严重</li>
</ul>
</li>
</ul>
<h1>【三】IO多路复用</h1>
<h2 id="【1】什么是IO多路复用">【1】什么是IO多路复用</h2>
<p><a target="_blank" rel="noopener" href="https://img2023.cnblogs.com/blog/2322215/202306/2322215-20230630215838477-64289328.png"><img src="http://zhaochunze.dream521.site/2322215-20230630215838477-64289328.png" alt="img"></a></p>
<ul>
<li>
<p>当监管的对象只有一个的时候，其实IO多路复用连阻塞IO的功能都比不上</p>
</li>
<li>
<p>但是IO多路复用一次性可以监管多个对象</p>
</li>
<li>
<ul>
<li>server = socket.socket()</li>
<li>conn, addr = socket.accept()</li>
</ul>
</li>
<li>
<p>这个监管机制是由操作系统本身就存在的（select）</p>
</li>
<li>
<p>如果使用需要导入相关的模块（select模块）</p>
</li>
</ul>
<h2 id="【2】基于-select模块解决-IO-阻塞">【2】基于 select模块解决 IO 阻塞</h2>
<ul>
<li>客户端</li>
</ul>
```python
from socket import *
import select

server = socket()

IP = '127.0.0.1'
PORT = 8083
server.bind((IP, PORT))
server.listen(5)

# 将阻塞模型变为非阻塞模型
server.setblocking(False)

# 将监管目标(谁来发起链接)添加到监管列表
read_list = [server]

while True:
    r_list, w_list, x_list = select.select(read_list, [], [])  # 检测server端
    # 返回值（server对象,[],[]） ： ([<socket.socket fd=408, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8083)>], [], [])
    # 一旦有链接发起，直接拿到监管链接

    # 循环拿到每一个发起的链接对象
    for i in r_list:
        '''
        针对不同的对象进行分类处理
        '''

        # 如果是服务对象就将其添加到服务列表内，再次确认
        if i is server:
            # 拿到每一个链接对象
            conn, addr = i.accept()

            # 将链接对象添加到监管机制中
            read_list.append(conn)
        else:
            # 如果是链接请求就拿到客户端发起的数据
            msg_from_client = i.recv(1024)
            if len(res) == 0:
                # 关闭无效链接
                i.close()

                # 将无效链接从列表中移除
                read_list.remove(i)
                continue
            msg_from_client = msg_from_client.decode('utf-8')
            print(msg_from_client)

            # 反馈信息给客户端
            i.send(msg_from_client.upper())
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 服务端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from socket import *</span><br><span class="line"></span><br><span class="line">client = socket()</span><br><span class="line"></span><br><span class="line">IP = &#x27;127.0.0.1&#x27;</span><br><span class="line">PORT = 8083</span><br><span class="line">client.connect((IP, PORT))</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    msg_to_server = &#x27;hello world&#x27;</span><br><span class="line">    msg_to_server = msg_to_server.encode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">    client.send(msg_to_server)</span><br><span class="line"></span><br><span class="line">    msg_from_server = client.recv(1024)</span><br><span class="line">    msg_from_server = msg_from_server.decode(&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">    print(msg_from_server)</span><br></pre></td></tr></table></figure>

<h2 id="【3】总结">【3】总结</h2>
<ul>
<li>
<p>监管机制有很多</p>
</li>
<li>
<p>select机制</p>
</li>
<li>
<ul>
<li>Windows/Mac 都有</li>
</ul>
</li>
<li>
<p>poll机制</p>
</li>
<li>
<ul>
<li>只有Linux有</li>
<li>poll 和 select 机制都可以监管多个对象，但是 poll监管的对象更多</li>
</ul>
</li>
</ul>
<p>上述两个机制都不是很完美</p>
<p>当监管的对象特别多的时候，可能会出现机器大的延迟响应</p>
<ul>
<li>
<p>epoll机制</p>
</li>
<li>
<ul>
<li>只在 Linux 机制有</li>
<li>给每个监管对象都绑定了一个回调机制</li>
<li>一旦有响应，回调机制会立刻发起提醒</li>
</ul>
</li>
</ul>
<p>针对不同的操作系统，需要考虑不同的监管机制，太过麻烦</p>
<p>因此有了一个新的模块（selectors模块）</p>
<p>根据平台的不同而自动选择不同的机制</p>
<h1>【四】异步IO</h1>
<ul>
<li>异步IO 是所有模型中效率最高的，也是使用最广泛的</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://img2023.cnblogs.com/blog/2322215/202309/2322215-20230921090343398-1608144674.png"><img src="http://zhaochunze.dream521.site/2322215-20230921090343398-1608144674.png" alt="img"></a></p>
<ul>
<li>
<p>由于涉及到调用操作系统底层，我们只能通过C语言代码才能模拟出效果</p>
</li>
<li>
<p>但是，有相关大佬已经帮我们将相关的方法进行了封装</p>
</li>
<li>
<p>模块</p>
</li>
<li>
<ul>
<li>asyncio 模块</li>
</ul>
</li>
<li>
<p>异步框架</p>
</li>
<li>
<ul>
<li>sanic</li>
<li>tronado</li>
<li>twisted</li>
</ul>
</li>
</ul>
<h2 id="【1】asyncio-模块安装">【1】asyncio 模块安装</h2>
```shell
pip install asyncio
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】方法示例</span><br><span class="line"></span><br><span class="line">- 单线程实现并发效果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import threading</span><br><span class="line">import asyncio</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">async def hello():</span><br><span class="line">    print(f&#x27;hello world statr:&gt;&gt;&#123;threading.current_thread()&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">    await asyncio.sleep(1)  # 真正的 IO 操作 ---- 交互时操作 / 响应式操作</span><br><span class="line"></span><br><span class="line">    print(f&#x27;hello world end:&gt;&gt;&gt;&#123;threading.current_thread()&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">tasks = [hello(), hello()]</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br><span class="line"></span><br><span class="line">loop.close()</span><br><span class="line"></span><br><span class="line"># 单线程实现并发效果</span><br><span class="line"></span><br><span class="line"># hello world statr:&gt;&gt;&lt;_MainThread(MainThread, started 8005963776)&gt;</span><br><span class="line"># hello world statr:&gt;&gt;&lt;_MainThread(MainThread, started 8005963776)&gt;</span><br><span class="line"># hello world end:&gt;&gt;&gt;&lt;_MainThread(MainThread, started 8005963776)&gt;</span><br><span class="line"># hello world end:&gt;&gt;&gt;&lt;_MainThread(MainThread, started 8005963776)&gt;</span><br></pre></td></tr></table></figure>

<h1>【五】IO总结</h1>
<ul>
<li>四个IO模型对比</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://img2023.cnblogs.com/blog/2322215/202306/2322215-20230630215852336-1714846496.jpg"><img src="http://zhaochunze.dream521.site/2322215-20230630215852336-1714846496.jpg" alt="img"></a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/3.4%E8%BF%9B%E7%A8%8B%E6%B1%A0%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/3.4%E8%BF%9B%E7%A8%8B%E6%B1%A0%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/" class="post-title-link" itemprop="url">3.4进程池，线程池</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>进程池</h1>
<ul>
<li><code>from concurrent.futures import ProcessPoolExecutor</code></li>
</ul>
<h2 id="【一】池什么意思">【一】池什么意思</h2>
<ul>
<li>池是</li>
</ul>
<h2 id="【二】TCP实现并发的效果的原理">【二】TCP实现并发的效果的原理</h2>
<ul>
<li>每开设一个客户端，就会有一个服务端服务</li>
</ul>
<h3 id="【1】服务端">【1】服务端</h3>
```python
from socket import *
from threading import Thread


def server_create(IP, PORT):
    server = socket()

    server.bind((IP, PORT))

    server.listen(5)

    while True:
        conn, addr = server.accept()
        t = Thread(target=conn_communication, args=(conn,))


def conn_communication(conn):
    while True:
        try:
            data = conn.recv(1024)
            if len(data) == 0:
                break
            print(data.decode('utf8'))
            conn.send(data.upper())
        except Exception as e:
            print(e)
            break
    conn.close()


def main():
    IP = '127.0.0.1'
    PORT = 8086
    t = Thread(target=server_create, args=(IP, PORT,))
    t.start()


if __name__ == '__main__':
    main()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】客户端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from socket import *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def client_create(IP, PORT):</span><br><span class="line">    client = socket()</span><br><span class="line"></span><br><span class="line">    client.connect((IP, PORT))</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        word = b&#x27;hello world&#x27;</span><br><span class="line">        client.send(word)</span><br><span class="line"></span><br><span class="line">        msg = client.recv(1024)</span><br><span class="line">        print(msg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    IP = &#x27;127.0.0.1&#x27;</span><br><span class="line">    PORT = 8086</span><br><span class="line"></span><br><span class="line">    client_create(IP, PORT)</span><br></pre></td></tr></table></figure>

<h3 id="【3】总结">【3】总结</h3>
<ul>
<li>开设多进程或者开设多线程，都消耗资源</li>
<li>开设多线程资源会比开设多进程的消耗的资源少一点</li>
<li>硬件开发速度永远赶不上软件的开发速度</li>
<li>我们的总之就是保证计算机硬件正常工作的情况下最大程度的利用它</li>
</ul>
<h2 id="【三】使用方法">【三】使用方法</h2>
<ul>
<li>开设进程池的进程id不会发生变化</li>
</ul>
```python
import os
from concurrent.futures import ProcessPoolExecutor
import time

# 构造进程池，指定进程总数
pool = ProcessPoolExecutor(5)


# 定义线程任务
def task(n):
    print(n, f'当前进程的进程号:>>>{os.getpid()}')
    print(f"这是线程任务中的 n :>>>> {n}")
    time.sleep(2)
    return n * 2


def many_steps():
    task_list = []
    for i in range(5):
        # 提交任务到进程池，并获取到返回值
        res = pool.submit(task, i)
        print(f'这是 pool的返回值:>>>>{res}')
        # 返回值是一个类对象 - result 方法 ----> 返回异步回调的结果
        # <Future at 0x134d3fcd0 state=pending>
        task_list.append(res)

    # 关闭进程池 - 等待所有的进程池中的任务运行完毕
    pool.shutdown()

    for task_every in task_list:
        print(f'这是 pool的返回值:>>>>{task_every.result()}')  # None
        # 程序由变成了串行
        # res.result() ： 拿到的就是异步提交的任务的返回结果
        # 程序运行的结果是有序的

    print('this is a main task')

if __name__ == '__main__':
    many_steps()
    # 输出
    # 这是 pool的返回值:>>>><Future at 0x1ee74218760 state=running>
    # 这是 pool的返回值:>>>><Future at 0x1ee7421a770 state=running>
    # 这是 pool的返回值:>>>><Future at 0x1ee7421aaa0 state=pending>
    # 这是 pool的返回值:>>>><Future at 0x1ee7421ac20 state=pending>
    # 这是 pool的返回值:>>>><Future at 0x1ee7421ad70 state=pending>
    # 0 当前进程的进程号:>>>28404
    # 这是线程任务中的 n :>>>> 0
    # 1 当前进程的进程号:>>>30176
    # 这是线程任务中的 n :>>>> 1
    # 2 当前进程的进程号:>>>31664
    # 这是线程任务中的 n :>>>> 2
    # 3 当前进程的进程号:>>>27408
    # 这是线程任务中的 n :>>>> 3
    # 4 当前进程的进程号:>>>8476
    # 这是线程任务中的 n :>>>> 4
    # 这是 pool的返回值:>>>>0
    # 这是 pool的返回值:>>>>2
    # 这是 pool的返回值:>>>>4
    # 这是 pool的返回值:>>>>6
    # 这是 pool的返回值:>>>>8
    # this is a main task
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【四】异步回调</span><br><span class="line"></span><br><span class="line">- `add_done_callback(call_back)`</span><br><span class="line">- `add_done_callback(call_back) `返回值正是我们的上面 pool的返回的结果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import os</span><br><span class="line">from concurrent.futures import ProcessPoolExecutor</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"># 构造进程池，指定进程总数</span><br><span class="line">pool = ProcessPoolExecutor(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 定义线程任务</span><br><span class="line">def task(n):</span><br><span class="line">    print(n, f&#x27;当前进程的进程号:&gt;&gt;&gt;&#123;os.getpid()&#125;&#x27;)</span><br><span class="line">    print(f&quot;这是线程任务中的 n :&gt;&gt;&gt;&gt; &#123;n&#125;&quot;)</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    return n * 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 定义一个异步回调函数</span><br><span class="line">def call_back(n):</span><br><span class="line">    print(f&#x27;call_back&gt;&gt;&gt;:&#123;n&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def many_steps():</span><br><span class="line">    task_list = []</span><br><span class="line">    for i in range(5):</span><br><span class="line">        # 提交任务到进程池，并获取到返回值，添加一个异步回调函数</span><br><span class="line">        res = pool.submit(task, i).add_done_callback(call_back)</span><br><span class="line">        print(f&#x27;这是 pool的返回值:&gt;&gt;&gt;&gt;&#123;res&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">    print(&#x27;this is a main task&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    many_steps()</span><br><span class="line">    # 输出</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;None</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;None</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;None</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;None</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;None</span><br><span class="line">    # this is a main task</span><br><span class="line">    # 0 当前进程的进程号:&gt;&gt;&gt;31368</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 1 当前进程的进程号:&gt;&gt;&gt;30908</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 2 当前进程的进程号:&gt;&gt;&gt;20956</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 2</span><br><span class="line">    # 3 当前进程的进程号:&gt;&gt;&gt;30072</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 3</span><br><span class="line">    # 4 当前进程的进程号:&gt;&gt;&gt;19700</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # call_back&gt;&gt;&gt;:&lt;Future at 0x200bcb2e650 state=finished returned int&gt;</span><br><span class="line">    # call_back&gt;&gt;&gt;:&lt;Future at 0x200bcb2c640 state=finished returned int&gt;</span><br><span class="line">    # call_back&gt;&gt;&gt;:&lt;Future at 0x200bcb2ea10 state=finished returned int&gt;</span><br><span class="line">    # call_back&gt;&gt;&gt;:&lt;Future at 0x200bcb2e890 state=finished returned int&gt;</span><br><span class="line">    # call_back&gt;&gt;&gt;:&lt;Future at 0x200bcb2ec20 state=finished returned int&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【五】查看异步回调结果">【五】查看异步回调结果</h2>
```python
import os
from concurrent.futures import ProcessPoolExecutor
import time

# 构造进程池，指定进程总数
pool = ProcessPoolExecutor(5)


# 定义线程任务
def task(n):
    print(n, f'当前进程的进程号:>>>{os.getpid()}')
    print(f"这是线程任务中的 n :>>>> {n}")
    time.sleep(2)
    return n * 2


# 定义一个异步回调函数
def call_back(n):
    print(f'call_back>>>:{n} | 返回的结果为:>>>{n.result()}')


def many_steps():
    task_list = []
    for i in range(5):
        # 提交任务到进程池，并获取到返回值，添加一个异步回调函数
        res = pool.submit(task, i).add_done_callback(call_back)
        print(f'这是 pool的返回值:>>>>{res}')

    print('this is a main task')


if __name__ == '__main__':
    many_steps()
    # 输出
    # 这是 pool的返回值:>>>>None
    # 这是 pool的返回值:>>>>None
    # 这是 pool的返回值:>>>>None
    # 这是 pool的返回值:>>>>None
    # 这是 pool的返回值:>>>>None
    # this is a main task
    # 0 当前进程的进程号:>>>28268
    # 这是线程任务中的 n :>>>> 0
    # 1 当前进程的进程号:>>>23328
    # 这是线程任务中的 n :>>>> 1
    # 2 当前进程的进程号:>>>9768
    # 这是线程任务中的 n :>>>> 2
    # 3 当前进程的进程号:>>>28200
    # 这是线程任务中的 n :>>>> 3
    # 4 当前进程的进程号:>>>8476
    # 这是线程任务中的 n :>>>> 4
    # call_back>>>:<Future at 0x1e3aae1c640 state=finished returned int> | 返回的结果为:>>>0
    # call_back>>>:<Future at 0x1e3aae1ea70 state=finished returned int> | 返回的结果为:>>>6
    # call_back>>>:<Future at 0x1e3aae1e950 state=finished returned int> | 返回的结果为:>>>4
    # call_back>>>:<Future at 0x1e3aae1e650 state=finished returned int> | 返回的结果为:>>>2
    # call_back>>>:<Future at 0x1e3aae1ec80 state=finished returned int> | 返回的结果为:>>>8
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 线程池</span><br><span class="line"></span><br><span class="line">- `from concurrent.futures import ThreadPoolExecutor`</span><br><span class="line"></span><br><span class="line">## 【一】什么是线程池</span><br><span class="line"></span><br><span class="line">- 在应用启动时创建一定数量的线程，并将他们存入线池中，执行任务时，从线程池中获取一个空闲的线程，将任务分配给他，当任务执行完之后再返回线池中，继续执行下一个任务，可以重复利用</span><br><span class="line"></span><br><span class="line">## 【二】原理</span><br><span class="line"></span><br><span class="line">- 池造出来后，里面固定存在五个线程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"># 默认开设当前计算机 cpu 个数五倍数的线程数</span><br><span class="line"># 可以指定线程总数</span><br><span class="line">pool = ThreadPoolExecutor(5)</span><br></pre></td></tr></table></figure>

<ul>
<li>这五个线程执行的时候不会存在重复创建和销毁的过程</li>
</ul>
<h2 id="【三】优点">【三】优点</h2>
<ul>
<li>避免了重复创建五个线程的重复开销</li>
</ul>
<h2 id="【四】使用方法">【四】使用方法</h2>
<h3 id="【1】同步提交">【1】同步提交</h3>
<ul>
<li>提交任务之后原地等待任务的返回值，期间不会执行任何事情</li>
</ul>
```python
import time
from concurrent.futures import ThreadPoolExecutor
import random

q = ThreadPoolExecutor(4)


def work(i):
    print(f"thread{i} starting.........")
    time.sleep(random.randint(1,4))
    print("thread ending..........")


def main():
    for i in range(1,7):
        q.submit(work, i)
        print("thread main  ending..........")

if __name__ == '__main__':
    main()
    # 输出
    # thread1 starting.........
    # thread main  ending..........
    # thread2 starting.........
    # thread main  ending..........
    # thread3 starting.........
    # thread main  ending..........
    # thread4 starting.........
    # thread main  ending..........
    # thread main  ending..........
    # thread main  ending..........
    # thread ending..........
    # thread5 starting.........
    # thread ending..........
    # thread6 starting.........
    # thread ending..........
    # thread ending..........
    # thread ending..........
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】异步提交</span><br><span class="line"></span><br><span class="line">- 执行任务之后不等待任务任务的返回值，继续执行代码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor</span><br><span class="line">import time</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"># 构造线程池，指定线程总数</span><br><span class="line">pool = ThreadPoolExecutor(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 定义线程任务</span><br><span class="line">def work(name):</span><br><span class="line">    print(f&#x27;&#123;name&#125; is starting  pid &#123;os.getpid()&#125; ppid &#123;os.getppid()&#125;... &#x27;)</span><br><span class="line">    sleep_time = random.randint(1, 4)</span><br><span class="line">    print(f&#x27;&#123;name&#125; start sleeping for &#123;sleep_time&#125;s&#x27;)</span><br><span class="line">    time.sleep(sleep_time)</span><br><span class="line">    print(f&#x27;&#123;name&#125; end sleeping for &#123;sleep_time&#125;s&#x27;)</span><br><span class="line">    print(f&#x27;&#123;name&#125; is ending ... &#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def many_steps():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        pool.submit(work, i)</span><br><span class="line">    print(&#x27;this is a main task&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    many_steps()</span><br><span class="line">    # 输出</span><br><span class="line">    # 0 is starting  pid 2952 ppid 3864...</span><br><span class="line">    # 0 start sleeping for 3s</span><br><span class="line">    # 1 is starting  pid 2952 ppid 3864...</span><br><span class="line">    # 1 start sleeping for 4s</span><br><span class="line">    # 2 is starting  pid 2952 ppid 3864...</span><br><span class="line">    # 2 start sleeping for 1s</span><br><span class="line">    # 3 is starting  pid 2952 ppid 3864...</span><br><span class="line">    # 3 start sleeping for 2s</span><br><span class="line">    # 4 is starting  pid 2952 ppid 3864...</span><br><span class="line">    # 4 start sleeping for 3s</span><br><span class="line">    # this is a main task</span><br><span class="line">    # 2 end sleeping for 1s</span><br><span class="line">    # 2 is ending ...</span><br><span class="line">    # 3 end sleeping for 2s</span><br><span class="line">    # 3 is ending ...</span><br><span class="line">    # 0 end sleeping for 3s</span><br><span class="line">    # 0 is ending ...</span><br><span class="line">    # 4 end sleeping for 3s</span><br><span class="line">    # 4 is ending ...</span><br><span class="line">    # 1 end sleeping for 4s</span><br><span class="line">    # 1 is ending ...</span><br></pre></td></tr></table></figure>

<h3 id="【3】异步返回值">【3】异步返回值</h3>
<h4 id="1-查看异步回调对象">(1)查看异步回调对象</h4>
```python
from concurrent.futures import ThreadPoolExecutor
import time
import random

# 构造线程池，指定线程总数
pool = ThreadPoolExecutor(5)


# 定义线程任务
def work(name):
    print(f'{name} is starting  pid {os.getpid()} ppid {os.getppid()}... ')
    sleep_time = random.randint(1, 4)
    time.sleep(sleep_time)
    print(f'{name} is ending ... ')
    return name * name




def many_steps():
    for i in range(5):
        res = pool.submit(work, i)
        print('this is a main task')
        print(res.result())


if __name__ == '__main__':
    many_steps()
    # 输出
    # 0 is starting  pid 1600 ppid 3864... 
    # this is a main task
    # 
    # 0 is ending ... 
    # 0
    # this is a main task
    # 1 is starting  pid 1600 ppid 3864... 
    # 1 is ending ... 
    # 1
    # this is a main task
    # 2 is starting  pid 1600 ppid 3864... 
    # 2 is ending ... 
    # 4
    # this is a main task
    # 3 is starting  pid 1600 ppid 3864... 
    # 3 is ending ... 
    # 9
    # this is a main task
    # 4 is starting  pid 1600 ppid 3864... 
    # 4 is ending ... 
    # 16
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### (2)调用异步回调对象</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"># 构造线程池，指定线程总数</span><br><span class="line">pool = ThreadPoolExecutor(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 定义线程任务</span><br><span class="line">def task(n):</span><br><span class="line">    print(f&quot;这是线程任务中的 n :&gt;&gt;&gt;&gt; &#123;n&#125;&quot;)</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    return n * 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def many_steps():</span><br><span class="line">    task_list = []</span><br><span class="line">    for i in range(5):</span><br><span class="line">        # 提交任务到线程池，并获取到返回值</span><br><span class="line">        res = pool.submit(task, i)</span><br><span class="line">        print(f&#x27;这是 pool的返回值:&gt;&gt;&gt;&gt;&#123;res&#125;&#x27;)</span><br><span class="line">        # 返回值是一个类对象 - result 方法 ----&gt; 返回异步回调的结果</span><br><span class="line">        # &lt;Future at 0x134d3fcd0 state=pending&gt;</span><br><span class="line">        task_list.append(res)</span><br><span class="line"></span><br><span class="line">    for task_every in task_list:</span><br><span class="line">        print(f&#x27;这是 pool的返回值:&gt;&gt;&gt;&gt;&#123;task_every.result()&#125;&#x27;)  # None</span><br><span class="line">        # 程序由变成了串行</span><br><span class="line">        # res.result() ： 拿到的就是异步提交的任务的返回结果</span><br><span class="line">        # 程序运行的结果是有序的</span><br><span class="line">    print(&#x27;this is a main task&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    many_steps()</span><br><span class="line">    # 输出</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;&lt;Future at 0x1c5fc937f70 state=running&gt;</span><br><span class="line">    # </span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;&lt;Future at 0x1c5fca4de10 state=running&gt;</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 2</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;&lt;Future at 0x1c5fca4e0b0 state=running&gt;</span><br><span class="line">    # </span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 3</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;&lt;Future at 0x1c5fca4e3b0 state=running&gt;</span><br><span class="line">    # 这是线程任务中的 n :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;&lt;Future at 0x1c5fca4e6b0 state=running&gt;</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;0</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;2</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;4</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;6</span><br><span class="line">    # 这是 pool的返回值:&gt;&gt;&gt;&gt;8</span><br><span class="line">    # this is a main task</span><br></pre></td></tr></table></figure>

<h3 id="【4】pool-shutdown">【4】<code>pool.shutdown()</code></h3>
<ul>
<li>等所有子进程结束之后,在打印程序运行结果</li>
</ul>
```python
from concurrent.futures import ThreadPoolExecutor
import time

# 构造线程池，指定线程总数
pool = ThreadPoolExecutor(5)


# 定义线程任务
def task(n):
    print(f"这是线程任务中的 n :>>>> {n}")
    time.sleep(2)
    return n * 2


def many_steps():
    task_list = []
    for i in range(5):
        # 提交任务到线程池，并获取到返回值
        res = pool.submit(task, i)
        print(f'这是 pool的返回值:>>>>{res}')
        # 返回值是一个类对象 - result 方法 ----> 返回异步回调的结果
        # <Future at 0x134d3fcd0 state=pending>
        task_list.append(res)
    pool.shutdown()

    for task_every in task_list:
        print(f'这是 pool的返回值:>>>>{task_every.result()}')  # None
        # 程序由变成了串行
        # res.result() ： 拿到的就是异步提交的任务的返回结果
        # 程序运行的结果是有序的
    print('this is a main task')


if __name__ == '__main__':
    many_steps()
    # 输出
    # 这是线程任务中的 n :>>>> 0
    # 这是 pool的返回值:>>>><Future at 0x22cd8167f70 state=running>
    # 
    # 这是线程任务中的 n :>>>> 1
    # 这是 pool的返回值:>>>><Future at 0x22cd824de70 state=running>
    # 这是线程任务中的 n :>>>> 2
    # 这是 pool的返回值:>>>><Future at 0x22cd824e110 state=running>
    # 
    # 这是线程任务中的 n :>>>> 3
    # 这是 pool的返回值:>>>><Future at 0x22cd824e410 state=running>
    # 这是线程任务中的 n :>>>> 4
    # 这是 pool的返回值:>>>><Future at 0x22cd824e740 state=running>
    # 
    # 这是 pool的返回值:>>>>0
    # 这是 pool的返回值:>>>>2
    # 这是 pool的返回值:>>>>4
    # 这是 pool的返回值:>>>>6
    # 这是 pool的返回值:>>>>8
    # this is a main task
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 总结</span><br><span class="line"></span><br><span class="line">## 【一】进程池模版</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 导入模块</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"># 构建线程池或进程池</span><br><span class="line">pool_process = ProcessPoolExecutor(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 构造异步任务</span><br><span class="line">def task(n):</span><br><span class="line">    print(f&#x27;这是异步传进来的参数 n :&gt;&gt;&gt;&gt; &#123;n&#125;&#x27;)</span><br><span class="line">    return n ** 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main_process():</span><br><span class="line">    task_result_list = []</span><br><span class="line">    for i in range(5):</span><br><span class="line">        # 提交任务</span><br><span class="line">        result = pool_process.submit(task, i)</span><br><span class="line">        print(f&#x27;这是异步 &#123;i&#125; 调用的返回结果 :&gt;&gt;&gt;&gt; &#123;result&#125;&#x27;)</span><br><span class="line">        # 提交线程任务结果</span><br><span class="line">        task_result_list.append(result)</span><br><span class="line"></span><br><span class="line">    #  关闭进程池，等待进程池中所有的任务完成</span><br><span class="line">    pool_process.shutdown()</span><br><span class="line"></span><br><span class="line">    # 逐个获取到异步迭代的结果</span><br><span class="line">    for task_every in task_result_list:</span><br><span class="line">        print(f&#x27;这是异步调用的返回结果 :&gt;&gt;&gt;&gt; &#123;task_every.result()&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main_process()</span><br><span class="line"></span><br><span class="line">    # 这是异步 0 调用的返回结果 :&gt;&gt;&gt;&gt; &lt;Future at 0x211cf34c880 state=running&gt;</span><br><span class="line">    # 这是异步 1 调用的返回结果 :&gt;&gt;&gt;&gt; &lt;Future at 0x211cf34e890 state=running&gt;</span><br><span class="line">    # 这是异步 2 调用的返回结果 :&gt;&gt;&gt;&gt; &lt;Future at 0x211cf34ebc0 state=pending&gt;</span><br><span class="line">    # 这是异步 3 调用的返回结果 :&gt;&gt;&gt;&gt; &lt;Future at 0x211cf34ec50 state=pending&gt;</span><br><span class="line">    # 这是异步 4 调用的返回结果 :&gt;&gt;&gt;&gt; &lt;Future at 0x211cf34ee60 state=pending&gt;</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 2</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 3</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步调用的返回结果 :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步调用的返回结果 :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步调用的返回结果 :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步调用的返回结果 :&gt;&gt;&gt;&gt; 9</span><br><span class="line">    # 这是异步调用的返回结果 :&gt;&gt;&gt;&gt; 16</span><br></pre></td></tr></table></figure>

<h2 id="【二】线程池模版">【二】线程池模版</h2>
```python
# 导入模块
from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor

# 构建线程池或进程池
pool_thread = ThreadPoolExecutor(5)


# 构造异步任务
def task(n):
    print(f'这是异步传进来的参数 n :>>>> {n}')
    return n ** 2

def main_thread():
    task_result_list = []
    for i in range(5):
        # 提交任务
        result = pool_thread.submit(task, i)
        print(f'这是异步 {i} 调用的返回结果 :>>>> {result}')
        task_result_list.append(result)

    #  关闭进程池，等待进程池中所有的任务完成
    pool_process.shutdown()

    # 逐个获取到异步迭代的结果
    for task_every in task_result_list:
        print(f'这是异步调用的返回结果 :>>>> {task_every.result()}')


if __name__ == '__main__':

    main_thread()

    # 这是异步传进来的参数 n :>>>> 0
    # 这是异步 0 调用的返回结果 :>>>> <Future at 0x12e30ead0 state=finished returned int>
    # 这是异步 1 调用的返回结果 :>>>> <Future at 0x12e30f190 state=pending>
    # 这是异步传进来的参数 n :>>>> 1
    # 这是异步 2 调用的返回结果 :>>>> <Future at 0x12e30f790 state=pending>
    # 这是异步传进来的参数 n :>>>> 2
    # 这是异步传进来的参数 n :>>>> 3
    # 这是异步 3 调用的返回结果 :>>>> <Future at 0x12e33a3e0 state=finished returned int>
    # 这是异步 4 调用的返回结果 :>>>> <Future at 0x12e30f4c0 state=pending>
    # 这是异步调用的返回结果 :>>>> 0
    # 这是异步调用的返回结果 :>>>> 1
    # 这是异步调用的返回结果 :>>>> 4
    # 这是异步调用的返回结果 :>>>> 9
    # 这是异步传进来的参数 n :>>>> 4
    # 这是异步调用的返回结果 :>>>> 16
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【三】回调函数模版</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 导入模块</span><br><span class="line">from concurrent.futures import ThreadPoolExecutor, ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"># 构建线程池或进程池</span><br><span class="line">pool_process = ProcessPoolExecutor(5)</span><br><span class="line">pool_thread = ThreadPoolExecutor(5)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 构造异步任务</span><br><span class="line">def task(n):</span><br><span class="line">    print(f&#x27;这是异步传进来的参数 n :&gt;&gt;&gt;&gt; &#123;n&#125;&#x27;)</span><br><span class="line">    return n ** 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 构造异步调用函数</span><br><span class="line">def call_back(n):</span><br><span class="line">    print(f&#x27;这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; &#123;n.result()&#125;&#x27;)</span><br><span class="line">    return n.result() ** 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main_process():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        # 提交任务</span><br><span class="line">        result_call_back = pool_process.submit(task, i).add_done_callback(call_back)</span><br><span class="line">        print(f&#x27;这是异步 &#123;i&#125; 调用的返回结果 :&gt;&gt;&gt;&gt; &#123;result_call_back&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main_thread():</span><br><span class="line">    for i in range(5):</span><br><span class="line">        # 提交任务</span><br><span class="line">        result_call_back = pool_thread.submit(task, i).add_done_callback(call_back)</span><br><span class="line">        print(f&#x27;这是异步 &#123;i&#125; 调用的返回结果 :&gt;&gt;&gt;&gt; &#123;result_call_back&#125;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    main_process()</span><br><span class="line"></span><br><span class="line">    # 这是异步 0 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步 1 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步 2 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步 3 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步 4 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 2</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 3</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 9</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 16</span><br><span class="line"></span><br><span class="line">    # main_thread()</span><br><span class="line"></span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 0</span><br><span class="line">    # 这是异步 0 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步 1 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 1</span><br><span class="line">    # 这是异步 2 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 2</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 3</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 9</span><br><span class="line">    # 这是异步 3 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步 4 调用的返回结果 :&gt;&gt;&gt;&gt; None</span><br><span class="line">    # 这是异步传进来的参数 n :&gt;&gt;&gt;&gt; 4</span><br><span class="line">    # 这是异步调用函数中接收到的 :&gt;&gt;&gt;&gt; 16</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/4.0Mysql%E4%B9%8B%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/4.0Mysql%E4%B9%8B%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/" class="post-title-link" itemprop="url">4.0Mysql之约束条件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Mysql之约束条件</h1>
<ul>
<li>前面已经学了not null和null，unique，zerofill约束条件</li>
</ul>
<h2 id="【一】什么约束条件">【一】什么约束条件</h2>
<ul>
<li>就是创建表格时，限制表中的数据，保证添加到表中的数据准确和可靠性！
<ul>
<li>不符合就会插入失败</li>
</ul>
</li>
<li>修改表的时候也可以添加约束条件</li>
</ul>
<h2 id="【二】约束条件概括">【二】约束条件概括</h2>
<ul>
<li>
<p>null ：可以为空</p>
</li>
<li>
<p>not null : 非空约束</p>
<ul>
<li>不可以为空</li>
</ul>
</li>
<li>
<p>unique ：唯一性约束</p>
<ul>
<li>插入的数据不能和表中的数据重复（数据在表中只能出现一次），否则会报错</li>
</ul>
</li>
<li>
<p>zerofill：默认用0填充至指定长度</p>
</li>
<li>
<p>primary key : 主键约束pk</p>
<ul>
<li>增加查询效率</li>
</ul>
</li>
<li>
<p>foreign key ：外键约束fk</p>
<ul>
<li>表与另一张表之间的联系</li>
</ul>
</li>
</ul>
<ol>
<li>约束条件就是为了限制表中的数据，保证数据的准确性和可靠性而存在</li>
<li>约束条件在创建表时根据需求可加可不加</li>
</ol>
<h3 id="【0】如何查看当前表的约束条件-字段限制">【0】如何查看当前表的约束条件/字段限制</h3>
<ul>
<li>给约束条件添加名字</li>
<li>查看当前所有的库</li>
</ul>
```sql
show databases;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529185809245](D:\pycharm\Temporary_notes\图片\image-20240529185809245.png)</span><br><span class="line"></span><br><span class="line">- 进入到information_schema库中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">use information_schema;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240529185753902.png" alt="image-20240529185753902"></p>
<ul>
<li>查看所有的表</li>
</ul>
```sql
show tables;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529185735536](D:\pycharm\Temporary_notes\图片\image-20240529185735536.png)</span><br><span class="line"></span><br><span class="line">- table_constraints 该表专门存储约束信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">desc table_constraints;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240529185925155.png" alt="image-20240529185925155"></p>
<ul>
<li>查看某个表的约束条件</li>
</ul>
```sql
select constraint_name from table_constraints where table_name='表名';
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529190005455](D:\pycharm\Temporary_notes\图片\image-20240529190005455.png)</span><br><span class="line"></span><br><span class="line">### 【1】null</span><br><span class="line"></span><br><span class="line">- 数据可以为空</span><br><span class="line"></span><br><span class="line">### 【2】not null</span><br><span class="line"></span><br><span class="line">- 数据不能可空，必须给值</span><br><span class="line"></span><br><span class="line">### 【3】unique</span><br><span class="line"></span><br><span class="line">- 保证数据的唯一性，确保表中无相同数据</span><br><span class="line">- 但是可以为空</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 把t17这个表的id改成唯一性</span><br><span class="line">-- 前提是你要创建好的有一个他t17的这个表</span><br><span class="line">alter table t17 modify id varchar(128) unique;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240529150750729.png" alt="image-20240529150750729"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240529150810612.png" alt="image-20240529150810612"></p>
<h3 id="【4】主键约束PK（primary-key）">【4】主键约束PK（<code>primary key</code>）</h3>
<ul>
<li>主键约束–》不能为空，而且唯一，一张表只能有一个主键约束</li>
</ul>
<h4 id="（1）主键术语">（1）主键术语</h4>
<ul>
<li>主键约束–》给表中的某个字段添加主键约束</li>
<li>主键字段–》表中的某个字段添加了主键约束</li>
<li>主键值–》主键字段出现的每个值就是主键值</li>
</ul>
<h4 id="（2）作用">（2）作用</h4>
<ul>
<li>主键约束不能为空，不能重复出现</li>
<li>'not null，unique’的效果也是不能为空，不能重复出现</li>
<li>二者本质不同，添加主键约束之后还会自动添加‘索引–index’；</li>
<li>一张表没有主键是无效的，主键是当前行的唯一标识。</li>
<li>即使两行数据相同，但是根据主键的不同，两行数据还是不同的</li>
</ul>
<h4 id="（3）主键根据个数分类">（3）主键根据个数分类</h4>
<ul>
<li>单一主键，复合主键
<ul>
<li>单一主键：给字段添加一个主键约束</li>
<li>复合主键：给多个字段联合添加一个主键约束</li>
</ul>
</li>
</ul>
<h5 id="1-单一主键：列级约束">[1]单一主键：列级约束</h5>
<ul>
<li>if exists ：有责删除，无责什么都不发生</li>
</ul>
```sql
-- 添加表之前看一下表是否已经存在
drop table if exists 表名;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">create table user_one(</span><br><span class="line">	id int(4)  primary key,</span><br><span class="line">    name varchar(32)</span><br><span class="line">);</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529155222721](D:\pycharm\Temporary_notes\图片\image-20240529155222721.png)</span><br><span class="line"></span><br><span class="line">##### [2]单一主键：表级约束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">-- 添加表之前看一下表是否已经存在</span><br><span class="line">drop table if exists 表名;</span><br><span class="line">&#123;% raw %&#125;``````sql</span><br><span class="line">create table user_one(</span><br><span class="line">	id int(11),</span><br><span class="line">    name varchar(32),</span><br><span class="line">    primary key(id)</span><br><span class="line">);</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529160047870](D:\pycharm\Temporary_notes\图片\image-20240529160047870.png)</span><br><span class="line"></span><br><span class="line">- 给主键重命名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">create table user_one(</span><br><span class="line">	id int(11),</span><br><span class="line">    name varchar(32),</span><br><span class="line">    constraint one_user_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529160258352](D:\pycharm\Temporary_notes\图片\image-20240529160258352.png)</span><br><span class="line"></span><br><span class="line">##### [3]复合主键：只能为表级约束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 添加表之前看一下表是否已经存在</span><br><span class="line">drop table if exists 表名;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-  复合主键，表级约束，并且给其重命名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">create table user_one(</span><br><span class="line">	id int(11),</span><br><span class="line">    name varchar(32),</span><br><span class="line">    constraint one_user_id_pk primary key(id)</span><br><span class="line">);</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529161057598](D:\pycharm\Temporary_notes\图片\image-20240529161057598.png)</span><br><span class="line"></span><br><span class="line">#### (4)主键根据性质分类</span><br><span class="line"></span><br><span class="line">- 自然主键：主键是个自然数，这个主键与业务没有任何关系</span><br><span class="line">- 业务主键：主键值与表中的业务密切相关。这种业务发生改变时，业务主键也会跟着受影响。</span><br><span class="line"></span><br><span class="line">#### (5)自动生成主键</span><br><span class="line"></span><br><span class="line">- 使用字段auto_increment</span><br><span class="line"></span><br><span class="line">- mysql数据库系统提供一个自然自增数据，专门用来生成主键值，主键值不需要用户去维护，也不需要生成，mysql自动生成</span><br><span class="line">- 默认数字从1开始，从1开始递增</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 添加表之前看一下表是否已经存在</span><br><span class="line">drop table if exists 表名;</span><br></pre></td></tr></table></figure>

<p>sql<br>
create table user_one(<br>
id int(11) primary key auto_increment,<br>
name varchar(32));</p>
```



![image-20240529162317862](D:\pycharm\Temporary_notes\图片\image-20240529162317862.png)

- 插入数据



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">insert into user_one(name) values(&#x27;tom&#x27;),(&#x27;opp&#x27;),(&#x27;dream&#x27;);</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529162809340](D:\pycharm\Temporary_notes\图片\image-20240529162809340.png)</span><br><span class="line"></span><br><span class="line">- 每次递增的数字只会出现一次</span><br><span class="line"></span><br><span class="line">![image-20240529164029559](D:\pycharm\Temporary_notes\图片\image-20240529164029559.png)</span><br><span class="line"></span><br><span class="line">![image-20240529164047272](D:\pycharm\Temporary_notes\图片\image-20240529164047272.png)</span><br><span class="line"></span><br><span class="line">#### (6)重置主键起始位置</span><br><span class="line"></span><br><span class="line">##### [1]清空表数据</span><br><span class="line"></span><br><span class="line">- 将原来表的数据全部清空，就重置了主键的起始位置</span><br><span class="line"></span><br><span class="line">- 不建议使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sql<br>
trucate 表名；</p>
```



##### [2]指定主键的起始位置

- 使用表修改语句将带有 AUTO_INCREMENT 的字段数字指定为自定义位置



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">alter table 表名 AUTO_INCREMENT = 指定主键的起始位置</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 字段数字指定为自定义位置,指定的位置就会继续递增</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sql<br>
alter table user_one AUTO_INCREMENT = 958;</p>
```



![image-20240529164406578](D:\pycharm\Temporary_notes\图片\image-20240529164406578.png)

### 【5】外键约束FK（foreign key）

#### （1）引入

- 某个字段依赖于另一张表中某个字段的值，而被依赖的字段必须具有主键约束或者唯一约束，被依赖的数据表称为主表（父表），设置外键约束的表称为子表或者从表。

![image-20240529165441539](D:\pycharm\Temporary_notes\图片\image-20240529165441539.png)

- 上表中
- 主表就是班级表--》班级号--》主键

- 外表就是学生表--》班级号--》外键

#### （2）外键术语

- 外键约束--》给表中的某个字段添加外键约束
- 外键字段--》某个字段添加了外键约束
- 外键值--》外键字段中的每一个数据都是外键值

#### （3）外键的关系

- 一对一--》好比：人和人的信息
- 一对多--》好比：书和印刷厂
- 多对多--》好比：书和作者

#### （4）外键语句

- 先建立需要被建立关系的表，这样才能让建立关系的表去和它建立关系
- 建立一个建立关系的表



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">create table 表名1(</span><br><span class="line">字段名1 字段类型1 约束条件1 comment 注释1,</span><br><span class="line">	字段名2 字段类型2 约束条件2 comment 注释2</span><br><span class="line">);</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 和它建立关系的表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sql<br>
create table 表名2(<br>
字段名1 字段类型1 约束条件1 comment 注释1,<br>
字段名2 字段类型2 约束条件2 comment 注释2,<br>
foreign key(字段2) references 表名1(字段名1)<br>
)<br>
– foreign key后面括号里面跟着的是自己的外键字段<br>
– references后面括号里面填的是被关联的表名 需要关联的外键字段</p>
```



#### （5）一对多外键关系

- 一对多：外键关系应该健在多的一方
  - 就好比：部门只有一个，但是部门有好多个员工
- 部门表先创建



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">-- comment给字段添加注解</span><br><span class="line">create table dep(</span><br><span class="line">	id int(11) primary key auto_increment comment &#x27;编号&#x27;,</span><br><span class="line">    dep_name varchar(32) comment&#x27;部门名称&#x27;,</span><br><span class="line">    def_desc varchar(32) comment&#x27;部门描述&#x27;</span><br><span class="line">);</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529182821276](D:\pycharm\Temporary_notes\图片\image-20240529182821276.png)</span><br><span class="line"></span><br><span class="line">- 有了部门表在创建员工表，并且要员工和部门绑定</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sql<br>
create table emp(<br>
id int primary key auto_increment comment ‘编号’,<br>
name varchar(32) comment ‘姓名’,<br>
age int comment ‘年龄’,<br>
dep_id int comment ‘部门编号’,<br>
– dep_id:是建部门表的id<br>
– dep:是部门表的表名<br>
foreign key(dep_id) references dep(id)<br>
);</p>
```



![image-20240529182832126](D:\pycharm\Temporary_notes\图片\image-20240529182832126.png)

- 插入数据



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">sql</span><br><span class="line">-- 向部门表中插入数据</span><br><span class="line">insert into dep(dep_name,def_desc) values(&#x27;back&#x27;,&#x27;后勤部门&#x27;);</span><br><span class="line">insert into dep(dep_name,def_desc) values(&#x27;per&#x27;,&#x27;人事部门&#x27;);</span><br><span class="line"></span><br><span class="line">-- 向员工表中插入数据</span><br><span class="line">-- 不选部门就是null</span><br><span class="line">insert into emp(name,age) values(&#x27;tom&#x27;,&#x27;22&#x27;);</span><br><span class="line"></span><br><span class="line">-- 向员工表中插入数据</span><br><span class="line">mysql&gt; insert into emp(name,age,dep_id) values(&#x27;opp&#x27;,&#x27;23&#x27;,&#x27;2&#x27;);</span><br><span class="line"></span><br><span class="line">-- 向员工表中插入数据</span><br><span class="line">-- 这条数据是错误的因为只有两个部门，没有第三个</span><br><span class="line">insert into emp(name,age,dep_id) values(&#x27;bob&#x27;,&#x27;18&#x27;,&#x27;3&#x27;);</span><br><span class="line"></span><br><span class="line">ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`day01`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`dep_id`) REFERENCES `dep` (`id`))</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529184453830](D:\pycharm\Temporary_notes\图片\image-20240529184453830.png)</span><br><span class="line"></span><br><span class="line">![image-20240529184503857](D:\pycharm\Temporary_notes\图片\image-20240529184503857.png)</span><br><span class="line"></span><br><span class="line">- 级联更新`on update cascade`，级联删除`on delete cascade`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>sql<br>
create table emp1(<br>
id int primary key auto_increment comment ‘编号’,<br>
name varchar(32) comment ‘姓名’,<br>
age int comment ‘年龄’,<br>
dep_id int comment ‘部门编号’,<br>
– 建立联系<br>
foreign key(dep_id) references dep1(id)<br>
on update cascade  # 级联更新<br>
on delete cascade  # 级联删除<br>
);</p>
``````sql
create table dep1(
	id int primary key auto_increment comment '编号',
  dep_name varchar(32) comment '部门名称',
  dep_desc varchar(32) comment '部门描述'
);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### （6）外键字段的约束效果</span><br><span class="line"></span><br><span class="line">- 建表时应该先创建被关联的表（没有外键字段的表）</span><br><span class="line">- 插入数据的时候 应该先插入被关联表(没有外键字段的表) </span><br><span class="line">  - 外键字段填入的值只能是被关联表中已经存在的值</span><br><span class="line">- 修改、删除被关联表数据都会出现障碍</span><br><span class="line"></span><br><span class="line">#### （7）多对多关系</span><br><span class="line"></span><br><span class="line">- 好比书和作者</span><br><span class="line">  - 书有好几个作者</span><br><span class="line">  - 作者发出好多本书</span><br><span class="line"></span><br><span class="line">- 多对多无法判断谁先创建谁后创建</span><br><span class="line">- 需要借助第三张表专门建立关系</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">create table book(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  title varchar(32),</span><br><span class="line">  price float(10,2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table author(</span><br><span class="line">  id int primary key auto_increment,</span><br><span class="line">  name varchar(32),</span><br><span class="line">  gender enum(&#x27;male&#x27;,&#x27;female&#x27;,&#x27;others&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240529193101402.png" alt="image-20240529193101402"></p>
<ul>
<li>建立第三张表来储存它们的关系</li>
</ul>
```sql
create table book2author(
  id int primary key auto_increment,
  author_id int,
  book_id int,
  foreign key(author_id) references author(id) 
  on update cascade   
  on delete cascade,  
  foreign key(book_id) references book(id) 
  on update cascade  
  on delete cascade  
);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240529193112192](D:\pycharm\Temporary_notes\图片\image-20240529193112192.png)</span><br><span class="line"></span><br><span class="line">- 两张表内的数据没有在第三张表内绑定关系的情况下随意新增修改和删除</span><br><span class="line"></span><br><span class="line">#### （8）一对一关系</span><br><span class="line"></span><br><span class="line">- 一对一关系外键字段在任意一方都可以，推荐在查询率较高的一方</span><br><span class="line"></span><br><span class="line">### 【补充】</span><br><span class="line"></span><br><span class="line">- 外键根据个数分类</span><br><span class="line">  - 单一外键【给一个字段添加外键约束】</span><br><span class="line">  - 复合外键【给多个字段联合添加成一个外键约束】</span><br><span class="line"></span><br><span class="line">- 一张表可以有多个外键字段</span><br><span class="line">- 外键字段可以为null</span><br><span class="line">- 外键字段引用一张表的某个字段时，被引用的字段必须具有unique约束</span><br><span class="line">- 有了外键引用之后，表分为父表和子表。一对多关系中，一为父表，多为子表。创建表时，先创建父表，再创建子表；插入数据时先插入父表中的数据，再插入子表中的数据；**删除数据时，需先删除子表的数据，再删除父表的数据**</span><br><span class="line"></span><br><span class="line">- 外键约束没有列级约束，只有标记约束</span><br><span class="line"></span><br><span class="line">## 【三】级联更新和级联删除</span><br><span class="line"></span><br><span class="line">- 什么是级联更新</span><br><span class="line">  - 当主表中的某条记录的值发生改变时，从表中的相应记录的值也会自动发生相应的变化，保持数据的一致性。</span><br><span class="line">- 什么是级联删除</span><br><span class="line">  - 当主表中的某条记录被删除时，从表中的相应记录也会自动被删除，确保了当主关键字段中相应的记录被删除时，会自动删除相关表中对应的记录，从而保持数据的一致性和完整性。</span><br><span class="line"></span><br><span class="line">### 【1】介绍</span><br><span class="line"></span><br><span class="line">- 添加级联更新和级联删除时需要在外键约束后面添加</span><br><span class="line">- 在删除父表中的数据时，级联删除子表中的数据 on delete cascade</span><br><span class="line">- 在更新父表中的数据时，级联更新子表中的数据 on update cascade</span><br><span class="line">- 以上的级联更新和级联删除谨慎使用，因为级联操作会将数据改变或删除【数据无价】</span><br><span class="line">- 在修改约束条件时，建议可以将原先的约束删除再重新添加约束条件</span><br><span class="line"></span><br><span class="line"># 【作业】</span><br><span class="line"></span><br><span class="line">![image-20240529204705803](D:\pycharm\Temporary_notes\图片\image-20240529204705803.png)</span><br><span class="line"></span><br><span class="line">- 基于上面的信息做一个数据库下面的多张表</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 按照你理想中的方式进行分表</span><br><span class="line">-- 所有信息都放在一张表中 ，合理但是有病</span><br><span class="line">-- 按照自己的想法和思路将上述所有信息进行分表  </span><br><span class="line"></span><br><span class="line">-- 在自己的表的基础上进行插入数据</span><br><span class="line"></span><br><span class="line">-- 你的建表语句 ---&gt; 字段及字段类型的创建</span><br><span class="line"></span><br><span class="line">-- 你的数据插入语句</span><br></pre></td></tr></table></figure>

```sql


 create table class(id int primary key auto_increment,class_id int(11) not null,class varchar(32) not null);
 
  create table student(
    ->     id int primary key auto_increment,
    ->     name varchar(32) not null,
    ->     class_id int,
    ->     foreign key (class_id) references class(id)
    ->     on delete cascade
    ->     on update cascade
    -> );
    
    
insert into class(class_id,class) values(100,'北京市101中学高三一班');
insert into class(class_id,class) values(101,'北京市101中学高三二班');
insert into class(class_id,class) values(102,'北京市101中学高三三班');


insert into student(name,class_id) values('tom',1);
insert into student(name,class_id) values('opp',2);
insert into student(name,class_id) values('dream',2);
```

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240531083035591.png" alt="image-20240531083035591"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240531083106308.png" alt="image-20240531083106308"><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240531083135792.png" alt="image-20240531083135792"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
