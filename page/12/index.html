<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:type" content="website">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/page/12/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="坤">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aurora-lsk.asia/page/12/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/5.18%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/5.18%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">5.18面向对象内置方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>面向对象内置方法</h1>
<h2 id="【一】方法">【一】方法</h2>
<ul>
<li>Python的Class机制内置了很多特殊的方法来帮助使用者高度定制自己的类</li>
<li>这些内置方法都是以双下划线开头和结尾的，会在满足某种条件时自动触发</li>
</ul>
```python
__init__	：初始化对象时触发
__del__		：销毁类时触发
__new__		：构造类时触发
__str__		：str函数或者print函数触发
__repr__	：repr或者交互式解释器触发
__doc__		：打印类内的注释内容
__enter__	：打开文档触发（with语句打开的时候触发）
__exit__	：关闭文档触发（with语句关闭的时候触发）
__getattr__ : 访问不存在的属性时调用
__setattr__ ：设置实例对象的一个新的属性时调用
__delattr__ ：删除一个实例对象的属性时调用
__setitem__	：列表添加值
__getitem__ ：将对象当作list使用 
__delitem__	：列表删除值
__call__	：对象后面加括号，触发执行
__iter__	：迭代器
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`__init__()`,`__del__()`,`__init__()`</span><br><span class="line"></span><br><span class="line">  - 这个方法是一个类的构造函数，与之对应的`__del__()`是析构函数，通过此方法我们可以定义一个对象的初始操作。</span><br><span class="line">  - 但实际上，新式类的`__new__()`才是真正的初始化函数。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class A(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        print(&#x27;__init__&#x27;)</span><br><span class="line"></span><br><span class="line">    def __new__(cls, *args, **kwargs):</span><br><span class="line">        print(&#x27;__new__&#x27;)</span><br><span class="line">        # cls表示一个类，一个当前要被实例化的类，参数由py解释器自动提供</span><br><span class="line">        return super().__new__(cls, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    def __del__(self):</span><br><span class="line">        print(&#x27;__del__&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line">print(&#x27;do something&#x27;)</span><br><span class="line">print(&quot;111&quot;)</span><br><span class="line"># __new__</span><br><span class="line"># __init__</span><br><span class="line"># do something</span><br><span class="line"># 111</span><br><span class="line"># __del__</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="方法-str-str函数或者print函数触发">方法<code>__str__</code>:str函数或者print函数触发</h3>
<ul>
<li><code>__str__</code>方法会在对象被打印时自动触发</li>
<li>print功能打印的就是它的返回值</li>
<li>我们通常基于方法来定制对象的打印信息</li>
<li>该方法必须返回字符串类型</li>
</ul>
</li>
<li>
<p>方法的返回值必须是字符串,否则抛出异常</p>
</li>
</ul>
```python
class People:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __str__(self):
        # 返回类型必须是字符串
        return f'<Name:{self.name} Age:{self.age}>'


person = People('dream', 18)
print(person)  # 触发p.__str__()，拿到返回值后进行打印
# <Name:dream Age:18>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`__repr__`</span><br><span class="line"></span><br><span class="line">  - ### repr或者交互式解释器触发</span><br><span class="line"></span><br><span class="line">- 方法的返回值必须是字符串,否则抛出异常</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class School:</span><br><span class="line">    def __init__(self, name, addr, type):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.addr = addr</span><br><span class="line">        self.type = type</span><br><span class="line"></span><br><span class="line">    def __repr__(self):</span><br><span class="line">        return &#x27;School(%s,%s)&#x27; % (self.name, self.addr)</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return &#x27;(%s,%s)&#x27; % (self.name, self.addr)</span><br><span class="line"></span><br><span class="line">s1 = School(&#x27;dreamCity&#x27;, &#x27;北京&#x27;, &#x27;私立&#x27;)</span><br><span class="line">print(&#x27;from repr: &#x27;, repr(s1))#from repr:  School(dreamCity,北京)</span><br><span class="line">print(&#x27;from str: &#x27;, str(s1))#from str:  (dreamCity,北京)</span><br><span class="line">print(s1)#(dreamCity,北京)</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="del-方法"><code>__del__</code>方法</h3>
<ul>
<li><code>__del__</code>会在对象被删除时自动触发。</li>
</ul>
</li>
</ul>
```python
class Person():
    def __init__(self, name, age):
        print(f'这是 :>>>> {name} , age :>>>> {age}')

    def __del__(self):
        print(f"我离开你了")


person = Person("dream", 18)
print("这是断层")
# 这是 :>>>> dream , age :>>>> 18
# 这是断层
# 我离开你了
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`isinstance(obj,cls)`</span><br><span class="line"></span><br><span class="line">  - **`isinstance(obj,cls)`检查是否`obj`是否是类`cls` 的对象**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Bar():</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class Foo(object):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">foo = Foo()</span><br><span class="line">bar = Bar()</span><br><span class="line"># isinstance(obj,cls)检查是否obj是否是类cls的对象</span><br><span class="line">res_Foo = isinstance(foo, Foo)</span><br><span class="line">res_Bar = isinstance(foo, Bar)</span><br><span class="line">print(res_Foo)#True</span><br><span class="line">print(res_Bar)#False</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="方法issubclass-sub-super">方法<code>issubclass(sub,super)</code></h3>
<ul>
<li><strong><code>issubclass(sub, super)</code>检查<code>sub</code>类是否是 <code>super</code> 类的派生类</strong></li>
</ul>
</li>
</ul>
```python
class Foo(object):
    pass

class Bar(Foo):
    pass

res = issubclass(Bar, Foo)
print(res)#True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`__doc__`</span><br><span class="line"></span><br><span class="line">  - 打印类内的注释内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Foo:</span><br><span class="line">    &#x27;我是描述信息&#x27;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">print(Foo.__doc__)</span><br><span class="line">#我是描述信息</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="方法-enter-和-exit">方法<code>__enter__</code>和<code>__exit__</code></h3>
<ul>
<li>打开文档触发</li>
</ul>
</li>
<li>
<p>为了让一个对象兼容with语句，必须在这个对象的类中声明<code>__enter__</code>和<code>__exit__</code>方法</p>
</li>
</ul>
```python
class Open:
    def __init__(self, name):
        self.name = name

    def __enter__(self):
        print('出现with语句,对象的__enter__被触发,有返回值则赋值给as声明的变量')
        # return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        print('with中代码块执行完毕时执行我啊')


with Open('a.txt') as f:
    print('=====>执行代码块')
#出现with语句,对象的__enter__被触发,有返回值则赋值给as声明的变量
# =====>执行代码块
# with中代码块执行完毕时执行我啊
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- `__exit__()`中的三个参数分别代表</span><br><span class="line">  - 异常类型</span><br><span class="line">  - 异常值</span><br><span class="line">  - 追溯信息</span><br><span class="line"></span><br><span class="line">- with语句中代码块出现异常，则with后的代码都无法执行</span><br><span class="line"></span><br><span class="line">- ### 方法`__setattr__`，`__delattr__`,`__getattr__`</span><br><span class="line"></span><br><span class="line">  - `__getattr__(self, name)`: 访问不存在的属性时调用</span><br><span class="line">  - `__setattr__(self, name, value)`：设置实例对象的一个新的属性时调用</span><br><span class="line">  - `__delattr__(self, name)`：删除一个实例对象的属性时调用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Foo:</span><br><span class="line">    x = 1</span><br><span class="line"></span><br><span class="line">    def __init__(self, y):</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    def __getattr__(self, item):</span><br><span class="line">        print(f&#x27;----&gt; from getattr:你找的属性不存在 :&gt;&gt;&gt;&gt; &#123;item&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">    def __setattr__(self, key, value):</span><br><span class="line">        print(f&#x27;----&gt; from setattr  key : &#123;key&#125;  value : &#123;value&#125;&#x27;)</span><br><span class="line">        # self.key=value #这就无限递归了,你好好想想</span><br><span class="line">        # self.__dict__[key]=value #应该使用它</span><br><span class="line"></span><br><span class="line">    def __delattr__(self, item):</span><br><span class="line">        print(f&#x27;----&gt; from delattr :&gt;&gt;&gt;&gt; &#123;item&#125;&#x27;)</span><br><span class="line">        # del self.item #无限递归了</span><br><span class="line">        self.__dict__.pop(item)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># __setattr__添加/修改属性会触发它的执行</span><br><span class="line">f1 = Foo(10)#----&gt; from setattr  key : y  value : 10</span><br><span class="line"></span><br><span class="line"># 因为你重写了__setattr__,凡是赋值操作都会触发它的运行,你啥都没写,就是根本没赋值,除非你直接操作属性字典,否则永远无法赋值</span><br><span class="line">print(f1.__dict__)#&#123;&#125;</span><br><span class="line">f1.z = 3#----&gt; from setattr  key : z  value : 3</span><br><span class="line">print(f1.__dict__)#&#123;&#125;</span><br><span class="line"></span><br><span class="line">#  # __delattr__删除属性的时候会触发</span><br><span class="line">f1.__dict__[&#x27;a&#x27;] = 3  # 我们可以直接修改属性字典,来完成添加/修改属性的操作</span><br><span class="line">print(f1.__dict__)#&#123;&#x27;a&#x27;: 3&#125;</span><br><span class="line">del f1.a#----&gt; from delattr :&gt;&gt;&gt;&gt; a</span><br><span class="line">print(f1.__dict__)#&#123;&#125;</span><br><span class="line"></span><br><span class="line"># __getattr__只有在使用点调用属性且属性不存在的时候才会触发</span><br><span class="line">f1.xxxxxx#----&gt; from getattr:你找的属性不存在 :&gt;&gt;&gt;&gt; xxxxxx</span><br></pre></td></tr></table></figure>

<ul>
<li>
<p>对象属性查找顺序</p>
<ul>
<li>首先访问<code>__getattribute__()</code>魔法方法（隐含默认调用，无论何种情况，均会调用此方法</li>
<li>去实例对象<code>t</code>中查找是否具备该属性： <code>t.__dict__ </code>中查找，每个类和实例对象都有一个<code>__dict__</code>的属性</li>
<li>若在<code>t.__dict__</code>中找不到对应的属性， 则去该实例的类中寻找，即 <code>t.__class__.__dict__</code></li>
<li>若在实例的类中也招不到该属性，则去父类中寻找，即<code> t.__class__.__bases__.__dict__</code>中寻找</li>
<li>若以上均无法找到，则会调用<code>__getattr__</code>方法，执行内部的命令（若未重载 <code>__getattr__ </code>方法，则直接报错：<code>AttributeError</code>)</li>
</ul>
</li>
<li>
<h3 id="方法-setitem-getitem-delitem">方法<code>__setitem__</code>,<code>__getitem__</code>,<code>__delitem__</code></h3>
</li>
<li>
<p><code>__setitem__</code>	：列表添加值</p>
</li>
<li>
<p><code>__getitem__ </code>：将对象当作list使用</p>
</li>
<li>
<p><code>__delitem__	</code>：列表删除值</p>
</li>
</ul>
```python
class Foo:
    def __init__(self, name):
        self.name = name

    def __getitem__(self, item):
        print(self.__dict__[item])

    def __setitem__(self, key, value):
        self.__dict__[key] = value

    def __delitem__(self, key):
        print('del obj[key]时,我执行')
        self.__dict__.pop(key)

    def __delattr__(self, item):
        print('del obj.key时,我执行')
        self.__dict__.pop(item)


f1 = Foo('sb')

#执行def __setitem__
f1['age'] = 18
#执行def __delitem__
del f1['age']#del obj[key]时,我执行

#执行def __getitem__
f1['age1'] = 19
#执行__delattr__(self, item)
del f1.age1#del obj.key时,我执行

#给实例化对象添加属性
f1['name'] = 'alex'
print(f1.__dict__)#{'name': 'alex'}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`__call__`</span><br><span class="line"></span><br><span class="line">  - 对象后面加括号，触发执行</span><br><span class="line">  - 注：构造方法的执行是由创建对象触发的</span><br><span class="line">    - 即：对象 = 类名() ；</span><br><span class="line">  - 而对于 `__call__` 方法的执行是由对象后加括号触发的</span><br><span class="line">    - 即：对象() 或者 类()()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Foo:</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        print(&#x27;__call__&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Foo()  # 执行 __init__</span><br><span class="line">obj()  # 执行 __call__</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="方法-iter">方法<code>__iter__()</code></h3>
<ul>
<li>迭代器</li>
</ul>
</li>
</ul>
```python
class Fib(object):
    def __init__(self):
        self.a, self.b = 0, 1  # 初始化两个计数器a，b

    def __iter__(self):
        return self  # 实例本身就是迭代对象，故返回自己

    def __next__(self):
        self.a, self.b = self.b, self.a + self.b  # 计算下一个值
        if self.a > 10:  # 退出循环的条件
            raise StopIteration()
        return self.a  # 返回下一个值


for i in Fib():
    print(i)
# 1
# 1
# 2
# 3
# 5
# 8
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ### 方法`isinstance()`</span><br><span class="line"></span><br><span class="line">  - 判断当前对象是否是某一个类的类型</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#数据</span><br><span class="line">print(isinstance(&quot;tom&quot;,str))#True</span><br><span class="line">print(isinstance(4,str))#False</span><br><span class="line"></span><br><span class="line">#类</span><br><span class="line">class Person:</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">class Student(Person):</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">student = Student()</span><br><span class="line">person = Person()</span><br><span class="line"></span><br><span class="line">print(isinstance(student, Student))  # True</span><br><span class="line">print(isinstance(person, Person))  # True</span><br><span class="line">print(isinstance(person, Student))  # False</span><br><span class="line"># 因为Person是Student父类，所以返回True</span><br><span class="line">print(isinstance(student, Person))  # True</span><br></pre></td></tr></table></figure>

<ul>
<li>
<h3 id="方法issubclass">方法<code>issubclass()</code></h3>
<ul>
<li>检验一个类是否属于另一个类的子类</li>
</ul>
</li>
</ul>
```python
class Person:
    ...

class Student(Person):
    ...

print(issubclass(Student, Person))  # True
```

<h2 id="【二】小总结（属性名，属性值）">【二】小总结（属性名，属性值）</h2>
<ul>
<li>对象[属性名] = 属性值—》触发<code>__setitem__</code>方法</li>
<li>print(对象[对象])—&gt;&gt;触发了<code>__getitem__</code>方法</li>
<li>对象.属性名 = 属性值—》&gt;&gt;触发<code>__setattr__</code>方法</li>
<li>对象.对象 = 属性值 — &gt;&gt;触发了<code> __setattr__</code>方法</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/5.17%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/5.17%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">5.17面向对象，反射</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>反射</h1>
<h2 id="【一】什么是反射">【一】什么是反射</h2>
<ul>
<li>
<p>反射是一种程序访问检测和修改本身属性和状态的方式</p>
</li>
<li>
<p>在Python内也有反射机制，通过字符串映射自己的内部是否具有某种属性</p>
</li>
<li>
<p><strong>python中的一切事物都是对象（都可以使用反射）</strong></p>
</li>
</ul>
<h2 id="【二】python中的四个方法">【二】python中的四个方法</h2>
<ul>
<li>获取属性
<ul>
<li><code>getattr(obj,key)</code></li>
</ul>
</li>
<li>判断当前属性是否存在
<ul>
<li><code>hasattr(obj,key)</code></li>
</ul>
</li>
<li>向当前对象中设置属性名和属性值
<ul>
<li><code>setattr(obj,key,value)</code></li>
</ul>
</li>
<li>删除对象中的指定属性
<ul>
<li><code>delattr(obj,key)</code></li>
</ul>
</li>
</ul>
<h2 id="【三】四种方式的具体使用方法">【三】四种方式的具体使用方法</h2>
<h3 id="（1）获取属性getattr-obj-key">（1）获取属性<code>getattr(obj,key)</code></h3>
<ul>
<li>数据属性
<ul>
<li>在对象中映射数据属性的时候，如果对象中存在当前属性值则直接将属性值拿出来</li>
</ul>
</li>
</ul>
```python
class Person(object):
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def tell(self):
        print(f'{self.name} is {self.age} years old')

    @classmethod
    def talk(cls):
        print(cls.__name__)

    @staticmethod
    def swim():
        print(f'I am a swimming')

people = Person(name='dream', age=18)
result = getattr(people,"name")
print(result)#dream
result = getattr(people,'age')
print(result)#18
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 函数属性</span><br><span class="line">  - 在对象中映射函数属性的时候，如果对象中存在当前属性名对应的数据属性,则直接获取当前函数属性的内存地址，可以直接调用当前函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">result = getattr(people,&#x27;tell&#x27;)</span><br><span class="line">print(result)#&lt;bound method Person.tell of &lt;__main__.Person object at 0x000001C2C4F172B0&gt;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在对象中映射属性的时候，如果对象中不存在当前属性名对应的属性，会直接报错</li>
</ul>
<h3 id="2-判断当前属性是否存在hasattr-obj-key-–-返回布尔类型">(2)判断当前属性是否存在<code>hasattr(obj,key)</code>*–&gt;返回布尔类型</h3>
<ul>
<li>数据属性</li>
</ul>
```python
class Person(object):
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def tell(self):
        print(f'{self.name} is {self.age} years old')

    @classmethod
    def talk(cls):
        print(cls.__name__)

    @staticmethod
    def swim():
        print(f'I am a swimming')

people = Person(name='dream', age=18)
result = hasattr(people,"name")
print(result)#True
result = hasattr(people,'age')
print(result)#True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 函数属性</span><br><span class="line">  - 在对象中映射函数属性的时候，如果对象中存在当前属性名对应的数据属性，则返回True</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">people = Person(name=&#x27;dream&#x27;, age=18)</span><br><span class="line">result = hasattr(people,&#x27;tell&#x27;)</span><br><span class="line">print(result)#True</span><br></pre></td></tr></table></figure>

<ul>
<li>在对象中映射属性的时候，如果对象中不存在当前属性名对应的属性，则返回False</li>
</ul>
<h3 id="（3）向当前对象中设置属性值和属性名setattr-obj-key-value">（3）向当前对象中设置属性值和属性名<code>setattr(obj,key,value)</code></h3>
<ul>
<li>数据属性
<ul>
<li>向对象中设置属性名和属性值，如果对象中存在当前属性则直接替换，否则新增</li>
</ul>
</li>
</ul>
```python
people = Person(name='dream', age=18)
result = setattr(people,"gender","male")
print(result)#None
print(people.gender)#male
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 函数属性</span><br><span class="line">  - 在对象中映射函数属性的时候，如果对象中存在当前属性名对应的数据属性，则返回True</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def read():</span><br><span class="line">     print(f&quot;这是外部的 read &quot;)</span><br><span class="line">def onr():</span><br><span class="line">    print(f&quot;,,,,&quot;)</span><br><span class="line"></span><br><span class="line">people = Person(name=&#x27;dream&#x27;, age=18)</span><br><span class="line">#设置进去的方法叫非静态方法</span><br><span class="line">result = setattr(people,&quot;read&quot;,onr)</span><br><span class="line">print(result)#None</span><br><span class="line">print(hasattr(people, &#x27;read&#x27;))  # True</span><br><span class="line">print(getattr(people, &#x27;read&#x27;))  # &lt;function onr at 0x0000022CA5A6AEF0&gt;</span><br><span class="line">getattr(people,&quot;read&quot;)()#,,,,</span><br></pre></td></tr></table></figure>

<h3 id="（4）删除对象中的指定属性delattr-obj-key">（4）删除对象中的指定属性<code>delattr(obj,key)</code></h3>
<ul>
<li>数据属性
<ul>
<li>在对象中删除数据属性的时候，如果对象中存在当前属性值则直接删除</li>
</ul>
</li>
</ul>
```python
people = Person(name='dream', age=18)
print(hasattr(people,'name')) # True
result = delattr(people,'name')
print(result) # None
print(hasattr(people,'name')) # False
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 函数属性</span><br><span class="line">  - 在对象中删除函数属性的时候，要根据参数是对象还是类来做区分</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># print(hasattr(Person, &#x27;tell&#x27;))  # True</span><br><span class="line"># 如果参数是当前对象，则无法删除函数属性</span><br><span class="line"># result = delattr(people, &#x27;tell&#x27;)</span><br><span class="line"># result = delattr(people, &#x27;talk&#x27;)</span><br><span class="line"># result = delattr(people, &#x27;swim&#x27;)</span><br><span class="line"># 如果参数是当前类，则可以删除函数属性</span><br><span class="line"># result = delattr(Person, &#x27;tell&#x27;) #</span><br><span class="line"># result = delattr(Person, &#x27;talk&#x27;)</span><br><span class="line"># result = delattr(Person, &#x27;swim&#x27;)</span><br><span class="line"># print(result)  # None</span><br><span class="line"># print(hasattr(Person, &#x27;swim&#x27;))</span><br></pre></td></tr></table></figure>

<ul>
<li>在对象中删除属性的时候，如果对象中不存在当前属性名对应的属性，则直接报错</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/5.19%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%85%83%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/5.19%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%8C%E5%85%83%E7%B1%BB/" class="post-title-link" itemprop="url">5.19面向对象，元类</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>元类</h1>
<h2 id="【一】-call-方法">【一】<code>__call__</code>方法</h2>
<ul>
<li><code>__call__</code>方法：会在触发当前类（）或对象（）调用的时候触发</li>
<li><code>__call__</code>方法触发 的条件是
<ul>
<li>调用：类（）会触发</li>
<li>调用：对象（）会触发</li>
</ul>
</li>
</ul>
```python
class Student(type):
    def __init__(self, name, bases, namespace):
        print("元类的init")
        super().__init__(name, bases,namespace)

    def __call__(cls, *arg, **keyword):
        print(cls)#<class '__main__.Person'>
        print("元类的__call__")
        obj = super().__call__(*arg, **keyword)
        return obj

class Person(metaclass=Student):
    def __init__(self):
        self.name = 'dream'
        print("__init__")

    def __call__(self):
        print("__call__")


#类名加括号的时候会触发元类的__init__再触发元类里面的__call__(__call__必须返回一个对象)，再触发子类的__init__
person = Person()
输出：#元类的init
    #<class '__main__.Person'>
    # 元类的__call__
    # __init__

#元类的__call__必须返回一个对象，不然不可调用
person()
输出：#__call__
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 方法`callable(对象/类名)`：检测当前对象是否可被调用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Person(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.name = &#x27;dream&#x27;</span><br><span class="line">        print(&quot;__init__&quot;)</span><br><span class="line">    def __call__(self):</span><br><span class="line">        print(&quot;__call__&quot;)</span><br><span class="line"></span><br><span class="line">#得到实例化对象的过程就已经触发了__init__方法</span><br><span class="line">person = Person()#__init__</span><br><span class="line">print(callable(person))#True</span><br><span class="line">print(callable(Person))#True</span><br></pre></td></tr></table></figure>

<h2 id="【二】什么是元类">【二】什么是元类</h2>
<ul>
<li>元类是所有类的基类，包括object</li>
</ul>
<h3 id="1-元类的创建方式">(1)元类的创建方式</h3>
<ul>
<li>
<p>创建元类的方法</p>
<ul>
<li>
<p>使用<code>type</code>生成</p>
<ul>
<li>
<p>类名 = type（“类名”，（父类1，父类2…）,名称空间字典）</p>
```python
      Student = type('Student', (object,), {'name': "dream"})
      <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - `MyClass`继承了`MyType`元类的类</span><br><span class="line"></span><br><span class="line">    - `metaclass` 指定元类</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class MyType(type):</span><br><span class="line">    ....</span><br><span class="line">    </span><br><span class="line">class MyClass(metaclass=MyType):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
<li>
<p>如果是类的名称空间字典，一定会看到除了自己定义的属性以外很对属性（不用管都是自带的属性）</p>
</li>
<li>
<p>如果是对象的名称空间，一定只会看到<code>__init__</code>的初始化的属性</p>
</li>
</ul>
<h3 id="（2）元类的使用">（2）元类的使用</h3>
<ul>
<li>学习元类</li>
<li>你可以随意的往里面添加东西</li>
<li>我们可以在元类创键类的过程中进行修改和增加</li>
</ul>
<h4 id="【1】元类的基础使用">【1】元类的基础使用</h4>
<ul>
<li>创建一个 元类</li>
</ul>
```python
class Person(type):
    def __init__(cls, class_name, class_bases, class_name_space):
        # class是当前类的本身
        print(f"{cls}")  # <class '__main__.Student'>
        
        # class_name是当前类的名字
        print(f"{class_name}")  # Student
        
        # class_bases是当前类的父类
        print(f"{class_bases}")  # ()
        
        # class_name_space是当前类的名称空间
        print(f"{class_name_space}")  # {'__module__': '__main__', '__qualname__': 'Student'}
        
        #为了保证类能够正常运行
        super().__init__(class_name, class_bases, class_name_space)


#创建一个继承元类的类
# metaclass 指定元类
class Student(metaclass=Person):
    ...
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### (3)控制类名首字母必须大写</span><br><span class="line"></span><br><span class="line">- 控制当前类名首字母必须大写，不大写就会报错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#创建一个元类</span><br><span class="line">classclass Person(type):</span><br><span class="line">    def __init__(cls, class_name, class_bases, class_name_space):</span><br><span class="line">        # class_name是当前类的名字</span><br><span class="line">        print(f&quot;&#123;class_name&#125;&quot;)  # Student</span><br><span class="line">        if not class_name.istitle():</span><br><span class="line">            raise TypeError(f&quot;&#123;class_name&#125;首字母必须大写!&quot;)</span><br><span class="line">        super().__init__(class_name, class_bases, class_name_space)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#继承元类的类</span><br><span class="line">class student(metaclass=Person):</span><br><span class="line">    ...</span><br><span class="line">#主动抛出异常</span><br><span class="line">#继承元类的类首字母不大写就会报错，有几个类的首字母不是大写的就会报错</span><br><span class="line">输出：#TypeError: student首字母必须大写!</span><br></pre></td></tr></table></figure>

<h3 id="【4】-call-补充">【4】<code>__call__</code>补充</h3>
<ul>
<li>类（）触发的是元类中的<code>__call__</code></li>
<li>对象（）触发的是父类中的<code>__call__</code></li>
</ul>
```python
class MyType(type):
    def __init__(cls, class_name, class_bases, class_name_space):
        print(f"MyType 的 __init__ 被触发")
        super().__init__(class_name, class_bases, class_name_space)

    # 【三】触发元类中的 __call__ 方法
    def __call__(self, *args, **kwargs):
        # 【四】打印三个参数
        # 【1】当前类本身
        print(f"self :>>>> {self}")  # self :>>>> <class '__main__.MyClass'>
        # 【2】类实例化时候传进来的位置参数
        print(f"args :>>>> {args}")  # args :>>>> ('dream',)
        # 【3】类实例化时候传进来的关键字参数
        print(f"kwargs :>>>> {kwargs}")  # kwargs :>>>> {'age': 18}
        print(f'类名() 触发 MyType 中的 __call__')
        # 【五】如果不写返回值，返回的值默认是就是None
        # 一定要返回一个对象 ---> 自己不会写
        # 自己不知道怎么写但是，以前我不写都能拿到对象 ---> 有人帮你写好了并且是 type 帮你写好了
        # 直接把 type 的拿过来用  super().__call__()
        # 正常返回当前类的对象
        # super() 其实是 type
        obj = super().__call__(*args, **kwargs)
        print(f"obj :>>>> {obj}")  # obj :>>>> <__main__.MyClass object at 0x000002A89A56C4C0>
        # 【六】直接将当前返回的对象返回
        return obj


# 【一】触发 MyType 的 __init__ 方法
class MyClass(metaclass=MyType):
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __call__(self, *args, **kwargs):
        print(f'当前 MyClass 的 对象() 触发了 __call__')


# 【二】MyClass('dream', age=18)类(参数) ---> 触发 MyType 的 __call__ 方法
# 【七】me 接收到的就是 元类：MyType 的 __call__ 方法 返回的 obj 对象
me = MyClass('dream', age=18)
print(me())
输出：#当前 MyClass 的 对象() 触发了 __call__
# None#因为没有返回值
print(me.name)
输出：#dream
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 再用调用`对象（）`之前，元类里面的`__call__`方法必须返回一个对象obj，如果不返回就会报错</span><br><span class="line">  - 因为（me 接收到的就是 `MyType `的` __call__` 方法 返回的 obj 对象）</span><br><span class="line"></span><br><span class="line">- **重点**：类(参数) ---&gt; 触发 的是元类里 的` __call__ `方法</span><br><span class="line">  - 对象()调用的是类里面的`__call__`方法</span><br><span class="line"></span><br><span class="line">### （5）控制类必须通过关键字传参</span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class MyType(type):</span><br><span class="line">    def __init__(cls, class_name, class_bases, class_name_space):</span><br><span class="line">        print(f&quot;MyType 的 __init__ 被触发&quot;)</span><br><span class="line">        super().__init__(class_name, class_bases, class_name_space)</span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        print(f&quot;args :&gt;&gt;&gt;&gt; &#123;args&#125;&quot;)  # args :&gt;&gt;&gt;&gt; (&#x27;tom&#x27;,)</span><br><span class="line">        if args:</span><br><span class="line">            raise TypeError(&quot;必须通过关键字传参！&quot;)</span><br><span class="line">        print(f&quot;kwargs :&gt;&gt;&gt;&gt; &#123;kwargs&#125;&quot;)  # kwargs :&gt;&gt;&gt;&gt; &#123;&#x27;age&#x27;: 18&#125;</span><br><span class="line">        obj = super().__call__(*args, **kwargs)</span><br><span class="line">        return obj</span><br><span class="line"></span><br><span class="line">class MyClass(metaclass=MyType):</span><br><span class="line">    def __init__(self, name, age):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        print(f&#x27;当前 MyClass 的 对象() 触发了 __call__&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#传的全是关键字参数，不会报错</span><br><span class="line">me = MyClass( name=&quot;tom&quot;,age=18)</span><br><span class="line"># 输出：</span><br><span class="line"># MyType 的 __init__ 被触发</span><br><span class="line"># args :&gt;&gt;&gt;&gt; ()</span><br><span class="line"># kwargs :&gt;&gt;&gt;&gt; &#123;&#x27;name&#x27;: &#x27;tom&#x27;, &#x27;age&#x27;: 18&#125;</span><br><span class="line"></span><br><span class="line">#不全是关键字传参就会报错，主动抛出异常</span><br><span class="line">me = MyClass( name=&quot;tom&quot;,age=18)</span><br><span class="line">#输出：</span><br><span class="line"># MyType 的 __init__ 被触发</span><br><span class="line"># args :&gt;&gt;&gt;&gt; (&#x27;tom&#x27;,)</span><br><span class="line"># TypeError: 必须通过关键字传参！#报错信息</span><br></pre></td></tr></table></figure>

<h3 id="【6】总结">【6】总结</h3>
<h4 id="（1）高度定制类的产生过程">（1）高度定制类的产生过程</h4>
<ul>
<li>
<p>在元类的<code>__init__</code>方法里面可以定制-类名，父类，名称空间</p>
</li>
<li>
<p>意思就是要求格式问题。比如类的首字母必须大写</p>
<ul>
<li>案例：要是继承元类的类的首字母不大写就会主动抛出异常（前提是你要设置主动方抛出异常语法）</li>
<li>这些都是在元类里面的<code>__init__</code>里面实行的</li>
</ul>
</li>
</ul>
<h4 id="（2）高度定制对象的产生过程">（2）高度定制对象的产生过程</h4>
<ul>
<li>
<p>意思就是：</p>
<ul>
<li>在没有得到对象之前对对象的属性进行操作</li>
</ul>
</li>
<li>
<p>在元类里面的<code>__call__</code>方法里面可以定制–传参的格式，比如要求必须<strong>位置参数传参</strong>，或者强制要求必须<strong>关键字传参</strong></p>
</li>
</ul>
<h2 id="【三】元类结合-new">【三】元类结合<code>__new__</code></h2>
<ul>
<li><code>__new__</code>和<code>__init__</code>两个方法搭配着用</li>
</ul>
<h3 id="（1）类中的-new">（1）类中的<code>__new__</code>:</h3>
```python
class MyClass(object):
    def __init__(self, name, age):
        print(f"给当前 MyClass 类的对象初始化属性的时候会触发 __init__")
        self.name = name
        self.age = age

    def __call__(self, *args, **kwargs):
        print(f"当前 MyClass 类的对象被调用的时候会触发 __call__")
        return f'当前 MyClass 类 的 __call__ 的返回值 :>>>> {self.name}'

    # 花骨架 有了骨架才能上色
    def __new__(cls, *args, **kwargs):
        print(f"给当前 MyClass 类的对象创建骨架的时候会触发 __new__")

        # 当前类本身
        print(f" MyClass 类 的 __call__ 的 cls :>>>> {cls}")
        # MyClass 类 的 __call__ 的 cls :>>>> <class '__main__.MyClass'>

        # 当前类初始化传的位置参数
        print(f" MyClass 类 的 __call__ 的 args :>>>> {args}")
        # MyClass 类 的 __call__ 的 args :>>>> ('tom',18)

        # 当前类初始化传的关键字参数
        print(f" MyClass 类 的 __call__ 的 kwargs :>>>> {kwargs}")
        # MyClass 类 的 __call__ 的 kwargs :>>>> {}

        # 调用父类 的 object 的 __new__ 帮我搭建好骨架
        obj = object.__new__(cls)  # my = MyClass()
        # 查看当前返回值发现是一个对象
        print(f'obj :>>>> {obj}')
        # obj :>>>> <__main__.MyClass object at 0x000001984B032340>
        # 发现当前对象的民称空间是空的
        print(f'obj.__dict__ :>>>> {obj.__dict__}')
        # obj.__dict__ :>>>> {}
        # 调用自己的 __init__ 方法 初始化属性
        obj.__init__(*args, **kwargs)
        # 给自己的名称空间初始化属性
        print(f'obj.__dict__ :>>>> {obj.__dict__}')
        # obj.__dict__ :>>>> {'name': 'dream', 'age': 18}
        return obj


my = MyClass("tom", 18)
# 输出：#给当前 MyClass 类的对象创建骨架的时候会触发 __new__
#  MyClass 类 的 __call__ 的 cls :>>>> <class '__main__.MyClass'>
#  MyClass 类 的 __call__ 的 args :>>>> ('tom', 18)
#  MyClass 类 的 __call__ 的 kwargs :>>>> {}
# obj :>>>> <__main__.MyClass object at 0x000001A5EBE17EE0>
# obj.__dict__ :>>>> {}
# 给当前 MyClass 类的对象初始化属性的时候会触发 __init__
# obj.__dict__ :>>>> {'name': 'tom', 'age': 18}
# 给当前 MyClass 类的对象初始化属性的时候会触发 __init__
my()
# 输出：当前 MyClass 类的对象被调用的时候会触发 __call__
完成对象属性的初始化
print(f"{my.name}")
#tom
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 类() 调用 </span><br><span class="line">  - 一定会触发` __init__ `初始化对象的属性</span><br><span class="line">    -  `__init__ ` 给你人体骨架上个色</span><br><span class="line">  - 在调用`  __init__  `之前要调用` __new__  `</span><br><span class="line">    - ` __new__ `相当于将你人体的骨架搭建好</span><br><span class="line"></span><br><span class="line">### （2）元类中的`__new__`</span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class MyType(type):</span><br><span class="line">    def __new__(cls, *args, **kwargs):</span><br><span class="line">        # 当前类本身</span><br><span class="line">        print(cls)#&lt;class &#x27;__main__.MyType&#x27;&gt;</span><br><span class="line">        # 当前类初始化传的位置参数</span><br><span class="line">        print(args)#(&#x27;MyClass&#x27;, (), &#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__qualname__&#x27;: &#x27;MyClass&#x27;, &#x27;__init__&#x27;: &lt;function MyClass.__init__ at 0x0000014467309CF0&gt;, &#x27;__call__&#x27;: &lt;function MyClass.__call__ at 0x0000014467309D80&gt;&#125;)</span><br><span class="line">        # 当前类初始化传的关键字参数</span><br><span class="line">        print(kwargs)#&#123;&#125;</span><br><span class="line">        # 让父类帮忙构建骨架</span><br><span class="line">        obj = type.__new__(cls,*args, **kwargs)</span><br><span class="line">        print(obj)#&lt;class &#x27;__main__.MyClass&#x27;&gt;</span><br><span class="line">        print(obj.__dict__)#&#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__init__&#x27;: &lt;function MyClass.__init__ at 0x0000014467309CF0&gt;, &#x27;__call__&#x27;: &lt;function MyClass.__call__ at 0x0000014467309D80&gt;, &#x27;__dict__&#x27;: &lt;attribute &#x27;__dict__&#x27; of &#x27;MyClass&#x27; objects&gt;, &#x27;__weakref__&#x27;: &lt;attribute &#x27;__weakref__&#x27; of &#x27;MyClass&#x27; objects&gt;, &#x27;__doc__&#x27;: None&#125;</span><br><span class="line">        return obj</span><br><span class="line">	</span><br><span class="line">    #</span><br><span class="line">    def __init__(cls, class_name, class_bases, class_name_space):</span><br><span class="line">        super().__init__(class_name, class_bases, class_name_space)</span><br><span class="line">	</span><br><span class="line">    #调用类名（）试行</span><br><span class="line">    def __call__(cls, *args, **kwargs):</span><br><span class="line">        print(f&quot;MyType.args&#123;args&#125;&quot;)#MyType.args()</span><br><span class="line">        print(f&quot;MyType.kwargs&#123;kwargs&#125;&quot;)#MyType.kwargs&#123;&#x27;name&#x27;: &#x27;tom&#x27;&#125;</span><br><span class="line">        obj = super().__call__(*args, **kwargs)</span><br><span class="line">        return obj</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MyClass(metaclass=MyType):</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    def __call__(self, *args, **kwargs):</span><br><span class="line">        print(&quot;MyClass&gt;&gt;&gt;&gt;__call__&quot;)</span><br><span class="line">        return f&quot;当前 MyClass 类 的 __call__ 的返回值 :&gt;&gt;&gt;&gt; &#123;self.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">my = MyClass(name=&quot;tom&quot;)</span><br><span class="line">输出：#&lt;class &#x27;__main__.MyType&#x27;&gt;</span><br><span class="line"># (&#x27;MyClass&#x27;, (), &#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__qualname__&#x27;: &#x27;MyClass&#x27;, &#x27;__init__&#x27;: &lt;function MyClass.__init__ at 0x0000026782249CF0&gt;, &#x27;__call__&#x27;: &lt;function MyClass.__call__ at 0x0000026782249D80&gt;&#125;)</span><br><span class="line"># &#123;&#125;</span><br><span class="line"># &lt;class &#x27;__main__.MyClass&#x27;&gt;</span><br><span class="line"># &#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__init__&#x27;: &lt;function MyClass.__init__ at 0x0000026782249CF0&gt;, &#x27;__call__&#x27;: &lt;function MyClass.__call__ at 0x0000026782249D80&gt;, &#x27;__dict__&#x27;: &lt;attribute &#x27;__dict__&#x27; of &#x27;MyClass&#x27; objects&gt;, &#x27;__weakref__&#x27;: &lt;attribute &#x27;__weakref__&#x27; of &#x27;MyClass&#x27; objects&gt;, &#x27;__doc__&#x27;: None&#125;</span><br><span class="line"># MyType.args()</span><br><span class="line"># MyType.kwargs&#123;&#x27;name&#x27;: &#x27;tom&#x27;&#125;</span><br><span class="line"></span><br><span class="line">my()</span><br><span class="line">输出：#MyClass&gt;&gt;&gt;&gt;__call__</span><br><span class="line"></span><br><span class="line">MyClass(&quot;tom&quot;)</span><br><span class="line">输出：#MyType.args(&#x27;tom&#x27;,)</span><br><span class="line"># MyType.kwargs&#123;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>类() 调用
<ul>
<li>一定会触发<code>__init__</code>初始化对象的属性
<ul>
<li><code>__init__ </code> 给你人体骨架上个色</li>
</ul>
</li>
<li>在调用<code> __init__ </code>之前要调用<code>__new__ </code>
<ul>
<li><code>__new__</code>相当于将你人体的骨架搭建好</li>
</ul>
</li>
</ul>
</li>
<li>先试行<code>__new__</code>在试行<code>__init__</code></li>
<li>调用类名（参数）的时候试行 元类里面的<code>__call__</code></li>
<li>调用对象（）的时候试行类里面的<code>__call__</code></li>
</ul>
<h3 id="（3）总结">（3）总结</h3>
<ul>
<li>
<p><code>__new__</code>是一个静态方法，它负责创建并返回一个新对象。当你调用一个类（如<code>A()</code>）时，<code>__new__</code>方法首先被调用，用于创建实例。</p>
</li>
<li>
<p>元类的<code>__new__</code>方法用于创建类对象。</p>
</li>
<li>
<p>类的<code>__new__</code>方法用于<strong>实例化对象</strong>。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/6.0css%E4%B9%8B%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%B5%AE%E5%8A%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/6.0css%E4%B9%8B%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%B5%AE%E5%8A%A8/" class="post-title-link" itemprop="url">6.0css之盒子模型和浮动</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>css之盒子模型和浮动</h1>
<h2 id="【一】盒子模型">【一】盒子模型</h2>
<h3 id="【1】什么是盒子模型">【1】什么是盒子模型</h3>
<ul>
<li>盒子模型就是指在网页设计中，用于描述和布局元素的一种模型</li>
<li>将每个元素看作一个具有四边形的矩形盒子，分为：内容区域（content）、内边距（padding）、边框（border）、外边距（margin）</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240607150101860.png" alt="image-20240607150101860"></p>
<h3 id="【2】盒子模型的组成部分">【2】盒子模型的组成部分</h3>
<ol>
<li>内容区域–》content
<ul>
<li>实际内容区域，比如文本，图片等</li>
</ul>
</li>
<li>内边距–》padding
<ul>
<li>内容区域和边框之间的空间，控制内容与边框之间的距离</li>
</ul>
</li>
<li>边框–》border
<ul>
<li>围绕内容区域与内边框的线条，用于给元素添加外观和样式</li>
</ul>
</li>
<li>外边距–》margin
<ul>
<li>边框与其他元素之间的空间，用于控制元素与周围元素之间的距离</li>
</ul>
</li>
</ol>
<h3 id="【3】应用">【3】应用</h3>
<ul>
<li>margin ：auto–》居中</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #d1{
            /*content就是height和width*/
            height: 200px;
            width: 200px;
        /*    背景颜色*/
            background-color: red;

        /*    定义边框的宽度*/
            border: 2px solid black;

            /*定义边框与外边框的宽度*/
            margin: 20px;/*四面宽度一样*/
            /*margin: 20px 10px;!*上下边 左右边 的外边框到边框的宽度*!*/
            /*margin: 20px 10px 15px ; !*上边 左右边 下边 的外边框到边框的宽度*!*/
            /*margin: 20px 10px 15px 25px; !*上边 右边 下边 左边 的外边框到边框的宽度*!*/

            /*定义内边框与边框的宽度*/
            /*padding: 5px 10px 20px 15px; !*上 右 下 左 内容区域与边框之间的空间*!*/
            /*padding: 5px 10px 20px; !*上 右左 下 内容区域与边框之间的空间*!*/
            /*padding: 5px 10px; !*上下 右左 内容区域与边框之间的空间*!*/
            padding: 5px; /*四面一样 内容区域与边框之间的空间*/
        }
        #d2{
            height: 100px;
            width: 100px;
            background-color: darkblue;
            border: 1px solid black;
            /*auto：居中*/
            margin: auto;
            padding: 10px;
        }
        body{
            margin: 0;
        }
    </style>
</head>
<body>
<div id="d1">
    这是div标签d1
</div>
<p id="d2">这是p标签</p>
<span>这是span标签</span>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【二】浮动</span><br><span class="line"></span><br><span class="line">### 【1】什么是浮动</span><br><span class="line"></span><br><span class="line">- 浮动是可以将块级标签浮动起来脱离正常的文档流并浮动起来</span><br><span class="line">  - 脱离文档流的意思：元素被设置为浮动后，它将不会在占据文档流的空间，其他会忽略浮动元素的存在，并填充原先的位置</span><br><span class="line"></span><br><span class="line">### 【2】浮动的作用</span><br><span class="line"></span><br><span class="line">- 当元素浮动时，它会尽量向页面的左侧或右侧移动，直到遇到其他浮动元素或文档边界，可以设置向左向右浮动</span><br><span class="line">- 多个块级标签可以在一行显示，全部飘在空中</span><br><span class="line">- 脱离页面，浮动在页面上</span><br><span class="line">  - 注意的是本身多大，浮起来之后就占多大</span><br><span class="line"></span><br><span class="line">### 【3】浮动的影响力</span><br><span class="line"></span><br><span class="line">- 浮动会影响父标签的塌陷</span><br><span class="line">- 浮动元素有时候会出现遮挡住地下的区域</span><br><span class="line"></span><br><span class="line">- 如果区域内有文本内容，那么浏览器会遵循文本内容优先展示的原则 会想法设法让文本展示出来</span><br><span class="line"></span><br><span class="line">### 【4】案例和问题解析</span><br><span class="line"></span><br><span class="line">- `左浮动：float：left;`</span><br><span class="line">- `右浮动：float：right;`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #d1&#123;</span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            /*背景颜色*/</span><br><span class="line">            background-color: red;</span><br><span class="line">            /*左浮动*/</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        #d2&#123;</span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            /*背景颜色*/</span><br><span class="line">            background-color: deeppink;</span><br><span class="line">            /*右浮动*/</span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line">        #d3&#123;</span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            /*背景颜色*/</span><br><span class="line">            background-color: cyan;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        #d4&#123;</span><br><span class="line">            /*边框*/</span><br><span class="line">            border: 6px solid darkblue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;d4&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;d1&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;d2&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;d3&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>这样会有一个问题，就是悬浮的两个标签的下一个标签就会消失</li>
<li>标签div id=&quot;d3&quot;就会消失</li>
<li>解决办法</li>
</ul>
```css
/*可以写成公共属性*/
            /*加一个属性clear：both，，，消除浮动*/
            .c1{
            clear:both ;
        }
/*clear:left 消除左边的浮动*/
/*clear：right 消除右边的浮动*/
``````

<p>html</p>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
            /*可以写成公共属性*/
            /*加一个属性clear：both，，，消除悬浮*/
            .c1{
            clear:both ;
        }
        #d1{
            height: 200px;
            width: 200px;
            /*背景颜色*/
            background-color: red;
            /*左浮动*/
            float: left;
        }
        #d2{
            height: 200px;
            width: 200px;
            /*背景颜色*/
            background-color: deeppink;
            /*右浮动*/
            float: right;
        }
        #d3{
            height: 200px;
            width: 200px;
            /*背景颜色*/
            background-color: cyan;
        }
        #d4{
            /*边框*/
            border: 6px solid darkblue;
        }
<pre><code>&lt;/style&gt;
</code></pre>
</head>
<body>
<div id="d4">
    <div id="d1"></div>
    <div id="d2"></div>
    <div class="c1" id="d3"></div>
</div>
</body>
</html>
```



## 【三】溢出属性

### 【1】什么是溢出属性

- 溢出属性就是标签给了一个范围，但是文本信息量太大，装不下，就会导致信息溢出

### 【2】问题



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line">html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        p&#123;</span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            background-color: deeppink;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;古代文化常识：包括天文历法、地理、官职、科举礼仪、称谓名号等。</span><br><span class="line">文学作品及作家：涉及《三字经》《百家姓》《千字文》《四书》《五经》等经典作品，以及《三国演义》《水浒传》《西游记》《红楼梦》等四大名著。</span><br><span class="line">文学体裁及理论：包括诗歌、小说、散文、戏剧等四大类别，以及文学批评、文学理论等专著。</span><br><span class="line">文学史上的重要事件和人物：如文学的起源、发展，以及屈原、司马迁、李白、杜甫等文学史上的重要人物和作品</span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240609122405042](D:\pycharm\Temporary_notes\图片\image-20240609122405042.png)</span><br><span class="line"></span><br><span class="line">### 【3】解决问题</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>css<br>
/* overflow: visable 默认是可见，溢出还是展示 <em>/<br>
/<em>overflow: hidden; !</em> 溢出部分直接隐藏 <em>!</em>/<br>
/<em>overflow: scroll; !</em> 字体内容可以滚动 <em>!</em>/<br>
overflow: auto; /</em> 自动 */</p>
```````html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        p{
            height: 200px;
            width: 200px;
            background-color: deeppink;
            overflow: auto;
        }
    </style>
</head>
<body>
<p>古代文化常识：包括天文历法、地理、官职、科举礼仪、称谓名号等。
文学作品及作家：涉及《三字经》《百家姓》《千字文》《四书》《五经》等经典作品，以及《三国演义》《水浒传》《西游记》《红楼梦》等四大名著。
文学体裁及理论：包括诗歌、小说、散文、戏剧等四大类别，以及文学批评、文学理论等专著。
文学史上的重要事件和人物：如文学的起源、发展，以及屈原、司马迁、李白、杜甫等文学史上的重要人物和作品
</p>

</body>
</html>
````

<h3 id="【4】头像案例">【4】头像案例</h3>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body{
            /*最外框为0，就是清楚最外框*/
            margin: 0;
        }
        div{
            height: 200px;
            width: 200px;
            /*边框*/
            border: 2px solid red;
            /*得到一个圆*/
            border-radius: 50%;
            /*背景颜色*/
            background-color: deeppink;
            /*最外围边框为零，auto左右边距相同*/
            margin: 0 auto;
            /*溢出部分直接隐藏*/
            overflow: hidden;
        }
        img{
            /*图片占据100%*/
            width: 100%;
        }
    </style>
</head>
<body>
<div>
    <img src="f3cc-knqqqmv1022303.jpg" alt="">
</div>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【四】定位</span><br><span class="line"></span><br><span class="line">### 【1】定位的四种方式</span><br><span class="line"></span><br><span class="line">1. 相对定位（Relative Positioning）</span><br><span class="line">   - 元素相对于其正常位置进行定位。</span><br><span class="line">   - 根据上一个标签进行偏移</span><br><span class="line">2. 绝对定位（Absolute Positioning）</span><br><span class="line">   - 元素相对于最近的已定位祖先元素（而非通常的块父元素）进行定位，如果没有已定位的祖先元素，那么它会相对于最初的包含块（通常是HTML元素）进行定位。</span><br><span class="line">3. 固定定位（Fixed Positioning）</span><br><span class="line">   - 元素相对于浏览器窗口进行定位，即使页面滚动，它也会始终停留在同一的位置。</span><br><span class="line">4. 静态定位（Static Positioning）：默认值。</span><br><span class="line"></span><br><span class="line">### 【2】案例</span><br><span class="line"></span><br><span class="line">- 绝对定位和固定定位</span><br><span class="line">- 绝对定位就是好比浏览器页面，你滑动滚轮你定位的信息就会随着滑轮滑动而滑动</span><br><span class="line">  - 就是根据你的浏览器上面的边框定位的</span><br><span class="line">- 固定定位就是好比浏览器页面，你滑动滚轮你定位的信息就会定在哪里，不会改变，永远出现在你的视野里</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #d1 &#123;</span><br><span class="line">            height: 100px;</span><br><span class="line">            width: 100px;</span><br><span class="line">            background-color: red;</span><br><span class="line">            left: 50px; /* 相较于原来的位置从左向右移动50px 如果是负数，方向则相反*/</span><br><span class="line">            top: 50px; /* 相较于原来的位置从上向下移动50px 如果是负数 方向则相反 */</span><br><span class="line">            /*position: static; !* 默认是 static 无法修改位置 *!*/</span><br><span class="line">            /*position: relative; !* 相对定位*!*/</span><br><span class="line">            /*绝对定位*/</span><br><span class="line">            /*position: absolute;*/</span><br><span class="line">            /*固定定位*/</span><br><span class="line">            position: fixed;</span><br><span class="line">        &#125;</span><br><span class="line">        #d2&#123;</span><br><span class="line">            height: 100px;</span><br><span class="line">            width: 100px;</span><br><span class="line">            background-color: brown;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div id=&quot;d1&quot;&gt;这是绝对定位&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;d2&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240609132411796.png" alt="image-20240609132411796"></p>
<h2 id="【五】浮动和定位是否脱离文档流">【五】浮动和定位是否脱离文档流</h2>
<ul>
<li>
<p>文档流</p>
<ul>
<li>在文档流中，元素按照其在HTML中出现的顺序依次排列，并且每个元素都占据一定的空间（包括内容、内边距和边框）。</li>
</ul>
</li>
<li>
<p>脱离文档流</p>
<ul>
<li>元素不再按照文档流的正常规则进行排列和定位，而是被从文档流中“移除”或“脱离”，不再占据文档流中的空间</li>
</ul>
</li>
</ul>
<h3 id="【1】不脱离文档流">【1】不脱离文档流</h3>
<ul>
<li>相对定位</li>
</ul>
<h3 id="【2】脱离文档流">【2】脱离文档流</h3>
<ul>
<li>浮动</li>
<li>固定定位</li>
<li>绝对定位</li>
</ul>
<h2 id="【六】z-index模态框">【六】z-index模态框</h2>
<h3 id="【1】什么是z-index模态框">【1】什么是z-index模态框</h3>
<ul>
<li>动态弹出的分界层就是z-index模态框</li>
</ul>
<h3 id="【2】层级">【2】层级</h3>
<ul>
<li>比如：百度的登入界面，有三层
<ol>
<li>最底层就是正常的内容，最远的</li>
<li>黑色的透明层，中间层</li>
<li>最后才是白色的登入和注册层，最近的</li>
</ol>
</li>
</ul>
<h3 id="【3】案例">【3】案例</h3>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        /*z-index模态框：控制当前页面的权重，数字越大权重越高*/
        .c1{
        /*    最底层定义背景色*/
            background-color: azure;
        }
        .c2{
        /*    给它一个定位*/
        /*    相对于浏览器窗口定位*/
            position: fixed;
        /*    我们需要铺满屏幕所以把偏移数据全部设为零*/
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        /*   背景颜色,也可以填数值*/
            background-color: rgb(127,127,127);
        /*    z-index框的数值*/
            z-index: 99;
        }
        .c3{
        /*    数值*/
            z-index: 100;
            height: 200px;
            width: 500px;
        /*  背景颜色  */
            background-color: snow;
            /*相对于浏览器窗口定位*/
            position: fixed;
            /*水平居中块级元素*/
            /*auto：表示元素的左外边距（margin-left）和右外边距（margin-right）是自动的。*/
            /*margin: 0 auto;*/
            /*修改四个角的弧度*/
            border-top-left-radius: 55pt 25pt;
            border-top-right-radius: 55pt 25pt;
            border-bottom-right-radius: 55pt 25pt;
            border-bottom-left-radius: 55pt 25pt;
        }
        #d1{
        /*    居中对其*/
            text-align: center;
        }
    </style>
</head>
<body>
<!--最低成的白色-->
<div class="c1"></div>
<!--中间层的灰色-->
<div class="c2"></div>
<!--最顶层的登入界面-->
<div class="c3">
    <p id="d1">登入界面</p>
    <form action="">
<!--        输入框-->
        <p>用户名：<input type="text" name="username" placeholder="用户名"></p>
        <p>密码：<input type="text" name="password" placeholder="密码" ></p>
    </form>
<!--    按钮-->
    <p><input type="submit"></p>
</div>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240609145042026](D:\pycharm\Temporary_notes\图片\image-20240609145042026.png)</span><br><span class="line"></span><br><span class="line">## 【七】透明度--》opacity</span><br><span class="line"></span><br><span class="line">### 【1】透明度的理解</span><br><span class="line"></span><br><span class="line">- 透明度不只是可以修改颜色的透明度，还可以修改文字的透明度</span><br><span class="line">- rgba：只能修改颜色的透明度</span><br><span class="line">- opacity：颜色，文字都可以修改</span><br><span class="line"></span><br><span class="line">### 【2】案例</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #d1&#123;</span><br><span class="line">            background-color: deeppink;</span><br><span class="line">            opacity: 0.5;</span><br><span class="line">        &#125;</span><br><span class="line">        #d2&#123;</span><br><span class="line">            background-color: deeppink;</span><br><span class="line">            opacity: 0.1;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p id=&quot;d1&quot;&gt;这是块级标签p&lt;/p&gt;</span><br><span class="line">&lt;div id=&quot;d2&quot;&gt;这是行级标签span&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240609145757263.png" alt="image-20240609145757263"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/5.20%E8%A1%A5%E5%85%85%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/5.20%E8%A1%A5%E5%85%85%EF%BC%8C%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">5.20补充，单例模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>单例模式</h1>
<ul>
<li>学习单例模式就是为了，防止内存地址混乱</li>
<li>实例化得到一个对象，内存地址相同</li>
</ul>
<h2 id="【一】什么是单例模式">【一】什么是单例模式</h2>
<ul>
<li>单例设计模式（Singleton Design Pattern）：一个类只允许创建一个对象（或者实例），那么这个类就是一个单例类，这种设计模式就叫作单例设计模式，简称单例模式。</li>
<li>当一个类的功能比较单一，只需要一个实例对象就可以完成需求时，就可以使用单例模式来节省内存资源。</li>
</ul>
<p><strong>【通常】单例模式创建的对象是进程唯一的, 单例类中对象的唯一性的作用范围是进程内的，在进程间是不唯一的。</strong></p>
<h2 id="【二】实现单例模式的方法">【二】实现单例模式的方法</h2>
<ul>
<li>使用模块</li>
<li>使用装饰器</li>
<li>使用类（方法）</li>
<li>基于<code>__new__</code>方法实现</li>
<li>基于元类metaclass实现</li>
</ul>
<h2 id="【三】类属性">【三】类属性</h2>
<h3 id="1-类产生对象">(1)类产生对象</h3>
<ul>
<li>创建一个普通的类</li>
</ul>
```python
class MysqlControl(object):
    ...

#类只要加 () 实例化就会产生一个全新的对象
one = MysqlControl()
two = MysqlControl()
#查看对象  --- 发现虽然是同一个类实例化得到的对象，但是对象的地址不一样
print(one)#<__main__.MysqlControl object at 0x0000025C0F2FFFD0>
print(two)#<__main__.MysqlControl object at 0x0000025C0F2FECB0>

print(one is two)#False
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 虽然是同一个类实例化得到的对象，但是对象的地址不一样</span><br><span class="line"></span><br><span class="line">### （2）类属性包装成方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class Singleton(object):</span><br><span class="line">    _instance = None</span><br><span class="line"></span><br><span class="line">    def __init__(self, ip, port):</span><br><span class="line">        self.ip = ip</span><br><span class="line">        self.port = port</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def get_instance(cls):</span><br><span class="line">        if cls._instance is None:</span><br><span class="line">            cls._instance = Singleton(&#x27;127.0.0.1&#x27;, 3306)</span><br><span class="line">        return cls._instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj_one = Singleton.get_instance()</span><br><span class="line">obj_two = Singleton.get_instance()</span><br><span class="line"></span><br><span class="line">print(obj_one)</span><br><span class="line">#&lt;__main__.Singleton object at 0x00000226E33B7E80&gt;</span><br><span class="line">print(obj_two)</span><br><span class="line"># &lt;__main__.Singleton object at 0x00000226E33B7E80&gt;</span><br><span class="line">print(obj_one is obj_two)</span><br><span class="line"># True</span><br><span class="line"># 输出 True，表示是同一个实例</span><br></pre></td></tr></table></figure>

<ul>
<li>使用类属性保存属性，通过类方法获取实例</li>
<li>在第一次调用<code>get_instance</code>方法时创建实例，并在后续调用中直接返回该实例。</li>
</ul>
<h3 id="3-装饰器">(3)装饰器</h3>
```python
def singleton(cls):
    instances = {}

    def wrapper(*args, **kwargs):
        if cls not in instances:
            instances[cls] = cls(*args, **kwargs)
            print(cls)#<class '__main__.Singleton'>
            #得到一个字典，{类：对象}
            print(instances)#{<class '__main__.Singleton'>: <__main__.Singleton object at 0x000002D50E217E20>}
            #字典的特性，键取值
            print(instances[cls])#得到对象#<__main__.Singleton object at 0x000002D50E217E20>
        #存在直接返回对象
        return instances[cls]

    return wrapper


@singleton
class Singleton:
    pass


singleton_one = Singleton()
singleton_two = Singleton()
print(singleton_one)
# <__main__.Singleton object at 0x000001C0B531A770>
print(singleton_two)
# <__main__.Singleton object at 0x000001C0B531A770>
print(singleton_one is singleton_two)
# True
# 输出 True，表示是同一个实例

# # 使用 __call__ 方法获取单例
singleton_three = Singleton()
print(singleton_one is singleton_three)
# True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 使用装饰器将原来的类包装成一个新的类，通过闭包和字典保存实例。</span><br><span class="line"></span><br><span class="line">- 在每次实例化时，先检查字典中是否已经存在该类的实例，如果不存在才创建实例并返回。</span><br><span class="line"></span><br><span class="line">### (4)元类（metaclass）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class SingletonType(type):</span><br><span class="line">    def __init__(cls, name, bases, attrs):</span><br><span class="line">        # super(SingletonType, cls).__init__(name, bases, attrs) 这行代码的目的是在创建一个受元类SingletonType控制的类时，确保其基类也被正确地初始化。</span><br><span class="line">        super(SingletonType, cls).__init__(name, bases, attrs)</span><br><span class="line">        print(cls)</span><br><span class="line">        #意思就是无对象生成</span><br><span class="line">        cls.instance = None</span><br><span class="line"></span><br><span class="line">    def __call__(cls, *args, **kwargs):</span><br><span class="line">        # 得到的对象是None时创建新的实例化对象</span><br><span class="line">        # 不是None的话返回已有的对象</span><br><span class="line">        if cls.instance is None:</span><br><span class="line">            #super(SingletonType, cls).__call__(*args, **kwargs)</span><br><span class="line">            #上面的代码，目的是在创建一个受元类SingletonType控制的类</span><br><span class="line">            cls.instance = super(SingletonType, cls).__call__(*args, **kwargs)</span><br><span class="line">        return cls.instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Singleton(metaclass=SingletonType):</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">singleton_one = Singleton()</span><br><span class="line">singleton_two = Singleton()</span><br><span class="line"></span><br><span class="line">print(singleton_one)</span><br><span class="line"># &lt;__main__.Singleton object at 0x000001C0B531A770&gt;</span><br><span class="line">print(singleton_two)</span><br><span class="line"># &lt;__main__.Singleton object at 0x000001C0B531A770&gt;</span><br><span class="line">print(singleton_one is singleton_two)</span><br><span class="line"># True</span><br><span class="line"></span><br><span class="line"># 输出 True，表示是同一个实例</span><br><span class="line"></span><br><span class="line"># # 使用 __call__ 方法获取单例</span><br><span class="line">singleton_three = Singleton()</span><br><span class="line">print(singleton_one is singleton_three)</span><br><span class="line"># True</span><br></pre></td></tr></table></figure>

<ul>
<li>定义一个元类，在元类的<code>__call__</code>方法中判断实例是否已存在，如果不存在则调用父类的<code>__call__</code>方法来创建并返回实例。</li>
</ul>
<h3 id="（5）基于-new-方法">（5）基于<code>__new__</code>方法</h3>
<h4 id="（1）思路">（1）思路</h4>
<ul>
<li>在Python中，对象的实例化过程通常遵循以下步骤：
<ul>
<li>首先，执行类的<code>__new__</code>方法，如果未定义此方法，将默认调用父类的<code>__new__</code>方法来创建一个实例化对象。</li>
<li>接着，再执行<code>__init__</code>方法来对这个新创建的对象进行初始化。</li>
</ul>
</li>
<li>我们可以充分利用这个实例化过程来实现单例模式。
<ul>
<li>具体做法是在类的<code>__new__</code>方法中判断是否已经存在实例，如果存在，则直接返回现有的实例，否则创建一个新的实例。</li>
<li>这样就能够确保只有一个实例存在，从而实现了单例模式的效果。</li>
</ul>
</li>
</ul>
```python
class Singleton(object):
    def __new__(cls, *args, **kwargs):
        #instance相当于一个标志位
        #cls里面有没有这个instance属性，或者实例
        if not hasattr(cls, 'instance'):
            #得到一个对象
            cls.instance = super().__new__(cls)
            #就是为了生成一个对象
            print(super().__new__(cls))##<__main__.Singleton object at 0x000001C03DA97E50>
            print(cls)#<class '__main__.Singleton'>
            print(cls.instance)#<__main__.Singleton object at 0x000001C03DA97E50>
            print(hasattr(cls, 'instance'))#True
            print(cls.instance)#<__main__.Singleton object at 0x00000284256C7E50>
        return cls.instance


singleton_one = Singleton()
singleton_two = Singleton()

print(singleton_one)
#<__main__.Singleton object at 0x000002232A817E80>
print(singleton_two)
# <__main__.Singleton object at 0x000002232A817E80>
print(singleton_one is singleton_two)
# True

# 输出 True，表示是同一个实例

# 使用 __call__ 方法获取单例
singleton_three = Singleton()
print(singleton_one is singleton_three)
# True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 重写`__new__`方法，在实例化对象时判断类中是否已有实例，如果没有则调用父类的`__new__`方法来创建并返回。</span><br><span class="line"></span><br><span class="line">### 【6】基于模块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># singleton.py</span><br><span class="line">class Singleton:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">singleton_instance = Singleton()</span><br></pre></td></tr></table></figure>

<ul>
<li>将实例化操作放在模块级别，通过导入该模块来获取实例。</li>
<li>由于Python模块在运行时只会被导入一次，因此保证了实例的单一性。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/6.0Django%E6%A1%86%E6%9E%B6ORM%E4%B9%8B%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/6.0Django%E6%A1%86%E6%9E%B6ORM%E4%B9%8B%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93/" class="post-title-link" itemprop="url">6.0Django框架ORM之连接数据库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django框架ORM之连接数据库</h1>
<h2 id="【一】连接数据库">【一】连接数据库</h2>
<h3 id="【1】Django自带的数据库">【1】Django自带的数据库</h3>
<ul>
<li>进入sterttings.py文件种，找到<code>DATABASES</code>这个变量对应的数</li>
</ul>
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- Django自带你的有sqlite3数据库</span><br><span class="line"></span><br><span class="line">### 【2】我们想要换成mysql数据库</span><br><span class="line"></span><br><span class="line">- 我们想要连接mysql数据库，</span><br><span class="line">- IP又叫HOST：IP地址 , </span><br><span class="line">- POST：端口  ,</span><br><span class="line">- USER：数据库登入的用户名,</span><br><span class="line">- PASSWORD：数据库登录密码,</span><br><span class="line">- DATABASE：那个数据库,</span><br><span class="line">- CHARSET：编码格式 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 换成mysql数据库</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,</span><br><span class="line">        &#x27;NAME&#x27;: BASE_DIR / &#x27;db.sqlite3&#x27;,</span><br><span class="line">        # 数据库IP地址</span><br><span class="line">        &quot;HOST&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">        # 数据库端口</span><br><span class="line">        &quot;PORT&quot;: 3306,</span><br><span class="line">        # 数据库登入名</span><br><span class="line">        &quot;USER&quot;: &quot;root&quot;,</span><br><span class="line">        # 数据库密码</span><br><span class="line">        &quot;PASSWORD&quot;: &quot;1234567&quot;,</span><br><span class="line">        # 数据库名字--&gt;不要用DATABASE,用NAME</span><br><span class="line">        &quot;NAME&quot;: &quot;&quot;,</span><br><span class="line">        # 数据库编码格式</span><br><span class="line">        &quot;CHARSET&quot;: &quot;utf8mb4&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置好数据库以后启动Django，你会发现报错了</li>
</ul>
```python
Did you install mysqlclient?
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】报错解决办法</span><br><span class="line"></span><br><span class="line">#### （1）第一种解决方案</span><br><span class="line"></span><br><span class="line">- 打猴子补丁</span><br><span class="line">  - 随便找一个文件</span><br><span class="line">  - 在文件里书写以下代码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure>

<ul>
<li>书写完以后你发现在启动，就正常了，就不会报错了</li>
</ul>
<h4 id="（2）第二种解决方法">（2）第二种解决方法</h4>
<ul>
<li>直接下载mysqlclient</li>
</ul>
```shell
pip install mysqlclient
```

<ul>
<li>下载完成以后，点击启动就正常了</li>
<li>也就代表代表连接数据库成功</li>
</ul>
<h1>pycharm数据库</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240618220111722.png" alt="image-20240618220111722"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240618220144189.png" alt="image-20240618220144189"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240618220253659.png" alt="image-20240618220253659"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240618220423378.png" alt="image-20240618220423378"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240618220530614.png" alt="image-20240618220530614"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/6.0%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%AD%90%E6%9F%A5%E8%AF%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/6.0%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%AD%90%E6%9F%A5%E8%AF%A2/" class="post-title-link" itemprop="url">6.0多表查询和子查询</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>多表查询和子查询</h1>
<ul>
<li>多表查询的方式有两种</li>
<li>子查询</li>
<li>联表查询</li>
</ul>
<h2 id="【一】子查询">【一】子查询</h2>
<ul>
<li>
<p>一步步解决问题</p>
</li>
<li>
<p>将一条SQL语句加括号，当做另一条SQL语句的查询条件</p>
</li>
</ul>
<h2 id="【二】联表查询">【二】联表查询</h2>
<ul>
<li>将多张表拼接到一起，形成一张大表，基于单表查询获取数据</li>
</ul>
<h2 id="【三】准备数据">【三】准备数据</h2>
<ul>
<li>创建表</li>
</ul>
```sql
create table dep(
	id int primary key auto_increment,
    name varchar(32)
);


create table emp(
	id int primary key auto_increment,
    name varchar(32),
    sex enum('male','female') not null default 'male',
    age int,
    dep_id int
);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530190830548](D:\pycharm\Temporary_notes\图片\image-20240530190830548.png)</span><br><span class="line"></span><br><span class="line">![image-20240530190842819](D:\pycharm\Temporary_notes\图片\image-20240530190842819.png)</span><br><span class="line"></span><br><span class="line">- 插入数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">insert into dep values </span><br><span class="line">(&#x27;200&#x27;,&#x27;技术部&#x27;),</span><br><span class="line">(&#x27;201&#x27;,&#x27;人力资源&#x27;),</span><br><span class="line">(&quot;202&quot;,&quot;销售部&quot;),</span><br><span class="line">(&quot;203&quot;,&quot;运营部&quot;),</span><br><span class="line">(&quot;204&quot;,&quot;售后部&quot;);</span><br><span class="line"></span><br><span class="line">insert into emp(name,sex,age,dep_id) values (&#x27;dream&#x27;,&#x27;male&#x27;,18,200),</span><br><span class="line">(&quot;chimeng&quot;,&quot;female&quot;,18,201),</span><br><span class="line">(&quot;menmgneg&quot;,&quot;male&quot;,38,202),</span><br><span class="line">(&quot;hope&quot;,&quot;male&quot;,18,203),</span><br><span class="line">(&quot;own&quot;,&quot;male&quot;,28,204),</span><br><span class="line">(&quot;thdream&quot;,&quot;male&quot;,18,205);</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530190759647.png" alt="image-20240530190759647"></p>
<ul>
<li>查看表</li>
</ul>
```sql
desc dep;

desc emp;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530191004470](D:\pycharm\Temporary_notes\图片\image-20240530191004470.png)</span><br><span class="line"></span><br><span class="line">- 查看数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select * from dep;</span><br><span class="line"></span><br><span class="line">select * from emp;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530191050646.png" alt="image-20240530191050646"></p>
<h2 id="【四】子表查询">【四】子表查询</h2>
<ul>
<li>将一个查询语句的结果当做另外一个查询语句的条件去用</li>
</ul>
<h3 id="【1】案例—-获取员工dream所在的部门">【1】案例—&gt;获取员工dream所在的部门</h3>
<ul>
<li>先获取dream所在的部门编号</li>
</ul>
```sql
select dep_id from emp where name='dream';
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530191531046](D:\pycharm\Temporary_notes\图片\image-20240530191531046.png)</span><br><span class="line"></span><br><span class="line">- 得到部门编号--&gt;将得到的部门编号作为体查询部门的条件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select name from dep where id=(</span><br><span class="line">select dep_id from emp where name=&#x27;dream&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530191703609.png" alt="image-20240530191703609"></p>
<h3 id="【2】案例">【2】案例</h3>
<ul>
<li>查询部门是技术或者人力资源的员工信息</li>
<li>先获取部门的ID号，再去员工表里面过滤出对应的员工</li>
</ul>
```sql
select id from dep where name='技术部' or name='人力资源';
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530192542754](D:\pycharm\Temporary_notes\图片\image-20240530192542754.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 将上面的数据作为条件</span><br><span class="line">-- 得到，技术或者人力资源的员工信息</span><br><span class="line"></span><br><span class="line">select name from emp where dep_id in (</span><br><span class="line">select id from dep where name=&#x27;技术部&#x27; or name=&#x27;人力资源&#x27;);</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530192532763.png" alt="image-20240530192532763"></p>
<h2 id="【五】联表查询">【五】联表查询</h2>
<h3 id="【1】补充知识-笛卡尔积">【1】补充知识----&gt;笛卡尔积</h3>
<ul>
<li>
<p>笛卡尔积 ：用于计算两个集合的所有可能的元素组合的数量，的过程。</p>
</li>
<li>
<p>什么是笛卡尔积</p>
<ul>
<li>笛卡尔积是一个数学概念，它描述的是两个集合之间所有可能的元素组合的数量。</li>
<li>具体来说，如果集合A有n个元素，集合B有m个元素，则它们的笛卡尔积的大小为nm。</li>
<li>笛卡尔积是通过组合两个元素来创建一个新的集合的过程</li>
</ul>
</li>
<li>
<p>MySQL中的笛卡尔积</p>
<ul>
<li>在SQL中，当我们使用JOIN操作将两个或更多的表连接在一起时，结果集中的行数是所有连接表的行数的乘积。这就是所谓的笛卡尔积。</li>
<li>例如，假设我们有两个表A和B，其中A有5行，B有3行。</li>
<li>如果我们使用INNER JOIN将这两个表连接起来，那么结果集中将会有5 x 3 = 15行。</li>
<li>这是因为对于每一行A，我们可以从B中选择任意一行进行匹配。</li>
<li>因此，总共有5种不同的方式来组合A表中的每一行和B表中的每一行，这导致了最终结果集的大小为5 x 3 = 15。</li>
<li>这个过程就是笛卡尔积，它是数学中的一种运算，用于计算两个集合的所有可能的元素组合的数量。</li>
<li>在这个情况下，每个元素都是一个表格中的行。</li>
<li>所以，当我们在MySQL中使用JOIN操作时，结果集的大小实际上是所有连接表的行数的乘积，这就是为什么我们称其为笛卡尔积的原因。</li>
</ul>
</li>
<li>
<p>总结</p>
<ul>
<li>笛卡尔因可以帮我们理解数据之间的复杂关系，并为我们提供更深入的数据洞察</li>
</ul>
</li>
</ul>
<h3 id="【2】拼表">【2】拼表</h3>
<ul>
<li>拼好的表的结果就叫笛卡尔积</li>
<li>dep表：5行数据， emp：6行数据
<ul>
<li>笛卡尔因：–》就会有5 * 6 = 30行数据</li>
</ul>
</li>
<li>查询数据</li>
</ul>
```sql
select * from dep,emp;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530193747322](D:\pycharm\Temporary_notes\图片\image-20240530193747322.png)</span><br><span class="line"></span><br><span class="line">### 【3】再次拼表-----》对拼表语句进行修改</span><br><span class="line"></span><br><span class="line">- 查询数据</span><br><span class="line">- `dep.id=emp.dep_id` 两个数据的id相等才会保留</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select * from dep,emp where dep.id=emp.dep_id;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530194524566.png" alt="image-20240530194524566"></p>
<h3 id="【4】拼表关键字">【4】拼表关键字</h3>
<ul>
<li>
<p>inner join : 内连接</p>
<ul>
<li>只有两张表共有的数据才会保留</li>
</ul>
</li>
<li>
<p>left join : 左连接</p>
<ul>
<li>左表所有的数据都展示出来，没有对应的项就会用null表示</li>
</ul>
</li>
<li>
<p>right join ：右连接</p>
<ul>
<li>右表所有的数据都展示出来，没有对应的项就会用null表示</li>
</ul>
</li>
<li>
<p>union : 全连接</p>
<ul>
<li>左右两边的数据都展示出来</li>
</ul>
</li>
</ul>
<h4 id="（1）inner-join-内连接">（1）inner join : 内连接</h4>
<ul>
<li>只有两张表共有的数据才会保留</li>
</ul>
```sql
select * from dep inner join emp on emp.dep_id=dep.id; 
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530195512375](D:\pycharm\Temporary_notes\图片\image-20240530195512375.png)</span><br><span class="line"></span><br><span class="line">#### (2)left join : 左连接</span><br><span class="line"></span><br><span class="line">- 左表所有的数据都展示出来，没有对应的项就用null表示</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select * from emp left join dep on emp.dep_id=dep.id;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530200802524.png" alt="image-20240530200802524"></p>
<h3 id="3-right-join-右连接">(3)right join : 右连接</h3>
<ul>
<li>右表所有的数据都展示出来，没有对应的项就用null表示</li>
</ul>
```sql
select * from dep right join emp on dep.id=emp.dep_id;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530200040765](D:\pycharm\Temporary_notes\图片\image-20240530200040765.png)</span><br><span class="line"></span><br><span class="line">### (4)union : 全连接---&gt;左边的数据  union  右边的数据</span><br><span class="line"></span><br><span class="line">- 两头的数据要是反了就会出现下面这种情况</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select * from dep left join emp on dep.id=emp.dep_id union select * from emp right join dep on emp.dep_id=dep.id;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530200510347.png" alt="image-20240530200510347"></p>
<ul>
<li>正确的全拼接</li>
</ul>
```sql
select * from dep left join emp on dep.id=emp.dep_id union select * from dep right join emp on emp.dep_id=dep.id;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530200556207](D:\pycharm\Temporary_notes\图片\image-20240530200556207.png)</span><br><span class="line"></span><br><span class="line">## 【总结】</span><br><span class="line"></span><br><span class="line">- 学了联表操作以后就可以将n张表连接到一起了</span><br><span class="line">- 怎么将将n张表连接到一起呢？？？？</span><br><span class="line">  - 将两张表拼接之后的结果起别名当做一张表使用</span><br><span class="line">  - 再将拼接好的表跟另外一张表拼接，以此类推</span><br><span class="line"></span><br><span class="line">## 【补充】关键字exists</span><br><span class="line"></span><br><span class="line">- 关键字exists，只返回布尔值</span><br><span class="line">- 返回False，不执行外部语句</span><br><span class="line">- 返回True，执行外部语句</span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">select * from emp where exists (select id from dep where id&gt;3);</span><br><span class="line"></span><br><span class="line">-- exists 接收到的是True，外部语句执行</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530201748881.png" alt="image-20240530201748881"></p>
```sql
select * from emp where exists (select id from dep where id>520);

-- exists 接收到的bool值是False，不执行外部语句
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530201935226](D:\pycharm\Temporary_notes\图片\image-20240530201935226.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【练习题】</span><br><span class="line"></span><br><span class="line">- 查询平均年龄在25岁以上的部门名称</span><br><span class="line"></span><br><span class="line">方法一 ：--》用联表，内连接</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 将两个连接起来</span><br><span class="line"></span><br><span class="line">select * from emp inner join dep on emp.dep_id=dep.id;</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530203111437.png" alt="image-20240530203111437"></p>
```sql
-- 表连起来以后，分组
-- 因为每个部门只有一个人，看不出来多大的效果

select dep.name,age from emp inner join dep on dep.id=emp.dep_id group by dep.name;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240530204132853](D:\pycharm\Temporary_notes\图片\image-20240530204132853.png)</span><br><span class="line"></span><br><span class="line">- 总和---》得到结果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```sql</span><br><span class="line">-- 先连接表，在按部门分组，再筛选出平均年龄为25岁以上的部门</span><br><span class="line"></span><br><span class="line">select dep.name from dep inner join emp on dep.id=emp.dep_id group by dep.name having avg(age)&gt;25;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530203808355.png" alt="image-20240530203808355"></p>
<ul>
<li>查询平均年龄在25岁以上的部门名称</li>
</ul>
<p>方法二 : --&gt;用子查询</p>
```sql
-- 先分组，再筛选平均工资

select dep_id from emp group by dep_id having avg(age)>25;

-- 将上面的数据当作条件用

select name from dep where id in (select dep_id from emp group by dep_id having avg(age)>25);
```

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240530205344188.png" alt="image-20240530205344188"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/7.0Dango%E6%A1%86%E6%9E%B6%E4%B9%8B%E8%B7%AF%E7%94%B1%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/7.0Dango%E6%A1%86%E6%9E%B6%E4%B9%8B%E8%B7%AF%E7%94%B1%E5%B1%82/" class="post-title-link" itemprop="url">7.0Dango框架之路由层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django路由系统</h1>
<h2 id="【一】什么是URL配置">【一】什么是URL配置</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.djangoproject.com/zh-hans/3.2/topics/http/urls/">URL调度器 | Django 文档 | Django (djangoproject.com)</a>、</li>
<li>URL配置(URLconf)就像Django 所支撑网站的目录。
<ul>
<li>它的本质是URL与要为该URL调用的视图函数之间的映射表。</li>
</ul>
</li>
<li>你就是以这种方式告诉Django，对于这个URL调用这段代码，对于那个URL调用那段代码</li>
</ul>
<h3 id="【1】Djnago的语法变革">【1】Djnago的语法变革</h3>
<h4 id="（1）Django1-x版本语法">（1）Django1.x版本语法</h4>
<ul>
<li>比如我们想写一个登入函数的路由就要在前面加一个r
<ul>
<li><code>r'^admin/'</code>：必须与admin开头</li>
</ul>
</li>
</ul>
```python
from  from django.conf.urls import url
 
 urlpatterns = [
     url(r'^admin/', admin.site.urls, name='admin',别名)，
     
     url(正则表达式，views视图函数，参数，别名)，
 ]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### （2）Django2.x+版本语法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.urls import path, re_path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&quot;路径&quot;,视图函数)，</span><br><span class="line">    #正则书写方法</span><br><span class="line">    re_path(&quot;正则表达式&quot;,视图函数)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="【2】路由匹配">【2】路由匹配</h3>
<h4 id="（1）路径参数相似及解决方案">（1）路径参数相似及解决方案</h4>
<ul>
<li>
<p>根据路径参数匹配指定的视图函数</p>
</li>
<li>
<p>在views.py中做两个视图函数</p>
</li>
</ul>
```python
from django.shortcuts import HttpResponse



def one(request):
    return HttpResponse("6666")


def two(request):
    return HttpResponse("8888")

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 在再urls.py中做两个路由</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">    path(&quot;aaa/&quot;, one),</span><br><span class="line">    </span><br><span class="line">    path(&quot;aaaa/&quot;, two)</span><br></pre></td></tr></table></figure>

<ul>
<li>用正则方法写urls.py中做两个路由
<ul>
<li>路由匹配：<code>http://localhost:8000/aaaa</code></li>
<li>显示结果：666
<ul>
<li>得到的结果应该是</li>
<li>8888</li>
</ul>
</li>
</ul>
</li>
</ul>
```python
re_path(r'^aaa', aaa),
re_path(r'^aaaa', bbb),
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 解决方法就是在后面放一个/</span><br><span class="line">  - 只有遇到/才认为是当前路径结束</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">re_path(r&#x27;^aaa/&#x27;, aaa),</span><br><span class="line">re_path(r&#x27;^aaaa/&#x27;, bbb),</span><br></pre></td></tr></table></figure>

<h3 id="【补充】">【补充】</h3>
```python
Django默认会给你加 /
# http://localhost:8000/aaaa
# 当在浏览器地址结尾没有 加 / 的时候
默认会匹配两次
# 访问指定路径会匹配两次 第一次 不带 /
# 访问指定路径会匹配两次 第二次 带 /
# 如果上面两个都找不到  ---就会报错，黄色的页面 page not found
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【二】有名分组和无名分组</span><br><span class="line"></span><br><span class="line">- 有名和无名用正则写</span><br><span class="line"></span><br><span class="line">- 有名分组和无名分组是定义在url匹配规则的时候让最后的路径参数有没有名字而定的</span><br><span class="line">- get请求</span><br><span class="line">- 有名分组：`http://127.0.0.1:8000/?username=dream`</span><br><span class="line">- 无名分组：`http://127.0.0.1:8000/?tom`</span><br><span class="line"></span><br><span class="line">### 【1】无名分组</span><br><span class="line"></span><br><span class="line">- 比如：`http://127.0.0.1:8000/?tom`</span><br><span class="line"></span><br><span class="line">- 定义在url匹配规则的时候让最后的路径参数没有名字</span><br><span class="line">- `http://127.0.0.1:8000/no_name/2`</span><br><span class="line"></span><br><span class="line">在urls.py定义</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">re_path(r&quot;^no_name/(d+)/&quot;,no_name)</span><br></pre></td></tr></table></figure>

<p>在views.py中定义</p>
```python
def no_name(request,*ages,**kwargs):
    print(args), # ('2',)
    print(kwargs) #{}
    return HttpResponse("you_name")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】有名分组</span><br><span class="line"></span><br><span class="line">- 比如：`http://127.0.0.1:8000/?username=dream`</span><br><span class="line"></span><br><span class="line">- 定义在url匹配规则的时候让最后的路径参数有名字</span><br><span class="line">- `http://127.0.0.1:8000/name/3`</span><br><span class="line"></span><br><span class="line">在urls.py定义</span><br><span class="line"></span><br><span class="line">- (?P&lt;键名字&gt;正则规则)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">re_path(r&#x27;^name/(?P&lt;id&gt;\d+)&#x27;, name)</span><br></pre></td></tr></table></figure>

<p>在views.py中定义</p>
```python
def name(request, *args, **kwargs):
    print(args)  # ()
    print(kwargs)  # {'id': '3'}
    return HttpResponse("name")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】Djang2+已经取消了无名分组，只有有名分组</span><br><span class="line"></span><br><span class="line">- 在urls.py中定义</span><br><span class="line">- int：类型</span><br><span class="line">- pk：键值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&quot;url_name/&lt;int:pk&gt;/&quot;, url_name)</span><br></pre></td></tr></table></figure>

<ul>
<li>在views.py中定义</li>
</ul>
```python
def url_name(request, *args, **kwargs):
    print(args)
    print(kwargs) # {'pk': 2}
    return HttpResponse("url_name")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【4】无名分组和有名分组混合使用</span><br><span class="line"></span><br><span class="line">- 无名和有名不能混合使用</span><br><span class="line">- 访问不到此页面</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&quot;url_name/&lt;int:pk&gt;/(\d+)/&quot;, url_name)  # 错误的</span><br></pre></td></tr></table></figure>

<h1>反向解析</h1>
<h2 id="【一】什么是反向解析">【一】什么是反向解析</h2>
<ul>
<li></li>
</ul>
<h2 id="【二】问题引入">【二】问题引入</h2>
<ul>
<li>我们在urls.py文件中定义一个路由</li>
</ul>
```python
path('user/admin/login/', login)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 我们在前端的a标签中用这个路由</span><br><span class="line">  - 路径很长，我们后期维护也不好维护，修改了，就要全部修改，很麻烦</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;a href=&quot;http://127.0.0.1:8000/user/admin/login/&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【三】解决问题">【三】解决问题</h2>
<ul>
<li>
<p>Django为我们提供了一个参数<code>name</code>,在path中的参数，可以快速的实现路径的访问</p>
</li>
<li>
<p>在定义路由和试图映射的时候加上一个参数name=“自定义值”</p>
</li>
</ul>
```python
path("user/login/", login, name="login"),
    path("user/register/", register, name="register")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 我们在前端写路径的时候就可以直接引用name的值</span><br><span class="line">- 这个是login.html里面的a标签，点击它就会跳到注册页面</span><br><span class="line"></span><br><span class="line">前端使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">&lt;a href=&quot;&#123;% url &#x27;register&#x27; %&#125;&quot;&gt;登入&lt;/a&gt;</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- views.py</span><br><span class="line"></span><br><span class="line">后端使用需要借助`from django.shortcuts import  reverse`</span><br><span class="line"></span><br><span class="line">- `reverse(&#x27;定义的规则名字&#x27;)`---&gt;得到的是你定义的路由</span><br><span class="line">  - 你访问login的时候就会跳到register</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def login(request):</span><br><span class="line">    return redirect(to=reverse(&#x27;register&#x27;))</span><br><span class="line"></span><br><span class="line">def register(request):</span><br><span class="line">    return render(request, &#x27;register.html&#x27;)</span><br></pre></td></tr></table></figure>

<ul>
<li>原理就是
<ul>
<li>根据当前的url的名字去路由去路由中对应名字的路由，然后根据路径添加指定的位置</li>
</ul>
</li>
</ul>
<h2 id="【四】反向解析的本质">【四】反向解析的本质</h2>
<ul>
<li>在路由映射中定义路由应装设规则，我们给这个规则起个名字
<ul>
<li>我们可以根据这个名字找到对应的映射规则</li>
<li>就是<code>name对应的名字</code></li>
</ul>
</li>
</ul>
<h2 id="【五】有名分组和无名分组的反向解析">【五】有名分组和无名分组的反向解析</h2>
<ul>
<li>有名和无名配置路由要用正则去写</li>
</ul>
<h3 id="【1】无名分组的反向解析">【1】无名分组的反向解析</h3>
<p>无名分组在传递参数的时候不仅仅要加 规则名字 还要加 args = (元祖</p>
<ul>
<li>前端的反向解析</li>
</ul>
```html
# no_name：是规则名
<p><a href="{% url 'no_name' '1' '2' %}">登入</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 后端的反向解析</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def no_name(request, *args, **kwargs):</span><br><span class="line">    # 无名参数，要传参数你没传就会出错</span><br><span class="line">    # args是一个元组</span><br><span class="line">    print(reverse(&quot;no_name&quot;, args=(&quot;1&quot;, &quot;2&quot;)), )  # /no_name/1/2</span><br><span class="line">    print(args)  # (&#x27;1&#x27;, &#x27;2&#x27;)</span><br><span class="line">    print(kwargs)  # &#123;&#125;</span><br><span class="line">    return HttpResponse(&quot;no_name&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li>路由和映射
<ul>
<li><code>(\d+)/(\d+)</code>：默认必须给两个值</li>
</ul>
</li>
</ul>
```python
re_path(r'^no_name/(\d+)/(\d+)', no_name, name="no_name")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】有名分组的反向解析</span><br><span class="line"></span><br><span class="line">- 前端的反向解析</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line"># url_name：是规则名</span><br><span class="line">&lt;p&gt;&lt;a href=&quot;&#123;% url &#x27;url_name&#x27; &#x27;4&#x27; %&#125;&quot;&gt;注册&lt;/a&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>后端的反向解析
<ul>
<li>又名函数接收的都是字典</li>
</ul>
</li>
</ul>
```python
def url_name(request, *args, **kwargs):
    #有名分组一定要按照，关键字传参
    # 有名分组在传递参数的时候不仅仅要加 规则名字 还要加 kwargs = {}
    print(reverse("url_name", kwargs={"id": 1})) # /url_name/1/
    print(args) # ()
    print(kwargs) # {'id': '4'}
    return HttpResponse("url_name")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 路由和映射</span><br><span class="line">  - `(?P&lt;id&gt;\d+)/`：必须传一个参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">re_path(r&#x27;^url_name/(?P&lt;id&gt;\d+)/&#x27;, url_name, name=&quot;url_name&quot;),</span><br></pre></td></tr></table></figure>

<h1>路由分发</h1>
<h2 id="【一】什么是路由分发">【一】什么是路由分发</h2>
<ul>
<li>路由分发（Route Redistribution）是指在一个网络环境中，当存在多种路由协议或同种协议的不同进程时，为了实现这些路由协议的协同工作，通过自治系统边界路由器（ASBR）同时工作在两种协议或两个进程中，学习到两端所有的路由条目后，将这些路由信息从一个路由协议或进程共享到另一个路由协议或进程的过程</li>
</ul>
<h2 id="【二】路由分发系统解析">【二】路由分发系统解析</h2>
<ul>
<li>
<p>就是在每个APP下都有自己的路由映射规则文件</p>
</li>
<li>
<p>将所有的给规则文件进行统合到一起</p>
</li>
<li>
<p>再根据制定的规则进行分发</p>
</li>
</ul>
<p>就好比</p>
```python
user-->APP下有多个视图
	login
    index
    register
    
shop--->APP下有多个视图
	index
    login
    buy_shopping
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 要是都写在urls.py下进行路由映射就会很多</span><br><span class="line"></span><br><span class="line">## 【三】解决方法</span><br><span class="line"></span><br><span class="line">### 【1】原本的路由规则模式</span><br><span class="line"></span><br><span class="line">- 我们会写成这样</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&#x27;admin/&#x27;, admin.site.urls),</span><br><span class="line">    path(&#x27;user/login/&#x27;, login),</span><br><span class="line">    path(&#x27;user/register/&#x27;, register),</span><br><span class="line">    path(&#x27;user/logout/&#x27;, logout),</span><br><span class="line">    path(&#x27;shop/buy_good/&#x27;, buy_good),</span><br><span class="line">    path(&#x27;shop/payfor/&#x27;, payfor),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<h3 id="【2】简化">【2】简化</h3>
<ul>
<li>在每一个APP下都创建一个urls.py文件</li>
<li>在总路由中定义每个子路由规则</li>
</ul>
<p>主urlse.pu文件</p>
<ul>
<li>​	引入了一个内置方法，include方法
<ul>
<li>每一个py文件还不能为空，为空也会报错</li>
</ul>
</li>
</ul>
```python
from django.contrib import admin
from django.urls import path,include


urlpatterns = [
    path('admin/', admin.site.urls),
    path('user/', include("user.urls"))
    path('shop/', include("shop.urls"))
]

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">子的APP下的user/urls.py文件</span><br><span class="line"></span><br><span class="line">- 每一个py文件还不能为空，为空也会报错</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">from user.views import login, register, logout</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&#x27;login/&#x27;, login),</span><br><span class="line">    path(&#x27;register/&#x27;, register),</span><br><span class="line">    path(&#x27;logout/&#x27;, logout),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>子的APP下的user/shop.py文件</p>
<ul>
<li>每一个py文件还不能为空，为空也会报错</li>
</ul>
```python
from django.urls import path

from shop.views import buy_good, payfor


urlpatterns = [
    path('shop/buy_good/', buy_good),
    path('shop/payfor/', payfor),
]

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】路由分发的反向解析</span><br><span class="line"></span><br><span class="line">- `path(&quot;user/&quot;,include(&quot;user.urls&quot;)`</span><br><span class="line"></span><br><span class="line">- 在你 APP 下面的每一个路由规则中都会为你 匹配一个 user 前缀</span><br><span class="line"></span><br><span class="line">- 如果想让每一个 APP下面你的路由规则都进行分类</span><br><span class="line"></span><br><span class="line">- 在指定分发的时候就必须戴前缀</span><br><span class="line">- 不分类就什么 都别写</span><br><span class="line"></span><br><span class="line">如果是自己写的路由规则路径 在前端使用可能会失效</span><br><span class="line"></span><br><span class="line">- 自己写的路由：就是给自己APP下面的urls.py文件中的urlpatterns另起名字</span><br><span class="line"></span><br><span class="line">所以为了避免是自己的失误，建议使用 Django提供的路由解析方案</span><br><span class="line"></span><br><span class="line">### 【4】路由携带额外参数</span><br><span class="line"></span><br><span class="line">- 主urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&#x27;shop/&#x27;, include(&quot;shop.urls&quot;))</span><br></pre></td></tr></table></figure>

<ul>
<li>shop/urls.py</li>
</ul>
```python
from django.urls import path

from shop.views import buy_good, payfor

# 分路由
urlpatterns = [
    path('buy_good/<int:year>', buy_good, {"good_name": "玩具"}, name="buy_good"),
    path('shop/payfor/', payfor),
]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- shop/views.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def buy_good(request, *args, **kwargs):</span><br><span class="line">    print(args)  # ()</span><br><span class="line">    print(kwargs)  # &#123;&#x27;year&#x27;: 2, &#x27;good_name&#x27;: &#x27;玩具&#x27;&#125;</span><br><span class="line">    return HttpResponse(&#x27;buy_good&#x27;)</span><br></pre></td></tr></table></figure>

<ul>
<li>user/login.py</li>
</ul>
```python
<p><a href="{% url "buy_good" "2" %}">buy</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【5】include分发携带额外参数</span><br><span class="line"></span><br><span class="line">- ***include,每一个分路由接口都会携带的参数***</span><br><span class="line"></span><br><span class="line">- shop/urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">from shop.views import buy_good, payfor</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&#x27;buy_good/&lt;int:year&gt;&#x27;, buy_good, &#123;&quot;good_name&quot;: &quot;玩具&quot;&#125;, name=&quot;buy_good&quot;),</span><br><span class="line">    path(&#x27;payfor/&#x27;, payfor, name=&quot;payfor&quot;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>shop/views.py：shop APP下的views</li>
</ul>
```python
def payfor(request, *args, **kwargs):
    print(args)  # ()
    print(kwargs)  # {'tag': 'index'}
    return HttpResponse('payfor')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- user/login.py</span><br><span class="line">  - 访问payfor的时候，include分发 带了  &#123;&quot;tag&quot;: &quot;shop&quot;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">&lt;p&gt;&lt;a href=&quot;&#123;% url &quot;payfor&quot; %&#125;&quot;&gt;pay_for&lt;/a&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><a target="_blank" rel="noopener" href="http://xn--urls-zh5f.py">主urls.py</a></li>
</ul>
```python
#include，每一个分路由接口都会携带的参数
path('shop/', include("shop.urls"), {"tag": "index"})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 名称空间</span><br><span class="line"></span><br><span class="line">## 【一】发生场景</span><br><span class="line"></span><br><span class="line">- 有两个APP</span><br><span class="line">  - APP1下有一个函数叫`index`</span><br><span class="line">  - APP2下有一个函数也叫`index`</span><br><span class="line"></span><br><span class="line">- 路径解析应该是谁的`index`函数</span><br><span class="line"></span><br><span class="line">### 【1】案例</span><br><span class="line"></span><br><span class="line">- user/urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&#x27;index/&#x27;, index, name=&quot;index&quot;),</span><br></pre></td></tr></table></figure>

<ul>
<li>user/views.py</li>
</ul>
```python
def index(request):
    return HttpResponse("user_index")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- shop/urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&#x27;index/&#x27;, index, name=&quot;index&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li>shop/views.py</li>
</ul>
```python
def index(request, *args, **kwargs):
    return HttpResponse('shop_index')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 主urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">	path(&#x27;&#x27;, login),</span><br><span class="line">    path(&#x27;user/&#x27;, include(&quot;user.urls&quot;)),</span><br><span class="line">    path(&#x27;shop/&#x27;, include(&quot;shop.urls&quot;))</span><br></pre></td></tr></table></figure>

<ul>
<li>页面login.html</li>
</ul>
```html
<p><a href="{% url "index" %}">user_index</a></p>
<p><a href="{% url "index" %}">show_index</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 我们可以看到页面login.html中有两个a标签，一个属于user_index，一个是show_index，但是我们发现，当路由解析index的时候，都解析到了showAPP下的index</span><br><span class="line">- 我们现在看主urls.py</span><br><span class="line">  - 发现`path(&#x27;shop/&#x27;, include(&quot;shop.urls&quot;))`在下面</span><br><span class="line">    - 由此得出，谁在下面先解析谁</span><br><span class="line">    - 有点不太合理</span><br><span class="line"></span><br><span class="line">### 【2】解决方案</span><br><span class="line"></span><br><span class="line">- 给每个APP下面的urls.py增加一个配置项叫`app_name = &#x27;app名字&#x27;`</span><br><span class="line">- 发现报错了</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#报错信息  Reverse for &#x27;buy_good&#x27; not found. &#x27;buy_good&#x27; is not a valid view function or pattern name.</span><br></pre></td></tr></table></figure>

<ul>
<li>解决方案
<ul>
<li>指定我们的a标签里面的信息</li>
</ul>
</li>
</ul>
```python
<p><a href="{% url "user:index" %}">user_index</a></p>
<p><a href="{% url "shop:index" %}">show_index</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 在每个index前面加APP的名字</span><br><span class="line"></span><br><span class="line">### 【3】解决方案二</span><br><span class="line"></span><br><span class="line">- 把你添加的`app_name = &#x27;app名字&#x27;`给删掉</span><br><span class="line"></span><br><span class="line">- 在你的总路由配 配置</span><br><span class="line">  - 总路由进行分发的时候指定APP的名字，以及namespace:名称空间</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">    path(&#x27;user/&#x27;, include((&quot;user.urls&quot;, &quot;user&quot;), namespace=&quot;user&quot;)),</span><br><span class="line">    path(&#x27;shop/&#x27;, include((&quot;shop.urls&quot;, &quot;shop&quot;), namespace=&quot;shop&quot;))</span><br></pre></td></tr></table></figure>

<ul>
<li>就能正常运行了</li>
</ul>
<h1>虚拟环境</h1>
<h2 id="【一】创建虚拟环境">【一】创建虚拟环境</h2>
<h3 id="【1】三种方法">【1】三种方法</h3>
<ul>
<li>python自带你的venv工具</li>
<li>python第三方模块virtualenv</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240620210821277.png" alt="image-20240620210821277"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240620210932357.png" alt="image-20240620210932357"></p>
<ul>
<li>使用pycharm创建虚拟环境</li>
</ul>
<h2 id="【二】使用虚拟环境的目的">【二】使用虚拟环境的目的</h2>
<ul>
<li>目的就是：为了项目与项目之间模块的隔离</li>
<li>不通过版本写的Django项目，项目之间会发生冲突，不同版本的Django，也会对应MySQL的版本，有的Django版本不兼容MySQL
<ul>
<li>为了解决这个问题，给各自的Django项目创建虚拟环境</li>
<li>但是有个弊端，你自己的Django项目本地随便用</li>
<li>你压缩给别人用，别人解压之后虚拟环境就会失效</li>
</ul>
</li>
</ul>
<h3 id="【1】解决不兼容虚拟环境的通用方法">【1】解决不兼容虚拟环境的通用方法</h3>
<ul>
<li>将模块批量导出和批量安装</li>
</ul>
<h4 id="（1）批量导出模块">（1）批量导出模块</h4>
<ul>
<li>在终端输入
<ul>
<li>回车之后你发现没反应，但是你看的Django项目里多了一个文件</li>
<li>叫<code>requirements.txt</code></li>
<li>导出成功</li>
</ul>
</li>
</ul>
```shell
pip freeze > requirements.txt
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240620212326839](D:\pycharm\Temporary_notes\图片\image-20240620212326839.png)</span><br><span class="line"></span><br><span class="line">#### （2）批量安装</span><br><span class="line"></span><br><span class="line">- 在终端输入</span><br><span class="line">  - 读取到`requirements.txt`里面所有的模块</span><br><span class="line">  - 然后挨个安装所有的模块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```shell</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<h1>路径转换器</h1>
<h2 id="【一】什么是路径转换器">【一】什么是路径转换器</h2>
<ul>
<li>路径转换器（Path Converter）在Django框架中是为了解决URL路径中的参数问题</li>
</ul>
<h2 id="【二】Django2-x之前路径转换的语法">【二】Django2.x之前路径转换的语法</h2>
<ul>
<li>
<p>2.x之前用佛如都是正则</p>
</li>
<li>
<p>Django2.x版本的语法规范</p>
</li>
</ul>
```python
path("路由规则"，视图函数名，name="路由解析名")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【三】Django的五种类型转换器</span><br><span class="line"></span><br><span class="line">### 【1】str</span><br><span class="line"></span><br><span class="line">- 匹配除了/之外的非空字符串</span><br><span class="line">- 如果表达式内不包含转换器，则会默认匹配字符串</span><br><span class="line"></span><br><span class="line">### 【2】int</span><br><span class="line"></span><br><span class="line">- 匹配 0 或任何正整数。返回一个 int </span><br><span class="line"></span><br><span class="line">### 【3】slug</span><br><span class="line"></span><br><span class="line">- 匹配任意由 ASCII 字母或数字以及连字符和下划线组成的短标签</span><br><span class="line">- 比如，building-your-1st-django-site </span><br><span class="line"></span><br><span class="line">### 【4】path</span><br><span class="line"></span><br><span class="line">- 匹配非空字段，包括路径分隔符 &#x27;/&#x27;</span><br><span class="line">- 它允许你匹配完整的 URL 路径而不是像 str 那样匹配 URL 的一部分</span><br><span class="line"></span><br><span class="line">### 【5】uuid</span><br><span class="line"></span><br><span class="line">- 匹配一个格式化的 UUID 。为了防止多个 URL 映射到同一个页面，必须包含破折号并且字符都为小写</span><br><span class="line">- 比如，075194d3-6885-417e-a8a8-6c931e272f00。返回一个 UUID 实例</span><br><span class="line"></span><br><span class="line">### 【6】五种转换器的案例</span><br><span class="line"></span><br><span class="line">- 子的shop/urls,py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">urlpatterns = [</span><br><span class="line">    #&lt;str:param&gt;：代表传的值是字符串类型，param与视图层的指定参数要想等</span><br><span class="line">    path(&quot;parse_str/&lt;str:param&gt;&quot;, parse_str, name=&quot;parse_str&quot;),</span><br><span class="line">    path(&quot;parse_int/&lt;int:param&gt;&quot;, parse_int, name=&quot;parse_int&quot;),</span><br><span class="line">    path(&quot;parse_uuid/&lt;uuid:param&gt;&quot;, parse_uuid, name=&quot;parse_uuid&quot;),</span><br><span class="line">    path(&quot;parse_path/&lt;path:param&gt;&quot;, parse_path, name=&quot;parse_path&quot;),</span><br><span class="line">    path(&quot;parse_slug/&lt;sulg:param&gt;&quot;, parse_slug, name=&quot;parse_slug&quot;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>定义视图</li>
</ul>
```python
def parse_str(request, param, *args, **kwargs):
    # http://127.0.0.1:9999/shop/param_str/2
    print(param, type(param))  # 2 <class 'str'>
    print(args)
    print(kwargs)
    return redirect(reverse("login"))


def parse_int(request, param, *args, **kwargs):
    # http://127.0.0.1:9999/shop/parse_int/1
    print(param, type(param))  # 1 <class 'int'>
    print(args)
    print(kwargs)
    return redirect(reverse("login"))


def parse_uuid(request, param, *args, **kwargs):
    # http://127.0.0.1:9999/shop/parse_uuid/1
    print(param, type(param))
    # 075194d3-6885-417e-a8a8-6c931e272f00 <class 'uuid.UUID'>
    print(args)
    print(kwargs)
    return redirect(reverse("login"))


def parse_slug(request, param, *args, **kwargs):
    # http://127.0.0.1:9999/shop/parse_slug/1
    print(param, type(param)) # building-your-1st-django-site <class 'str'> <class 'str'>
    print(args)
    print(kwargs)
    return redirect(reverse("login"))


def parse_path(request, param, *args, **kwargs):
    #  http://127.0.0.1:9999/shop/parse_path/1
    print(param, type(param)) # 1 <class 'str'>
    print(args)
    print(kwargs)
    return redirect(reverse("login"))
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 主的urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">path(&#x27;&#x27;, login, name=&quot;login&quot;),</span><br><span class="line">path(&#x27;shop/&#x27;, include((&quot;shop.urls&quot;, &quot;shop&quot;), namespace=&quot;shop&quot;))</span><br></pre></td></tr></table></figure>

<h2 id="【四】自定义转换器">【四】自定义转换器</h2>
<h3 id="【1】创建自定义转换器">【1】创建自定义转换器</h3>
<ul>
<li>需要在APP下创建一个<code>path_converters.py</code>文件
<ul>
<li>提示路径中不能有空格</li>
</ul>
</li>
<li>在文件中定义一下方法
<ul>
<li>to_python：将参数转换为python类型</li>
<li>to_url：匹配路径上的参数</li>
</ul>
</li>
</ul>
```python
class FourDigitYearConverter:
    # 此属性名为正则表达式（regex），用于匹配四位数的年份字符串
    regex = r'[0-9]{4}' 

    def to_python(self, value):
        """
        将接收到的字符串值解析为Python整数类型表示四位数的年份。
        示例：输入 "2024" 会转换为 2024
        """
        return int(value)

    def to_url(self, value):
        """
        根据给定四位数年份（value）将其格式化为URL安全的四位数字形式，例如 "2024" -> "2024".
        注意这里的 "匹配的regex是四个数字" 应更改为 "此方法针对四位数的年份字符串"
        
        例如：输入 "2024" 会返回 "2024", 保持四位数且无前导零。
        """
        return '%04d' % value
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】使用自定义转换器</span><br><span class="line"></span><br><span class="line">在视图函数中引入当前自定义转换器</span><br><span class="line"></span><br><span class="line">- 将自定义的转换器注册成Django的转换器,就要引入下面的方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.urls import  register_converter</span><br></pre></td></tr></table></figure>

<ul>
<li>把转换器导入到视图层</li>
</ul>
```python
from APP名字.path_converters import 类名
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 注册转换器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">register_converter(类名, &#x27;自定义转换器名字&#x27;)</span><br></pre></td></tr></table></figure>

<ul>
<li>在路由中使用转换器</li>
</ul>
```python
path("self_parse/<自定义转换器名字:param>/", self_parse, name="self_parse")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 视图层</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def self_parse(request, param, *args, **kwargs):</span><br><span class="line">    print(param, type(param)) # 9999 &lt;class &#x27;int&#x27;&gt;</span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line">    return redirect(reverse(&quot;login&quot;))</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/7.0CSS%E9%80%89%E6%8B%A9%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/7.0CSS%E9%80%89%E6%8B%A9%E5%99%A8/" class="post-title-link" itemprop="url">7.0CSS选择器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>CSS选择器</h1>
<h2 id="【一】前言">【一】前言</h2>
<ul>
<li>
<p>css选择器的方法为select(css_selector)</p>
<ul>
<li>详情看官网：<a target="_blank" rel="noopener" href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html#id37">https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html#id37</a></li>
</ul>
</li>
<li>
<p>目前支持的选择器如下案例</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.w3school.com.cn/cssref/css_selectors.ASP">https://www.w3school.com.cn/cssref/css_selectors.ASP</a></li>
</ul>
</li>
</ul>
<h2 id="【二】使用">【二】使用</h2>
<h3 id="【1】生成soup对象">【1】生成soup对象</h3>
<ul>
<li>css_text.html</li>
</ul>
```python
<html><head><title>The Dormouse's story</title></head>
<body>
<p class="title">
    <b>The Dormouse's story</b>
    Once upon a time there were three little sisters; and their names were
    <a target="_blank" rel="noopener" href="http://example.com/elsie" class="sister" id="link1">
        <span>Elsie</span>
    </a>
    <a target="_blank" rel="noopener" href="http://example.com/lacie" class="sister" id="link2">Lacie</a> and
    <a target="_blank" rel="noopener" href="http://example.com/tillie" class="sister" id="link3">Tillie</a>;
    <div class='panel-1'>
        <ul class='list' id='list-1'>
            <li class='element'>Foo</li>
            <li class='element'>Bar</li>
            <li class='element'>Jay</li>
        </ul>
        <ul class='list list-small' id='list-2'>
            <li class='element'><h1 class='yyyy'>Foo</h1></li>
            <li class='element xxx'>Bar</li>
            <li class='element'>Jay</li>
        </ul>
    </div>
    and they lived at the bottom of a well.
</p>
<p class="story">...</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"></span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line">with open()</span><br><span class="line">soup=BeautifulSoup(html_doc,&#x27;lxml&#x27;)</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】select：选择所有</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line"></span><br><span class="line">with open(&quot;css_text.html&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as fp:</span><br><span class="line">    data = fp.read()</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(data, &quot;lxml&quot;)</span><br><span class="line"></span><br><span class="line"># 获取所有的title标签</span><br><span class="line">title = soup.title</span><br><span class="line">print(title)</span><br><span class="line"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span><br><span class="line">title = soup.select(&quot;title&quot;)</span><br><span class="line">print(title)</span><br><span class="line"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span><br><span class="line"></span><br><span class="line"># 获取第三个p标签</span><br><span class="line"># 方法一：直接从页面上复制css选择器路径</span><br><span class="line">p_css = soup.select(&quot;body &gt; p.story&quot;)</span><br><span class="line">print(p_css)</span><br><span class="line"># [&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;]</span><br><span class="line"># 方法二：用css选择器语法</span><br><span class="line">p_css = soup.select(&quot;body &gt; p:nth-of-type(3)&quot;)</span><br><span class="line">print(p_css)</span><br><span class="line"># [&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;]</span><br><span class="line"></span><br><span class="line"># 批量选择标签，需要做层级约束</span><br><span class="line">print(soup.select(&quot;html body div ul li&quot;))</span><br><span class="line"></span><br><span class="line">print(soup.select(&quot;div&gt;ul&gt;li&quot;))</span><br><span class="line"></span><br><span class="line"># 得到类属性为panel-1的标签</span><br><span class="line">print(soup.select(&quot;.panel-1&quot;))</span><br><span class="line"></span><br><span class="line"># 得到id属性为list-1的标签</span><br><span class="line">print(soup.select(&quot;#list-1&quot;))</span><br><span class="line"></span><br><span class="line"># 找li标签下,类属性的值为element的所有标签</span><br><span class="line">print(soup.select(&quot;li.element&quot;))</span><br><span class="line"></span><br><span class="line"># 找ul标签下,id属性的值为list-1的所有标签</span><br><span class="line">print(soup.select(&quot;ul#list-1&quot;))</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 还可以用属性选择器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 属性选择器</span><br><span class="line">print(soup.select(&quot;[href]&quot;))</span><br><span class="line">print(soup.select(&quot;a[href]&quot;))</span><br><span class="line">print(soup.select(&quot;a[href=&#x27;http://example.com/elsie&#x27;]&quot;))</span><br></pre></td></tr></table></figure>

<h3 id="【3】select-one：选择一个">【3】select_one：选择一个</h3>
````python
# 找li标签下,类属性的值为element的一个标签
print(soup.select_one("li.element"))
# <li class="element">Foo</li>
````

<h2 id="【三】锻炼爬虫">【三】锻炼爬虫</h2>
```python
# 百度
# 百度热搜
# 笔趣阁
# 4k壁纸
# 豆掰Top250
# 爬代理网站
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/6.0%E6%96%87%E6%A1%A3%E6%A0%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/6.0%E6%96%87%E6%A1%A3%E6%A0%91/" class="post-title-link" itemprop="url">6.0文档树</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>遍历文档树</h1>
<h2 id="【一】遍历文档树介绍">【一】遍历文档树介绍</h2>
<h3 id="【1】介绍">【1】介绍</h3>
<ul>
<li>
<p>遍历文档树，也被称为导航文档树，是指在一个文档对象模型（DOM）中按照特定的方法和规则来遍历和浏览其中的节点</p>
</li>
<li>
<p>DOM是一种处理XML或HTML文档的标准编程接口，它将文档解析成由节点和对象组成的树状结构</p>
</li>
<li>
<p>在遍历文档树的过程中，可以通过访问当前节点及其相关属性、子节点、父节点、兄弟节点等信息，来对文档进行操作和分析</p>
</li>
</ul>
<h3 id="【2】常见的文档树遍历算法">【2】常见的文档树遍历算法</h3>
<ul>
<li>
<p>选择起始节点</p>
<ul>
<li>首先需要确定遍历的起始节点，可以是整个文档的根节点，也可以是某个指定的节点</li>
</ul>
</li>
<li>
<p>访问当前节点</p>
<ul>
<li>从起始节点开始，首先访问当前节点，可以获取当前节点的标签名、属性、文本内容等信息</li>
</ul>
</li>
<li>
<p>处理当前节点</p>
<ul>
<li>根据需要，对当前节点进行一些处理操作，比如判断节点类型、执行特定的任务等</li>
</ul>
</li>
<li>
<p>遍历子节点</p>
<ul>
<li>如果当前节点有子节点，将从第一个子节点开始递归遍历，重复步骤2和步骤3</li>
</ul>
</li>
<li>
<p>遍历兄弟节点</p>
<ul>
<li>如果当前节点没有子节点或者子节点已经遍历完毕，将继续遍历当前节点的下一个兄弟节点，重复步骤2和步骤3</li>
</ul>
</li>
<li>
<p>返回父节点</p>
</li>
<li>
<p>当遍历到某个节点的兄弟节点都被遍历完毕后，返回到该节点的父节点，并继续遍历父节点的下一个兄弟节点</p>
</li>
<li>
<p>结束条件</p>
<ul>
<li>当整个文档树的节点都被遍历完毕，或者满足某个结束条件时，结束遍历过程</li>
</ul>
</li>
</ul>
<h2 id="【二】遍历文档树的语法">【二】遍历文档树的语法</h2>
<ul>
<li>首先导入BeautifulSoup库，并将HTML文档传入BeautifulSoup对象的构造函数中，指定解析器（这里使用lxml）</li>
<li>指定解析器（使用hxml）</li>
</ul>
```python
from bs4 import BeautifulSoup

# 生成soup对象
with open("练习.html", "r", encoding="utf8") as fp:
    data = fp.read()

soup = BeautifulSoup(data, "lxml")

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【1】tag.string：获取当前标签内的文本内容</span><br><span class="line"></span><br><span class="line">- 使用tag.string属性可以获取当前标签内的文本内容。</span><br><span class="line">- 如果标签内只有一个字符串，可以直接使用该属性获取内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># - 使用`tag.string`属性可以获取当前标签内的文本内容。</span><br><span class="line"># - 如果标签内只有一个字符串，可以直接使用该属性获取内容</span><br><span class="line">print(soup.a.string)  # Elsie</span><br></pre></td></tr></table></figure>

<ul>
<li>若有多个字符串，则返回Non</li>
</ul>
<h3 id="【2】tag-strigs：返回一个生成器对象">【2】tag.strigs：返回一个生成器对象</h3>
<ul>
<li>使用tag.strings方法可以获取当前标签内所有子节点的文本内容，返回一个生成器对象</li>
</ul>
```python
print(soup.a.strings)
# <generator object Tag._all_strings at 0x000001773DBE71B0>

print(list(soup.a.strings))  # ['Elsie']
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】tag.text：可以获取当前标签内所有子节点的文本内容</span><br><span class="line"></span><br><span class="line">- 使用tag.text属性可以获取当前标签内所有子节点的文本内容，并将其连接在一起</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">print(soup.p.text)  # The Dormouse&#x27;s story</span><br></pre></td></tr></table></figure>

<h3 id="【4】tag-stripped-strings：获取当前标签内所有子节点的文本内容">【4】tag.stripped_strings：获取当前标签内所有子节点的文本内容</h3>
```python
print(soup.p.stripped_strings)
# <generator object PageElement.stripped_strings at 0x00000299C4F271B0>

print(list(soup.p.stripped_strings))
#  ["The Dormouse's story"]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【5】嵌套算法</span><br><span class="line"></span><br><span class="line">- 嵌套选择可以通过访问父子节点的方式来获取特定标签的文本内容。</span><br><span class="line">- 在给定的示例中，我们使用text属性来访问特定标签的文本内容</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">print(soup.head.title.text)  </span><br><span class="line"># 输出：The Dormouse&#x27;s story</span><br><span class="line"></span><br><span class="line">print(soup.body.a.text)  </span><br><span class="line"># 输出：Elsie</span><br></pre></td></tr></table></figure>

<h3 id="【6】子节点，子孙节点">【6】子节点，子孙节点</h3>
<ul>
<li>
<p>可以通过.contents和.children属性来获取标签的子节点</p>
</li>
<li>
<p>嵌套选择可以通过访问父子节点的方式来获取特定标签的文本内容</p>
</li>
<li>
<p>.contents属性返回一个包含所有子节点的列表，而.children属性返回一个迭代器，可以逐个访问子节点</p>
</li>
</ul>
```python
# p标签下所有的子节点
print(soup.p.contents)
# [<b>猪头！！</b>]

# 得到一个迭代器，包含p下所有子节点
print(soup.p.children)
# <list_iterator object at 0x000001CEB8095570>
print(list(soup.p.children))
# [<b>猪头！！</b>]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 获取子孙节点，p下所有的标签都会被选择出来</span><br><span class="line"># 还能够提取当前标签下的所有标签而且还能提取当前标签下所有标签的内容</span><br><span class="line">print(soup.p.descendants)</span><br><span class="line"># &lt;generator object Tag.descendants at 0x0000020CB7FD71B0&gt;</span><br><span class="line"></span><br><span class="line">print(list(soup.p.descendants))</span><br><span class="line"># [&lt;b&gt;猪头！！&lt;/b&gt;, &#x27;猪头！！&#x27;]</span><br></pre></td></tr></table></figure>

<h3 id="【7】父亲点和祖先节点">【7】父亲点和祖先节点</h3>
<ul>
<li>使用.parent属性可以获取标签的父节点</li>
<li>而.parents属性则可以获取标签的所有祖先节点，从父亲的父亲开始一直到最顶层的祖先节点</li>
</ul>
```python
# 获取a标签的父节点
print(soup.a.parent)

# 获取a标签的父节点的文本内容
print(soup.a.parent.text)

# 找到a标签所有的祖先节点，父亲的父亲，父亲的父亲的父亲...
print(soup.a.parents)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【8】兄弟节点</span><br><span class="line"></span><br><span class="line">- BeautifulSoup提供了相关方法来获取标签的兄弟节点。</span><br><span class="line">- .next_sibling属性返回下一个兄弟节点，</span><br><span class="line">- 而.previous_sibling属性返回上一个兄弟节点。</span><br><span class="line">- 此外，.next_siblings属性返回一个生成器对象，可以逐个访问后面的兄弟节点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">print(soup.a.next_sibling)  # 输出：&lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span><br><span class="line"></span><br><span class="line">print(soup.a.next_sibling.next_sibling) #下一个兄弟</span><br><span class="line"></span><br><span class="line">print(soup.a.previous_sibling.previous_sibling) #上一个兄弟</span><br><span class="line"></span><br><span class="line">print(list(soup.a.next_siblings)) #下面的兄弟们=&gt;生成器对象</span><br><span class="line"></span><br><span class="line">print(soup.a.previous_siblings)  </span><br><span class="line"># 输出：生成器对象，包含上面的兄弟节点</span><br><span class="line"># 上面的兄弟们=&gt;生成器对象</span><br></pre></td></tr></table></figure>

<h2 id="【三】搜索文档树介绍">【三】搜索文档树介绍</h2>
<ul>
<li>
<p>recursive是否从当前位置递归往下查询，如果不递归，只会查询当前soup文档的子元素</p>
</li>
<li>
<p>string这里是通过tag的内容来搜索，并且返回的时内容，而不是tag类型的元素</p>
</li>
<li>
<p>*rkwargs 自动拆包接受属性值，所以才会有soup.find_all(‘a’,id=‘title’) ，id='title’为**kwargs自动拆包掺入</p>
</li>
<li>
<p>BeautifulSoup定义了很多搜索方法,这里着重介绍2个:</p>
</li>
<li>
<ul>
<li>find() 和 find_all()</li>
<li>其它方法的参数和用法类似</li>
</ul>
</li>
</ul>
<h2 id="【四】搜索文档树语法">【四】搜索文档树语法</h2>
<ul>
<li>创建soup对象</li>
</ul>
```python
import re
from bs4 import BeautifulSoup

html_doc = """
<html><head><title>The Dormouse's story</title></head>
<body>
<p class="title" name="first_p"><b>The Dormouse's story</b></p>

<p class="story">Once upon a time there were three little sisters; and their names were
<a target="_blank" rel="noopener" href="http://example.com/elsie" class="sister" id="link1">Elsie</a>,
<a target="_blank" rel="noopener" href="http://example.com/lacie" class="sister" id="link2">Lacie</a> and
<a target="_blank" rel="noopener" href="http://example.com/tillie" class="sister" id="link3">Tillie</a>;
and they lived at the bottom of a well.</p>

<p class="story">...</p>
"""

soup = BeautifulSoup(html_doc, "lxml")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【1】**name参数**</span><br><span class="line"></span><br><span class="line">- name 五种过滤器: 字符串、正则表达式、列表、方法、True</span><br><span class="line"></span><br><span class="line">#### [1]字符串</span><br><span class="line"></span><br><span class="line">- 传入标签名</span><br><span class="line">- 例如 soup.find_all(name=&#x27;a&#x27;) 将返回所有的 &lt;a&gt; 标签。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#  `soup.find_all(name=&#x27;a&#x27;)` 将返回所有的 `&lt;a&gt;` 标签。</span><br><span class="line">print(soup.find_all(name=&#x27;a&#x27;))</span><br><span class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>

<h4 id="2-正则表达式">[2]正则表达式</h4>
<ul>
<li>可以使用正则表达式来匹配标签名。</li>
<li>例如 soup.find_all(name=re.compile(‘^b’)) 将返回以 ‘b’ 开头的标签，包括 <body> 和 <b> 标签。</li>
</ul>
```python
# 找出b开头的标签，结果有body和b标签
print(soup.find_all(name=re.compile('^b')))
# [<body>
# <p class="title" name="first_p"><b>The Dormouse's story</b></p>
# <p class="story">Once upon a time there were three little sisters; and their names were
# <a class="sister" target="_blank" rel="noopener" href="http://example.com/elsie" id="link1">Elsie</a>,
# <a class="sister" target="_blank" rel="noopener" href="http://example.com/lacie" id="link2">Lacie</a> and
# <a class="sister" target="_blank" rel="noopener" href="http://example.com/tillie" id="link3">Tillie</a>;
# and they lived at the bottom of a well.</p>
# <p class="story">...</p>
# </body>, <b>The Dormouse's story</b>]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### [3]列表</span><br><span class="line"></span><br><span class="line">- 如果传入一个列表参数，Beautiful Soup会返回与列表中任何元素匹配的内容。</span><br><span class="line">- 例如 soup.find_all(name=[&#x27;a&#x27;, &#x27;b&#x27;]) 将返回文档中所有的 &lt;a&gt; 标签和 &lt;b&gt; 标签。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#  `soup.find_all(name=[&#x27;a&#x27;, &#x27;b&#x27;])` 将返回文档中所有的 `&lt;a&gt;` 标签和 `&lt;b&gt;` 标签</span><br><span class="line">print(soup.find_all(name=[&#x27;a&#x27;, &#x27;b&#x27;]))</span><br><span class="line"># [&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>

<h4 id="4-方法">[4]方法</h4>
<ul>
<li>如果没有合适的过滤器，可以定义一个方法来匹配元素。</li>
<li>这个方法只接受一个元素参数，如果方法返回 True 表示当前元素匹配并被找到，否则返回 False。</li>
</ul>
```python
# 只返回具有 class 属性而没有 id 属性的 标签
def has_class_but_no_id(tag):
    return tag.has_attr('class') and not tag.has_attr('id')


print(soup.find_all(name=has_class_but_no_id))
# [<a class="sister" target="_blank" rel="noopener" href="http://example.com/elsie" id="link1">Elsie</a>, <a class="sister" target="_blank" rel="noopener" href="http://example.com/lacie" id="link2">Lacie</a>, <a class="sister" target="_blank" rel="noopener" href="http://example.com/tillie">Tillie</a>]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### [5]True</span><br><span class="line"></span><br><span class="line">- 通过find_all(True)可以匹配所有的tag，不会返回字符串节点。</span><br><span class="line">- 在代码中，会使用循环打印出每个匹配到的tag的名称(tag.name)。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def has_class_but_no_id(tag):</span><br><span class="line">    return tag.has_attr(&#x27;class&#x27;) and tag.has_attr(&#x27;id&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(soup.find_all(True))</span><br><span class="line">for tag in soup.find_all(True):</span><br><span class="line">    print(tag.name)</span><br><span class="line">    </span><br><span class="line"># html</span><br><span class="line"># head</span><br><span class="line"># title</span><br><span class="line"># body</span><br><span class="line"># p</span><br><span class="line"># b</span><br><span class="line"># p</span><br><span class="line"># a</span><br><span class="line"># a</span><br><span class="line"># a</span><br><span class="line"># p</span><br><span class="line"></span><br><span class="line">print(soup.find_all(has_class_but_no_id))</span><br><span class="line"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]</span><br></pre></td></tr></table></figure>

<h3 id="【2】keyword-参数">【2】<strong>keyword 参数</strong></h3>
<ul>
<li>
<p>keyword 参数用于按照属性值进行搜索。</p>
</li>
<li>
<p>如果一个指定名字的参数不是内置的参数名，Beautiful Soup会将其当作指定名字的属性来搜索。</p>
</li>
<li>
<ul>
<li>例如包含 href 的参数将搜索每个tag的 href 属性。</li>
</ul>
</li>
<li>
<p>指定属性值：</p>
</li>
<li>
<ul>
<li>例如 soup.find_all(href=“<a target="_blank" rel="noopener" href="http://example.com/tillie">http://example.com/tillie</a>”) 返回所有 href 属性等于 “<a target="_blank" rel="noopener" href="http://example.com/tillie">http://example.com/tillie</a>” 的标签。</li>
</ul>
</li>
<li>
<p>正则表达式匹配属性值：</p>
</li>
<li>
<ul>
<li>例如 soup.find_all(href=re.compile(“^http://”)) 返回所有 href 属性以 “http://” 开头的标签。</li>
</ul>
</li>
<li>
<p>多个属性：</p>
</li>
<li>
<ul>
<li>可以同时指定多个属性值</li>
<li>例如 soup.find_all(href=re.compile(“http://”), id=‘link1’) 返回同时满足 href 以 “http://” 开头并且 id 等于 “link1” 的标签</li>
</ul>
</li>
</ul>
```python
# 返回所有 `href` 属性等于 "http://example.com/tillie" 的标签。
print(soup.find_all(href="http://example.com/tillie"))

# 返回所有 `href` 属性以 "http://" 开头的标签。
print(soup.find_all(href=re.compile("^http://")))

# 拥有id属性的tag
print(soup.find_all(id=True))

# 多个属性
print(soup.find_all(href=re.compile("http://"), id='link1'))

# 注意，class是Python的关键字，所以class属性用class_
print(soup.find_all("a", class_="sister"))

print(soup.find_all("a", attrs={"href": re.compile("^http://"), "id": re.compile("^link[12]")}))

# 通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的tag:
data = soup.find_all(attrs={"data-foo": "value"})
print(data)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】text参数</span><br><span class="line"></span><br><span class="line">- text 参数用于根据内容搜索标签。可以接受字符串、列表或正则表达式。</span><br><span class="line"></span><br><span class="line">- - 字符串：</span><br><span class="line"></span><br><span class="line">- - - 返回包含指定内容的标签。</span><br><span class="line">    - 例如 soup.find_all(text=&quot;Elsie&quot;) 返回所有包含文本 &quot;Elsie&quot; 的标签。</span><br><span class="line"></span><br><span class="line">- - 列表：</span><br><span class="line"></span><br><span class="line">- - - 返回包含列表中任一元素内容的标签。</span><br><span class="line">    - 例如 soup.find_all(text=[&quot;Tillie&quot;, &quot;Elsie&quot;, &quot;Lacie&quot;]) 返回所有包含文本 &quot;Tillie&quot;、&quot;Elsie&quot; 或 &quot;Lacie&quot; 的标签。</span><br><span class="line"></span><br><span class="line">- - 正则表达式：</span><br><span class="line"></span><br><span class="line">- - - 使用正则表达式来匹配内容。</span><br><span class="line">    - 例如 soup.find_all(text=re.compile(&quot;Dormouse&quot;)) 返回所有包含文本中包含 &quot;Dormouse&quot; 的标签</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"></span><br><span class="line"># 返回所有包含文本 &quot;Elsie&quot; 的标签</span><br><span class="line">print(soup.find_all(text=&quot;Elsie&quot;))</span><br><span class="line"># [&#x27;Elsie&#x27;]</span><br><span class="line"></span><br><span class="line"># 返回所有包含文本 &quot;Tillie&quot;、&quot;Elsie&quot; 或 &quot;Lacie&quot; 的标签。</span><br><span class="line">print(soup.find_all(text=[&quot;Tillie&quot;, &quot;Elsie&quot;, &quot;Lacie&quot;]))</span><br><span class="line"># [&#x27;Elsie&#x27;, &#x27;Lacie&#x27;, &#x27;Tillie&#x27;]</span><br><span class="line"></span><br><span class="line"># 返回所有包含文本中包含 &quot;Dormouse&quot; 的标签。</span><br><span class="line"># 只要包含Dormouse就可以</span><br><span class="line">print(soup.find_all(text=re.compile(&quot;Dormouse&quot;)))</span><br><span class="line"># [&quot;The Dormouse&#x27;s story&quot;, &quot;The Dormouse&#x27;s story&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="【4】limit参数">【4】limit参数</h3>
<ul>
<li>find_all() 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.</li>
<li>如果我们不需要全部结果,可以使用 limit 参数限制返回结果的数量</li>
<li>效果与SQL中的limit关键字类似</li>
<li>当搜索到的结果数量达到 limit 的限制时,就停止搜索返回结果.</li>
<li>例如 soup.find_all(“a”, limit=2) 返回前两个 <a> 标签</li>
</ul>
```python
print(soup.find_all("a", limit=2))
# [<a class="sister" target="_blank" rel="noopener" href="http://example.com/elsie" id="link1">Elsie</a>, <a class="sister" target="_blank" rel="noopener" href="http://example.com/lacie" id="link2">Lacie</a>]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【5】**recursive 参数**</span><br><span class="line"></span><br><span class="line">- recursive 参数用于控制是否递归往下查询。</span><br><span class="line">- 默认情况下，Beautiful Soup会检索当前tag的所有子孙节点。</span><br><span class="line">- 如果想要仅搜索tag的直接子节点，可以设置 recursive=False。</span><br><span class="line">- 例如 soup.find_all(&quot;div&quot;, recursive=False) 只会查找当前soup文档的直接子元素中的 &lt;div&gt; 标签</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 只会查找当前soup文档的直接子元素中的 `&lt;div&gt;` 标签。</span><br><span class="line">print(soup.find_all(&quot;div&quot;, recursive=False))</span><br></pre></td></tr></table></figure>

<h3 id="【6】查找单个find">【6】查找单个find</h3>
<ul>
<li>find()方法用于在文档中查找符合条件的tag，并返回第一个匹配的结果</li>
<li>它可以通过指定name、attrs、recursive和string等参数来过滤查找结果</li>
</ul>
```python
find( name , attrs , recursive , string , **kwargs )
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 参数介绍</span><br><span class="line">  - name：指定要查找的tag名称，可以是字符串或正则表达式</span><br><span class="line">  - attrs：指定tag 的属性，可以是字典或字典的列表</span><br><span class="line">  - recursive: 指定是否递归查找子孙tag，默认为True。</span><br><span class="line">  - string: 指定查找的文本内容，可以是字符串或正则表达式</span><br><span class="line"></span><br><span class="line">### 【7】find_all()和find()比较</span><br><span class="line"></span><br><span class="line">- find_all() 方法将返回文档中符合条件的所有tag,尽管有时候我们只想得到一个结果</span><br><span class="line">- 比如文档中只有一个&lt;body&gt;标签</span><br><span class="line"></span><br><span class="line">- - 使用 find_all() 方法来查找&lt;body&gt;标签就不太合适</span><br><span class="line">  - 使用 find_all 方法并设置 limit=1 参数不如直接使用 find() 方法</span><br><span class="line"></span><br><span class="line">- 下面两行代码是等价的:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">soup.find_all(&#x27;title&#x27;, limit=1)</span><br><span class="line"># [&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;]</span><br><span class="line"></span><br><span class="line">soup.find(&#x27;title&#x27;)</span><br><span class="line"># &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>
<p><strong>唯一的区别是</strong></p>
</li>
<li>
<ul>
<li><strong>find_all()</strong> <strong>方法的返回结果是值包含一个元素的列表</strong></li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li><strong>find()</strong> <strong>方法直接返回结果</strong></li>
<li><strong>find_all()</strong> <strong>方法没有找到目标是返回空列表</strong></li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><strong>find()</strong> <strong>方法找不到目标时,返回</strong> <strong>None</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="【8】标签名多次调用">【8】标签名多次调用</h3>
<ul>
<li>soup.head.title 是 tag的名字 方法的简写</li>
<li>这个简写的原理就是多次调用当前tag的 find() 方法</li>
</ul>
```python
soup.head.title
# <title>The Dormouse's story</title>

soup.find("head").find("title")
# <title>The Dormouse's story</title>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【9】方法扩展</span><br><span class="line"></span><br><span class="line">#### （1）find_parents()和find_parent()</span><br><span class="line"></span><br><span class="line">- https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html#find-parents-find-parent</span><br><span class="line">- find_parents() 和 find_parent() 方法用于查找当前tag的父级tag。</span><br><span class="line"></span><br><span class="line">- - find_parents():</span><br><span class="line"></span><br><span class="line">- - - 返回所有符合条件的父级tag，结果是一个生成器。</span><br><span class="line">    - 可以传入参数来进一步筛选父级tag。</span><br><span class="line"></span><br><span class="line">- - find_parent():</span><br><span class="line"></span><br><span class="line">- - - 返回第一个符合条件的父级tag</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">a_string = soup.find(text=&quot;Lacie&quot;)</span><br><span class="line">print(a_string)  # Lacie</span><br><span class="line"></span><br><span class="line"># 查找当前tag的所有父级tag</span><br><span class="line">print(a_string.find_parent())</span><br><span class="line"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(a_string.find_parents())</span><br><span class="line"></span><br><span class="line"># 查找第一个符合条件的父级tag</span><br><span class="line">print(a_string.find_parent(&quot;p&quot;))</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">&lt;p class=&quot;story&quot;&gt;</span><br><span class="line">    Once upon a time there were three little sisters; and their names were</span><br><span class="line">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span><br><span class="line">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span><br><span class="line">    &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span><br><span class="line">    and they lived at the bottom of a well.</span><br><span class="line">&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="（2）find-next-siblings-和-find-next-sibling">（2）find_next_siblings() 和 find_next_sibling()</h4>
<ul>
<li>
<p>find_next_siblings() 和 find_next_sibling() 方法用于查找当前tag后面的兄弟tag。</p>
</li>
<li>
<ul>
<li>find_next_siblings():</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>返回所有符合条件的后续兄弟tag，结果是一个列表。</li>
<li>可以传入参数来进一步筛选兄弟tag。</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>find_next_sibling():</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>返回第一个符合条件的后续兄弟tag</li>
</ul>
</li>
</ul>
</li>
</ul>
```python
first_link = soup.a

# 查找当前tag后面的第一个符合条件的兄弟tag
print(first_link.find_next_sibling("a"))
# <a class="sister" target="_blank" rel="noopener" href="http://example.com/lacie" id="link2">Lacie</a>

# 查找当前tag后面的所有符合条件的兄弟tag
print(first_link.find_next_siblings("a"))
'''
[<a class="sister" target="_blank" rel="noopener" href="http://example.com/lacie" id="link2">Lacie</a>,
<a class="sister" target="_blank" rel="noopener" href="http://example.com/tillie" id="link3">Tillie</a>
]
'''
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- find_previous_siblings() 和 find_previous_sibling()的使用类似于find_next_sibling和find_next_siblings</span><br><span class="line"></span><br><span class="line">#### （3）find_all_next() 和 find_next()</span><br><span class="line"></span><br><span class="line">- find_all_next() 和 find_next() 方法用于在当前tag之后查找符合条件的tag和字符串。 </span><br><span class="line"></span><br><span class="line">- - find_all_next(): </span><br><span class="line"></span><br><span class="line">- - - 返回所有符合条件的后续tag和文本内容，结果是一个生成器。</span><br><span class="line">    - 可以传入参数来进一步筛选结果。</span><br><span class="line"></span><br><span class="line">- - find_next(): </span><br><span class="line"></span><br><span class="line">- - - 返回第一个符合条件的后续tag或文本内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">first_link = soup.a</span><br><span class="line"></span><br><span class="line"># 查找当前tag之后所有的文本内容</span><br><span class="line">print(first_link.find_all_next(string=True))</span><br><span class="line"># [&#x27;Elsie&#x27;, &#x27;,\n&#x27;, &#x27;Lacie&#x27;, &#x27; and\n&#x27;, &#x27;Tillie&#x27;, &#x27;;\nand they lived at the bottom of a well.&#x27;, &#x27;\n&#x27;, &#x27;...&#x27;, &#x27;\n&#x27;]</span><br><span class="line"></span><br><span class="line"># 查找当前tag之后第一个符合条件的文本内容</span><br><span class="line">print(first_link.find_next(string=True)) # Elsie</span><br></pre></td></tr></table></figure>

<ul>
<li>find_all_previous() 和 find_previous()的使用类似于find_all_next() 和 find_next()</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
