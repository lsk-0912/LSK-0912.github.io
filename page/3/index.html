<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:type" content="website">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/page/3/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="坤">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aurora-lsk.asia/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/jQuery%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/jQuery%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">jQuery介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>jQuery介绍</h1>
<h2 id="【一】什么是jQuery">【一】什么是jQuery</h2>
<h3 id="【1】概括">【1】概括</h3>
<ul>
<li>jQuery是一个轻量级的、兼容多浏览器的JavaScript库</li>
<li>jQuery使用户能够更方便地处理HTML Document、Events、实现动画效果、方便地进行Ajax交互，能够极大地简化JavaScript编程。它的宗旨就是：“Write less, do mor</li>
</ul>
<h3 id="【2】小结">【2】小结</h3>
<ul>
<li>
<p>jQuery是一个第三方的库</p>
</li>
<li>
<p>jQuery内部封装了原生的JavaScript代码</p>
</li>
<li>
<p>减少了代码的书写量就完成了JavaScript的操作，就像是python中的模块</p>
</li>
<li>
<p>前端又叫类库</p>
</li>
<li>
<p>兼容多个浏览器</p>
</li>
<li>
<p>Ajax交互</p>
<ul>
<li>异步提交 局部刷新</li>
</ul>
</li>
</ul>
<h2 id="【二】jQuery中导入库发生了那些事情">【二】jQuery中导入库发生了那些事情</h2>
<ul>
<li>在jQuery中导入库可以通过一下步骤</li>
</ul>
<h3 id="【1】获取类库文件">【1】获取类库文件</h3>
<ul>
<li>首先获取需要的类库文件（通常是一个JavaScript文件），可以从官网等地方下载乃</li>
</ul>
<h3 id="【2】导入类库文件">【2】导入类库文件</h3>
<ul>
<li>将类库文件保存在项目目录中，并在HTML文件中使用<code>&lt;script&gt;</code>标签来导入类库文件</li>
<li>在<code>&lt;script&gt;</code>标签中，使用src属性指定类库的路径，让浏览器能够加载并执行该文件</li>
</ul>
<p>比如</p>
<ul>
<li>这样，当浏览器解析到这两个<script>标签时，就会下载并执行对应的类库文件</li>
</ul>
```javascript
<script src="path/to/jquery.js"></script>
<script src="path/to/plugin.js"></script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】使用类库功能</span><br><span class="line"></span><br><span class="line">- 一旦类库文件被加载和执行，就可以使用其中提供的功能</span><br><span class="line">- 类库会扩展或增强原生 JavaScript 的功能，通过在页面中引入类库文件，我们可以使用类库提供的函数、方法或特性</span><br><span class="line"></span><br><span class="line">比如</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">$(document).ready(function() &#123;</span><br><span class="line">  // 在文档加载完成后执行一些代码</span><br><span class="line">  // 使用类库提供的函数或方法</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>上述代码示例中，$符号是 jQuery 的别名，通过调用.ready()方法，我们可以确保在文档加载完成后执行传入的函数。</li>
</ul>
<h3 id="【4】总结">【4】总结</h3>
<ul>
<li>总结起来，导入 jQuery 类库涉及获取类库文件、在 HTML 文件中导入类库文件，并通过调用类库提供的功能来实现对页面元素的操作、动态加载和事件处理等功能。</li>
</ul>
<h2 id="【三】jQuery的优势">【三】jQuery的优势</h2>
<h2 id="【1】详细">【1】详细</h2>
<h3 id="（1）简化DOM操作：">（1）简化DOM操作：</h3>
<ul>
<li>jQuery提供了强大且简洁的API，使得对DOM元素的选择、遍历和操作变得更加容易。</li>
<li>通过使用jQuery，可以通过简洁的语法实现复杂的DOM操作，减少编写冗长代码的工作量。</li>
</ul>
<h3 id="（2）跨浏览器兼容性">（2）跨浏览器兼容性</h3>
<ul>
<li>jQuery解决了不同浏览器之间的兼容性问题。</li>
<li>它封装了一致的API，使得开发人员能够编写跨浏览器兼容的代码，无需关注各种细节和差异。</li>
</ul>
<h3 id="（3）丰富的插件生态系统：">（3）丰富的插件生态系统：</h3>
<ul>
<li>jQuery拥有庞大的插件生态系统，涵盖了各种功能和特性，如动画效果、表单验证、图像轮播等。</li>
<li>这些插件可以大幅度提高开发效率，让开发人员能够快速实现复杂的功能。</li>
</ul>
<h3 id="（4）AJAX支持">（4）AJAX支持</h3>
<ul>
<li>jQuery对AJAX进行了封装，使得在Web应用中进行异步请求变得更加简单。</li>
<li>通过使用jQuery的AJAX API，可以轻松地发送AJAX请求、处理响应和更新页面内容，实现更好的用户体验。</li>
</ul>
<h3 id="（5）动画效果">（5）动画效果</h3>
<ul>
<li>jQuery提供了丰富的动画效果和过渡效果，可以轻松地实现元素的淡入淡出、滑动、展开收起等动画效果，给网页增添了交互和生动性。</li>
</ul>
<h3 id="（6）扩展性与可定制性">（6）扩展性与可定制性</h3>
<ul>
<li>jQuery允许开发人员根据自己的需求进行定制和扩展。</li>
<li>开发人员可以自定义插件，编写自己的jQuery代码，并且可以根据项目需求选择只导入所需的模块，减小文件体积。</li>
</ul>
<h2 id="【2】小结-2">【2】小结</h2>
<h3 id="（1）一款轻量级的JS框架。">（1）一款轻量级的JS框架。</h3>
<ul>
<li>jQuery核心js文件才几十kb，不会影响页面加载速度。</li>
</ul>
<h3 id="（2）丰富的DOM选择器">（2）丰富的DOM选择器</h3>
<ul>
<li>jQuery的选择器用起来很方便</li>
<li>比如要找到某个DOM对象的相邻元素，JS可能要写好几行代码，而jQuery一行代码就搞定了，再比如要将一个表格的隔行变色，jQuery也是一行代码搞定。</li>
</ul>
<h3 id="（3）链式表达式">（3）链式表达式</h3>
<ul>
<li>jQuery的链式操作可以把多个操作写在一行代码里，更加简洁。</li>
</ul>
<h3 id="（4）事件、样式、动画支持">（4）事件、样式、动画支持</h3>
<ul>
<li>jQuery还简化了js操作css的代码，并且代码的可读性也比js要强。</li>
</ul>
<h3 id="（5）Ajax操作支持">（5）Ajax操作支持</h3>
<ul>
<li>jQuery简化了AJAX操作，后端只需返回一个JSON格式的字符串就能完成与前端的通信。</li>
</ul>
<h3 id="（6）跨浏览器兼容">（6）跨浏览器兼容</h3>
<ul>
<li>jQuery基本兼容了现在主流的浏览器，不用再为浏览器的兼容问题而伤透脑筋。</li>
</ul>
<h3 id="（7）插件扩展开发">（7）插件扩展开发</h3>
<ul>
<li>
<p>jQuery有着丰富的第三方的插件</p>
</li>
<li>
<ul>
<li>例如：树形菜单、日期控件、图片切换插件、弹出窗口等等基本前端页面上的组件都有对应插件，并且用jQuery插件做出来的效果很炫，并且可以根据自己需要去改写和封装插件，简单实用。</li>
</ul>
</li>
</ul>
<h2 id="【四】jQuery学习内容">【四】jQuery学习内容</h2>
<h3 id="【1】内容概括">【1】内容概括</h3>
<ul>
<li>选择器</li>
<li>筛选器</li>
<li>样式操作</li>
<li>文本操作</li>
<li>属性操作</li>
<li>文档处理</li>
<li>事件</li>
<li>动画效果</li>
<li>插件</li>
<li>each、data、Ajax</li>
</ul>
<h3 id="【2】下载链接">【2】下载链接</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://jquery.com/">jQuery</a></li>
</ul>
<h2 id="【五】jQuery的版本">【五】jQuery的版本</h2>
<h2 id="【1】1-x">【1】1.x</h2>
<ul>
<li>兼容IE678,使用最为广泛的，官方只做BUG维护，功能不再新增。</li>
<li>因此一般项目来说，使用1.x版本就可以了，最终版本：1.12.4 (2016年5月20日)</li>
</ul>
<h2 id="【2】2-x：">【2】2.x：</h2>
<ul>
<li>不兼容IE678，很少有人使用，官方只做BUG维护，功能不再新增。</li>
<li>如果不考虑兼容低版本的浏览器可以使用2.x，最终版本：2.2.4 (2016年5月20日)</li>
</ul>
<h2 id="【3】3-x：">【3】3.x：</h2>
<ul>
<li>不兼容IE678，只支持最新的浏览器。</li>
<li>需要注意的是很多老的jQuery插件不支持3.x版。目前该版本是官方主要更新维护的版本。</li>
</ul>
<p><em>维护IE678是一件让人头疼的事情，一般我们都会额外加载一个CSS和JS单独处理。值得庆幸的是使用这些浏览器的人也逐步减少，PC端用户已经逐步被移动端用户所取代，如果没有特殊要求的话，一般都会选择放弃对678的支持。</em></p>
<h2 id="【六】jQuery配置">【六】jQuery配置</h2>
<h3 id="【1】基于网络分发（CDN）">【1】基于网络分发（CDN）</h3>
<h4 id="（1）官网">（1）官网</h4>
<ul>
<li>
<p>直接引入jQuery提供的CDN服务(基于网络请求加载)</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">BootCDN - Bootstrap 中文网开源项目免费 CDN 加速服务</a></p>
</li>
</ul>
<h4 id="（2）压缩">（2）压缩</h4>
<ul>
<li>如果 URL 结尾含有 min、compressed、gz 或 .gzipped 等词汇及其对应后缀，如 .min.js、.gz.css 等，则可能是指向已压缩的文件。</li>
<li>后缀名区分是否已压缩</li>
</ul>
<p>未压缩：<a target="_blank" rel="noopener" href="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.js">https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.js</a></p>
<p>已压缩：<a target="_blank" rel="noopener" href="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js">https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js</a></p>
<ul>
<li>
<p>缺点</p>
</li>
<li>
<ul>
<li>必须联网</li>
</ul>
</li>
</ul>
<h1>jQuery之引入</h1>
<h2 id="【一】jQuery基本语法">【一】jQuery基本语法</h2>
<h3 id="【1】语法">【1】语法</h3>
```javascript
jQuery(选择器).action()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】简写语法</span><br><span class="line"></span><br><span class="line">- 讲jQuery换成$</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">$(选择器).action()</span><br></pre></td></tr></table></figure>

<h2 id="【二】jQuery的引入方式">【二】jQuery的引入方式</h2>
<h3 id="【1】两种引入方式">【1】两种引入方式</h3>
<h4 id="（1）方式一：直接创建本地js文件，HTML导入js文件">（1）方式一：直接创建本地js文件，HTML导入js文件</h4>
<ul>
<li>进入官网–&gt;<a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">BootCDN - Bootstrap 中文网开源项目免费 CDN 加速服务</a>–&gt;点击jQuery–&gt;复制链接–&gt;打开链接–&gt;把文本复制到创建好的js文件里</li>
</ul>
<h4 id="（2）方式二：直接浏览访问地址">（2）方式二：直接浏览访问地址</h4>
<ul>
<li>进入官网–&gt;<a target="_blank" rel="noopener" href="https://www.bootcdn.cn/">BootCDN - Bootstrap 中文网开源项目免费 CDN 加速服务</a>–&gt;点击jQuery–&gt;复制链接标签添加到head标签内部–》导入<code>&lt;script&gt;</code></li>
</ul>
```javascript
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【三】基础选择器</span><br><span class="line"></span><br><span class="line">### 【1】元素选择器（Element Selector）</span><br><span class="line"></span><br><span class="line">- 标签名字作为选择器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">$(&quot;标签名&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="【2】ID选择器（ID-Selector）">【2】ID选择器（ID Selector）</h3>
<ul>
<li>选择用了id选择器的所有标签</li>
</ul>
```javascript
$("#id对应的值")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】类选择器（Class Selector）</span><br><span class="line"></span><br><span class="line">- 选择用了class选择器的所有标签</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">$(&quot;.类对应的值&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="【4】属性选择器（Attribute-Selector）">【4】属性选择器（Attribute Selector）</h3>
<ul>
<li>元素的属性和属性值进行选择</li>
</ul>
```javascript
$("[标签里的属性]")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【5】选择器组合（Multiple Selectors）</span><br><span class="line"></span><br><span class="line">- 选择多个选择器，选择器之间用&quot;，&quot;隔开</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```javascript</span><br><span class="line">$(&#x27;p, .myClass&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="【6】后代选择器（Descendant-Selector）">【6】后代选择器（Descendant Selector）</h3>
<ul>
<li>选择某个元素的后代元素</li>
<li>比如，选择所有 “myElement” 元素内的段落p标签元素</li>
</ul>
```javascript
$('#myElement p');
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/python%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/python%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">python安装过程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：11:52:37" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】python安装过程</h1>
<h2 id="【1】安装路径">【1】安装路径</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.python.org/">https://www.python.org/</a></li>
</ul>
<h2 id="2-选择win系统">[2]选择win系统</h2>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326142834370.png" alt="image-20240326142834370"></p>
<h2 id="【3】搜索指定版本">【3】搜索指定版本</h2>
<ul>
<li>win系统快捷键 【ctrl+f】</li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326143229243.png" alt="image-20240326143229243"></p>
<ul>
<li>macos系统快捷键【command+f】</li>
</ul>
<h3 id="（1）打开Python解释器官网">（1）打开Python解释器官网</h3>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151055871.png"><img src="http://zhaochunze.dream521.site/202311151055871.png" alt="image-20231115105550707"></a></p>
<h3 id="（2）点击Downloads">（2）点击Downloads</h3>
<ul>
<li>选择macOS</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151133981.png"><img src="http://zhaochunze.dream521.site/202311151133981.png" alt="a227694c1db0b4a82a1ab5b54eb9ebc"></a></p>
<h3 id="（3）下载安装程序">（3）下载安装程序</h3>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151132419.png"><img src="http://zhaochunze.dream521.site/202311151132419.png" alt="274616ac2ad83134b8eccab3749d420"></a></p>
<h2 id="【5】安装解释器（win）">【5】安装解释器（win）</h2>
<h3 id="（1）双击安装好的程序">（1）双击安装好的程序</h3>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326150017091.png" alt="image-20240326150017091"></p>
<ul>
<li></li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326150042839.png" alt="image-20240326150042839"></p>
<h3 id="（2）自定义程序位置">（2）自定义程序位置</h3>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326150130183.png" alt="image-20240326150130183"></p>
<h3 id="3-等待安装">(3)等待安装</h3>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326150203062.png" alt="image-20240326150203062"></p>
<h3 id="（4）安装成功">（4）安装成功</h3>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326150220454.png" alt="image-20240326150220454"></p>
<h2 id="【6】macos版本解释器安装">【6】macos版本解释器安装</h2>
<h3 id="（1）打开Python解释器官网-2">（1）打开Python解释器官网</h3>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151055871.png"><img src="http://zhaochunze.dream521.site/202311151055871.png" alt="image-20231115105550707"></a></p>
<h3 id="（2）点击Downloads-2">（2）点击Downloads</h3>
<ul>
<li>选择macOS</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151133981.png"><img src="http://zhaochunze.dream521.site/202311151133981.png" alt="a227694c1db0b4a82a1ab5b54eb9ebc"></a></p>
<h3 id="（3）下载安装程序-2">（3）下载安装程序</h3>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151132419.png"><img src="http://zhaochunze.dream521.site/202311151132419.png" alt="274616ac2ad83134b8eccab3749d420"></a></p>
<h3 id="（4）保存文件">（4）保存文件</h3>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151135543.png"><img src="http://zhaochunze.dream521.site/202311151135543.png" alt="b9f551a549af506ed239dc4fd680758"></a></p>
<ul>
<li>
<h3 id="双击安装程序">双击安装程序</h3>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151137068.png"><img src="http://zhaochunze.dream521.site/202311151137068.png" alt="8d40eb7d7cabed2a04a2dd2d29befb0"></a></p>
<ul>
<li>
<h3 id="继续">继续</h3>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151138884.png"><img src="http://zhaochunze.dream521.site/202311151138884.png" alt="fb93c1d3a6cbef44467fea7f2803dc0"></a></p>
<ul>
<li>
<h3 id="安装">安装</h3>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151218668.png"><img src="http://zhaochunze.dream521.site/202311151218668.png" alt="1505f7e28a76eedc83a8e4b0b88f6a3"></a></p>
<ul>
<li>
<h3 id="开始安装">开始安装</h3>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151219326.png"><img src="http://zhaochunze.dream521.site/202311151219326.png" alt="a66e1fe6ae33e9ada51652b70c05e3a"></a></p>
<ul>
<li>安装成功</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://zhaochunze.dream521.site/202311151219194.png"><img src="http://zhaochunze.dream521.site/202311151219194.png" alt="8e087289cbe44e9b433d21533954af4"></a></p>
<h1>【二】多版本共存问题</h1>
<h2 id="【1】多版本共存的原因">【1】多版本共存的原因</h2>
<ul>
<li>电脑系统里存在多个python解释器</li>
<li>比如有python3.10和python3.8</li>
</ul>
<blockquote>
<p>解救多版本共存有两种办法</p>
</blockquote>
<h2 id="【2】查看电脑的环境变量">【2】查看电脑的环境变量</h2>
<h3 id="（方法一）">（方法一）</h3>
<ul>
<li>打开设置搜索环境变量</li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326143956584.png" alt="image-20240326143956584"></p>
<ul>
<li>
<p>点击环境变量</p>
</li>
<li>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326144017017.png" alt="image-20240326144017017"></p>
</li>
<li>
<p>系统变量</p>
</li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326144531023.png" alt="image-20240326144531023"></p>
<ul>
<li>
<p>找到python310上移到最前面，并点击确定按钮</p>
</li>
<li>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326144133232.png" alt="image-20240326144133232"></p>
</li>
<li>
<p>很少有人用</p>
</li>
</ul>
<h3 id="（方法二）">（方法二）</h3>
<ul>
<li>将原本的python解释器快捷方式（python.exe）复制一份成副本</li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326151223040.png" alt="image-20240326151223040"></p>
<ul>
<li>
<p>其它的解释器也是如此</p>
</li>
<li>
<p>打开命令窗口（win+r），输入cmd</p>
</li>
<li>
<p>把副本的名字改成版本型号（python310）</p>
</li>
</ul>
<p><img src="C:%5CUsers%5C86177%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20240326145203744.png" alt="image-20240326145203744"></p>
<ul>
<li>用哪个版本就输入哪个版本就可以</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/selenium%E6%A1%86%E6%9E%B6%E4%B9%8B%E5%8A%A8%E4%BD%9C%E9%93%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/selenium%E6%A1%86%E6%9E%B6%E4%B9%8B%E5%8A%A8%E4%BD%9C%E9%93%BE/" class="post-title-link" itemprop="url">selenium框架之动作链</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>selenium框架之动作链</h1>
<h2 id="【一】前言">【一】前言</h2>
<ul>
<li>我们还有另外一些操作，它们没有特定的执行对象
<ul>
<li>比如鼠标的拖拽，键盘按键等</li>
<li>这种动作就叫做动作链</li>
</ul>
</li>
</ul>
<h3 id="【1】模拟鼠标操作">【1】模拟鼠标操作</h3>
<ul>
<li>导入ActionChains类</li>
</ul>
```python
from selenium.webdriver.common.action_chains import ActionChains
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 这个操作就像是click操作</span><br><span class="line"></span><br><span class="line">| 操作 | 函数              |</span><br><span class="line">| ---- | ----------------- |</span><br><span class="line">| 右击 | context_click()   |</span><br><span class="line">| 双击 | double_click()    |</span><br><span class="line">| 拖拽 | double_and_drop() |</span><br><span class="line">| 悬停 | move_to_element() |</span><br><span class="line">| 执行 | perform()         |</span><br><span class="line"></span><br><span class="line">### 【2】使用操作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 导入鼠标动作链</span><br><span class="line">from selenium.webdriver.common.action_chains import ActionChains</span><br><span class="line"># 导入浏览器驱动</span><br><span class="line">from selenium.webdriver import Chrome</span><br><span class="line"># 导入查找器</span><br><span class="line">from selenium.webdriver.common.by import By</span><br><span class="line">from selenium.webdriver.chrome.service import Service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 管理和启动本地的ChromeDriver服务</span><br><span class="line"># ChromeDriver：浏览器驱动</span><br><span class="line">service = Service(&#x27;./chromedriver.exe&#x27;)</span><br><span class="line"># 创建浏览器对象</span><br><span class="line">browser = Chrome(</span><br><span class="line">	service=service</span><br><span class="line">)</span><br><span class="line"># 打开地址</span><br><span class="line">browser.get(&#x27;http://sahitest.com/demo/dragDropMooTools.htm&#x27;)</span><br><span class="line"># 找到被拖拽的元素</span><br><span class="line">dragger = browser.find_element(By.XPATH, &#x27;//*[@id=&quot;dragger&quot;]&#x27;)</span><br><span class="line"># 目标一</span><br><span class="line">item1 = browser.find_element(By.XPATH, &#x27;/html/body/div[2]&#x27;)</span><br><span class="line"></span><br><span class="line"># 创建ActionChains对象</span><br><span class="line"># browser：创建的历览器对象</span><br><span class="line">action = ActionChains(driver=browser)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># dragger拖拽到---》item1上</span><br><span class="line"># perform：执行</span><br><span class="line"># drag_and_drop：拖拽</span><br><span class="line">action.drag_and_drop(dragger,item1).perform()</span><br></pre></td></tr></table></figure>

<h3 id="【2】模拟键盘操作">【2】模拟键盘操作</h3>
<ul>
<li>导入Keys类</li>
</ul>
```python
from selenium.webdriver.common.keys import Keys
```

<table>
<thead>
<tr>
<th>操作</th>
<th>函数</th>
</tr>
</thead>
<tbody>
<tr>
<td>删除键</td>
<td>send_keys(Keys.BACK_SPACE)</td>
</tr>
<tr>
<td>空格键</td>
<td>send_keys(Keys.SPACE)</td>
</tr>
<tr>
<td>制表键</td>
<td>send_keys(Keys.TAB)</td>
</tr>
<tr>
<td>回退键</td>
<td>send_keys(Keys.ESCAPE)</td>
</tr>
<tr>
<td>回车</td>
<td>send_keys(Keys.ENTER)</td>
</tr>
<tr>
<td>全选</td>
<td>send_keys(Keys.CONTROL,‘a’)</td>
</tr>
<tr>
<td>复制</td>
<td>send_keys(Keys.CONTROL,‘c’)</td>
</tr>
<tr>
<td>剪切</td>
<td>send_keys(Keys.CONTROL,‘x’)</td>
</tr>
<tr>
<td>粘贴</td>
<td>send_keys(Keys.CONTROL,‘v’)</td>
</tr>
<tr>
<td>键盘F1</td>
<td>send_keys(Keys.F1)</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/python%E9%94%81%E7%9B%B8%E5%85%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/python%E9%94%81%E7%9B%B8%E5%85%B3/" class="post-title-link" itemprop="url">python锁相关</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>一、同步锁</h1>
<h2 id="1-1-多个线程抢占资源的情况">1.1 多个线程抢占资源的情况</h2>
```python
from threading import Thread
import os,time
def work():
    global n
    temp=n
    time.sleep(0.001)
    n=temp-1
if __name__ == '__main__':
    n=100
    l=[]
    for i in range(100):
        p=Thread(target=work)
        l.append(p)
        p.start()
    for p in l:
        p.join()

    print(n) #结果可能为0--100间的数字
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 1.1.1 对公共数据的操作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line">import threading</span><br><span class="line">R=threading.Lock()</span><br><span class="line">R.acquire()</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">对公共数据的操作</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">R.release()</span><br></pre></td></tr></table></figure>

<h2 id="1-2-同步锁的引入">1.2 同步锁的引入</h2>
```python
from threading import Thread,Lock
import os,time
def work():
    #  这里执行
    global n
    lock.acquire()
    temp=n
    time.sleep(0.0011)
    n=temp-1
    lock.release()
    # 这里执行
if __name__ == '__main__':
    lock=Lock()
    n=100
    l=[]
    for i in range(100):
        p=Thread(target=work)
        l.append(p)
        p.start()
    for p in l:
        p.join()

    print(n) #结果肯定为0，由原来的并发执行变成串行，牺牲了执行效率保证了数据安全
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 1.3 互斥锁与join的区别</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">#不加锁:并发执行,速度快,数据不安全</span><br><span class="line">from threading import current_thread,Thread,Lock</span><br><span class="line">import os,time</span><br><span class="line">def task():</span><br><span class="line">    global n</span><br><span class="line">    print(&#x27;%s is running&#x27; %current_thread().getName())</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(0.5)</span><br><span class="line">    n=temp-1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    n=100</span><br><span class="line">    lock=Lock()</span><br><span class="line">    threads=[]</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    for i in range(100):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    for t in threads:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    print(&#x27;主:%s n:%s&#x27; %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Thread-1 is running</span><br><span class="line">Thread-2 is running</span><br><span class="line">......</span><br><span class="line">Thread-100 is running</span><br><span class="line">主:0.5216062068939209 n:99</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#不加锁:未加锁部分并发执行,加锁部分串行执行,速度慢,数据安全</span><br><span class="line">from threading import current_thread,Thread,Lock</span><br><span class="line">import os,time</span><br><span class="line">def task():</span><br><span class="line">    #未加锁的代码并发运行</span><br><span class="line">    time.sleep(3)</span><br><span class="line">    print(&#x27;%s start to run&#x27; %current_thread().getName())</span><br><span class="line">    global n</span><br><span class="line">    #加锁的代码串行运行</span><br><span class="line">    lock.acquire()</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(0.5)</span><br><span class="line">    n=temp-1</span><br><span class="line">    lock.release()</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    n=100</span><br><span class="line">    lock=Lock()</span><br><span class="line">    threads=[]</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    for i in range(100):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    for t in threads:</span><br><span class="line">        t.join()</span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    print(&#x27;主:%s n:%s&#x27; %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Thread-1 is running</span><br><span class="line">Thread-2 is running</span><br><span class="line">......</span><br><span class="line">Thread-100 is running</span><br><span class="line">主:53.294203758239746 n:0</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"># 有的同学可能有疑问:既然加锁会让运行变成串行,那么我在start之后立即使用join,就不用加锁了啊,也是串行的效果啊</span><br><span class="line"></span><br><span class="line"># 没错:在start之后立刻使用jion,肯定会将100个任务的执行变成串行,毫无疑问,最终n的结果也肯定是0,是安全的,但问题是</span><br><span class="line"></span><br><span class="line"># start后立即join:任务内的所有代码都是串行执行的,而加锁,只是加锁的部分即修改共享数据的部分是串行的</span><br><span class="line"></span><br><span class="line"># 单从保证数据安全方面,二者都可以实现,但很明显是加锁的效率更高.</span><br><span class="line">from threading import current_thread,Thread,Lock</span><br><span class="line">import os,time</span><br><span class="line">def task():</span><br><span class="line">    time.sleep(3)</span><br><span class="line">    print(&#x27;%s start to run&#x27; %current_thread().getName())</span><br><span class="line">    global n</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(0.5)</span><br><span class="line">    n=temp-1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    n=100</span><br><span class="line">    lock=Lock()</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    for i in range(100):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        t.start()</span><br><span class="line">        t.join()</span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    print(&#x27;主:%s n:%s&#x27; %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Thread-1 start to run</span><br><span class="line">Thread-2 start to run</span><br><span class="line">......</span><br><span class="line">Thread-100 start to run</span><br><span class="line">主:350.6937336921692 n:0 #耗时是多么的恐怖</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">）</span><br></pre></td></tr></table></figure>

<h1>二、死锁与递归锁</h1>
<p><strong>进程也有死锁与递归锁，在进程那里忘记说了，放到这里一起说了。</strong></p>
<p>所谓死锁：是指两个或两个以上的进程或线程在执行过程中，因争夺资源而造成的一种互相等待的现象，若无外力作用，它们都将无法推进下去。此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程，如下就是死锁</p>
<h2 id="2-1-死锁">2.1 死锁</h2>
```python
from threading import Lock as Lock
import time
mutexA=Lock()
mutexA.acquire()
mutexA.acquire()
print(123)
mutexA.release()
mutexA.release()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">解决方法：递归锁，在Python中为了支持在同一线程中多次请求同一资源，python提供了可重入锁RLock。</span><br><span class="line"></span><br><span class="line">这个RLock内部维护着一个Lock和一个counter变量，counter记录了acquire的次数，从而使得资源可以被多次require。直到一个线程所有的acquire都被release，其他的线程才能获得资源。上面的例子如果使用RLock代替Lock，则不会发生死锁。</span><br><span class="line"></span><br><span class="line">## 2.2 递归锁RLock</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line">from threading import RLock as Lock</span><br><span class="line">import time</span><br><span class="line">mutexA=Lock()</span><br><span class="line">mutexA.acquire()</span><br><span class="line">mutexA.acquire()</span><br><span class="line">print(123)</span><br><span class="line">mutexA.release()</span><br><span class="line">mutexA.release()</span><br></pre></td></tr></table></figure>

<h1>三、典型问题：科学家吃面</h1>
<h2 id="3-1-死锁问题">3.1 死锁问题</h2>
```
import time
from threading import Thread,Lock
noodle_lock = Lock()
fork_lock = Lock()
def eat1(name):
    noodle_lock.acquire()
    print('%s 抢到了面条'%name)
    fork_lock.acquire()
    print('%s 抢到了叉子'%name)
    print('%s 吃面'%name)
    fork_lock.release()
    noodle_lock.release()

def eat2(name):
    fork_lock.acquire()
    print('%s 抢到了叉子' % name)
    time.sleep(1)
    noodle_lock.acquire()
    print('%s 抢到了面条' % name)
    print('%s 吃面' % name)
    noodle_lock.release()
    fork_lock.release()

for name in ['哪吒','lqz','tank']:
    t1 = Thread(target=eat1,args=(name,))
    t2 = Thread(target=eat2,args=(name,))
    t1.start()
    t2.start()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 3.2 递归锁解决死锁问题</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line">import time</span><br><span class="line">from threading import Thread,RLock</span><br><span class="line">fork_lock = noodle_lock = RLock()</span><br><span class="line">def eat1(name):</span><br><span class="line">    noodle_lock.acquire()</span><br><span class="line">    print(&#x27;%s 抢到了面条&#x27;%name)</span><br><span class="line">    fork_lock.acquire()</span><br><span class="line">    print(&#x27;%s 抢到了叉子&#x27;%name)</span><br><span class="line">    print(&#x27;%s 吃面&#x27;%name)</span><br><span class="line">    fork_lock.release()</span><br><span class="line">    noodle_lock.release()</span><br><span class="line"></span><br><span class="line">def eat2(name):</span><br><span class="line">    fork_lock.acquire()</span><br><span class="line">    print(&#x27;%s 抢到了叉子&#x27; % name)</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    noodle_lock.acquire()</span><br><span class="line">    print(&#x27;%s 抢到了面条&#x27; % name)</span><br><span class="line">    print(&#x27;%s 吃面&#x27; % name)</span><br><span class="line">    noodle_lock.release()</span><br><span class="line">    fork_lock.release()</span><br><span class="line"></span><br><span class="line">for name in [&#x27;哪吒&#x27;,&#x27;lqz&#x27;,&#x27;egon&#x27;]:</span><br><span class="line">    t1 = Thread(target=eat1,args=(name,))</span><br><span class="line">    t2 = Thread(target=eat2,args=(name,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br></pre></td></tr></table></figure>

<h1>四 信号量(Semaphore)</h1>
```python
# Semaphore:信号量可以理解为多把锁，同时允许多个线程来更改数据
from threading import Thread,Semaphore
import time
import random
sm=Semaphore(5)

def task(name):
    sm.acquire()
    print('%s正在蹲坑'%name)

    time.sleep(random.randint(1,3))
    sm.release()

if __name__ == '__main__':
    for i in range(100):
        t=Thread(target=task,args=(i,))
        t.start()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 五 Event事件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 一些线程需要等到其他线程执行完成之后才能执行，类似于发射信号</span><br><span class="line"># 比如一个线程等待另一个线程执行结束再继续执行</span><br><span class="line"></span><br><span class="line">from threading import Thread,Event</span><br><span class="line">import time</span><br><span class="line">event=Event()</span><br><span class="line">def girl(name):</span><br><span class="line">    print(&#x27;%s 还在谈着恋爱&#x27;%name)</span><br><span class="line">    time.sleep(3)</span><br><span class="line">    event.set()</span><br><span class="line">    print(&#x27;%s 单身了&#x27;%name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def boy(name):</span><br><span class="line">    print(&#x27;%s 等着女神分手&#x27;%name)</span><br><span class="line">    event.wait()</span><br><span class="line">    print(&#x27;女神分手了，开始追&#x27;)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    t=Thread(target=girl,args=(&#x27;刘亦菲&#x27;,))</span><br><span class="line">    t.start()</span><br><span class="line">    for i in range(5):</span><br><span class="line">        t=Thread(target=boy,args=(&#x27;屌丝男%s号&#x27;%i,))</span><br><span class="line">        t.start()</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"># 两个线程，一个读文件上部分，另一个读下部分</span><br><span class="line"></span><br><span class="line"># 验证GIL锁的存在方式一</span><br><span class="line"># from threading import Thread</span><br><span class="line"># def task():</span><br><span class="line">#     while True:</span><br><span class="line">#         pass</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#</span><br><span class="line">#     for i in range(6):</span><br><span class="line">#         t=Thread(target=task,)</span><br><span class="line">#         t.start()</span><br><span class="line"></span><br><span class="line"># GIL与普通互斥锁的区别</span><br><span class="line"></span><br><span class="line"># from threading import Thread,Lock</span><br><span class="line"># import time</span><br><span class="line"># mutex=Lock()</span><br><span class="line"># money=100</span><br><span class="line"># def task():</span><br><span class="line">#     global money</span><br><span class="line">#     mutex.acquire()</span><br><span class="line">#     temp=money</span><br><span class="line">#     time.sleep(0.1)</span><br><span class="line">#     money=temp-1</span><br><span class="line">#     mutex.release()</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     ll=[]</span><br><span class="line">#     for i in range(100):</span><br><span class="line">#         t=Thread(target=task)</span><br><span class="line">#         t.start()</span><br><span class="line">#         ll.append(t)</span><br><span class="line">#         # t.join()</span><br><span class="line">#     for i,t in enumerate(ll):</span><br><span class="line">#         t.join()</span><br><span class="line">#     print(money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># io密集型和计算密集型</span><br><span class="line"># 单核：单核不管是计算密集还是io密集都用线程</span><br><span class="line"># 多核：计算密集型用多进程，io密集型用多线程</span><br><span class="line">from multiprocessing import Process</span><br><span class="line">from threading import Thread</span><br><span class="line"># import time</span><br><span class="line"># def task():</span><br><span class="line">#     res=0</span><br><span class="line">#     for i in range(10000000):</span><br><span class="line">#         res+=i</span><br><span class="line">#     print(res)</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     ctime=time.time()</span><br><span class="line">#     ll=[]</span><br><span class="line">#     for i in range(10):</span><br><span class="line">#         t=Thread(target=task)</span><br><span class="line">#         # t=Process(target=task)</span><br><span class="line">#         t.start()</span><br><span class="line">#         ll.append(t)</span><br><span class="line">#     for t in ll:</span><br><span class="line">#         t.join()</span><br><span class="line">#     print(time.time()-ctime)</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># from threading import Thread</span><br><span class="line"># import time</span><br><span class="line"># def task():</span><br><span class="line">#     time.sleep(2)</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     ctime=time.time()</span><br><span class="line">#     ll=[]</span><br><span class="line">#     for i in range(10):</span><br><span class="line">#         t=Thread(target=task)</span><br><span class="line">#         # t=Process(target=task)</span><br><span class="line">#         t.start()</span><br><span class="line">#         ll.append(t)</span><br><span class="line">#     for t in ll:</span><br><span class="line">#         t.join()</span><br><span class="line">#     print(time.time()-ctime)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 死锁现象（哲学家就餐问题）</span><br><span class="line">#递归锁，在Python中为了支持在同一线程中多次请求同一资源，python提供了可重入锁RLock</span><br><span class="line"># 这个RLock内部维护着一个Lock和一个counter变量，counter记录了acquire的次数，从而使得资源可以被多次require。</span><br><span class="line"># 直到一个线程所有的acquire都被release，其他的线程才能获得资源。上面的例子如果使用RLock代替Lock，则不会发生死锁</span><br><span class="line"># from threading import Thread,RLock,Lock</span><br><span class="line"># import time</span><br><span class="line">#</span><br><span class="line"># # mutex1=RLock()</span><br><span class="line"># # mutex2=mutex1=RLock()</span><br><span class="line"># mutex2=mutex1=Lock()</span><br><span class="line">#</span><br><span class="line"># def eat1(name):</span><br><span class="line">#     mutex1.acquire()</span><br><span class="line">#     print(&#x27;%s抢到了第一只筷子&#x27;%name)</span><br><span class="line">#     mutex2.acquire()</span><br><span class="line">#     print(&#x27;%s抢到了第二只筷子&#x27;%name)</span><br><span class="line">#     print(&#x27;%s开始吃饭&#x27;%name)</span><br><span class="line">#     mutex2.release()</span><br><span class="line">#     print(&#x27;%s放下第二只筷子&#x27;%name)</span><br><span class="line">#     mutex1.release()</span><br><span class="line">#     print(&#x27;%s放下第一只筷子&#x27;%name)</span><br><span class="line">#</span><br><span class="line"># def eat2(name):</span><br><span class="line">#     mutex2.acquire()</span><br><span class="line">#     print(&#x27;%s抢到了第二只筷子&#x27;%name)</span><br><span class="line">#     print(&#x27;%s思考了1s&#x27;%name)</span><br><span class="line">#     time.sleep(1)</span><br><span class="line">#     mutex1.acquire()</span><br><span class="line">#     print(&#x27;%s抢到了第一只筷子&#x27;%name)</span><br><span class="line">#     print(&#x27;%s开始吃饭&#x27;%name)</span><br><span class="line">#     mutex2.release()</span><br><span class="line">#     print(&#x27;%s放下第一只筷子&#x27;%name)</span><br><span class="line">#     mutex1.release()</span><br><span class="line">#     print(&#x27;%s放下第二只筷子&#x27;%name)</span><br><span class="line">#</span><br><span class="line"># for name in [&#x27;z&#x27;,&#x27;s&#x27;,&#x27;b&#x27;]:</span><br><span class="line">#     t1=Thread(target=eat1,args=(name,))</span><br><span class="line">#     t2=Thread(target=eat2,args=(name,))</span><br><span class="line">#     t1.start()</span><br><span class="line">#     t2.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Semaphore:信号量可以理解为多把锁，同时允许多个线程来更改数据</span><br><span class="line"># from threading import Thread,Semaphore</span><br><span class="line"># import time</span><br><span class="line"># import random</span><br><span class="line"># sm=Semaphore(5)</span><br><span class="line">#</span><br><span class="line"># def task(name):</span><br><span class="line">#     sm.acquire()</span><br><span class="line">#     print(&#x27;%s正在蹲坑&#x27;%name)</span><br><span class="line">#</span><br><span class="line">#     time.sleep(random.randint(1,3))</span><br><span class="line">#     sm.release()</span><br><span class="line"></span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     for i in range(100):</span><br><span class="line">#         t=Thread(target=task,args=(i,))</span><br><span class="line">#         t.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Event事件</span><br><span class="line"># from threading import Thread,Event</span><br><span class="line"># import time</span><br><span class="line"># event=Event()</span><br><span class="line"># def girl(name):</span><br><span class="line">#     print(&#x27;%s 还在谈着恋爱&#x27;%name)</span><br><span class="line">#     time.sleep(3)</span><br><span class="line">#     event.set()</span><br><span class="line">#     print(&#x27;%s 单身了&#x27;%name)</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"># def boy(name):</span><br><span class="line">#     print(&#x27;%s 等着女神分手&#x27;%name)</span><br><span class="line">#     event.wait()</span><br><span class="line">#     print(&#x27;女神分手了，开始追&#x27;)</span><br><span class="line">#</span><br><span class="line"># if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">#     t=Thread(target=girl,args=(&#x27;刘亦菲&#x27;,))</span><br><span class="line">#     t.start()</span><br><span class="line">#     for i in range(5):</span><br><span class="line">#         t=Thread(target=boy,args=(&#x27;屌丝男%s号&#x27;%i,))</span><br><span class="line">#         t.start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 写两个线程，一个线程读文件前半部分，另一个线程读后半部分</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">f.seek(指针移动的字节数,模式控制): 控制文件指针的移动</span><br><span class="line">模式控制:</span><br><span class="line">0: 默认的模式,该模式代表指针移动的字节数是以文件开头为参照的</span><br><span class="line">1: 该模式代表指针移动的字节数是以当前所在的位置为参照的1</span><br><span class="line">2: 该模式代表指针移动的字节数是以文件末尾的位置为参照的</span><br><span class="line">强调:其中0模式可以在t或者b模式使用,而1跟2模式只能在b模式下用</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">from threading import Thread,Event</span><br><span class="line">import time</span><br><span class="line">import os</span><br><span class="line">event=Event()</span><br><span class="line">size = os.path.getsize(&#x27;a.txt&#x27;)</span><br><span class="line">def read_first():</span><br><span class="line">    with open(&#x27;./a.txt&#x27;,&#x27;r&#x27;,encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">        n = size // 2</span><br><span class="line">        data=f.read(n)</span><br><span class="line">        print(data)</span><br><span class="line">        print(&#x27;读完前面&#x27;)</span><br><span class="line">        event.set()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def read_last():</span><br><span class="line">    event.wait()</span><br><span class="line">    with open(&#x27;./a.txt&#x27;, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">        n = size // 2</span><br><span class="line">        f.seek(n, 0)  # 将游标设置到读文件的一半</span><br><span class="line">        data = f.read()</span><br><span class="line">        print(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    t1=Thread(target=read_first)</span><br><span class="line">    t2=Thread(target=read_last)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/scrapy%E6%A1%86%E6%9E%B6%E4%B9%8B%E5%8E%BB%E9%87%8D%E8%BF%87%E6%BB%A4%E5%99%A8%E5%8E%9F%E7%90%860000000000/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/scrapy%E6%A1%86%E6%9E%B6%E4%B9%8B%E5%8E%BB%E9%87%8D%E8%BF%87%E6%BB%A4%E5%99%A8%E5%8E%9F%E7%90%860000000000/" class="post-title-link" itemprop="url">scrapy框架之去重过滤器原理0000000000</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>scrapy框架之去重过滤器原理</h1>
<h2 id="【一】源码去重规则">【一】源码去重规则</h2>
<h3 id="【1】内置去重规则">【1】内置去重规则</h3>
<ul>
<li>
<p>在Scrapy框架中，为了防止重复爬取相同的URL地址，采用了去重机制。</p>
</li>
<li>
<p>其中，一种常用的去重方法是使用布隆过滤器(Bloom Filter)。</p>
</li>
<li>
<p>如果爬取过的地址，就不会再爬了</p>
</li>
<li>
<ul>
<li>调度器可以去重，研究一下，如何去重的</li>
<li>使用了集合</li>
</ul>
</li>
</ul>
<h3 id="【2】内置去重原理">【2】内置去重原理</h3>
<ul>
<li>引入模块</li>
</ul>
```python
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E4%B8%80docker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/%E4%B8%80docker/" class="post-title-link" itemprop="url">一docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】django原生操作mysql</h1>
````python
import os
import django

if __name__ == '__main__':
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'drf_mysql_deserialize.settings')
    django.setup()
    from django.db import connection

    # 执行原生的sql语句---方式一：不经常用
    conn = connection.cursor()
    conn.execute('select id,name,price from app1_book where id=1')
    print(conn.fetchall())
    conn.close()

    # 执行原生的sql语句---方式二：常用
    # 跟对象做映射
    from app1.models import Book

    book_list = Book.objects.raw('select id,name, price from app1_book where id>10')
    print(book_list)  # <RawQuerySet: select name, price from app1_book>
    for book_obj in book_list:
        print(book_obj)  # Book object (32)
        print(book_obj.name)  # 西游记
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【二】docker介绍</span><br><span class="line"></span><br><span class="line">## 【1】虚拟化</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">#  在计算机中，虚拟化（英语：Virtualization）是一种资源管理技术，是将计算机的各种实体资源，如服务器、网络、内存及存储等，予以抽象、转换后呈现出来，打破实体结构间的不可切割的障碍，使用户可以比原本的组态更好的方式来应用这些资源。这些资源的新虚拟部份是不受现有资源的架设方式，地域或物理组态所限制。一般所指的虚拟化资源包括计算能力和资料存储。</span><br><span class="line"></span><br><span class="line"># 在实际的生产环境中，虚拟化技术主要用来解决高性能的物理硬件产能过剩和老的旧的硬件产能过低的重组重用，透明化底层物理硬件，从而最大化的利用物理硬件  对资源充分利用</span><br><span class="line"></span><br><span class="line"># 虚拟化技术种类很多，例如：软件虚拟化、硬件虚拟化、内存虚拟化、网络虚拟化(vip)、桌面虚拟化、服务虚拟化、虚拟机等等。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="【2】工具kvm-VMware-openstack-docker-k8s">【2】工具<code>kvm,VMware,openstack,docker,k8s</code></h2>
````python
# 1. KVM (Kernel-based Virtual Machine)
类型：全虚拟化
特点：
KVM 是 Linux 内核的一部分，将 Linux 转变为一个类型 1 的虚拟机监控器。
支持多种操作系统的并行运行，包括 Windows 和不同的 Linux 发行版。
高度集成于 Linux 系统，性能表现良好。

# 2. VMware
类型：全虚拟化
特点：
VMware 提供了多个产品，如 VMware vSphere、VMware Workstation 等。
强大的管理工具和用户界面，适合企业级应用。
提供高可用性、负载均衡等功能，广泛应用于数据中心。

# 3. OpenStack
类型：云计算平台
特点：
OpenStack 是一个开源云计算管理平台，支持构建和管理公共及私有云。
支持多种虚拟化技术（包括 KVM 和 VMware）。
提供计算、存储和网络服务，适合大规模部署。

# 4. Docker
类型：容器化
特点：
Docker 是一个开源平台，用于自动化应用程序的部署、扩展和管理。
应用程序在容器中运行，容器共享宿主操作系统内核但相互隔离。
启动速度快，资源利用率高，适合微服务架构。

# 5. Kubernetes (K8s)
类型：容器编排
特点：
Kubernetes 是一个开源容器编排平台，用于自动化容器的部署、扩展和管理。
提供服务发现、负载均衡、滚动更新等功能。
支持多种容器运行时（如 Docker），在大规模环境中非常受欢迎。

# 总结
这些技术各自解决了不同的虚拟化和容器化需求，从虚拟机管理到容器编排，为现代 IT 基础设施提供了强大的支持。选择合适的工具取决于具体的业务需求和技术栈。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240619105810065](D:\pycharm\Temporary_notes\图片\image-20240619105810065.png)</span><br><span class="line"></span><br><span class="line">## 【3】docker介绍</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># Docker 是一个开源项目，诞生于 2013 年初，最初是 dotCloud 公司内部的一个业余项目。它基于 Google 公司推出的 Go 语言实现。 加了 Linux 基金会，遵从了 Apache 2.0 协议，项目代码在上进行维护。</span><br><span class="line"></span><br><span class="line"># 容器化技术，区分于虚拟机，又类虚拟机，兼具虚拟机隔离的优点，又有速度快的优点</span><br><span class="line"># 容器资源隔离，网络隔离</span><br><span class="line"># 把容器当成一个虚拟机即可</span><br><span class="line"></span><br><span class="line"># docker是容器管理</span><br><span class="line"></span><br><span class="line"># Docker 的基础是 Linux 容器（LXC）等技术</span><br></pre></td></tr></table></figure>

<h2 id="【4】docker和其他虚拟机比较">【4】docker和其他虚拟机比较</h2>
```python
# docker 不需要虚拟化出 操作系统这一层---》更轻量级--占空间更小---》还能实现隔离

# 虚拟机技术的缺点：
    1.资源占用太多
    2.冗余步骤多
    3.启动很慢

# 容器化技术
    1.服务器资源利用率高
    2.比较轻量化
    3.打包镜像测试，一键运行



比较Docker和虚拟机技术不同：
​ 1.传统虚拟机，虚出一套硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件
​ 2.容器内的应用之间运行在 宿主机的内容，容器是没有自己的内核的，也没有虚拟我们的硬件，所以就轻便了
​ 3.每个容器间是互相隔离的，每个容器内都有属于自己的文件系统，互不影响
​ 4.安全性，docker的安全性更弱
​ 5.与虚拟机相比，docker隔离性更弱，docker属于进程之间的隔离，虚拟机可实现系统级别隔离
​ 6.docker创建时秒级的，docker的快速迭代性，无论是开发、测试、部署都可以节约大量时间
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240619110513136](D:\pycharm\Temporary_notes\图片\image-20240619110513136.png)</span><br><span class="line"></span><br><span class="line">## 【5】docker架构</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># cs 架构---》客户端服务端</span><br><span class="line">	- c 端：用户操作，输入命令</span><br><span class="line">    - s端：接收用户命令，执行</span><br><span class="line">    -c、s通信，使用http协议，遵循restful规范</span><br><span class="line">    	-mysql：tcp---》自定义的   </span><br><span class="line">        -redis：tcp---》自定义的  </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">  # 架构</span><br><span class="line">	1 client：客户端，输入命令</span><br><span class="line">    2 服务端：</span><br><span class="line">    	containers：容器</span><br><span class="line">        images:镜像--》从注册中心下来下来的</span><br><span class="line">        </span><br><span class="line">    3 register：注册中心</span><br><span class="line">    	-放了很多镜像--》redis，nginx，mysql</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240312121741177-17187679368771.png" alt="image-20240312121741177-17187679368771"></p>
<h1>【三】docker安装和配置</h1>
````python

    
# 1 linux   win 安装

# 2 win:https://www.docker.com/products/docker-desktop/  下载 docker-desktop
	-一路下一步安装
    
    
# 3 centos 7.9 安装
	-视频，软件：vmware ，镜像文件
    
    
# 4 创建一个centos 7.9的虚拟机，在这个基础上讲docker
	- 创建好虚拟机之后，可以使用finalshell连接你的虚拟机，在finalshell安装docker
    
# 5 如果之前装过，卸载
    # yum remove docker docker-common  docker-selinux docker-engine
        # 删除
        # rm -rf /var/lib/docker
    yum update  # 更新yum仓库

# 补充：如果yum install 装软件，装不了，或很慢，把仓库换成阿里云
    cd /etc/yum.repos.d
    cp  CentOS-Base.repo CentOS-Base.repo.bk
    # wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
        # 执行上面的代码要是报找不到wget命令的话，就执行下面的代码
        - curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
    # 清理缓存
    yum clean all
    # 生成缓存
    yum makecache
    # 更新系统
    yum update

# 6 安装
    # 装依赖
    yum install -y yum-utils device-mapper-persistent-data lvm2 container-selinux
    # 这个是拉去docker
    yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
    # 查看docker有哪些版本---但是前提是你执行了上面的代码
    yum list docker-ce --showduplicates | sort -r

    # 安装
    yum install docker-ce docker-ce-cli containerd.io -y

# 7 查看安装的版本
    docker --version

# 8 目前我们只装了 docker-ce docker-ce-cli containerd.io
	-只有：c  和 s端
    -没有docker-compose
    -没有图形化界面
    -跟docker-destop的区别
    
    
# 9 启动docker
    # 查看docker的状态
    systemctl status docker
    # 启动docker
    systemctl start docker



# 10 镜像--》从远程下载下来的---》hub.docker.com -->仓库下的
	-有非常多镜：可以搜索，搜到以后，镜像有不同版本
    -目前：访问不到了，拉去不下来
    -配置：国内镜像站：阿里云
    # 这个好像也不可以用了
    -https://cr.console.aliyun.com/cn-shanghai/instances/mirrors
    # 可以找一些docker的镜像站，百度搜索
    
    # 创建docker
    sudo mkdir -p /etc/docker # 如果有，就不需要创建了
    
    vi /etc/docker/daemon.json 
    # 加入
    {
        "registry-mirrors": ["https://docker.1panel.live","https://docker.rainbond.cc"]
    }
    # 按 esc
    # 输入  :wq  敲回车--
    
    # 保存退出
    	- 重新加载docker配置：systemctl daemon-reload
		- 重启docker服务：systemctl restart docker
        
    # 重启之后，下载
    	- docker pull redis
        - 报错的话，很可能镜像源被封了，换镜像源----百度搜
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【四】docker镜像源操作</span><br><span class="line"></span><br><span class="line">## 【1】镜像和容器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 镜像：image</span><br><span class="line">	- 一堆文件---》目前咱们从register(hub.docker.com)---》下载(docker pull 名字)---》放在宿主机（centos 7.9机器）</span><br><span class="line">    </span><br><span class="line">    -类比：虚拟上装系统</span><br><span class="line">    	- 操作系统文件 xx.iso---&gt;装在虚拟机上</span><br><span class="line">        - 镜像你当成 xx.iso 操作系统文件（带软件）</span><br><span class="line">        - 把iso装在不同虚拟机中---》启动---》多台有操作系统的机器</span><br><span class="line">       </span><br><span class="line">    # 镜像的操作</span><br><span class="line">        - 构建镜像：使用 docker build 命令根据 Dockerfile 创建镜像。</span><br><span class="line">        - 查看镜像：使用 docker images 命令列出本地存在的镜像。</span><br><span class="line">        - 删除镜像：使用 docker rmi 命令删除不再需要的镜像</span><br><span class="line">    </span><br><span class="line"># 容器：container</span><br><span class="line">	-镜像运行---》运行成容器</span><br><span class="line">    - 镜像包含了容器运行所需的所有文件和配置</span><br><span class="line">    -类比：</span><br><span class="line">    	-容器当成一个正在运行的操作系统</span><br><span class="line">    -一个镜像，可以运行成多个容器</span><br><span class="line">    </span><br><span class="line">    # 容器的生命周期</span><br><span class="line">        - 容器有几个主要的生命周期阶段：</span><br><span class="line"></span><br><span class="line">        - 创建：使用 docker create 或 docker run 命令创建容器实例。</span><br><span class="line">        - 启动：可以通过 docker start 命令启动已创建的容器。当容器启动时，它会执行 Dockerfile 中定义的命令。</span><br><span class="line">        - 停止：使用 docker stop 命令可以优雅地停止正在运行的容器。</span><br><span class="line">        - 删除：通过 docker rm 命令可以删除不再需要的容器。</span><br><span class="line">    # 容器的管理</span><br><span class="line">		- 查看容器：使用 docker ps 命令查看正在运行的容器，docker ps -a 查看所有容器（包括已停止的）。</span><br><span class="line">		- 访问容器：可以使用 docker exec 命令在运行中的容器内执行命令，或者使用 docker attach 连接到容器的标准输入输出。</span><br><span class="line">		- 日志管理：使用 docker logs 命令查看容器的输出日志，方便调试和监控。</span><br><span class="line">    </span><br><span class="line"># 理解</span><br><span class="line">	- python的面向对象</span><br><span class="line">    	- 类：镜像</span><br><span class="line">       	- 对象：实例化得到多个对象，没个对象都是独立的</span><br><span class="line">        </span><br><span class="line"># 以后一个容器，我们就当做是：一个操作系统 + 软件----》正在运行</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240926122213317](D:\pycharm\Temporary_notes\图片\image-20240926122213317.png)</span><br><span class="line"></span><br><span class="line">## 【2】镜像的操作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 0 搜索镜像</span><br><span class="line">	-去网站搜：https://hub.docker.com/ </span><br><span class="line">	-使用命令行搜：docker search mysql</span><br><span class="line">    </span><br><span class="line"># 1 获取镜像，拉去镜像---》从register下载到本地--》镜像站--》加速拉取</span><br><span class="line">	docker pull mysql:5.7 # 下载mysql 5.7镜像</span><br><span class="line">	docker pull redis:latest # 下载redis最新的镜像</span><br><span class="line">    docker pull nginx:latest  # 下载 nginx最新的镜像</span><br><span class="line">    docker pull centos:centos7  # 下载 centos最新的镜像</span><br><span class="line">    </span><br><span class="line"># 2 查看镜像</span><br><span class="line">	docker images</span><br><span class="line"></span><br><span class="line"># 3 删除镜像</span><br><span class="line">	docker rmi redis:latest</span><br></pre></td></tr></table></figure>

<h1>【五】容器的操作</h1>
<h2 id="【0】镜像操作">【0】镜像操作</h2>
````python
# 命令
	- docker search  # 查看有那些镜像
    - docker pull    # 下载镜像
    - docker images   # 查看镜像
    - docker rmi    # 删除镜像
    	# 这个是：docker remove image的缩写
        
# 镜像运行，变成容器【一个镜像可以运行多个容器】，我们可以将一个容器当作一个虚拟机
	- 虚拟机中有：
    	- 操作系统
        - 文件
        - 软件
        - 网络
        
# 运行出一个容器
	# 简单的命令：后面有解释
	- docker run -id ubuntu
    - docker run -it ubuntu
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【1】run-----运行容器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 1 把镜像运行成一个容器</span><br><span class="line">	# 直接运行，如果镜像没有，会去远程仓库下载</span><br><span class="line">    docker run -id --name=centos7 centos:7</span><br><span class="line">    docker run -it --name=centos7 centos:7</span><br><span class="line">    # 解释</span><br><span class="line">    	# -id：启动容器，不进入容器内部</span><br><span class="line">        # -it：启动容器，进入容器内部</span><br><span class="line">        # --name：指定容器的名字，容器名字不可以重复，如果重复了就会报错，可以随便起名字，不写的名字的话，会随机生成一个名字</span><br><span class="line">        # centos:7：基于那个镜像运行容器</span><br><span class="line">        </span><br><span class="line"># 2 查看正在运行的容器</span><br><span class="line">	- docker ps</span><br><span class="line"># 3 进入到容器的内部</span><br><span class="line">	- docker exec -it centos7 /bin/bash</span><br><span class="line">    	- /bin/bash：代表要在容器中执行centos7的命令，这里是启动一个 Bash shell</span><br><span class="line">    </span><br><span class="line"># 4 执行docker run -it  centos:centos7 ：创建并启动一个新的docker容器</span><br><span class="line">	- 进入到容器的内部，可以执行centos的命令，但是它是最精简的系统，很多的命令都没有，使用的话需要安装</span><br><span class="line">    - 退出容器，到宿主机：exit</span><br><span class="line">    </span><br><span class="line"># 5 容器需要创建然后运行</span><br><span class="line">	- 创建：create命</span><br><span class="line">    - 运行：run</span><br><span class="line">    </span><br><span class="line"># 6 容器要运行，内部必须有个前台进度阻塞，否则容器就会停掉</span><br><span class="line">	# 例子：</span><br><span class="line">    	- docker run -id --name=-=demo redis:latest sleep 10</span><br><span class="line">        # 当过了20s后，这个容器就会自动停止</span><br><span class="line">        </span><br><span class="line"># 6 查看所有容器--包括停止的容器</span><br><span class="line">	- docker ps -a</span><br><span class="line">    </span><br><span class="line"># 7 启动容器</span><br><span class="line">	- docker start centos7</span><br><span class="line">	就比如nginx容器：本质就是一个n操作系统 + 软件</span><br><span class="line"></span><br><span class="line"># 8 停止容器</span><br><span class="line">	- docker stop 容器的id号</span><br><span class="line">    </span><br><span class="line"># 9 删除容器，删除的这个容器必须停止，不停止不允许删除</span><br><span class="line">	- docker rm 容器的名字/容器的id</span><br><span class="line">    </span><br><span class="line"># 10 一次性删除多个容器</span><br><span class="line">	- docker rm 容器id、容器id1</span><br><span class="line">    </span><br><span class="line"># 11 删除所有的容器</span><br><span class="line">	- docker rm `docker ps -a -q`</span><br><span class="line">    # 解释：docker ps -a -q：是查看所有容器的id号</span><br><span class="line">    - docker rm `docker ps -a -q` -f  # 高危险命令</span><br><span class="line">    # 这个命令尽量不要使用，这个是强制删除所有的容器，不管有没有在使用</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240620102936389.png" alt="image-20240620102936389"></p>
<h2 id="【2】run后面的参数">【2】run后面的参数</h2>
````python
# 1 docker run 参数
	- i：表示运行容器
    - d：以守护式进程在后台运行，用这个参数创建出来的容器，命令行还在宿主机上，没有进入到容器内部，用来启动一个新的docker容器
    - t：表示容器启动后，进入到容器内的命令行。即分配一个伪终端
    - name：指定容器的名字，如果不指定会随机一个名字
    - p：表示端口映射，前者是宿主机端口，后者是容器内的映射端口，可以使用多个-p做多个端口映射
    - v：表示目录映射关系（前者是宿主机目录，后者是容器的目录），可以是一个-v做多个目录或文件映射。注：最好做目录映射，在宿主机上做修改，然后共享到容器上
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【案例】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 启动一个centos容器并进入，名字叫mycentos，在容器内部装一个vim，然后退出</span><br><span class="line">	- 1：docker run -id --name=mycentos centos:7</span><br><span class="line">    - 2：在宿主机上</span><br><span class="line">    - 3：进入到容器内部（新开了一个bash进程）：docker exec -it mycentos /bin/bash</span><br><span class="line">    - 4: 下载：yum install vim -y（可能会下载不了）</span><br><span class="line">    - 5：curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">    - 6：在执行：yum install vim -y</span><br><span class="line">    - 7：退出容器：exit</span><br><span class="line">    - 这里的容器没有停止，因为容器运行的只是bash进程--结束的只是bash进程</span><br><span class="line">```````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line">python</span><br><span class="line"># docker exec 命令</span><br><span class="line">	- 在宿主机，连接容器，执行命令，把命令结果返回给宿主机</span><br><span class="line">    - docker exec 容器的名称/容器的id号 ls</span><br><span class="line">    - eg：docker exec mycentos ls  # ls：列出指定目录中的文件和目录</span><br><span class="line">&#123;% raw %&#125;````````python</span><br><span class="line"># 进入到容器的内部</span><br><span class="line">	- 进入容器内部：docker exec -it 容器名字/容器id /bin/bash</span><br><span class="line">    # 在容器上执行命令</span><br><span class="line">		- 命令：docker exec 容器的名称/容器的id号 命令</span><br><span class="line">    - 在宿主机的命令行输入：sh # 这是一个精简的/bin/bash</span><br><span class="line">    # 退出，结束/bin/bash进程</span><br><span class="line">    - exit</span><br></pre></td></tr></table></figure>

<h2 id="【3】v-目录映射">【3】v----目录映射</h2>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240313102219623.png" alt="image-20240313102219623"></p>
````python
# -v参数表示运行容器时，跟宿主机的目录做映射
	# 容器要是和宿主机做了映射，你只需要修改宿主机上的文件内容，容器中映射的文件也会跟着修改，是双向的

# 案例：
	# 需求
	- 运行一个centos77容器，不进入，做目录映射
    - 把宿主机的/root/lqz文件夹，映射到容器内部的/lpz文件夹（容器内如果没有lqz文件夹，就会自动创建）
    - -v可以写多个，可以是文件夹或者是文件
    
    # 实现
    - cd # 跟目录，前提你是root用户
    - mkdir lsk # 在root目录下创建一个lqz文件夹
    - 运行容器，做目录映射
    	- docker run -id --name=centos77 -v /root/lqz:/lqz centos:7
    - 在你宿主机的/root/lsk下创建一个xx.txt
    	- vim xx.txt
    - 进入到centos77容器内部：看你创建的xx.txt文件存在不
    - 双方是相互影响的
    	- 容器内部修改文件---会影响外部（宿主据）
        - 外部（宿主据）修改文件----会影响内部（容器）
        
# 目录映射好处是，后期咱们部署django项目
	- 有个django容器，做好映射，代码放在宿主机上即可，以后更新了代码，只要重启容器，代码就是最新了
    - 运行mysql容器---》mysql配置文件，数据data目录，放在宿主机上做好映射
    	如果 mysql容器---》表数据，放到容器中---》如果删了容器---》数据库全没了
    	表数据，放在宿主机上---》把容器删除---》表数据还在----》再启动一个容器做好映射---》数据都还在
        
# 命令
	# 一次性删除所有容器
    	- docker rm `docker ps -a -q`
    # 一次性删除所有镜像
    	- docker rm `docker images -q`
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】p----端口映射</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 1 -p参数：端口映射，容器中启动一个mysql5.7---容器中的3306监听，宿主机的3306没人监听，做端口映射后，宿主机的3306就放在docker的这个容器监听了</span><br><span class="line"></span><br><span class="line"># 2 案例</span><br><span class="line">	- docker run -id --name=mysql5.7 -p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7</span><br><span class="line"></span><br><span class="line"># -p：启动mysql容器 -p 宿主机端口:容器端口</span><br><span class="line"># -e：启动的mysql的root密码是123456</span><br><span class="line"># 以后台守护进程运行mysql容器，mysql的root用户密码是123456，宿主机和容器做了端口映射</span><br><span class="line">	- 宿主机的端口3307、映射容器的端口3306</span><br><span class="line">    </span><br><span class="line"># 2.1 查看宿主机3307端口占用情况</span><br><span class="line">	-  netstat -nlp |grep 3307 # 查看本机3307端口占用情况</span><br><span class="line">    - 可能缺少netstat命令：yum install net-tools -y</span><br><span class="line">    - 在次查看：netstat -nlp |grep 3307</span><br><span class="line">    </span><br><span class="line"># 远程连接宿主机的3307端口</span><br><span class="line">	- 以后访问宿主机3307端口就等于访问容器的3306端口</span><br><span class="line">    # win机器可以远程连接mysql</span><br><span class="line">    	- 终端命令行链接：mysql -h 10.0.0.100 -P 3307 -uroot -p</span><br><span class="line">        - Navicate： 链接，创建lsk数据库</span><br><span class="line">        </span><br><span class="line">    # 宿主机--》进入到容器内部--》进入到mysql，查看有没有创建lsk这个库</span><br><span class="line">        docker exec -it mysql5.7 /bin/bash # 进入容器内部</span><br><span class="line">        mysql -uroot  -p  # 进入mysql</span><br><span class="line">        show databases;  # 查看所有数据库</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240313104034977](D:\pycharm\Temporary_notes\图片\image-20240313104034977.png)</span><br><span class="line"></span><br><span class="line">## 【5】其他</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 启动容器</span><br><span class="line">	docker start 容器id/容器名字</span><br><span class="line"></span><br><span class="line"># 停止容器</span><br><span class="line">	docker stop 容器id/容器名字</span><br><span class="line"></span><br><span class="line"># 查看所有的容器，停止和未停止的全部</span><br><span class="line">	docker ps -a</span><br><span class="line"></span><br><span class="line">#  mysql的容器底层的操作系统是 centos操作系统，装软件的话需要</span><br><span class="line">	yum install</span><br><span class="line">	# 如果是debian系统的话---执行下面</span><br><span class="line">    apt-get update</span><br><span class="line">    apt-get install vim -y</span><br><span class="line">    </span><br><span class="line"># 文件拷贝(宿主机执行)</span><br><span class="line">	# 容器的文件cope到宿主机上（不是在容器内执行）</span><br><span class="line">    	docker cp 容器名称:容器目录 需要拷贝的文件或目录</span><br><span class="line">        docker cp  mysql5.7:/xx.txt /root/lsk/lsk.txt   </span><br><span class="line">    # 宿主机的文件copy到容器中</span><br><span class="line">        docker cp 需要拷贝的文件或目录 容器名称:容器目录</span><br><span class="line">        docker cp /root/lqz/xx.txt  mysql5.7:/xx.txt</span><br><span class="line">            </span><br><span class="line"># 查看容器的ip地址</span><br><span class="line">	docker inspect 容器名称  # 查看容器的详细描述，很多</span><br><span class="line">    docker inspect 容器名称（容器ID） --format=&#x27;&#123;&#123;.NetworkSettings.Networks.bridge.IPAddress&#125;&#125;&#x27; </span><br><span class="line">    </span><br><span class="line"># 在多个容器之间是可以ping通的(容器和宿主机也可以)</span><br><span class="line">    # mycentos:172.17.0.2</span><br><span class="line">    # mysql5.7:172.17.0.4</span><br><span class="line"></span><br><span class="line">    # 缺命令就安装</span><br><span class="line">    	apt-get install iputils-ping</span><br><span class="line">    ping 172.17.0.2  # ping到了mycentos</span><br><span class="line">    </span><br><span class="line"># 删除容器（删除已停止的容器）</span><br><span class="line">	docker rm 容器id  </span><br><span class="line">    docker rm `docker ps -a -q` # 删除所有容器（尽量不要使用）</span><br><span class="line">    </span><br><span class="line"># 无状态的服务（在容器中尽量运行无状态的服务）,如果要运行有状态服务要做目录映射</span><br><span class="line">    -mysql reids   有状态，运行过程中产生数据，保存，容器删除，数据就没了</span><br><span class="line">    -uwsgi+django  无状态的服务</span><br><span class="line">    </span><br><span class="line"># 补充</span><br><span class="line">	1 ip地址  ip </span><br><span class="line">        10.0.0.111</span><br><span class="line">        10.0.2.1</span><br><span class="line">        10.0.4.2</span><br><span class="line">    2 子网掩码 mask</span><br><span class="line">    	255.255.0.0</span><br><span class="line">        </span><br><span class="line">    3 网关 gatway</span><br><span class="line">    	10.0.0.1</span><br></pre></td></tr></table></figure>

<h1>【补充】</h1>
````python
# systemctl restart network  ---重启网卡

# docker ps   # 查看正在运行的容器

# docker ps -a  # 查看所有的容器，包括停止的容器

# docekr images  # 查看镜像源

# docker exec -it 容器名字/容器id /bin/bash # 进入到容器内部

# docker start 容器名字/容器id  # 启动容器

# 进入到redis容器中添加缓存
	- redis-cli SET mykey "Hello, Redis!"
	- 会报错：身份验证
````


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E4%BA%BA%E8%84%B8%E5%92%8C%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/%E4%BA%BA%E8%84%B8%E5%92%8C%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">人脸和语音识别方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：11:52:37" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】人脸识别方案</h1>
<h1>【二】语音识别方案</h1>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E3%80%901.1%E3%80%91MySQL8.4.2%E5%85%B1%E5%AD%98%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/%E3%80%901.1%E3%80%91MySQL8.4.2%E5%85%B1%E5%AD%98%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">【1.1】MySQL8.4.2共存安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：11:52:37" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、下载">一、下载</h2>
<h4 id="1-进入官网选择下载">1.进入官网选择下载</h4>
<h4 id="2-拉到最底下，选择社区版下载">2.拉到最底下，选择社区版下载</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C1.png" alt="1"></p>
<h4 id="3-选择mysql-community-server">3.选择mysql community server</h4>
<h4 id="2"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C2.png" alt="2"></h4>
<h4 id="4-选择数据库版本，以及系统和安装方式（这里我选的msi）">4.选择数据库版本，以及系统和安装方式（这里我选的msi）</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C3.png" alt="3"></p>
<h4 id="5-直接点击no-thanks-just-start-my-download">5.直接点击no thanks,just start my download.</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C4.png" alt="4"></p>
<h3 id="二、安装（windows）">二、安装（windows）</h3>
<h4 id="1-双击安装包，出现以下页面选择next">1.双击安装包，出现以下页面选择next</h4>
<h4 id="5"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C5.png" alt="5"></h4>
<h4 id="2-选择我同意，继续下一步">2.选择我同意，继续下一步</h4>
<h4 id="6"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C6.png" alt="6"></h4>
<h4 id="3-选择custom自定义安装">3.选择custom自定义安装</h4>
<h4 id="7"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C7.png" alt="7"></h4>
<h4 id="4-选择安装的位置，下一步">4.选择安装的位置，下一步</h4>
<h4 id="8"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C8.png" alt="8"></h4>
<p>一路下一步</p>
<h4 id="5-出现以下页面证明安装完成，接下来进行配置">5.出现以下页面证明安装完成，接下来进行配置</h4>
<h4 id="9"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C9.png" alt="9"></h4>
<h3 id="三、mysql配置">三、mysql配置</h3>
<h4 id="1-进入到数据库软件配置界面，点击下一步">1.进入到数据库软件配置界面，点击下一步</h4>
<h4 id="10"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C10.png" alt="10"></h4>
<h4 id="2-设置文件路径">2.设置文件路径</h4>
<h4 id="11"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C11.png" alt="11"></h4>
<h4 id="3-勾选named-pipe-，修改数据库名字为mysql84-点击下一步">3.勾选named pipe ，修改数据库名字为mysql84,点击下一步</h4>
<h4 id="12"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C12.png" alt="12"></h4>
<h4 id="4-点击下一步">4.点击下一步</h4>
<h4 id="13"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C13.png" alt="13"></h4>
<h4 id="4-输入root用户密码，并且添加一个用户为test并为其添加密码">4.输入root用户密码，并且添加一个用户为test并为其添加密码</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C14.png" alt="14"></p>
<h4 id="14"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C15.png" alt="14"></h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C16.png" alt="16"></p>
<h4 id="5-点下一步">5.点下一步</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C17.png" alt="17"></p>
<h4 id="6-选择给予全部权限，点击下一步">6.选择给予全部权限，点击下一步</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C18.png" alt="18"></p>
<h4 id="7-点击下一步，自己构建">7.点击下一步，自己构建</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C19.png" alt="19"></p>
<h4 id="8-选择execute安装">8.选择execute安装</h4>
<h4 id="20"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C20.png" alt="20"></h4>
<h4 id="9-等待安装部署完成">9.等待安装部署完成</h4>
<h4 id="21"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C21.png" alt="21"></h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C22.png" alt="22"></p>
<h3 id="四、验证是否成功">四、验证是否成功</h3>
<h4 id="1-打开运行窗口win-r，搜索services-msc">1.打开运行窗口win+r，搜索services.msc</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C23.png" alt="23"></p>
<h4 id="2-查看是否存在mysql81，并将其启动类型改为手动，防止他占用端口">2.查看是否存在mysql81，并将其启动类型改为手动，防止他占用端口</h4>
<h4 id="24"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C24.png" alt="24"></h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C25.png" alt="25"></p>
<h3 id="五、环境部署">五、环境部署</h3>
<h4 id="1-复制我们mysql的bin路径">1.复制我们mysql的bin路径</h4>
<h4 id="26"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C26.png" alt="26"></h4>
<h4 id="2-找到电脑的环境变量选择高级，在选择系统变量的path，双击进入">2.找到电脑的环境变量选择高级，在选择系统变量的path，双击进入</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C27.png" alt="27"></p>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C28.png" alt="28"></p>
<h4 id="3-进入编辑环境变量，选择新建，将我们mysql的bin路劲复制上去，然后一直选择确定知道退出。">3.进入编辑环境变量，选择新建，将我们mysql的bin路劲复制上去，然后一直选择确定知道退出。</h4>
<h4 id="29"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C29.png" alt="29"></h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C30.png" alt="30"></p>
<h4 id="4-打开命令行窗口">4.打开<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%91%BD%E4%BB%A4%E8%A1%8C&amp;spm=1001.2101.3001.7020">命令行</a>窗口</h4>
<h4 id="31"><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C31.png" alt="31"></h4>
<h4 id="5-输入mysql-uroot-p，输入刚开始设置的密码，进入我们的数据库，出现以下的界面证明成功">5.输入mysql -uroot -p，输入刚开始设置的密码，进入我们的数据库，出现以下的界面证明成功</h4>
<p><img src="H:%5CPython%E5%85%A8%E6%A0%88%5C%E3%80%903.0%E3%80%91MySQL%5C%E5%9B%BE%E7%89%87%5C32.png" alt="32"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E4%BA%8Cdocker/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/%E4%BA%8Cdocker/" class="post-title-link" itemprop="url">二docker</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】在doker中应用部署</h1>
<h2 id="【1】mysql部署">【1】mysql部署</h2>
````python
# docker中部署mysql，以后不用再宿主机上装mysql

# 1：记住了有状态的容器一定要做目录映射，不然容器一旦被删除，所有的数据永久的消失
	- 不做目录映射
	- docker run -di --name=mysql -p 3308:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7
            
# 2 做目录映射（配置文件和数据文件）和端口映射
	- 做目录映射：data文件，配置文件
    - 创建文件
    mkdir /mysql  # 宿主机根目录创建mysql文件夹
    mkdir /mysql/conf.d  # 配置文件
    mkdir /mysql/data/  # 存放数据
    vi /mysql/my.cnf  # mysql数据库的主配置文件
    # 将下面的配置添加到my.cnf中
    """
    [client]
    default-character-set=utf8
    [mysqld]
    user=mysql
    character-set-server=utf8
    default_authentication_plugin=mysql_native_password
    secure_file_priv=/var/lib/mysql
    expire_logs_days=7
    sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION
    max_connections=1000
    """
    # 做目录和端口的映射
    docker run  -di -v /mysql/data/:/var/lib/mysql -v /mysql/conf.d:/etc/mysql/conf.d -v /mysql/my.cnf:/etc/mysql/my.cnf -p 3306:3306 --name mysql5.7 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 
	
    # 创建库，创建表，插入数据
    
    # 关闭容器，删除容器，mysql的容器没了，但是书籍还在宿主机上放着
    docker stop mysql5.7  # 停止mysql5.7的容器
    docker rm mysql5.7  # 删除mysql5.7的容器
    # docker rm mysql5.7 -f # 强制删除容器（不要使用，很危险）
    
    # 在运行起一个容器，做好目录的映射，数据都回来了
    docker run  -di -v /mysql/data/:/var/lib/mysql -v /mysql/conf.d:/etc/mysql/conf.d -v /mysql/my.cnf:/etc/mysql/my.cnf -p 3307:3306 --name mysql2 -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7 
                        
    # 补充：-e参数-->设置环境变量
    	- 不同容器提供不同的参数
        - 传入后放环境变量--->mysql镜像从环境变量中取出MYSQL_ROOT_PASSWORD作为root用户的密码
        进入到mysql容器中
        查看：echo $MYSQL_ROOT_PASSWORD
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240928104042279](D:\pycharm\Temporary_notes\图片\image-20240928104042279.png)</span><br><span class="line"></span><br><span class="line">## 【2】redis部署</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 拉取redis镜像</span><br><span class="line">docker pull redis  # 最新</span><br><span class="line">mkdir /redis</span><br><span class="line">mkdir /redis/data</span><br><span class="line">vim /redis/redis.conf</span><br><span class="line">	# 里面放配置文件</span><br><span class="line">    bind 0.0.0.0</span><br><span class="line">    daemonize NO</span><br><span class="line">    protected-mode yes</span><br><span class="line">    requirepass 123456</span><br><span class="line"></span><br><span class="line"># 启动redis容器</span><br><span class="line">docker run -id  -p 6379:6379 --name redis -v /redis/redis.conf:/etc/redis/redis.conf -v /redis/data:/data redis:7</span><br><span class="line"></span><br><span class="line"># 进入到redis中</span><br><span class="line">	- 输入命令：redils-cli # 进入到redis中</span><br><span class="line">    - 你存数据会让你存数据 命令：auth 123456</span><br><span class="line">    - 再存就可以了：set name lsk</span><br><span class="line">    - 用RESP软件连接就可以了看到你存的数据了</span><br><span class="line">    </span><br><span class="line"># 远程连接redis操作</span><br></pre></td></tr></table></figure>

<h2 id="【3】nginx部署">【3】nginx部署</h2>
````python
# 拉取镜像
	docker pull nginx

# run启动容器
	docker run -id --name nginx -p 80:80 nginx # 访问80端口就可以访问到nginx
        # 修改html就要去容器的内部 /usr/share/nginx/html
        # vim 打开会报错  # 没有vim命令
        # apt-get update---会很慢，换个源最好
        # 然后：apt-get update
        # apt-get install -y vim
        
# 目录映射
	# 这个是容器的目录：/usr/share/nginx/html  ----不做映射的话就要去容器的内部改这个html
    # 意味着你可以在主机上更新 /root/html 中的文件，这些更改会立即反映在 Nginx 提供的内容
	docker run -id --name nginx1 -p 8008:80 -v /root/html:/usr/share/nginx/html nginx
    # 你访问：10.0.0.100:8008   会报错：403
    # 因为范围的是index.hyml,你的html目录下没有，创建一个
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【二】迁移与备份</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 首先我们要直到镜像是从哪里来的</span><br><span class="line">	- docker pull 国内镜像  # 从远程仓库拉来的，国内镜像站，公司自己做私有仓库</span><br><span class="line">    </span><br><span class="line"># 通过容器打包成镜像</span><br><span class="line">    - centos镜像运行成容器----在里面装一个vim命令</span><br><span class="line">    - 把装了vim的容器----打包成镜像</span><br><span class="line">    - 以后拿到这个镜像----再运行成容器，都会带vim命令</span><br><span class="line">        </span><br><span class="line"># 使用Dockerfile构建</span><br><span class="line">    </span><br><span class="line"># 容器保存为镜像----并运行成容器</span><br><span class="line">	# 运行一个centos容器</span><br><span class="line">    docker run -id --name cenros cnetos:7</span><br><span class="line">    # 在容器中装vim</span><br><span class="line">    docker exec -it centos /bin/bash</span><br><span class="line">    # 安装vim</span><br><span class="line">    yum install vim -y</span><br><span class="line">    </span><br><span class="line">    # 把容器换成镜像（centos+vim）</span><br><span class="line">    docker commit centos centos_vim_image</span><br><span class="line">    # 查看---你就会发现有一个进行镜像：centos_vim_image:latest</span><br><span class="line">    docker images </span><br><span class="line">    # 把centos_vim 容器删除</span><br><span class="line">    docker rm centos -f</span><br><span class="line">    # 基于新构建的镜像，运行成容器</span><br><span class="line">    docker run -id --name centos_vim centos_vim_image:latest</span><br><span class="line">    # 进入容器中，查看，发现安装的vim都在</span><br><span class="line">    docker exec -it centos_vim /bin/bash</span><br><span class="line">    </span><br><span class="line"># 本地镜像----推从到远端docker仓库---私有的仓库</span><br><span class="line">	# </span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【三】Dockerfile</span><br><span class="line"></span><br><span class="line">## 【1】dockerfile介绍和常用命令</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 镜像从哪里来？？？</span><br><span class="line">	- 远程仓库拉取的 docker pull </span><br><span class="line">    - 用容器做成的镜像  docker commit</span><br><span class="line">    - 把备份的恢复 docker load</span><br><span class="line">    - 使用Dockerfile来构建---------这个方式使用的最多</span><br><span class="line">    </span><br><span class="line"># 什么是Dockerfile</span><br><span class="line">	- Dockerfile是由一系列命令和参数构成的脚本文件，这些命令应用于基础镜像并最终创建一个新的镜像</span><br><span class="line">    </span><br><span class="line"># Dockerfile的命令</span><br><span class="line">	FROM 基础镜像 	       #基于哪个基础镜像来构建</span><br><span class="line">    MAINTAINER lqz 	     # 声明镜像的创建者</span><br><span class="line">    ENV key value 	     # 设置环境变量 (可以写多条)</span><br><span class="line">    ENV key value 	     # 设置环境变量 (可以写多条)</span><br><span class="line">    RUN command 	     #是Dockerfile的核心部分(可以写多条)</span><br><span class="line">    ADD source_dir/file dest_dir/file 	#将宿主机的文件复制到镜像内，如果是一个压缩文件，将会在复制后自动解压</span><br><span class="line">    COPY source_dir/file dest_dir/file 	# 和ADD相似，但是如果有压缩文件并不能解压</span><br><span class="line">    WORKDIR lqz 	# 设置工作目录，运行起这个容器，来到的路径就是这个路径</span><br><span class="line">    </span><br><span class="line">    CMD   # 启动并运行容器执行的命令</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240314104157821](D:\pycharm\Temporary_notes\图片\image-20240314104157821.png)</span><br><span class="line"></span><br><span class="line">![image-20240314104516220](D:\pycharm\Temporary_notes\图片\image-20240314104516220.png)</span><br><span class="line"></span><br><span class="line">![image-20240314104543575](D:\pycharm\Temporary_notes\图片\image-20240314104543575.png)</span><br><span class="line"></span><br><span class="line">## 【案例一】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 构建一个带vim的centos:7镜像,根路径下有/lqz/ss.py--&gt;ss.py中写 print(1)</span><br><span class="line"></span><br><span class="line"># 创建，名字不许叫这个Dockerfile</span><br><span class="line">vim Dockerfile</span><br><span class="line"></span><br><span class="line"># 将下面的信息添加进去</span><br><span class="line">FROM centos:7</span><br><span class="line">MAINTAINER lqz</span><br><span class="line">ENV name lqz</span><br><span class="line">ARG age 19</span><br><span class="line">RUN curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">RUN yum install vim -y</span><br><span class="line">RUN mkdir /lqz</span><br><span class="line">RUN touch /lqz/ss.py</span><br><span class="line">RUN echo &#x27;print(1)&#x27; &gt; /lqz/ss.py</span><br><span class="line">RUN echo $name</span><br><span class="line">RUN echo $age</span><br><span class="line">WORKDIR /lqz</span><br><span class="line"></span><br><span class="line"># 基于dockerfile构建镜像,不要忘了 .   基于当前路径下的Dockerfile 构建镜像</span><br><span class="line">docker build -t=&#x27;centos_lqz_vim&#x27; . </span><br><span class="line">docker images  # 查看镜像</span><br><span class="line"># 基于这个镜像运行容器</span><br><span class="line"> docker run -id --name xx centos_lqz_vim</span><br><span class="line"># 进入到容器</span><br><span class="line">docker exec -it xx /bin/bash</span><br><span class="line"># 验证vim，和文件夹，文件是否存在</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240314105513191](D:\pycharm\Temporary_notes\图片\image-20240314105513191.png)</span><br><span class="line"></span><br><span class="line">## 【案例二】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">FROM centos:7</span><br><span class="line">MAINTAINER lqz</span><br><span class="line">ENV name lqz</span><br><span class="line">RUN mkdir /lqz</span><br><span class="line">RUN touch /lqz/ss.py</span><br><span class="line">RUN echo &#x27;input()&#x27; &gt; /lqz/ss.py</span><br><span class="line">WORKDIR /lqz</span><br><span class="line">CMD [&#x27;python&#x27;] # 运行容器时会默认加上 /bin/sh -c python</span><br><span class="line"></span><br><span class="line"># 基于dockerfile构建镜像,不要忘了 .   基于当前路径下的Dockerfile 构建镜像</span><br><span class="line">docker build -t=&#x27;centos_py&#x27; . </span><br><span class="line">docker images</span><br><span class="line"># 基于这个镜像运行容器</span><br><span class="line"> docker run -id --name yy centos_py python /lqz/ss.py</span><br><span class="line"># 进入到容器</span><br><span class="line">docker exec -it yy /bin/bash</span><br><span class="line"># 查看环境变量</span><br><span class="line"># python看</span><br><span class="line">os.environ.get(&#x27;name&#x27;)</span><br><span class="line"># shell看</span><br><span class="line">echo $name</span><br></pre></td></tr></table></figure>

<h2 id="【2】常用和不常用命令">【2】常用和不常用命令</h2>
````python
# 1 所有命令
https://zhuanlan.zhihu.com/p/419175543?utm_id=0

FROM: 指定基础镜像
RUN： 构建镜像过程中需要执行的命令。可以有多条。docker build
CMD：添加启动容器时需要执行的命令。多条只有最后一条生效。可以在启动容器时被覆盖和修改
ENTRYPOINT：同CMD，但这个一定会被执行，不会被覆盖修改。
LABEL：表明镜像的作者。将被遗弃，被LABEL代替。
EXPOSE：设置对外暴露的端口。
ENV：设置执行命令时的环境变量，并且在构建完成后，仍然生效
ARG：设置只在构建过程中使用的环境变量，构建完成后，将消失
ADD：将本地文件或目录拷贝到镜像的文件系统中。能解压特定格式文件，能将URL作为要拷贝的文件
COPY：将本地文件或目录拷贝到镜像的文件系统中。
VOLUME：添加数据卷
USER：指定以哪个用户的名义执行RUN, CMD 和ENTRYPOINT等命令
WORKDIR：设置工作目录

# 2 docker logs 容器名字/id号  查看镜像运行成容器时，错误日志
	-如果容器没起来，看日志排查错误

# 3 CMD  ENTRYPOINT  --https://zhuanlan.zhihu.com/p/548188679
#相同点：
只能写一条，如果写了多条，那么只有最后一条生效。
容器启动时才运行，运行时机相同。
# 不同点：
ENTRYPOINT不会被运行的command覆盖，而CMD则会被覆盖。
如果我们在Dockerfile中同时写了ENTRYPOINT和CMD，并且CMD指令不是一个完整的可执行命令，那么CMD指定的内容将会作为ENTRYPOINT的参数

# 4 ARG 和 ENV
ENV：设置执行命令时的环境变量，并且在构建完成后，仍然生效
ARG：设置只在构建过程中使用的环境变量，构建完成后，将消失
````

<h2 id="【3】ARG-演示">【3】ARG 演示</h2>
```python
# 案例Dockerfile

FROM centos:centos7
MAINTAINER lqz
ENV name lqz
ARG age=19
RUN mkdir /lqz
RUN touch /lqz/ss.py
RUN echo 'input()' > /lqz/ss.py
RUN echo $age

WORKDIR /lqz
CMD python ./ss.py

# docker build -t='xxxx' . 
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】dockerfile构建一个djagno项目（books图书管理系统）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 以图书管理系统为例---》公司使用docker流程</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 公司中，使用Docker开发的工作流程</span><br><span class="line">第一步：有一个项目，pycharm开发着，开发完后</span><br><span class="line">第二步：在项目路径下新建Dockerfile，写入</span><br><span class="line">FROM python</span><br><span class="line">MAINTAINER lqz</span><br><span class="line">WORKDIR /soft</span><br><span class="line">COPY ./requirements.txt /soft/requirements.txt</span><br><span class="line">RUN pip install -r requirements.txt -i https://pypi.doubanio.com/simple</span><br><span class="line">CMD [&quot;python&quot;,&quot;manage.py&quot;,&quot;runserver&quot;,&quot;0.0.0.0:8080&quot;]</span><br><span class="line">第三步：把代码提交到git</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------------------</span><br><span class="line">第四步：上线人员：在上线机器上，把代码啦下来</span><br><span class="line">git clone https://gitee.com/liuqingzheng/books.git</span><br><span class="line">第五步：构建镜像</span><br><span class="line">docker build -t=&#x27;books&#x27; .</span><br><span class="line">第六步：运行容器</span><br><span class="line">docker run -id --name=books -v /root/books:/soft -p 8080:8080 books:latest</span><br><span class="line">第七步：其它人访问宿主机的8080端口就能看到项目了</span><br><span class="line"></span><br><span class="line">---------</span><br><span class="line">第八步：开发人员继续提交代码</span><br><span class="line">第九步：运维人员pull代码，重启容器，用户就可以看到最新的了</span><br><span class="line"></span><br><span class="line">重启docker容器即可(第三方依赖变了)--》重写构建镜像，运行容器</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="【5】乌班图构建redis（跟底层宿主机无关）">【5】乌班图构建redis（跟底层宿主机无关）</h2>
```python
https://zhuanlan.zhihu.com/p/623811065
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E5%BD%BC%E5%B2%B8%E5%9B%BE%E7%BD%91%20%E6%A1%88%E4%BE%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/%E5%BD%BC%E5%B2%B8%E5%9B%BE%E7%BD%91%20%E6%A1%88%E4%BE%8B/" class="post-title-link" itemprop="url">彼岸图网 案例</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:19:13" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>彼岸图网 案例</h1>
```python
# Current username：爬虫 
# current date：2024/7/17
# current time ：19:11
import os.path

import requests
from bs4 import BeautifulSoup
from fake_useragent import UserAgent


# SpiderImage:爬图片
class SpiderImage(object):
    def __init__(self):
        # 目标网址
        self.target_url = "https://pic.netbian.com"
        # 定义了HTTP请求的一个请求头（header）
        self.headers = {
            'User-Agent': UserAgent().random
        }
        # 当前文件路径
        self.BASE_URL = os.path.dirname(__file__)

    # 创建目标网址
    def create_target_url(self, original_url, start_numm, end_num):
        target_url_list = []
        # 模仿页面：https://pic.netbian.com/4kdongman/index_2.html
        for page in range(start_numm, end_num):
            # 等于1的时候就是第一页
            if page == 1:
                target_url = original_url
                target_url_list.append(target_url)
            else:
                target_url = f"https://pic.netbian.com/4kdongman/index_{page}.html"
                target_url_list.append(target_url)
        return target_url_list

    # 对目标网址发起请求获取页面源码
    def spider_page_soup(self, target_url=None):
        if not target_url:
            # 目标地址
            target_url = self.target_url
        # 请求的到响应
        response = requests.get(url=target_url,
                                headers=self.headers)
        # 编码
        response.encoding = "gbk"
        # 获得目标地址的页面信息
        page_text = response.text
        # 对页面源码生成soup对象
        soup = BeautifulSoup(page_text, "lxml")
        return soup

    # 对页面进行分析提取数据
    # 提取页面上的分类
    def parse_category(self):
        # 先拿到页面生成器对象
        soup = self.spider_page_soup()
        # 分析代码，提取标签
        # 取到每一个a标签
        category_list_obj = soup.find_all('div', class_='classify')[0].find_all("a")
        # print(category_list_obj)
        # 对每一个标签进行提取
        category_data = {}
        for category_obj in category_list_obj:
            # print(category_obj)
            category_name = category_obj.text
            category_url = category_obj.attrs.get('href')
            # print(category_name, category_url)
            # 观察网址我们可以看出，网站也需要拼接，前面是带域名的
            category_url = self.target_url + category_url
            # print(target_url)
            # 将得到的路径存起来
            category_data[category_name] = category_url
        return category_data

    # 提取的当前页面上的图片的详情链接
    def parse_image_detail_url(self, soup=None):
        # soup没有的话给空值
        if not soup:
            soup = self.spider_page_soup()
        # 观察页面代码，发现图片都在ur标签的li标签里
        # 我们需要ur下面的li标签
        li_list = soup.select("#main > div.slist > ul >li")
        # print(li_list)
        # 遍历每个里标签
        img_detail_data = {}
        for li in li_list:
            # 我们需要图片的url
            # #main > div.slist > ul > li:nth-child(1) > a
            # 路径不完整我需要拼接
            # 模仿url：https://pic.netbian.com/tupian/34749.html
            href = self.target_url + li.select(" a")[0].attrs.get("href")
            # print(title, href)
            # 我们拿到了图片的详情链接，继续取完整的图片
            # 我们要获得当前详情页面的soup对象
            soup = self.spider_page_soup(target_url=href)
            # 图片的url,缺域名，加上域名
            img_url = self.target_url + soup.select("#img > img")[0].attrs.get("src")
            # 拿到图片，地址

            # 我们还需要title，来保存图片
            img_title = soup.select("#img > img")[0].attrs.get("title")
            # 图片名字不能带有*，需要去除
            # 检测到每个图片名字*的索引位置
            last_index = img_title.find("4k") if img_title.find("4k") != -1 else img_title.find("4K")
            # 截取
            img_title = img_title[:last_index]
            # print(img_title)
            # 将图片链接和图片的 名字存到字典里
            img_detail_data[img_title] = img_url
        return img_detail_data

    # 下载图片
    # 根据不同的分类去下载，传入category_name
    def download_image(self, category_name, img_url, img_title):
        # 对你想下载的图片发起请求
        response = requests.get(url=img_url)
        # 拿到图片的响应数据
        # content = response.content
        # 图片存放的路径，进行拼接
        img_dir = os.path.join(self.BASE_URL, "img", str(category_name))
        # 文件夹不存在自动创建
        os.makedirs(img_dir, exist_ok=True)
        # 拼接图片文件路径,记得加图片的后缀
        img_path = os.path.join(img_dir, img_title + '.png')
        with open(img_path, "wb") as fp:
            for data in response.iter_content(1024):
                fp.write(data)
        print(f"图片{img_title}下载完成！")

    # 入口
    def main(self):
        # 拿到所有的分类
        img_category = self.parse_category()
        print(img_category)
        category_name_data = {}
        # enumerate对象，它是一个迭代器，包含元组（包含两个元素，索引和值）
        # start:所以从1开始
        for index, category_name in enumerate(img_category.keys(), start=1):
            print(f"当前第{index}个分类：----{category_name}")
            category_name_data[index] = category_name
        # 用户选择下载的分类
        category_id = input("输入你选择的分类id：---》")

        # 获取类名
        category_name = category_name_data[int(category_id)]
        # 起始的url
        original_url = img_category[category_name]

        # 让用户输入想要下载的起始的页码数和结束的页码数
        start_num = input("输入你要开始下载的起始页码数：----》")
        end_num = input("输入你要结束下载的页码数：----》")

        # 创建目标地址
        target_url_list = self.create_target_url(
            original_url=original_url,
            start_numm=int(start_num),
            end_num=int(end_num)
        )

        # 遍历每一网址，或的每一个soup对象
        img_detail_data = {}
        for target_url in target_url_list:
            try:
                soup = self.spider_page_soup(target_url=target_url)
                # 获取到图片的地址和详情标题
                img_detail_data.update(self.parse_image_detail_url(soup=soup))
            except Exception as e:
                continue
        for img_title, img_url in img_detail_data.items():
            self.download_image(img_url=img_url, img_title=img_title, category_name=category_name)

        # img_detail_data = self.parse_image_detail_url()
        # # 拆分，字典
        # for img_title, img_url in img_detail_data.items():
        #     self.download_image(img_url, img_title)


if __name__ == '__main__':
    s = SpiderImage()
    s.main()

```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
