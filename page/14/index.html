<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:type" content="website">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/page/14/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="坤">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aurora-lsk.asia/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/ATM--SHOPPING%E7%9B%AE%E5%BD%95%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/ATM--SHOPPING%E7%9B%AE%E5%BD%95%E8%A7%A3%E6%9E%90/" class="post-title-link" itemprop="url">ATM--SHOPPING目录解析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>项目开发流程</h1>
````python
# 三层架构
# 【在公司中如何开发一个成品的项目】
# 分为五个步骤
# 需求分析
# 架构设计
# 分组开发
# 项目测试
# 交付上线

# 【一】需求分析
# 【1】人员构成
# 架构师 + 产品经理 + 开发组长
# 【2】任务
# 产品经理 带着 架构师  + 开发组长 去跟客户进行沟通和交流
# 从客户哪里了解到客户的需求，我们要做什么事
# 开发一个商城系统 =--->
# 【3】
# 在去跟客户沟通之前 ， 已经从客户那里了解到了大致的需求
# 架构师  + 开发组长 两个人要协商 ---> 做一个初稿
# 去跟客户进行详细沟通的时候带着 初稿 ，尽量跟客户沟通需求的时候向我们的初稿上靠
# 做不出来别强求

# 【二】架构设计
# 【1】回到公司
# 架构师 负责对整体的业务需求进行定制和研发
# 给大家一个参考，我某方面需要用到哪些工具
# 使用的编程语言：Python
# 做后端用哪个框架：django、flask、fastapi ...
# 数据库：MySQL。postgresql、redis。mongdb ...
# 前端页面：Vue、react、antdesign ....

# 【2】对整体的价格进行评估
# 开发这个项目的周期：大致的开发周期
# 确定开发人数：每个人薪资要有一个大概的评估 日新 或者 月薪
#  1500 一个人人头 ---> 大致算
# ----》 大致的开发成本

# 【3】额外的成本
# 产品经理的成本 公司的成本 ....
# 【4】对所有成本进行总结
# 产品经理报给财务 ---> 财务进行评估
# 【5】报给老板
# 老板看完以后 确认签字
# 【6】产品经理去和客户沟通

# 【三】分组开发
# 【1】开发组长负责切分任务
# 从架构师哪里获取到架构设计
# 结合客户需求 ---> 对每一个功能进行划分和切割
# 去分配给每一个小组的成员
# 每一个人根据自己的需求个任务要求进行开发
# 降低了复杂度，提高了效率，开发周期大大缩短

# 【2】组长负责总结
# 将所有的分功能总结成一个主功能
# 负责简答的测试

# 【四】测试
# 扔给测试部门进行测试
# 测试负责对代码进行测试 ---> 压力测试 、 bug 测试、并发测试 ...
# 测试私下提醒你
# 测试 --> 提交给组长 可能会扣钱

# 【五】交付上线
# 【1】交付给客户，客户负责自己上线
# 交给你公司里面的运维或者公司里面的开发
# 上传道自己的服务器上

# 【2】再交钱，我负责帮你维护
# 上线到我的服务器上，如果出现bug，我负责帮你调试和维护


# 【去大公司好还是小公司好】
# 去华为好
# 大公司人多 ---> 开发项目的时候我只负责我负责的部分
# 福利可能也多
# 进去的门槛高
# 一丁点实例进去就是牛马

# 还是去普通的小公司好
# 小公司人少 ---> 就你一个负责开发，所有的东西都是你的
# 福利可能也还可以
# 进去的门槛相对较低
# 一丁点实力进去就是让他知道便宜没好货

# 如果想成长的更快 ---> 建议小公司 ---> 再去大公司就是强一点
# 就像躺着摆烂 ---> 大公司试试 ---> 就是牛马

# 落后就要挨打 ---》 进了公司以后不要天天摆烂 能多学就多学
````

<h1>软件开发目录规范的大概</h1>
<p>创建一个根目录：ATM_shopping</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="http://README.md">README.md</a>:项目说明书</p>
</li>
<li>
<p>（<strong>解释</strong>：存放项目的说明，包括但不限于，程序运行展示，存放一些对程序的解释型介绍）</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="http://start.py">start.py</a>:项目启动</p>
</li>
<li>
<p>（<strong>解释</strong>：ATM和购物车项目的启动入口）</p>
</li>
<li>
<p>bin：启动文件目录（存放启动文件的方式）</p>
</li>
<li>
<p>（<strong>解释</strong>：总项目的总功能整合）</p>
<ul>
<li><strong>init</strong>.py:包出口</li>
<li>（<strong>解释</strong>：作为 bin 包的出口文件）</li>
<li><a target="_blank" rel="noopener" href="http://main.py">main.py</a>:存放核心代码 （统合主逻辑）</li>
<li>（<strong>解释</strong>：作为用户视图层的整合代码入口）</li>
</ul>
</li>
<li>
<p>core：用户视图层（存放用户视图层代码文件）</p>
</li>
<li>
<p>（<strong>解释</strong>：存放用户视图层代码文件、主要负责参数的读入、输入层反馈的状态的信息的展示）</p>
<ul>
<li><strong>init</strong>.py：包出口</li>
<li>（<strong>解释</strong>：作为 core 包的出口文件）</li>
<li>user_src.py:用户功能代码</li>
<li>（<strong>解释</strong>：用户功能的视图代码<br>
负责用户数据的输入<br>
将用户数据传给接口层<br>
接口层反馈结果，将接口层返回的结果进行展示<br>
例如注册功能<br>
输入用户名和密码<br>
将用户名和密码传递给接口层<br>
接口层处理完成后反馈结果<br>
注册成功 返回 True<br>
打印登陆成功<br>
注册失败 返回 False<br>
打印登陆失败）</li>
<li><a target="_blank" rel="noopener" href="http://admin.py">admin.py</a>：管理员功能代码</li>
<li>（<strong>解释</strong>：管理员功能的视图代码<br>
负责管理员数据的输入<br>
将管理员数据传给接口层<br>
接口层反馈结果，将接口层返回的结果进行展示）</li>
<li>shop_src.py:购物车功能代码</li>
<li>（<strong>解释</strong>：购物功能的视图代码<br>
负责购物数据的输入<br>
将购物数据传给接口层<br>
接口层反馈结果，将接口层返回的结果进行展示</li>
<li>）</li>
</ul>
</li>
<li>
<p>interface：逻辑接口层</p>
</li>
<li>
<p>（<strong>解释</strong>：存放核心业务逻辑代码）</p>
<ul>
<li>
<p><strong>init</strong>.py:包出口</p>
</li>
<li>
<p>（<strong>解释</strong>：作为interface 包的出口文件）</p>
</li>
<li>
<p>user_interface.py:用户功能相关接口</p>
</li>
<li>
<p>（<strong>解释</strong>：用户功能的逻辑代码<br>
负责对视图层传入的数据进行处理、清洗或加密<br>
负责调用数据处理层进行数据的保存和读取<br>
将用户视图传入的参数进行清洗处理后向视图层反馈结果<br>
例如注册功能<br>
接收到视图层传入的用户名和密码<br>
对原始密码进行加密<br>
构建好存储到数据库的数据格式<br>
调用数据处理层的函数进行数据的写入<br>
获取到数据处理层反馈的结果<br>
写入成功<br>
返回 True 返回 写入成功<br>
写入失败<br>
返回 False 返回 写入失败<br>
将数据处理层的结果处理后反馈给视图层二次处理）</p>
</li>
<li>
<p>admin_interface.py:管理员功能相关接口</p>
</li>
<li>
<p>（<strong>解释</strong>：管理员功能的逻辑代码</p>
<p>负责对视图层传入的数据进行处理、清洗或加密</p>
<p>负责调用数据处理层进行数据的保存和读取</p>
<p>将用户视图传入的参数进行清洗处理后向视图层反馈结果）</p>
</li>
<li>
<p>bank_interface:银行核心逻辑接口</p>
</li>
<li>
<p>（<strong>解释</strong>：银行业务相关功能的逻辑代码</p>
<p>负责对视图层传入的数据进行处理、清洗或加密</p>
<p>负责调用数据处理层进行数据的保存和读取</p>
<p>将视图传入的参数进行清洗处理后向视图层反馈结果）</p>
</li>
<li>
<p>shop_interface.py:购物车功能相关接口</p>
</li>
<li>
<p>（<strong>解释</strong>：购物业务相关功能的逻辑代码</p>
<p>负责对视图层传入的数据进行处理、清洗或加密</p>
<p>负责调用数据处理层进行数据的保存和读取</p>
<p>将视图传入的参数进行清洗处理后向视图层反馈结果）</p>
</li>
</ul>
</li>
<li>
<p>db:数据处理层（存放数据与数据处理层代码）</p>
<ul>
<li><strong>init</strong>.py:包出口</li>
<li>（<strong>解释</strong>：作为 db 包的出口文件）</li>
<li>db_handler.py:数据处理层代码</li>
<li>（<strong>解释</strong>：用来处理有关数据的存储<br>
处理有关数据的读取和清理）</li>
<li>user_data:用户数据处理文件夹
<ul>
<li>user_data.json</li>
<li>（<strong>解释</strong>：存储所有用户的数据的json文件）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>conf:配置文件文件夹</p>
</li>
<li>
<p>（<strong>解释</strong>：存放配置文件）</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://settings.py">settings.py</a>:配置参数代码</li>
<li>（<strong>解释</strong>：存放设置相关的代码、比如根目录、日志配置字典参数）</li>
</ul>
</li>
<li>
<p>lib:公共方法文件夹</p>
<ul>
<li><strong>init</strong>.py:包出口</li>
<li>（<strong>解释</strong>：作为 lib 包的出口文件）</li>
<li><a target="_blank" rel="noopener" href="http://common.py">common.py</a>:公共方法代码</li>
<li>（<strong>解释</strong>：放所有函数或者部分函数公用的函数代码或逻辑）</li>
</ul>
</li>
<li>
<p>log:日志文件层</p>
</li>
<li>
<p>（<strong>解释</strong>：用来存放生成的log日志文件）</p>
<ul>
<li>User:用户日志文件夹
<ul>
<li>username.log:某个用户的日志文件</li>
</ul>
</li>
<li>Admin:管理员日志文件夹
<ul>
<li>username.log:某个用户的日志文件夹</li>
</ul>
</li>
<li>Shop：购物日志
<ul>
<li>username.log:每个用户的购物日志文件夹</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5Cimage-20240505202146874.png" alt="image-20240505202146874"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/BBS%E9%A1%B9%E7%9B%AE%E4%B9%8B%E8%A1%A8%E5%88%86%E6%9E%90%EF%BC%88%E6%A8%A1%E4%BB%BF%E5%8D%9A%E5%AE%A2%E5%9B%AD%E7%9A%84%E9%A1%B9%E7%9B%AE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/BBS%E9%A1%B9%E7%9B%AE%E4%B9%8B%E8%A1%A8%E5%88%86%E6%9E%90%EF%BC%88%E6%A8%A1%E4%BB%BF%E5%8D%9A%E5%AE%A2%E5%9B%AD%E7%9A%84%E9%A1%B9%E7%9B%AE%EF%BC%89/" class="post-title-link" itemprop="url">BBS项目之表分析（模仿博客园的项目）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>BBS项目之表分析（模仿博客园的项目）</h1>
<h2 id="【一】分析功能">【一】分析功能</h2>
<h3 id="【1】用户功能">【1】用户功能</h3>
<ul>
<li>
<p>登入和注册功能</p>
</li>
<li>
<p>修改密码，手机号，邮箱，等功能</p>
</li>
<li>
<p>注销账号功能</p>
</li>
<li>
<p>退出登入功能</p>
</li>
<li>
<p>收藏文章功能</p>
</li>
</ul>
<h3 id="【2】文章分享平台">【2】文章分享平台</h3>
<ul>
<li>添加文章功能</li>
<li>修改文章功能</li>
<li>删除文章功能</li>
<li>点赞和点踩功能</li>
<li>评论功能</li>
</ul>
<h2 id="【二】表分析">【二】表分析</h2>
<h3 id="【1】用户表">【1】用户表</h3>
<h3 id="【2】个人站点表（就是发文后台）">【2】个人站点表（就是发文后台）</h3>
<ul>
<li>模仿这个写：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/dream-ze">https://www.cnblogs.com/dream-ze</a></li>
</ul>
<h3 id="【3】文章表">【3】文章表</h3>
<h3 id="【4】文章分类表（就象是你的文件属于哪一类的大纲）">【4】文章分类表（就象是你的文件属于哪一类的大纲）</h3>
<h3 id="【5】文章标签表（你发文章的时候可以选择标签）">【5】文章标签表（你发文章的时候可以选择标签）</h3>
<h3 id="【6】文章评论表">【6】文章评论表</h3>
<h3 id="【7】广告信息表">【7】广告信息表</h3>
<h3 id="【8】创建一个时间表，让所有的表都继承这张表，时间表继承models-Model">【8】创建一个时间表，让所有的表都继承这张表，时间表继承models.Model</h3>
<h3 id="【9】点赞点踩表（关联文章，关联用户，点赞状态还是点踩状态）">【9】点赞点踩表（关联文章，关联用户，点赞状态还是点踩状态）</h3>
<h2 id="【三】分析表之间的关系">【三】分析表之间的关系</h2>
<ul>
<li>
<p>用户表与个人站点表是一对一关系</p>
<ul>
<li>一对一关系，一个用户只能有一个站点</li>
<li>blog</li>
</ul>
</li>
<li>
<p>文章分类与个人站点一对多关系</p>
<ul>
<li>一个文章分类只能对应一个人站点，一个站点可以对应多个文章分类</li>
</ul>
</li>
<li>
<p>文章表与文章标签表是多对多关系</p>
<ul>
<li>一个标签可以是很多个文章的标签，一个文章可以有多个标签</li>
</ul>
</li>
<li>
<p>文章表与文章分类表是一对多关系</p>
<ul>
<li>一个文章表只能是一个文章的分类，文章分类表可以有多个文章</li>
</ul>
</li>
<li>
<p>用户表与文章表多对一关系</p>
<ul>
<li>一个用户可以有多篇文章，自己写的文章只能是自己发出去</li>
</ul>
</li>
<li>
<p>文章表与文章评论表</p>
<ul>
<li>一个文章表可以对应的多条评论，一个评论只能对应一篇文章</li>
</ul>
</li>
</ul>
<h2 id="【四】表字段">【四】表字段</h2>
<h3 id="【0】创建一个公共的时间表BaseModel，但是不在数据库中显示，让每个表都继承它">【0】创建一个公共的时间表BaseModel，但是不在数据库中显示，让每个表都继承它</h3>
<ul>
<li>创建时间：create_time</li>
<li>更新时间：update_time</li>
</ul>
<h3 id="【1】用户表User-继承AbstractUser-BaseModel">【1】用户表User----&gt;继承AbstractUser,BaseModel</h3>
<ul>
<li>手机号–&gt;phone</li>
<li>性别–&gt;gender-----&gt;选择的</li>
<li>头像–&gt;avatar</li>
<li></li>
</ul>
<h3 id="【2】个人站点表Blog—-继承BaseModel">【2】个人站点表Blog—&gt;继承BaseModel</h3>
<ul>
<li>站点名–&gt;stie_name</li>
<li>站点标题–&gt;site_title</li>
<li>站点样式–&gt;site_theme</li>
</ul>
<h3 id="【3】文章表Article—》继承BaseModel">【3】文章表Article—》继承BaseModel</h3>
<ul>
<li>
<p>文章标题–&gt;title</p>
</li>
<li>
<p>文章简介–&gt;desc</p>
</li>
<li>
<p>文章内容–&gt;content</p>
</li>
<li>
<p>文章的点赞数–&gt;up_num</p>
</li>
<li>
<p>文章的点踩数–&gt;down_num</p>
</li>
<li>
<p>文章的评论数–&gt;comment_num</p>
</li>
</ul>
<h3 id="【4】文章分类表CategoryClass—-继承BaseModel">【4】文章分类表CategoryClass—&gt;继承BaseModel</h3>
<ul>
<li>文章分类</li>
<li>关联个人站点</li>
</ul>
<h3 id="【5】文章标签表CategoryTag—-继承BaseModel">【5】文章标签表CategoryTag—&gt;继承BaseModel</h3>
<ul>
<li>文章标签</li>
<li>关联个人站点</li>
</ul>
<h3 id="【6】文章评论表Comment—-继承BaseModel">【6】文章评论表Comment—&gt;继承BaseModel</h3>
<ul>
<li>评论内容</li>
<li>关联用户表</li>
<li>关联文章表</li>
<li>是否删除评论的状态</li>
<li>自关主评论</li>
</ul>
<h3 id="【7】广告信息表Adv–-继承BaseModel">【7】广告信息表Adv–&gt;继承BaseModel</h3>
<ul>
<li>广告的标题</li>
<li>广告的内容</li>
<li>手机号</li>
<li>广告图片</li>
<li>是否是轮番图</li>
</ul>
<h3 id="【8】点赞点踩表UpAndDown–-继承BaseModel">【8】点赞点踩表UpAndDown–&gt;继承BaseModel</h3>
<ul>
<li>关联用户</li>
<li>关联文章</li>
<li>点赞点踩状态</li>
</ul>
<h1>BBS项目之环境搭建</h1>
<h2 id="【一】创建项目">【一】创建项目</h2>
<ul>
<li>
<p>选择 file —&gt; new project —&gt; django</p>
</li>
<li>
<p>填写项目的路径和项目名称</p>
</li>
<li>
<p>创建虚拟环境–&gt;custom enevironment --&gt; generate new --&gt; vertualenv --&gt; 选择基础版本解释器</p>
</li>
<li>
<p>点击create创建项目</p>
</li>
<li>
<p>可以在终端输入pip list查询版本</p>
</li>
<li>
<p>注意虚拟环境安装的Django是最新版本的我们用的是3.2.12版本</p>
<ul>
<li>pip install dajngo==3.2.12</li>
</ul>
</li>
<li>
<p>连接myaql数据库</p>
<ul>
<li>
<p>首选创建一个新的库</p>
</li>
<li>
```mysql
    create database BBS_data;
    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  - 会报错</span><br><span class="line"></span><br><span class="line">    - 解决报错</span><br><span class="line">      - 方法一：打补丁安装pymysql</span><br><span class="line">      - 方法二：直接安装mysqlclient	</span><br><span class="line"></span><br><span class="line">- 创建APP</span><br><span class="line">  - user用户</span><br><span class="line">  - article文章</span><br><span class="line">  - blog个人站点</span><br><span class="line">  - backend管理端</span><br><span class="line">- 创建的APP一定加载到settings.py的INSTALLED_APPS中</span><br><span class="line"></span><br><span class="line">## 【二】配置Django项目的settings</span><br><span class="line"></span><br><span class="line">- 创建一个静态文件&#x27;static&#x27;</span><br><span class="line"></span><br><span class="line">- 配置路径</span><br><span class="line"></span><br><span class="line">- &#123;% raw %&#125;```python</span><br><span class="line">  STATIC_URL = &#x27;static/&#x27;</span><br><span class="line">  import os</span><br><span class="line">  STATICFILES_DIRS = [</span><br><span class="line">      os.path.join(BASE_DIR, &#x27;static&#x27;)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
<li>
<p>配置好的settings，有需要的后面在加</p>
</li>
</ul>
```python
from pathlib import Path

# 项目的根路径
BASE_DIR = Path(__file__).resolve().parent.parent

# Django内部的加密串
SECRET_KEY = 'django-insecure-dyb3zehb_+p%62xeww6m_&*79^!zz6f9uz9q=8!up*!97tv9!5'

# 开发者模式 档案ctrl + s会重启项目
# 如果报错就会提示完整的错误信息
DEBUG = True

# 允许访问域名白名单
# []其实就是代表所有里卖弄有一个隐藏的*
ALLOWED_HOSTS = []

# 注册的APP
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'user.apps.UserConfig',
    "article.apps.ArticleConfig",
    "blog.apps.BlogConfig",
    "backend.apps.BackendConfig"
]

# 中间件
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

# Django默认的路由系统
ROOT_URLCONF = 'BBS_project.urls'

#
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'article/templates']
        ,
        # 这个是能够检索当前APP下的templates文件
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

# WSGI：Web服务器和Web应用程序或框架之间的一种简单而通用的接口
WSGI_APPLICATION = 'BBS_project.wsgi.application'


# 配置数据库
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        # create database BBS_data
        'NAME': 'BBS_data',
        'USER': 'root',
        'PASSWORD': '1234567',
        'HOST': '127.0.0.1',
        'PORT': 3306,
        'CHARSET': 'utf8mb4',
    }
}

# 用户认证验证器
AUTH_PASSWORD_VALIDATORS = [
    {
        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',
    },
    {
        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',
    },
]


# Django的语言脚本
# LANGUAGE_CODE = 'en-us'
LANGUAGE_CODE = 'zh-hans'

# 时区
# TIME_ZONE = 'UTC'
TIME_ZONE = 'Asia/Shanghai'

# 是否启用国际化时间
# 国际化是指让网站能够支持多种语言，包括展示翻译后的文本、格式化日期、数字等以符合不同地区的习惯
USE_I18N = True

# 控制Django是否使用失去
# 为True时存储的日期和时间都会以UTC为基准
# 同时管理数据库的时间
USE_TZ = True

# 静态文件路径
STATIC_URL = 'static/'
import os
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'static')
]

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/9.0Django%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%A8%A1%E6%9D%BF%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/9.0Django%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%A8%A1%E6%9D%BF%E5%B1%82/" class="post-title-link" itemprop="url">9.0Django框架之模板层</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django框架之模板层</h1>
<ul>
<li>模板层又称前端</li>
</ul>
<h2 id="【一】模板语法传值和取值">【一】模板语法传值和取值</h2>
<h3 id="【1】-swig￼34-：变量相关">【1】{{ }}：变量相关</h3>
<ul>
<li>直接渲染后端传过来的变量名即可</li>
</ul>
<p>后端</p>
```python
def logout(request):
    data_dict = {"username": "jack", "password": "912"}
    data_float = 1.233
    data_int = 12
    data_str = "logout"
    data_tuple = ("logout", "12")
    data_list = [1, 2, 3, 4, 5, 6, "logout"]
    data_bool = False
    data_set = {1, 2, 3, 4, 5, 5, 5, 5, 5, 6}

    def func():
        print("没有返回值")

    class one(object):
        def func1(self):
            return f"class,func"

        def func2(self):
            return f"class,func2"

        # 绑定给类的方法
        @classmethod
        def func3(cls):
            return f"class,func3"

        # 静态方法
        @staticmethod
        def func4():
            return f"class,func4"

        def __str__(self):
            return f"__str__方法"

    one_obj = one()
    return render(request, "login.html", locals())
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">前端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;h1&gt;八大数据类型&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# &#123;&#x27;username&#x27;: &#x27;jack&#x27;, &#x27;password&#x27;: &#x27;912&#x27;&#125; #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# jack #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict.password &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# 912 #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict.items &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# dict_items([(&#x27;username&#x27;, &#x27;jack&#x27;), (&#x27;password&#x27;, &#x27;912&#x27;)]) #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict.values &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# dict_values([&#x27;jack&#x27;, &#x27;912&#x27;]) #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_dict.keys &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# dict_keys([&#x27;username&#x27;, &#x27;password&#x27;]) #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; data_bool &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# False #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_float &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# 1.233 #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_str &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# logout #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_list &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# [1, 2, 3, 4, 5, 6, &#x27;logout&#x27;] #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_int &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# 12 #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_tuple &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# (&#x27;logout&#x27;, &#x27;12&#x27;) #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_set &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# &#123;1, 2, 3, 4, 5, 6&#125; #&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;函数方法&lt;/h1&gt;</span><br><span class="line">&lt;p&gt; &#123;&#123; func &#125;&#125; &lt;/p&gt;</span><br><span class="line">&#123;# None #&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;类方法&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123; one_obj &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# __str__方法 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# __str__方法 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one_obj.func1 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one_obj.func2 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func2 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one.func1 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one.func2 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func2 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one_obj.func3 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func3 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one.func3 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func3 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one_obj.func4 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func4 #&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&#123;&#123; one.func4 &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# class,func4 #&#125;</span><br></pre></td></tr></table></figure>

<p>路由</p>
```python
path('logout/', logout, name="logout")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">浏览器页面展示</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line">八大数据类型</span><br><span class="line">&#123;&#x27;username&#x27;: &#x27;jack&#x27;, &#x27;password&#x27;: &#x27;912&#x27;&#125;</span><br><span class="line"></span><br><span class="line">jack</span><br><span class="line"></span><br><span class="line">912</span><br><span class="line"></span><br><span class="line">dict_items([(&#x27;username&#x27;, &#x27;jack&#x27;), (&#x27;password&#x27;, &#x27;912&#x27;)])</span><br><span class="line"></span><br><span class="line">dict_values([&#x27;jack&#x27;, &#x27;912&#x27;])</span><br><span class="line"></span><br><span class="line">dict_keys([&#x27;username&#x27;, &#x27;password&#x27;])</span><br><span class="line"></span><br><span class="line">False</span><br><span class="line"></span><br><span class="line">1.233</span><br><span class="line"></span><br><span class="line">logout</span><br><span class="line"></span><br><span class="line">[1, 2, 3, 4, 5, 6, &#x27;logout&#x27;]</span><br><span class="line"></span><br><span class="line">12</span><br><span class="line"></span><br><span class="line">(&#x27;logout&#x27;, &#x27;12&#x27;)</span><br><span class="line"></span><br><span class="line">&#123;1, 2, 3, 4, 5, 6&#125;</span><br><span class="line"></span><br><span class="line">函数方法</span><br><span class="line">None</span><br><span class="line"></span><br><span class="line">类方法</span><br><span class="line">__str__方法</span><br><span class="line"></span><br><span class="line">__str__方法</span><br><span class="line"></span><br><span class="line">class,func</span><br><span class="line"></span><br><span class="line">class,func2</span><br><span class="line"></span><br><span class="line">class,func</span><br><span class="line"></span><br><span class="line">class,func2</span><br><span class="line"></span><br><span class="line">class,func3</span><br><span class="line"></span><br><span class="line">class,func3</span><br><span class="line"></span><br><span class="line">class,func4</span><br><span class="line"></span><br><span class="line">class,func4</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意当前端使用函数，后端没有返回值时，返回None，有返回值的话就渲染返回值</strong></li>
<li><strong>函数放在前端的{{ 函数名 }}内，函数会自动触发</strong></li>
<li><strong>但是不支持给函数传递参数</strong></li>
<li><strong>类的绑定方法</strong></li>
<li><strong>注意：前端取值时数据是个列表的时候可以{{列表.索引值取值}}</strong></li>
</ul>
<h3 id="【2】-swig￼39-：逻辑相关">【2】{% %}：逻辑相关</h3>
<ul>
<li>
<p><code>{% %}</code> 标签用于执行逻辑相关的操作，这些操作通常不会直接生成可见的内容，而是控制模板的渲染流程、加载其他模板标签、设置变量等</p>
</li>
<li>
<p>逻辑相关的标签提供了在模板中进行条件判断、循环遍历、包含其他模板片段等功能</p>
</li>
<li>
<p><strong>条件判断</strong> (<code>{% if %}</code>, <code>{% elif %}</code>, <code>{% else %}</code>, <code>{% endif %}</code>）</p>
<ul>
<li>用于在模板中进行条件判断，根据条件的结果渲染不同的内容。</li>
</ul>
</li>
</ul>
```html
{% if user.is_authenticated %}  
    <p>Welcome, {{ user.username }}.</p>  
{% else %}  
    <p>Please log in.</p>  
{% endif %}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- **循环遍历** (`&#123;% raw %&#125;&#123;% for %&#125;&#123;% endraw %&#125;`, `&#123;% raw %&#125;&#123;% empty %&#125;&#123;% endraw %&#125;`, `&#123;% raw %&#125;&#123;% endfor %&#125;&#123;% endraw %&#125;`)</span><br><span class="line">  - 用于遍历列表、元组、字典等可迭代对象，并在每次迭代中渲染模板内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&#123;% for item in item_list %&#125;  </span><br><span class="line">    &lt;p&gt;&#123;&#123; item &#125;&#125;&lt;/p&gt;  </span><br><span class="line">&#123;% empty %&#125;  </span><br><span class="line">    &lt;p&gt;No items found.&lt;/p&gt;  </span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>模板包含</strong> (<code>{% include %}</code>)
<ul>
<li>用于在模板中包含另一个模板的内容。</li>
</ul>
</li>
</ul>
```html
{% include 'includes/header.html' %}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- **模板继承** (`&#123;% raw %&#125;&#123;% extends %&#125;&#123;% endraw %&#125;`, `&#123;% raw %&#125;&#123;% block %&#125;&#123;% endraw %&#125;`, `&#123;% raw %&#125;&#123;% endblock %&#125;&#123;% endraw %&#125;`)</span><br><span class="line">  - 允许一个模板继承另一个模板的内容，并在需要的地方覆盖或添加内容。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&#123;% extends &#x27;base.html&#x27; %&#125;  </span><br><span class="line"></span><br><span class="line">&#123;% block content %&#125;  </span><br><span class="line">    &lt;p&gt;This is my content.&lt;/p&gt;  </span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注释</strong> (<code>{% comment %}</code>, <code>{% endcomment %}</code>)
<ul>
<li>用于在模板中添加注释，这些注释不会在渲染后的HTML中显示。</li>
</ul>
</li>
</ul>
```html
{% comment %}  
    This is a comment that will not be rendered.  
{% endcomment %}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- `&#123;% raw %&#125;&#123;% %&#125;&#123;% endraw %&#125;` 标签中的逻辑操作是在服务器端进行的，而不是在客户端的浏览器中。</span><br><span class="line">- 当Django服务器接收到一个请求并决定使用某个模板来渲染响应时，它会解析模板中的 `&#123;% raw %&#125;&#123;% %&#125;&#123;% endraw %&#125;` 标签，并根据标签中的逻辑执行相应的操作，然后将渲染后的HTML发送给客户端</span><br><span class="line"></span><br><span class="line">## 【二】过滤器</span><br><span class="line"></span><br><span class="line">### 【1】什么是过滤器</span><br><span class="line"></span><br><span class="line">- 在Django的模板语言中，通过使用过滤器来改变变量的显示</span><br><span class="line"></span><br><span class="line">### 【2】过滤器语法</span><br><span class="line"></span><br><span class="line">- &#123;% raw %&#125;&#123;&#123;value|过滤器名字:默认值&#125;&#125;&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line">- 使用&#x27;|&#x27;来应用 过滤器</span><br><span class="line"></span><br><span class="line">案例</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">&#123;&#123;name|lower&#125;&#125;</span><br><span class="line"># 会将name变量对应的值，变成小写</span><br></pre></td></tr></table></figure>

<h3 id="【3】过滤器的语法">【3】过滤器的语法</h3>
<h4 id="（1）计算长度–-length">（1）计算长度–(length)</h4>
<ul>
<li>应用于字符串和列表</li>
</ul>
<p>前端</p>
```html
<p>计算长度：{{ data|length }}</p>
{# 计算长度：4 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data = &quot;计算长度&quot;</span><br></pre></td></tr></table></figure>

<h4 id="2-默认值–（default）">(2)默认值–（default）</h4>
<ul>
<li>默认值就是当想要的结果不存在时(及值等于False时)，走默认值</li>
</ul>
<p>前端</p>
```html
<p>默认值：{{ data_bool|default:"默认值" }}</p>
{# 默认值：默认值 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_bool = False</span><br></pre></td></tr></table></figure>

<h4 id="（3）日期格式–-date">（3）日期格式–(date)</h4>
<ul>
<li>
<p>日期格式化</p>
</li>
<li>
```html
  {{ value|date:"Y-m-d H:i:s"}}
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- </span><br><span class="line"></span><br><span class="line">前端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;p&gt;日期格式化：&#123;&#123; data_time|date:&quot;Y-m-d H:i:s&quot; &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# 日期格式化：2024-06-24 18:46:32 #&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>后端</p>
```python
data_time = datetime.datetime.now()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### (4)切片操作--（slice）</span><br><span class="line"></span><br><span class="line">- 支持步长切片（顾头不顾尾）</span><br><span class="line"></span><br><span class="line">前端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&#123;# 遵循顾头不顾尾 #&#125;</span><br><span class="line">&lt;p&gt;&#123;&#123; data_english|slice:&#x27;0:6:2&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;# jcd #&#125;</span><br></pre></td></tr></table></figure>

<p>后端</p>
```python
data_english = "jackdreamtom"
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端切片操作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_english = &quot;jackdreamtom&quot;</span><br><span class="line">data_english[起始索引：结束索引：步长]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type_slice = slice(起始索引：结束索引：步长)</span><br><span class="line">data_english[type_slice]</span><br></pre></td></tr></table></figure>

<h4 id="5-切取摘要–（truncatechars）">(5)切取摘要–（truncatechars）</h4>
<ul>
<li><code>truncatechars</code>：用在文本太长的情况，只展示你设置的字符长度给用户</li>
<li>字符会将…也算一个字符</li>
</ul>
<p>前端</p>
```html
{# 摘要算法 #}
<p>{{ data_truncatechars|truncatechars:10 }}</p>
{# # Nginx是… #}
{# 只显示9个文本信息其他的省略号省略，因为...也算一个字符 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">    data_truncatechars = (&quot;# Nginx是什么？ Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器 ，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点开发的，因它的稳定性、丰富的功能集、简单的配置文件和低系统资源的消耗而闻名 ...&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li>单词不将.算进去</li>
</ul>
<p>前端</p>
```html
{# 只显示5个文本信息其他的省略号省略 #}
<p>{{ data_cut|truncatewords:5 }}</p>
{# I just need someone who … #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_cut = &quot;I just need someone who will never abandon me&quot;</span><br></pre></td></tr></table></figure>

<h4 id="6-移除指定字符–（cut）">(6)移除指定字符–（cut）</h4>
<ul>
<li>
{{ value|cut:'字符' }}，字符是什么就移除什么
</li>
</ul>
<p>前端</p>
```html
{# 去除所有只当字符 #}
<p>{{ data_cut|cut:' ' }}</p>
{# Ijustneedsomeonewhowillneverabandonme #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_cut = &quot;I just need someone who will never abandon me&quot;</span><br></pre></td></tr></table></figure>

<h4 id="7-拼接字符–（join）">(7)拼接字符–（join）</h4>
<ul>
<li>
{{ value|join:"字符" }}，字符是什么就按照什么拼接
</li>
</ul>
<p>前端</p>
```html
<p>{{ data_join|join:"$" }}</p>
{# 李$苏$田 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_join = [&quot;李&quot;, &quot;苏&quot;, &quot;田&quot;]</span><br></pre></td></tr></table></figure>

<h4 id="8-加法–（add）">(8)加法–（add）</h4>
<ul>
<li>将后端的数字加上你add：后面的值</li>
</ul>
<p>前端</p>
```html
<p>{{ data_add|add:100 }}</p>
{# 122 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_add = 22</span><br></pre></td></tr></table></figure>

<h4 id="9-取消转义（mark-safe和safe）">(9)取消转义（mark_safe和safe）</h4>
<ul>
<li>转义–safe</li>
</ul>
<p>​	前端</p>
```html
{# 取消转义 #}
<p>{{ data_safe|safe }}</p>
{# 这是p标签 #} {# 这是p标签已经是h1标签 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_safe = &quot;&lt;h1&gt;这是p标签&lt;/h1&gt;&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>转义–mark_safe</li>
<li>需要导入一个方法<code>from django.utils.safestring import mark_safe</code></li>
<li>在后端处理好直接在前端渲染</li>
</ul>
<p>前端</p>
```python
<p>{{ data_mark_safe }}</p>
{#这是p标签#}{# 这是p标签已经被后端转义成h1标签了 #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 后端取消转移需要导入方法</span><br><span class="line">from django.utils.safestring import mark_safe</span><br><span class="line"></span><br><span class="line">data_safe = &quot;&lt;h1&gt;这是p标签&lt;/h1&gt;&quot;</span><br><span class="line"></span><br><span class="line">data_mark_safe = mark_safe(data_safe)</span><br></pre></td></tr></table></figure>

<h4 id="10-设一个自定义时间，会输出这个时间过去了多久–（timesince）">(10)设一个自定义时间，会输出这个时间过去了多久–（timesince）</h4>
<ul>
<li>与timeuntil相对</li>
<li>后端写代码的时候，只能写比今天的时间要晚，不然只会显示<code>0 minutes</code></li>
<li>计算的是这个时间过去了多久</li>
</ul>
<p>前端</p>
```html
<p>{{ data_time_since|timesince }}</p>
{# 1 year, 5 months #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_time_since = datetime.date(2023, 1, 9)</span><br></pre></td></tr></table></figure>

<h4 id="11-设置也个自定义时间，会输出到这个时间还有多久–（timeuntil）">(11)设置也个自定义时间，会输出到这个时间还有多久–（timeuntil）</h4>
<ul>
<li>与timesince相对</li>
<li>后端写代码的时候，只能写比今天的时间要早，不然只会显示<code>0 minutes</code></li>
<li>计算的是距离这个时间还有多久</li>
</ul>
<p>前端</p>
```html
<p>{{ data_time_until|timeuntil }}</p>
{# 11 months #}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_time_until = datetime.date(2025, 5, 24)</span><br></pre></td></tr></table></figure>

<h2 id="【三】标签语法–（Tags）">【三】标签语法–（Tags）</h2>
<h3 id="【1】for循环">【1】for循环</h3>
<h4 id="（1）for循环可以用的语法">（1）for循环可以用的语法</h4>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>forloop.counter</td>
<td>当前循环的索引值（从1开始）</td>
</tr>
<tr>
<td>forloop.counter0</td>
<td>当前循环的索引值（从0开始）</td>
</tr>
<tr>
<td>forloop.revcounter</td>
<td>当前循环的倒序索引值（从1开始）</td>
</tr>
<tr>
<td>forloop.revcounter0</td>
<td>当前循环的倒序索引值（从0开始）</td>
</tr>
<tr>
<td>forloop.first</td>
<td>当前循环是不是第一次循环（布尔值）</td>
</tr>
<tr>
<td>forloop.last</td>
<td>当前循环是不是最后一次循环（布尔值）</td>
</tr>
<tr>
<td>forloop.parentloop</td>
<td>本层循环的外层循环</td>
</tr>
</tbody>
</table>
<h4 id="（2）for循环的语法使用">（2）for循环的语法使用</h4>
<h5 id="1-当前循环的索引值（从1开始）–forloop-counter">[1]当前循环的索引值（从1开始）–forloop.counter</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.counter方法是索引，从索引1开始</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.counter }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
<!-- for循环遍历列表，forloop.counter方法是索引，从索引1开始
1:1
2:2
3:3
4:4
5:5
6:6
7:7
8:8
9:9
    -->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="2-当前循环的索引值（从0开始）–forloop-counter0">[2]当前循环的索引值（从0开始）–forloop.counter0</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.counter0得到的是索引值，从0开始索引</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.counter0 }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
</ul>
<!--for循环遍历列表，forloop.counter0得到的是索引值，从0开始索引
0:1
1:2
2:3
3:4
4:5
5:6
6:7
7:8
8:9-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="3-当前循环的倒序索引值（从1开始）–forloop-revcounter">[3]当前循环的倒序索引值（从1开始）–forloop.revcounter</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.revcounter得到的是倒叙的索引值，从1开始</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.revcounter }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
<!--for循环遍历列表，forloop.revcounter得到的是倒叙的索引值，从1开始
9:1
8:2
7:3
6:4
5:5
4:6
3:7
2:8
1:9-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="4-当前循环的倒序索引值（从0开始）–forloop-revcounter0">[4]当前循环的倒序索引值（从0开始）–forloop.revcounter0</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.revcounter0得到的是倒叙的索引值，索引从0开始</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.revcounter0 }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
<!--for循环遍历列表，forloop.revcounter0得到的是倒叙的索引值，索引从0开始
8:1
7:2
6:3
5:4
4:5
3:6
2:7
1:8
0:9-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="5-当前循环是不是第一次循环（布尔值）–forloop-first">[5]当前循环是不是第一次循环（布尔值）–forloop.first</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.first判断那个值是第一次循环,得到的是布尔值</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.first }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
<!--for循环遍历列表，forloop.first判断当前循环是不是第一次循环,得到的是布尔值
True:1
False:2
False:3
False:4
False:5
False:6
False:7
False:8
False:9-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="6-当前循环是不是最后一次循环（布尔值）–forloop-last">[6]当前循环是不是最后一次循环（布尔值）–forloop.last</h5>
<p>前端</p>
```html
<h1>for循环遍历列表，forloop.last判断那个值是最后一次循环，得到的是布尔值</h1>
    {% for data in data_list %}
    	<li>
        {{ forloop.last }}:{{ data }}
        </li>
        {% empty %}
        <li>已经遍历完</li>
    {% endfor %}
<!--for循环遍历列表，forloop.last判断当前是不是最后一次循环，得到的是布尔值
False:1
False:2
False:3
False:4
False:5
False:6
False:7
False:8
True:9-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def register(request):</span><br><span class="line">    data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    return render(request, &#x27;register.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<h5 id="7-本层循环的外层循环–forloop-parentloop">[7]本层循环的外层循环–forloop.parentloop</h5>
<p>…</p>
<h4 id="（3）for…empty语法">（3）for…empty语法</h4>
<ul>
<li>empty语法是当前遍历的数据为空时，才会走的语法</li>
</ul>
<p>前端</p>
```html
{% for data in data_false %}
	{{ data }}
    {% empty %}
     'data_false没有值'
    {# 'data_false没有值' #}
{% endfor %}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_false = &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="【2】if…elif…else语法的用法">【2】if…elif…else语法的用法</h3>
<ul>
<li>当if语句的data_list有数据是，不会再继续往下走，前端会渲染if语句</li>
<li>当data_list没有数据时，来到elif语句进行判断，data_list_one有数据不会再往下走，前端会渲染else语句</li>
<li>当data_list_one也没有数据时，就会来到最后的else，前端会渲染else语句</li>
</ul>
<p>前端</p>
```html
{% if data_list %}
    计算列表的总长度：{{ data_list|length }}
	{% elif data_list_one%}
    切片：{{ data_list_one|slice:'1:6:2'}}
    {% else %}
    没有数据
{% endif %}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"> data_list = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">    data_list_one = [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></pre></td></tr></table></figure>

<ul>
<li>也可以只有if和else</li>
<li>if语句支持and 、or、==、&gt;、&lt;、!=、&lt;=、&gt;=、in、not in、is、is not判断</li>
</ul>
<h3 id="【3】with语句">【3】with语句</h3>
<ul>
<li>起别名</li>
</ul>
<h3 id="【4】得到所有的for方法–forloop">【4】得到所有的for方法–forloop</h3>
<ul>
<li>得到的是所有for语句方法的结果</li>
</ul>
<p>前端</p>
```html
{% for new in data_new %}
    <p>{{ forloop }}</p>
{% endfor %}
<!--{'parentloop': {}, 'counter0': 0, 'counter': 1, 'revcounter': 3, 'revcounter0': 2, 'first': True, 'last': False}

{'parentloop': {}, 'counter0': 1, 'counter': 2, 'revcounter': 2, 'revcounter0': 1, 'first': False, 'last': False}

{'parentloop': {}, 'counter0': 2, 'counter': 3, 'revcounter': 1, 'revcounter0': 0, 'first': False, 'last': True}-->
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data_new = [1, 2, 3]</span><br></pre></td></tr></table></figure>

<h3 id="【5】forloop方法-和if语句混用">【5】forloop方法 和if语句混用</h3>
<p>前端</p>
```html
{% for x in data %}
	{% if forloop.first %}
		<p>当前要是第一次循环的话走这里：{{ x }}</p>
{#        当前要是第一次循环的话走这里：jack#}
        {% elif forloop.last %}
        <p>当前要是最后一次循环走这里：{{ x }}</p>
{#      当前要是最后一次循环走这里：dream  #}
        {% else %}
        <p>遍历每一个值：{{ x }}</p>
{#        遍历每一个值：tom#}
{#          遍历每一个值：opp    #}
	{% endif %}
{% endfor %}
<!--
当前要是第一次循环的话走这里：jack

遍历每一个值：tom

遍历每一个值：opp

当前要是最后一次循环走这里：dream
-->

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">data = [&quot;jack&quot;, &quot;tom&quot;, &quot;opp&quot;, &quot;dream&quot;]</span><br></pre></td></tr></table></figure>

<h2 id="【四】自定义过滤器标签-inclusion-tag-包含标签">【四】自定义过滤器标签/inclusion_tag(包含标签)</h2>
<h3 id="【1】三步走">【1】三步走</h3>
<ul>
<li>在Django的APP下传创建一个名字必须为templatetags文件夹</li>
<li>在该文件夹下创建一个名字随便起的py文件夹</li>
<li>在该文件夹下必须写下面的代码</li>
</ul>
```python
from django import template

register = template.Library()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】自定义过滤器</span><br><span class="line"></span><br><span class="line">- 过滤器最多只能有两个参数</span><br><span class="line"></span><br><span class="line">#### （1）使用过滤器</span><br><span class="line"></span><br><span class="line">- 在APP下创建一个templatetags文件夹，在里面定义一个py文件名字随便起</span><br><span class="line"></span><br><span class="line">templatetags/one.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django import template</span><br><span class="line"></span><br><span class="line"># template：模板层的模板对象</span><br><span class="line"># Library：图书管</span><br><span class="line"># template.Library()：模板层的图书馆</span><br><span class="line">register = template.Library()</span><br><span class="line"># register得到一个对象</span><br><span class="line">print(register)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># &lt;django.template.library.Library object at 0x0000012B4320AD40&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 写一个绑定方法括号里的数据是自己在前端自己定义的html文件</span><br><span class="line">@register.inclusion_tag(&quot;login.html&quot;)</span><br><span class="line"># one函数括号里也可以传值，最多只能传两个</span><br><span class="line">def one():</span><br><span class="line">    data = &quot;这是模板层one函数&quot;</span><br><span class="line">    return locals()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@register.inclusion_tag(&quot;right_menu.html&quot;)</span><br><span class="line">def two(n):</span><br><span class="line">    data_o = &#x27;这里是模板层的two函数&#x27;</span><br><span class="line">    data = [f&quot;第&#123;i&#125;位&quot; for i in range(10)]</span><br><span class="line">    return locals()</span><br></pre></td></tr></table></figure>

<ul>
<li>在创建一个html文件，让<code>@register.inclusion_tag(&quot;html文件&quot;)</code>继承，有几个函数就创建几个html文件</li>
<li>然后再你创建的html内书写代码</li>
</ul>
<p>login.html</p>
<ul>
<li>因为你是one的装饰器，直接使用data数据</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>这里是login注册函数</h1>
{{ data }}
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">right_menu.html</span><br><span class="line"></span><br><span class="line">- 应为你是two函数的装饰器，直接使用data数据和data_o数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;这里是right_menu文件&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &#123;% for datum in data %&#125;</span><br><span class="line">        &lt;li&gt;&#123;&#123; datum &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&#123;&#123; data_o &#125;&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>将两个html文件的数据都用在index.html文件中
<ul>
<li>第一步是将你创建的one.py文件导入<code>{% load one %}</code></li>
<li>第二部是将one.py文件中的one函数导入<code>{% one %}</code>,需要参数的话就把参数写在函数名后面<code>{% two 10%}</code></li>
</ul>
</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
{% load one %}
<h1>这是被装饰器装饰的html文件</h1>
{% one %}
{% two 10%}


</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- urls.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line"></span><br><span class="line">from user.views import index</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&#x27;admin/&#x27;, admin.site.urls),</span><br><span class="line">    path(&quot;&quot;, index, name=&quot;index&quot;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>浏览器页面显示</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240625184653583.png" alt="image-20240625184653583"></p>
<h2 id="【五】模板的继承">【五】模板的继承</h2>
<ul>
<li>
<p>我们创建一个母版，在里面写好固定的格式，在格式里面定义一个方法<code>{% block 名字 %}</code>，这个地放就是你可以更改信息的地方</p>
</li>
<li>
<p>意思就是你在其它地方调用的时候，就直接把HTML文档里面的信息清空</p>
</li>
<li>
<p>直接使用方法<code>{% extends "home.html" %}</code></p>
</li>
<li>
<p>home.html就是你定义的母模版</p>
</li>
<li>
<p>直接这样写</p>
</li>
<li>
```html
  {% extends "home.html" %}{% block main_content %}
  	这中间就是你要添加的数据
  {% endblock %}
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 这样就可以和母模版使用通过一个模板，就是中间的内容不同</span><br><span class="line"></span><br><span class="line">做一个模板页面</span><br><span class="line"></span><br><span class="line">创建一个home.html母模版</span><br><span class="line"></span><br><span class="line">- 这个例子就是把整个页面分成了三份，进行了分隔，在其它页面也可以正常使用</span><br><span class="line"></span><br><span class="line">- 比热我们改主题内容我们用,`main_content`随便起的名字，我们要使用的话就直接把主题内容换掉就好了</span><br><span class="line"></span><br><span class="line">  - &#123;% raw %&#125;```html</span><br><span class="line">     &#123;% block main_content %&#125;</span><br><span class="line">                	主题内容</span><br><span class="line">                &#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    {% load one %}
</head>
<body>

<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Brand</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
        <li><a href="#">Link</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">One more separated link</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">Link</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Separated link</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <p>左边</p>
        </div>
        <div class="col-md-8">
            {% block main_content %}
            	主题内容
            {% endblock %}
        </div>
        <div class="col-md-2">
            右边
        </div>
    </div>
</div>


</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240625194847089](D:\pycharm\Temporary_notes\图片\image-20240625194847089.png)</span><br><span class="line"></span><br><span class="line">- 在模块的莫格地方做一个块的声明</span><br><span class="line"></span><br><span class="line">index.html</span><br><span class="line"></span><br><span class="line">- 直接把原来的index.html内容清空，直接导入`&#123;% raw %&#125;&#123;% extends &quot;home.html&quot; %&#125;&#123;% endraw %&#125;`</span><br><span class="line"></span><br><span class="line">- 在导入你在home.html文件中需要的数据和方法</span><br><span class="line"></span><br><span class="line">  - 把想要展示的内容写进去即可，添加到主题内容部分即可</span><br><span class="line"></span><br><span class="line">    &#123;% raw %&#125;```html</span><br><span class="line">    &#123;% block main_content %&#125;</span><br><span class="line">                	主题内容</span><br><span class="line">                &#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在页面中直接写<code>{% extends "home.html" %}</code>,在它的中间写你需要的信息</li>
</ul>
```html
{% extends "home.html" %}

{% block main_content %}
	<div>
    <h1>把主题内容换成了index.html数据</h1>
</div>
{% endblock %}
```

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240625194811230.png" alt="image-20240625194811230"></p>
<ul>
<li>在另一个页面直接将这个块的内容进行替换即可</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/CSRF%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E5%92%8CAuth%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/CSRF%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E5%92%8CAuth%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">CSRF跨站请求和Auth模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django框架之CSRF跨站请求</h1>
<h2 id="【一】引入">【一】引入</h2>
<ul>
<li>我么们每次注释掉的中间件<code>django.middleware.csrf.CsrfViewMiddleware</code></li>
<li>Django 的 <code>CsrfViewMiddleware</code> 中间件保护你的网站免受 CSRF 攻击</li>
<li>中间件是用于在 Django 应用中处理跨站请求伪造（Cross-Site Request Forgery, CSRF）的中间件</li>
</ul>
<h2 id="【二】什么是CSRF">【二】什么是CSRF</h2>
<ul>
<li>
<p>CSRF跨站请求伪装是一种常见的网络攻击方式</p>
</li>
<li>
<p>攻击者通过诱导受害者访问恶意网站或点击恶意链接</p>
</li>
<li>
<ul>
<li>将恶意请求发送到目标网站上</li>
<li>利用受害者在目标网站中已登录的身份来执行某些操作</li>
<li>从而达到攻击的目的</li>
</ul>
</li>
</ul>
<h2 id="【三】保护措施">【三】保护措施</h2>
<h3 id="【1】使用CSRF令牌">【1】使用CSRF令牌</h3>
<ul>
<li>在用户的请求中添加随机生成的令牌，并将该令牌保存到用户会话中</li>
<li>每次提交请求时都会验证该令牌，确保请求是合法的</li>
</ul>
<h3 id="【2】严格验证请求的来源">【2】严格验证请求的来源</h3>
<ul>
<li>服务端可以验证请求的来源是否来源于预期的网站域名</li>
<li>比如检查HTTP Referer头部</li>
</ul>
<h3 id="【3】使用验证码">【3】使用验证码</h3>
<ul>
<li>在敏感的操作上使用手机验证码等</li>
<li>增加用户身份验证的防护</li>
</ul>
<h2 id="【四】CSRF令牌验证">【四】CSRF令牌验证</h2>
<h3 id="【1】介绍">【1】介绍</h3>
<ul>
<li>csrf校验是一种用于防止跨站请求伪造（Cross-Site Request Forgery）攻击的安全措施</li>
</ul>
<h3 id="【2】签发令牌">【2】签发令牌</h3>
<ul>
<li>在前端html上添加{% csrf_token %} --》他会在前端自动生成一个<code>csrfmiddlewaretoken</code> 的input标签</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form action="" method="post">
    {% csrf_token %}
    <p>username:<input type="text" name="username"></p>
    <p>username:<input type="text" name="password"></p>
    <p><input type="submit"></p>
</form>

</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240703212520474](D:\pycharm\Temporary_notes\图片\image-20240703212520474.png)</span><br><span class="line"></span><br><span class="line">### 【3】from表单验证令牌</span><br><span class="line"></span><br><span class="line">- csrfmiddlewaretoken会随着我们携带的数据发送过来（就像username,password）</span><br><span class="line"></span><br><span class="line">- 这个数据就会被`django.middleware.csrf.CsrfViewMiddleware`中间件捕获到</span><br><span class="line">- 验证，正常进去，但是不正常拦截到</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        username = request.POST.get(&#x27;username&#x27;)</span><br><span class="line">        password = request.POST.get(&#x27;password&#x27;)</span><br><span class="line">        print(f&#x27;用户&#123;username&#125;的密码是&#123;password&#125;&#x27;)</span><br><span class="line">        # 用户tom的密码是710</span><br><span class="line">    return render(request, &#x27;login.html&#x27;, locals())</span><br><span class="line"></span><br><span class="line">``````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    &#123;% raw %&#125;&#123;% csrf_token %&#125;&#123;% endraw %&#125;</span><br><span class="line">    &lt;p&gt;username:&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;username:&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;&lt;input type=&quot;submit&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 惊奇的发现我们把中间件`CsrfViewMiddleware`注释掉，也完成了请求和响应</span><br><span class="line"></span><br><span class="line">### 【4】Ajax验证令牌</span><br><span class="line"></span><br><span class="line">#### （1）方式一</span><br><span class="line"></span><br><span class="line">- 在form表单遍历每一个标签获取到 键和值拼接到对象里面</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>html</p>
<h1>这是真正的转账页面</h1>
<form id="transform_form">
    {% csrf_token %}
    <p>bank_card
        <input type="text" name="bank_card">
    </p>
    <p>password
        <input type="text" name="password">
    </p>
    <p>to_bank_card
        <input type="text" name="to_bank_card">
    </p>
    <p>money
        <input type="text" name="money">
    </p>
    <p>
        <input type="button" value="点我转账" id="btn_click">
    </p>
</form>
<script>

    $(document).ready(
        $("#btn_click").click(function () {
            let data = {}
            $("#transform_form").serializeArray().forEach(
                // 第一个参数 是当前标签的name 和 value
                // 第二个参数 当前元素的索引
                // 第三个参数 原本的数组
                function (a) {
                    data[a.name] = a.value
                })

            $.ajax({
                url: "",
                type: "post",
                data: data,
                success: function (response) {
                    alert(response.msg)
                }
            })
        })
    )
</script>
```



#### (2)方式二

- 获取到制定的 input 标签 提取 val



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">&lt;h1&gt;这是真正的转账页面&lt;/h1&gt;</span><br><span class="line">&lt;form id=&quot;transform_form&quot;&gt;</span><br><span class="line">    &#123;% raw %&#125;&#123;% csrf_token %&#125;&#123;% endraw %&#125;</span><br><span class="line">    &lt;p&gt;bank_card</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;bank_card&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;password</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;to_bank_card</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;to_bank_card&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;money</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;money&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;点我转账&quot; id=&quot;btn_click&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    $(document).ready(</span><br><span class="line">        $(&quot;#btn_click&quot;).click(function () &#123;</span><br><span class="line">            let data = &#123;&#125;</span><br><span class="line">						data[&quot;csrfmiddlewaretoken&quot;]= $(&quot;input[name=&#x27;csrfmiddlewaretoken&#x27;]&quot;).val()</span><br><span class="line"></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url: &quot;&quot;,</span><br><span class="line">                type: &quot;post&quot;,</span><br><span class="line">                data: data,</span><br><span class="line">                success: function (response) &#123;</span><br><span class="line">                    alert(response.msg)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    )</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### (3)方式三</span><br><span class="line"></span><br><span class="line">- Django的模版语法系统自动加载</span><br><span class="line">- &#123;% csrf_token %&#125;```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">&lt;h1&gt;这是真正的转账页面&lt;/h1&gt;</span><br><span class="line">&lt;form id=&quot;transform_form&quot;&gt;</span><br><span class="line">    &#123;% raw %&#125;&#123;% csrf_token %&#125;&#123;% endraw %&#125;</span><br><span class="line">    &lt;p&gt;bank_card</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;bank_card&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;password</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;to_bank_card</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;to_bank_card&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;money</span><br><span class="line">        &lt;input type=&quot;text&quot; name=&quot;money&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;点我转账&quot; id=&quot;btn_click&quot;&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    $(document).ready(</span><br><span class="line">        $(&quot;#btn_click&quot;).click(function () &#123;</span><br><span class="line">            let data = &#123;&#125;</span><br><span class="line">						data[&quot;csrfmiddlewaretoken&quot;] = &quot;&#123;% raw %&#125;&#123;&#123; csrf_token &#125;&#125;&#123;% endraw %&#125;&quot;</span><br><span class="line"></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url: &quot;&quot;,</span><br><span class="line">                type: &quot;post&quot;,</span><br><span class="line">                data: data,</span><br><span class="line">                success: function (response) &#123;</span><br><span class="line">                    alert(response.msg)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    )</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### (4)方式四</span><br><span class="line"></span><br><span class="line">- 引入 js 脚本跨过 csrf 验证</span><br><span class="line"></span><br><span class="line">- `static/csrf.js`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>js<br>
function getCookie(name) {<br>
var cookieValue = null;<br>
if (document.cookie &amp;&amp; document.cookie !== ‘’) {<br>
var cookies = document.cookie.split(‘;’);<br>
for (var i = 0; i &lt; cookies.length; i++) {<br>
var cookie = jQuery.trim(cookies[i]);<br>
// Does this cookie string begin with the name we want?<br>
if (cookie.substring(0, name.length + 1) === (name + ‘=’)) {<br>
cookieValue = decodeURIComponent(cookie.substring(name.length + 1));<br>
break;<br>
}<br>
}<br>
}<br>
return cookieValue;<br>
}<br>
var csrftoken = getCookie(‘csrftoken’);</p>
<p>function csrfSafeMethod(method) {<br>
// these HTTP methods do not require CSRF protection<br>
return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));<br>
}</p>
<p>$.ajaxSetup({<br>
beforeSend: function (xhr, settings) {<br>
if (!csrfSafeMethod(settings.type) &amp;&amp; !this.crossDomain) {<br>
xhr.setRequestHeader(“X-CSRFToken”, csrftoken);<br>
}<br>
}<br>
});</p>
``````html
<h1>这是真正的转账页面</h1>
<form id="transform_form">
    {% csrf_token %}
    <p>bank_card
        <input type="text" name="bank_card">
    </p>
    <p>password
        <input type="text" name="password">
    </p>
    <p>to_bank_card
        <input type="text" name="to_bank_card">
    </p>
    <p>money
        <input type="text" name="money">
    </p>
    <p>
        <input type="button" value="点我转账" id="btn_click">
    </p>
</form>

<script src="{% static 'csrf.js' %}"></script>
<script>

    $(document).ready(
        $("#btn_click").click(function () {
            let data = {}

            // 方式四 ： jQuery 官方文档 通过给我们一个解决方案
            // ？我们可以借助 官方提供的 js 脚本文件将 csrf 跨过去

            $.ajax({
                url: "",
                type: "post",
                data: data,
                success: function (response) {
                    alert(response.msg)
                }
            })
        })
    )
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### (5)后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.http import JsonResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def transform(request):</span><br><span class="line">    if request.is_ajax():</span><br><span class="line">        print(request.POST)</span><br><span class="line">        # 自己的账户和取款密码</span><br><span class="line">        bank_card = request.POST.get(&quot;bank_card&quot;)</span><br><span class="line">        password = request.POST.get(&quot;password&quot;)</span><br><span class="line">        # 目标账户</span><br><span class="line">        to_bank_card = request.POST.get(&quot;to_bank_card&quot;)</span><br><span class="line">        money = request.POST.get(&quot;money&quot;)</span><br><span class="line">        message = f&quot;当前账户 &#123;bank_card&#125; 向目标账户 &#123;to_bank_card&#125; 转账了 &#123;money&#125;&quot;</span><br><span class="line">        back_dict = &#123;</span><br><span class="line">            &quot;code&quot;: 200,</span><br><span class="line">            &quot;msg&quot;: message</span><br><span class="line">        &#125;</span><br><span class="line">        return JsonResponse(back_dict)</span><br><span class="line">    return render(request, &quot;transform.html&quot;, locals())</span><br></pre></td></tr></table></figure>

<h2 id="【五】CSRF装饰器">【五】CSRF装饰器</h2>
<h3 id="【1】全局开启，局部禁用">【1】全局开启，局部禁用</h3>
<ul>
<li>
<p>只有在 CBV 视图中的 dispatch 生效 其他不生效</p>
<ul>
<li>
<p>其他的都不生效</p>
</li>
<li>
```python
    # csrf_protect 增加 csrf 验证保护
    # csrf_exempt 取消 csrf 验证保护
    ``````

</li>
</ul>
</li>
</ul>
<p>python<br>
from django.views import View<br>
from django.views.decorators.csrf import csrf_protect, csrf_exempt</p>
<h1>csrf_protect 增加 csrf 验证保护</h1>
<h1>csrf_exempt 取消 csrf 验证保护</h1>
<p>from django.utils.decorators import method_decorator</p>
<h1>方式二 加载了类上面 — 不生效</h1>
<h1>@method_decorator(csrf_protect, name=‘post’)</h1>
<p>class CSRFView(View):<br>
def get(self, request):<br>
return render(request, “csrf_index.html”, locals())</p>
<pre><code># 方式一 ： 局部增加装饰器 取消验证 --- 不生效
# @method_decorator(csrf_exempt)
def post(self, request):
    return HttpResponse(&quot;post&quot;)

@method_decorator(csrf_exempt) # --- 可以取消
def dispatch(self, request, *args, **kwargs):
    # Try to dispatch to the right method; if a method doesn't exist,
    # defer to the error handler. Also defer to the error handler if the
    # request method isn't on the approved list.
    if request.method.lower() in self.http_method_names:
        handler = getattr(self, request.method.lower(), self.http_method_not_allowed)
    else:
        handler = self.http_method_not_allowed
    return handler(request, *args, **kwargs)
</code></pre>
```



### 【2】全局关闭，局部开启

- 每一个方法都会生效

- 全局关闭

  - ```

<p>python<br>
django.middleware.csrf.CsrfViewMiddleware<br>
```



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">from django.views import View</span><br><span class="line">from django.views.decorators.csrf import csrf_protect, csrf_exempt</span><br><span class="line"></span><br><span class="line"># csrf_protect 增加 csrf 验证保护</span><br><span class="line"># csrf_exempt 取消 csrf 验证保护</span><br><span class="line">from django.utils.decorators import method_decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 方式二 加载了类上面 --- 生效</span><br><span class="line"># @method_decorator(csrf_protect, name=&#x27;post&#x27;)</span><br><span class="line">class CSRFView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return render(request, &quot;csrf_index.html&quot;, locals())</span><br><span class="line"></span><br><span class="line">    # 方式一 ： 局部增加装饰器 取消验证 --- 生效</span><br><span class="line">    # @method_decorator(csrf_protect)</span><br><span class="line">    def post(self, request):</span><br><span class="line">        return HttpResponse(&quot;post&quot;)</span><br><span class="line"></span><br><span class="line">    @method_decorator(csrf_protect) # --- 生效</span><br><span class="line">    def dispatch(self, request, *args, **kwargs):</span><br><span class="line">        # Try to dispatch to the right method; if a method doesn&#x27;t exist,</span><br><span class="line">        # defer to the error handler. Also defer to the error handler if the</span><br><span class="line">        # request method isn&#x27;t on the approved list.</span><br><span class="line">        if request.method.lower() in self.http_method_names:</span><br><span class="line">            handler = getattr(self, request.method.lower(), self.http_method_not_allowed)</span><br><span class="line">        else:</span><br><span class="line">            handler = self.http_method_not_allowed</span><br><span class="line">        return handler(request, *args, **kwargs)</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【七】Auth模块</span><br><span class="line"></span><br><span class="line">- Auth模块他是Django提供的默认的用户模块</span><br><span class="line"></span><br><span class="line">- 包括我们后端 Django的admin 后台的用户校验都是从 auth 模块里面验证的</span><br><span class="line"></span><br><span class="line">### 【1】创建超级管理员</span><br><span class="line"></span><br><span class="line">- 终端：python manage.py createsuperuser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<br>
python<br>
from django.contrib import auth</p>
<h1>Django的 auth 模块的模型表</h1>
<p>from django.contrib.auth.models import User</p>
```



### 【2】验证注册



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">class RegisterView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return render(request, &quot;register.html&quot;, locals())</span><br><span class="line"></span><br><span class="line">    def post(self, request):</span><br><span class="line">        username = request.POST.get(&quot;username&quot;)</span><br><span class="line">        password = request.POST.get(&quot;password&quot;)</span><br><span class="line">        # 用户注册 ：</span><br><span class="line">        # 数据库里面存的是密文的密码 不知道加密方式</span><br><span class="line">        # 操作数据库模型表需要模型表 没有模型表</span><br><span class="line">        # 不能直接创建用户 因为创建完的用户信息中 用户的密码是明文数据而不是密文数据</span><br><span class="line">        # User.objects.create(username=username, password=password)</span><br><span class="line">        User.objects.create_user(username=username, password=password)</span><br><span class="line">        return redirect(reverse(&quot;home&quot;))</span><br><span class="line">&#123;% raw %&#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】验证登录及保存登陆状态</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">class LoginView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return render(request, &quot;login.html&quot;, locals())</span><br><span class="line"></span><br><span class="line">    def post(self, request):</span><br><span class="line">        username = request.POST.get(&quot;username&quot;)</span><br><span class="line">        password = request.POST.get(&quot;password&quot;)</span><br><span class="line">        # 用户登陆</span><br><span class="line">        # 验证当前用户的用户名和密码</span><br><span class="line">        # 验证用户名没问题</span><br><span class="line">        # 密码是明文的 数据库是密文</span><br><span class="line">        user_obj = auth.authenticate(username=username, password=password)</span><br><span class="line">        # print(user_obj, type(user_obj))  # dream1 &lt;class &#x27;django.contrib.auth.models.User&#x27;&gt;</span><br><span class="line">        # print(user_obj.username) # dream1</span><br><span class="line">        print(dir(request))</span><br><span class="line">        print(request.user)  # AnonymousUser 匿名用户</span><br><span class="line">        # 保存用户的登陆状态</span><br><span class="line">        # 以前的使用Cookie和 session</span><br><span class="line">        if user_obj:</span><br><span class="line">            auth.login(request, user_obj)  # 起始就是将request 里面的 user 属性替换成当前验证过的用户对象</span><br><span class="line">            # print(request.user,type(request.user))</span><br><span class="line">            return redirect(reverse(&quot;home&quot;))</span><br><span class="line">        else:</span><br><span class="line">            return redirect(reverse(&quot;login&quot;))</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【4】修改密码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">class UpdateView(View):</span><br><span class="line">    def get(self, request):</span><br><span class="line">        return render(request, &quot;update.html&quot;, locals())</span><br><span class="line"></span><br><span class="line">    def post(self, request):</span><br><span class="line">        username = request.POST.get(&quot;username&quot;)</span><br><span class="line">        old_password = request.POST.get(&quot;old_password&quot;)</span><br><span class="line">        new_password = request.POST.get(&quot;new_password&quot;)</span><br><span class="line">        # 用户修改密码</span><br><span class="line">        # 明文的密码 将密码转换成密文</span><br><span class="line">        # 校验原来的密码是否正确</span><br><span class="line">        if request.user.check_password(old_password):</span><br><span class="line">            # 旧密码正确修改新密码</span><br><span class="line">            request.user.set_password(new_password)</span><br><span class="line">            # 没有触发保存</span><br><span class="line">            request.user.save()</span><br><span class="line">            return redirect(reverse(&quot;home&quot;))</span><br><span class="line">        else:</span><br><span class="line">            return redirect(reverse(&quot;update&quot;))</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【5】注销登录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">def logout(request):</span><br><span class="line">    # 注销登录</span><br><span class="line">    auth.logout(request)</span><br><span class="line">    return redirect(reverse(&quot;home&quot;))</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【6】校验登陆</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>python</p>
<h1>校验登陆</h1>
<p>def index(request):<br>
# 校验当前用户是否登录<br>
if request.user.is_authenticated:<br>
return render(request, “index.html”, locals())<br>
else:<br>
return redirect(reverse(“home”))</p>
```



### 【7】登陆认证装饰器



````

<p>python</p>
<h1>登陆认证装饰器</h1>
<p>from django.contrib.auth.decorators import login_required</p>
<p>‘’’<br>
Decorator for views that checks that the user is logged in, redirecting<br>
to the log-in page if necessary.<br>
‘’’</p>
<h1>【方案一】：直接在装饰器上面 login_url</h1>
<h1>没有登陆过的用户访问某个页面 —&gt; 跳转到登陆页面让用户去登录</h1>
<h1>@login_required(login_url=“/login/”)</h1>
<h1>【方案二】：在全局的 settings 里面配置参数</h1>
<h1>LOGIN_URL = ‘/login/’</h1>
<p>@login_required<br>
def index_decorators(request):<br>
# 校验当前用户是否登录<br>
return render(request, “index.html”, locals())<br>
````</p>
<h3 id="【8】扩展Auth表">【8】扩展Auth表</h3>
<ul>
<li>扩展Auth表需要在settings里面配置<code>AUTH_USER_MODEL = 'user.UserInfo'</code>你写的类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line">from django.contrib.auth.models import User,AbstractUser</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 扩展 auth模块的 User表</span><br><span class="line"># 方式一 ： 继承 AbstractUser 扩写字段</span><br><span class="line">class UserInfo(AbstractUser):</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    原本有很多字段 原来的字段我不做更改！</span><br><span class="line">    基于原本的字段进行扩充</span><br><span class="line">    扩充字段 手机号 地址</span><br><span class="line">    &#x27;&#x27;&#x27;</span><br><span class="line">    phone = models.CharField(max_length=11, null=True, blank=True)</span><br><span class="line">    addr = models.CharField(max_length=100, null=True, blank=True)</span><br><span class="line"></span><br><span class="line"># 配置参数 在settings 里面 有一个参数项</span><br><span class="line"># AUTH_USER_MODEL = &#x27;user.UserInfo&#x27;</span><br><span class="line"></span><br><span class="line"># 方式二 ： 在新表中关联旧表</span><br><span class="line">class UserDetail(models.Model):</span><br><span class="line">    phone = models.CharField(max_length=11, null=True, blank=True)</span><br><span class="line">    user = models.OneToOneField(</span><br><span class="line">        to=&quot;User&quot;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Django%E6%A1%86%E6%9E%B6Form%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%EF%BC%88Hook%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Django%E6%A1%86%E6%9E%B6Form%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%EF%BC%88Hook%EF%BC%89/" class="post-title-link" itemprop="url">Django框架Form组件之钩子函数（Hook）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django框架Form组件之钩子函数（Hook）</h1>
<h2 id="【一-】什么是钩子函数">【一 】什么是钩子函数</h2>
<ul>
<li>
<p>在forms组件中</p>
<ul>
<li>钩子函数（Hooks）是用来在特定事件发生时执行自定义逻辑的函数。</li>
<li>它们提供了一种创建交互性和动态行为的方式，并可以用于处理表单的各种状态和数据。</li>
</ul>
</li>
<li>
<p>钩子函数就是用来将某个或某个单独数据提取出来进行校验的函数</p>
</li>
</ul>
<h2 id="【二】在Form组件类中定义">【二】在Form组件类中定义</h2>
<h3 id="【1】局部钩子">【1】局部钩子</h3>
<ul>
<li>检验用户名中不能包含nb_</li>
</ul>
<h3 id="【2】全局钩子">【2】全局钩子</h3>
<ul>
<li>检验用户名和密码的长度是否一致</li>
</ul>
<h3 id="【3】案例">【3】案例</h3>
<ul>
<li>在app内创建一个py文件，来定义form表单类</li>
<li><code>def clean_需要校验表单类的字段(self)，属于局部钩子</code>，最后一定要把<strong>值</strong>返回</li>
<li><code>def clean(self): 属于全局钩子 可以获得前端传过来的所有数据</code>
<ul>
<li>及的返回所有数据<code>return self.cleaned_data</code></li>
</ul>
</li>
</ul>
```python
# Current username：practic_form 
# current date：2024/7/1
# current time ：20:00

# 引入Django的forms组件
from django import forms


# 创建一个form的组件类
# 继承form组件类 form.Form
class LoginForm(forms.Form):
    # 定义组件类属性
    # 用户名：名字不能以nb_开头
    username = forms.CharField(
        # 最大长度
        max_length=8,
        # 最小长度
        min_length=3,
        label='用户名'
    )
    # 密码
    password = forms.CharField(
        # 长度不能小于3
        min_length=3,
        label='密码'
    )

    # 局部狗子
    # 一定要是clean_你的表单类属性
    # 走到这里首先你要满足上面规定字段的属性方法
    def clean_username(self):
        # print(self.cleaned_data)  # {'username': 'tom'}
        # 得到的就是你在前端输入的{'username': 'tom'}
        # 记住了 你用了{'username': 'tom'}就要给它返回出去，不然，在后端后端接收到的username就是None
        # 一定要把值取出来返回
        username = self.cleaned_data.get('username')
        # 进行对用户名的 判断是不是以什么开头startswith
        if username.startswith('nb_'):
            # 记录错误信息两种方式
            # 方式一：主动抛出异常，会被form捕获到
            # raise Exception('用户名不能以nb_开头')
            # 方法二：把错误信息添加到error方法中
            self.add_error(
                'username', '用户名不能以nb_开头'
            )
        # 在局部钩子和全局钩子函数中 拿出来的值要放回去
        return username

    # 全局钩子clean
    def clean(self):
        # print(self.cleaned_data)  # {'username': 'tom', 'password': '111'}
        # 把所有数据取出来
        username = self.cleaned_data.get('username')
        password = self.cleaned_data.get('password')
        # 检验密码和用户名长度一样不
        if len(username) != len(password):
            # 直接抛出异常
            raise Exception('用户名和密码的长度不一样！')
            # 添加错误信息就要一个一个添加
            # self.add_error(
            #     'username', '用户名和密码的长度不一样')
            # self.add_error(
            #     'password', '密码和用户名的长度不一样'
            # )
        return self.cleaned_data

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 视图函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from user.userForms import LoginForm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    form_obj = LoginForm()</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        # 把所有的值传给它</span><br><span class="line">        form_obj = LoginForm(request.POST)</span><br><span class="line">        # 判断，取反</span><br><span class="line">        if not form_obj.is_valid():</span><br><span class="line">            # 打印错误信息</span><br><span class="line">            print(form_obj.errors)</span><br><span class="line">        # 打印正确信息</span><br><span class="line">        print(form_obj.cleaned_data)</span><br><span class="line">        return render(request, &#x27;index.html&#x27;, locals())</span><br><span class="line">    return render(request, &#x27;index.html&#x27;, locals())</span><br></pre></td></tr></table></figure>

<ul>
<li>前端视图层</li>
</ul>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form action="" method="post">
    {{ form_obj.as_p }}
    <p>
        <input type="submit">
    </p>
</form>

</body>
</html>

```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Django%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9Cmysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Django%E5%8E%9F%E7%94%9F%E6%93%8D%E4%BD%9Cmysql/" class="post-title-link" itemprop="url">Django原生操作mysql</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>django原生操作mysql</h1>
````python
import os
import django

if __name__ == '__main__':
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'drf_mysql_deserialize.settings')
    django.setup()
    from django.db import connection

    # 执行原生的sql语句---方式一：不经常用
    conn = connection.cursor()
    conn.execute('select id,name,price from app1_book where id=1')
    print(conn.fetchall())
    conn.close()

    # 执行原生的sql语句---方式二：常用
    # 跟对象做映射
    from app1.models import Book

    book_list = Book.objects.raw('select id,name, price from app1_book where id>10')
    print(book_list)  # <RawQuerySet: select name, price from app1_book>
    for book_obj in book_list:
        print(book_obj)  # Book object (32)
        print(book_obj.name)  # 西游记

````


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Ajax%E6%93%8D%E4%BD%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Ajax%E6%93%8D%E4%BD%9C/" class="post-title-link" itemprop="url">Ajax操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Ajax基础操作</h1>
<h1>【零】JSON知识储备</h1>
<h2 id="【1】JSON数据介绍">【1】JSON数据介绍</h2>
<ul>
<li>JSON 指的是 JavaScript 对象表示法（JavaScript Object Notation）</li>
<li>JSON 是轻量级的文本数据交换格式</li>
<li>JSON 独立于语言 *</li>
<li>JSON 具有自我描述性，更易理解</li>
</ul>
<p>JSON 使用 JavaScript 语法来描述数据对象</p>
<p>但是 JSON 仍然独立于语言和平台。</p>
<p>JSON 解析器和 JSON 库支持许多不同的编程语言。</p>
<ul>
<li>啥都别多说了，上图吧！</li>
</ul>
<p><img src="http://zhaochunze.dream521.site/202402241559522.png" alt="img"></p>
<ul>
<li>合格的json对象(json只认双引的字符串格式)：</li>
</ul>
```json
["one", "two", "three"]
{ "one": 1, "two": 2, "three": 3 }
{"names": ["张三", "李四"] }
[ { "name": "张三"}, {"name": "李四"} ]
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 不合格的json对象：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">&#123; name: &quot;张三&quot;, &#x27;age&#x27;: 32 &#125;  // 属性名必须使用双引号</span><br><span class="line">[32, 64, 128, 0xFFF] // 不能使用十六进制值</span><br><span class="line">&#123; &quot;name&quot;: &quot;张三&quot;, &quot;age&quot;: undefined &#125;  // 不能使用undefined</span><br><span class="line">&#123; &quot;name&quot;: &quot;张三&quot;,</span><br><span class="line">  &quot;birthday&quot;: new Date(&#x27;Fri, 26 Aug 2011 07:13:10 GMT&#x27;),</span><br><span class="line">  &quot;getName&quot;:  function() &#123;return this.name;&#125;  // 不能使用函数和日期对象</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="【2】JS序列化JSON数据方法">【2】JS序列化JSON数据方法</h2>
<ul>
<li>JavaScript中关于JSON对象和字符串转换的两个方法：</li>
</ul>
<h3 id="（1）JSON-parse">（1）JSON.parse()</h3>
<ul>
<li>用于将一个 JSON 字符串转换为 JavaScript 对象(json只认双引的字符串格式)</li>
</ul>
```json
JSON.parse('{"name":"Howker"}');
JSON.parse('{name:"Stack"}') ;   // 错误
JSON.parse('[18,undefined]') ;   // 错误
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）JSON.stringify()</span><br><span class="line"></span><br><span class="line">- 用于将 JavaScript 值转换为 JSON 字符串。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">JSON.stringify(&#123;&quot;name&quot;:&quot;Tonny&quot;&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="【3】和XML的比较">【3】和XML的比较</h2>
<ul>
<li>
<p>JSON 格式于2001年由 Douglas Crockford 提出</p>
</li>
<li>
<ul>
<li>目的就是取代繁琐笨重的 XML 格式。</li>
</ul>
</li>
<li>
<p>JSON 格式有两个显著的优点：</p>
</li>
<li>
<ul>
<li>书写简单，一目了然；</li>
<li>符合 JavaScript 原生语法，可以由解释引擎直接处理，不用另外添加解析代码。</li>
</ul>
</li>
<li>
<p>所以，JSON迅速被接受，已经成为各大网站交换数据的标准格式，并被写入ECMAScript 5，成为标准的一部分。</p>
</li>
<li>
<p>XML和JSON都使用结构化方法来标记数据，下面来做一个简单的比较。</p>
</li>
<li>
<p>用XML表示中国部分省市数据如下：</p>
</li>
</ul>
```xml
<?xml version="1.0" encoding="utf-8"?>
<country>
    <name>中国</name>
    <province>
        <name>黑龙江</name>
        <cities>
            <city>哈尔滨</city>
            <city>大庆</city>
        </cities>
    </province>
    <province>
        <name>广东</name>
        <cities>
            <city>广州</city>
            <city>深圳</city>
            <city>珠海</city>
        </cities>
    </province>
    <province>
        <name>台湾</name>
        <cities>
            <city>台北</city>
            <city>高雄</city>
        </cities>
    </province>
    <province>
        <name>新疆</name>
        <cities>
            <city>乌鲁木齐</city>
        </cities>
    </province>
</country>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 用JSON表示如下：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;中国&quot;,</span><br><span class="line">    &quot;province&quot;: [&#123;</span><br><span class="line">        &quot;name&quot;: &quot;黑龙江&quot;,</span><br><span class="line">        &quot;cities&quot;: &#123;</span><br><span class="line">            &quot;city&quot;: [&quot;哈尔滨&quot;, &quot;大庆&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;name&quot;: &quot;广东&quot;,</span><br><span class="line">        &quot;cities&quot;: &#123;</span><br><span class="line">            &quot;city&quot;: [&quot;广州&quot;, &quot;深圳&quot;, &quot;珠海&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;name&quot;: &quot;台湾&quot;,</span><br><span class="line">        &quot;cities&quot;: &#123;</span><br><span class="line">            &quot;city&quot;: [&quot;台北&quot;, &quot;高雄&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        &quot;name&quot;: &quot;新疆&quot;,</span><br><span class="line">        &quot;cities&quot;: &#123;</span><br><span class="line">            &quot;city&quot;: [&quot;乌鲁木齐&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由上面的两端代码可以看出</p>
<p>JSON 简单的语法格式和清晰的层次结构明显要比 XML 容易阅读</p>
<p>并且在数据交换方面，由于 JSON 所使用的字符要比 XML 少得多，可以大大得节约传输数据所占用得带宽。</p>
<h1>【一】Ajax简介</h1>
<h2 id="【0】介绍">【0】介绍</h2>
<ul>
<li>
<p>AJAX（Asynchronous Javascript And XML）翻译成中文就是“异步的Javascript和XML”。</p>
</li>
<li>
<ul>
<li>即使用Javascript语言与服务器进行异步交互，传输的数据为XML（当然，传输的数据不只是XML）。</li>
</ul>
</li>
<li>
<p>AJAX 不是新的编程语言，而是一种使用现有标准的新方法。</p>
</li>
<li>
<p>AJAX 最大的优点是在不重新加载整个页面的情况下，可以与服务器交换数据并更新部分网页内容。（这一特点给用户的感受是在不知不觉中完成请求和响应过程）</p>
</li>
<li>
<p>AJAX 不需要任何浏览器插件，但需要用户允许JavaScript在浏览器上执行。</p>
</li>
<li>
<ul>
<li>同步交互：</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>客户端发出一个请求后，需要等待服务器响应结束后，才能发出第二个请求；</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>异步交互：</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>客户端发出一个请求后，无需等待服务器响应结束，就可以发出第二个请求。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【1】精髓">【1】精髓</h2>
<p>精髓：异步提交/局部刷新</p>
<ul>
<li>动态获取用户名，实时跟后端确认并将结果展示给前端</li>
</ul>
<h2 id="【2】发送请求的方式">【2】发送请求的方式</h2>
<ul>
<li>
<p>向后端发送请求的方式</p>
</li>
<li>
<ul>
<li>浏览器地址直接url回车</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>GET请求</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>a标签的 href 属性</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>GET请求</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>form表单</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>GET请求/POST请求</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>Ajax</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>GET请求/POST请求</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【3】简介">【3】简介</h2>
<p>Ajax不是新的编程语言，而是一种使用现有标准的新方法(类比装饰器)</p>
<p>Ajax最大的优点就是不重新加载页面的情况下，可以与服务器交换数据并更新部分网页内容</p>
<p>这种特点给用户的感觉就是在不知不觉中完成了请求和响应过程</p>
<ul>
<li>
<p>Ajax（Asynchronous JavaScript and XML）是一种用于创建动态网页的编程技术。</p>
</li>
<li>
<ul>
<li>它通过在网页上进行异步数据传输，实现了在不重新加载整个页面的情况下更新部分页面内容的能力。</li>
</ul>
</li>
<li>
<p>Ajax的核心技术包括使用JavaScript和XMLHttpRequest对象与服务器进行数据交互，以及利用DOM（Document Object Model）来动态地更新页面。</p>
</li>
<li>
<p>通过使用Ajax，网页可以在后台与服务器进行数据交换，并在不刷新整个页面的情况下，根据服务器返回的数据实时更新页面的某些部分。</p>
</li>
<li>
<p>这种技术带来了很多好处，比如提高了用户体验、减少了网络流量和服务器负载，并使得开发人员能够创建更加交互和动态的网页应用程序。</p>
</li>
<li>
<p>虽然Ajax最初是指Asynchronous JavaScript and XML，但如今已经不仅限于使用XML作为数据传输的格式，而是可以使用各种格式，如JSON（JavaScript Object Notation）。</p>
</li>
<li>
<p>总结起来，Ajax是一种强大的前端开发技术，通过异步数据传输和动态页面更新，提供了更好的用户体验和交互性，广泛应用于现代Web应用程序的开发中。</p>
</li>
</ul>
<h1>【二】Ajax案例</h1>
<ul>
<li>
<p>页面上有三个 input 框</p>
</li>
<li>
<ul>
<li>在前面两个框输入数字，点击按钮，朝后端发送Ajax请求</li>
<li>在后端计算出结果，再返回给前端动态展示的第三个input框中</li>
</ul>
</li>
<li>
<p>要求</p>
</li>
<li>
<ul>
<li>整个过程页面不能刷新，也不许在前端计算</li>
</ul>
</li>
</ul>
<h2 id="【1】普通版">【1】普通版</h2>
<h3 id="（1）前端">（1）前端</h3>
```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>
<div>number1 : <input type="text" id="numberOne"></div>
<div>number2 : <input type="text" id="numberTwo"></div>
<div>result : <input type="text" id="numberResult"></div>

<button id="btn_result">点我计算结果</button>
<script>
    // 等待页面元素加载完毕。
    // 注意：$(document).ready() 与 window.onload 类似，都是页面加载完毕时触发的事件。
    $(document).ready(
        // 给按钮点击绑定事件
        // 注意：$("#btn_result") 表示获取 id 为 btn_result 的元素。
        $("#btn_result").click(function () {
            let numberOne = $("#numberOne").val();
            let numberTwo = $("#numberTwo").val();
            let result = $("#numberResult")
            // $.ajax为固定用法，表示启用ajax
            $.ajax(
                {
                    //url后面跟的是你这个ajax提交数据的路径，向谁提交，不写就是向当前路径提交
                    url: "",
                    //type为标定你这个ajax请求的方法
                    type: "post",
                    //data后面跟的就是你提交给后端的数据
                    data: {numberOne: numberOne, numberTwo: numberTwo},
                    //success为回调函数，参数data即后端给你返回的数据
                    success: function (data) {
                        // 注意：data 表示返回的数据。
                        console.log(data)
                        //  注意：result.val(data) 表示将返回的数据赋值给 id 为 result 的元素的 value 属性。
                        result.val(data)
                    }
                }
            )
        })
    )
</script>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）后端(字符串)</span><br><span class="line"></span><br><span class="line">- 直接返回字符串结果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.shortcuts import render, HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Create your views here.</span><br><span class="line">def add_number(request):</span><br><span class="line">    if request.method == &quot;POST&quot;:</span><br><span class="line">        data = request.POST</span><br><span class="line">        #  获取前端传递的参数</span><br><span class="line">        # &lt;QueryDict: &#123;&#x27;numberOne&#x27;: [&#x27;1&#x27;], &#x27;numberTwo&#x27;: [&#x27;2&#x27;]&#125;&gt;</span><br><span class="line">        number_one = data.get(&quot;numberOne&quot;)</span><br><span class="line">        number_two = data.get(&quot;numberTwo&quot;)</span><br><span class="line">        # 计算结果 ： 注意从前端取出来的数字是字符串类型，需要做类型转换才能运算</span><br><span class="line">        result = int(number_one) + int(number_two)</span><br><span class="line">        # 返回响应数据</span><br><span class="line">        return HttpResponse(result)</span><br><span class="line">    return render(request, &quot;index.html&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="（3）Ajax-语法">（3）Ajax 语法</h3>
```python
<script>
    // 等待页面元素加载完毕。
    // 注意：$(document).ready() 与 window.onload 类似，都是页面加载完毕时触发的事件。
    $(document).ready(
        // 给按钮点击绑定事件
        // 注意：$("#btn_result") 表示获取 id 为 btn_result 的元素。
        $("#btn_result").click(function () {
            let numberOne = $("#numberOne").val();
            let numberTwo = $("#numberTwo").val();
            let result = $("#numberResult")
            // $.ajax为固定用法，表示启用ajax
            $.ajax(
                {
                    //url后面跟的是你这个ajax提交数据的路径，向谁提交，不写就是向当前路径提交
                    url: "",
                    //type为标定你这个ajax请求的方法
                    type: "post",
                    //data后面跟的就是你提交给后端的数据
                    data: {numberOne: numberOne, numberTwo: numberTwo},
                    //success为回调函数，参数data即后端给你返回的数据
                    success: function (data) {
                        // 注意：data 表示返回的数据。
                        console.log(data)
                        //  注意：result.val(data) 表示将返回的数据赋值给 id 为 result 的元素的 value 属性。
                        result.val(data)
                    }
                }
            )
        })
    )
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】升级版(json模块)</span><br><span class="line"></span><br><span class="line">- 后端返回的是字典格式(JSON)的数据</span><br><span class="line">- json模块序列化</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.http import JsonResponse</span><br><span class="line">from django.shortcuts import render, HttpResponse</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Create your views here.</span><br><span class="line">def ab_ajax(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        # print(request.POST)  # &lt;QueryDict: &#123;&#x27;i1&#x27;: [&#x27;3&#x27;], &#x27;i2&#x27;: [&#x27;4&#x27;]&#125;&gt;</span><br><span class="line">        num1 = request.POST.get(&#x27;i1&#x27;)  # 3 - 文本类型</span><br><span class="line">        num2 = request.POST.get(&#x27;i2&#x27;)  # 4 - 文本类型</span><br><span class="line">        # 强转类型并做运算</span><br><span class="line">        sum = int(num1) + int(num2)</span><br><span class="line">        # 返回数据</span><br><span class="line">        data = &#123;</span><br><span class="line">            &quot;message&quot;: &quot;success&quot;,</span><br><span class="line">            &quot;sum&quot;: sum,</span><br><span class="line">        &#125;</span><br><span class="line">        # 需要将数据序列化进行传输</span><br><span class="line">        return HttpResponse(json.dumps(data))</span><br><span class="line">    return render(request, &#x27;ab_ajax.html&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="（1）前端-2">（1）前端</h3>
<ul>
<li>新增Ajax中的参数 dataType,指定返回的参数自动被序列化后的格式</li>
</ul>
```python
<script>
    // 等待页面元素加载完毕。
    // 注意：$(document).ready() 与 window.onload 类似，都是页面加载完毕时触发的事件。
    $(document).ready(
        // 给按钮点击绑定事件
        // 注意：$("#btn_result") 表示获取 id 为 btn_result 的元素。
        $("#btn_result").click(function () {
            let numberOne = $("#numberOne").val();
            let numberTwo = $("#numberTwo").val();
            let result = $("#numberResult")
            $.ajax(
                {
                    url: "",
                    type: "post",
                    data: {numberOne: numberOne, numberTwo: numberTwo},
                    // 前端反序列化数据 方式一
                    // 在Ajax上加参数
                    // dataType 参数应该是一个字符串，表示期望从服务器返回的数据类型（如 "json", "xml", "script", "html" 等）
                    dataType: "json",
                    success: function (data) {
                        // 注意：data 表示返回的数据。
                        console.log(data) // {message: 'success', result: 4}
                        //  注意：result.val(data) 表示将返回的数据赋值给 id 为 result 的元素的 value 属性。
                        result.val(data.result)
                    }
                }
            )
        })
    )
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.shortcuts import render, HttpResponse</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Create your views here.</span><br><span class="line">def add_number(request):</span><br><span class="line">    if request.method == &quot;POST&quot;:</span><br><span class="line">        data = request.POST</span><br><span class="line">        #  获取前端传递的参数</span><br><span class="line">        # &lt;QueryDict: &#123;&#x27;numberOne&#x27;: [&#x27;1&#x27;], &#x27;numberTwo&#x27;: [&#x27;2&#x27;]&#125;&gt;</span><br><span class="line">        number_one = data.get(&quot;numberOne&quot;)</span><br><span class="line">        number_two = data.get(&quot;numberTwo&quot;)</span><br><span class="line">        # 计算结果 ： 注意从前端取出来的数字是字符串类型，需要做类型转换才能运算</span><br><span class="line">        result = int(number_one) + int(number_two)</span><br><span class="line">        result = &#123;</span><br><span class="line">            &quot;message&quot;: &quot;success&quot;,</span><br><span class="line">            &quot;result&quot;: result</span><br><span class="line">        &#125;</span><br><span class="line">        # 返回响应数据 - 使用json模块序列化成json字符串</span><br><span class="line">        return HttpResponse(json.dumps(result))</span><br><span class="line">    return render(request, &quot;index.html&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="【3】进阶版-JsonResponse">【3】进阶版(JsonResponse)</h2>
```python
from django.http import JsonResponse
from django.shortcuts import render, HttpResponse
import json


# Create your views here.

def add_number(request):
    if request.method == "POST":
        data = request.POST
        #  获取前端传递的参数
        # <QueryDict: {'numberOne': ['1'], 'numberTwo': ['2']}>
        number_one = data.get("numberOne")
        number_two = data.get("numberTwo")
        # 计算结果 ： 注意从前端取出来的数字是字符串类型，需要做类型转换才能运算
        result = int(number_one) + int(number_two)
        result = {
            "message": "success",
            "result": result
        }
        # 返回响应数据 - 使用JsonResponse对象序列化成json字符串
        return JsonResponse(result)
    return render(request, "index.html")
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【三】Ajax小结</span><br><span class="line"></span><br><span class="line">### （1）基本语法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 先给按钮绑定点击事件</span><br><span class="line">    $(&#x27;#btn&#x27;).click(function () &#123;</span><br><span class="line">        // 向后端发送Ajax请求</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            // （1）指定发送后端的请求接口</span><br><span class="line">            url: &#x27;&#x27;,// 不写就是朝当前地址发送请求</span><br><span class="line">            </span><br><span class="line">            // （2）请求方式</span><br><span class="line">            type: &quot;post&quot;, // 不指定默认就是 get 全小写</span><br><span class="line">          </span><br><span class="line">            // dataType 参数应该是一个字符串，表示期望从服务器返回的数据类型（如 &quot;json&quot;, &quot;xml&quot;, &quot;script&quot;, &quot;html&quot; 等）</span><br><span class="line">            // dataType: &quot;json&quot;,</span><br><span class="line">          </span><br><span class="line">            // （3）提交数据</span><br><span class="line">            data: &#123;&#x27;i1&#x27;: $(&#x27;#d1&#x27;).val(), &#x27;i2&#x27;: $(&#x27;#d2&#x27;).val()&#125;,</span><br><span class="line">            </span><br><span class="line">            // （4）异步提交有一个回调函数 （异步回调机制）</span><br><span class="line">            // 当后端返回结果的时候会自动触发，args 会自动接受后端传过来的结果</span><br><span class="line">            success: function (args) &#123;</span><br><span class="line">                &#123;#alert(args)#&#125;</span><br><span class="line">                // 通过DOM操作动态数据渲染到第三个 input 框中</span><br><span class="line">                console.log(args) // string</span><br><span class="line">                $(&#x27;#d3&#x27;).val(args)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）注意">（2）注意</h3>
<ul>
<li>针对后端如果是用 HttpResponse 返回的数据，回调函数不会自动帮我们反序列化</li>
<li>针对后端如果是用 JsonResponse 返回的数据，回调函数会自动帮我们反序列化</li>
</ul>
<h3 id="（3）HttpResponse-解决方式">（3）HttpResponse 解决方式</h3>
<ul>
<li>后端先进行序列化，再返回数据给前端</li>
<li>前端加参数进行反序列化</li>
</ul>
<h1>【四】练习（用户名是否已被注册）</h1>
<h2 id="【1】功能介绍">【1】功能介绍</h2>
<ul>
<li>在注册表单中，当用户填写了用户名后，把光标移开后，会自动向服务器发送异步请求。</li>
<li>服务器返回这个用户名是否已经被注册过。</li>
</ul>
<h2 id="【2】案例分析">【2】案例分析</h2>
<ul>
<li>页面中给出注册表单；</li>
<li>在username input标签中绑定onblur事件处理函数。</li>
<li>当input标签失去焦点后获取 username表单字段的值，向服务端发送AJAX请求；</li>
<li>django的视图函数中处理该请求，获取username值，判断该用户在数据库中是否被注册，如果被注册了就返回“该用户已被注册”，否则响应“该用户名可以注册”。</li>
</ul>
<h1>Ajax进阶</h1>
<h1>【一】前后端传输数据的编码格式(contentType)</h1>
<p>主要研究POST请求数据的编码格式</p>
<p>因为GET请求数据就是直接放在url后面的</p>
<ul>
<li>
<p>可以朝后端发送post请求的方式</p>
</li>
<li>
<ul>
<li>form请求</li>
<li>ajax请求</li>
</ul>
</li>
</ul>
<h2 id="【1】form表单">【1】form表单</h2>
<ul>
<li>
<p>前后端传输数据的格式</p>
</li>
<li>
<ul>
<li>urlencoded</li>
<li>formdata</li>
<li>json</li>
</ul>
</li>
</ul>
```html
<form action="" method="post" enctype="text/plain"></form>
<form action="" method="post" enctype="application/x-www-form-urlencoded"></form>
<form action="" method="post" enctype="multipart/form-data"></form>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】编码格式</span><br><span class="line"></span><br><span class="line">- form表单默认的编码格式是urlencoded </span><br><span class="line"></span><br><span class="line">- - 通过查看请求头中的 Content-Type 参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7</span><br><span class="line">Accept-Encoding:gzip, deflate, br</span><br><span class="line">Accept-Language:zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line">Cache-Control:no-cache</span><br><span class="line">Connection:keep-alive</span><br><span class="line">Content-Length:27</span><br><span class="line">Content-Type:application/x-www-form-urlencoded</span><br></pre></td></tr></table></figure>

<ul>
<li>携带数据格式</li>
</ul>
```plain
username=666666&password=66
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- Django后端针对 urlencoded 编码格式的数据会自动帮我们解析封装到 request.POST 中</span><br><span class="line">- 如果编码格式改为 formdata ，那么针对普通的键值对还是解析到 request.POST 中，而其他文件格式的数据解析到 request.FILES 中</span><br><span class="line">- **form表单无法发送json格式数据**</span><br><span class="line"></span><br><span class="line">## 【3】Ajax</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">Accept:*/*</span><br><span class="line">Accept-Encoding:gzip, deflate, br</span><br><span class="line">Accept-Language:zh-CN,zh;q=0.9,en;q=0.8</span><br><span class="line">Cache-Control:no-cache</span><br><span class="line">Connection:keep-alive</span><br><span class="line">Content-Length:31</span><br><span class="line">Content-Type:application/x-www-form-urlencoded; charset=UTF-8</span><br></pre></td></tr></table></figure>

<ul>
<li>默认的编码格式是 urlencoded</li>
<li>数据格式</li>
</ul>
```plain
username=dream&password=1314521
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- Django后端针对 urlencoded 编码格式的数据会自动帮我们解析封装到 request.POST</span><br><span class="line">- ---&gt;username=dream&amp;password=1314521</span><br><span class="line"></span><br><span class="line">## 【4】代码演示</span><br><span class="line"></span><br><span class="line">### （1）后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def index(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        print(request.POST)</span><br><span class="line">        # &lt;QueryDict: &#123;&#x27;username&#x27;: [&#x27;dream&#x27;], &#x27;password&#x27;: [&#x27;1314521&#x27;]&#125;&gt;</span><br><span class="line">        print(request.FILES)</span><br><span class="line">        # &lt;MultiValueDict: &#123;&#x27;img_file&#x27;: [&lt;InMemoryUploadedFile: 作用域链.drawio.png (image/png)&gt;]&#125;&gt;</span><br><span class="line">    return render(request, &#x27;index.html&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="（2）前端">（2）前端</h3>
```html
<form action="" method="post" enctype="multipart/form-data">
    <p>username: <input type="text" name="username" class="form-control"></p>
    <p>password: <input type="password" name="password" class="form-control"></p>
    <p>file: <input type="file"></p>
    <p><input type="submit" class="btn btn-success"></p>
    <p><input type="button" class="btn btn-danger" value="按钮" id="d1"></p>
</form>

<script>
    $("#d1").click(function () {
        $.ajax({
            url: '',
            type: 'POST',
            data: {"username": "dream", "password": 1314521},
            success: function (args) {

            },
        })
    })
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【二】Ajax发送JSON格式数据</span><br><span class="line"></span><br><span class="line">- 前后端传输数据的时候一定要保证编码格式数据与真正的数据格式是一致的</span><br><span class="line"></span><br><span class="line">## 【1】引入</span><br><span class="line"></span><br><span class="line">### （1）后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def ab_json(request):</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        print(request.POST) #&lt;QueryDict: &#123;&#125;&gt;</span><br><span class="line">    return render(request, &#x27;ab_json.html&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="（2）前端-2">（2）前端</h3>
```plain
<button class="btn btn-danger" id="d1">点我</button>

<script>
    $('#d1').click(function () {
        $.ajax({
            url: '',
            type: 'post',
            // 前端数据转JSON格式数据 ：JSON.stringify
            data: JSON.stringify({"username": "dream", "password": 521521}),
            // 不指定参数，默认就是 urlencoded
            contentType: 'application/json',
            success: function (args) {

            }
        })
    })
</script>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 请求标头携带的数据格式 </span><br><span class="line"></span><br><span class="line">- - 已成功转换为JSON格式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&#123;&quot;username&quot;:&quot;dream&quot;,&quot;password&quot;:521521&#125;</span><br></pre></td></tr></table></figure>

<h2 id="【2】后端">【2】后端</h2>
<ul>
<li>接收到的数据为空</li>
</ul>
```plain
def ab_json(request):
    if request.method == 'POST':
        print(request.POST) #<QueryDict: {}>
    return render(request, 'ab_json.html')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- Django针对JSON格式的数据不会做任何处理</span><br><span class="line">- 针对JSON格式的数据需要自己手动处理</span><br><span class="line">- 解决办法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">def ab_json(request):</span><br><span class="line">    print(request.is_ajax())  # True</span><br><span class="line">    if request.method == &#x27;POST&#x27;:</span><br><span class="line">        print(request.POST)  # &lt;QueryDict: &#123;&#125;&gt;</span><br><span class="line"></span><br><span class="line">    print(request.body)  # 返回的是二进制数据 ：b&#x27;&#123;&quot;username&quot;:&quot;dream&quot;,&quot;password&quot;:521521&#125;&#x27;</span><br><span class="line">    # 针对JSON格式的数据需要自己手动处理</span><br><span class="line">    json_bytes = request.body</span><br><span class="line"></span><br><span class="line">    # （1）方式一：先解码 再转换数据格式</span><br><span class="line">    json_str = json_bytes.decode(&#x27;utf-8&#x27;)</span><br><span class="line">    json_dict = json.loads(json_str)</span><br><span class="line">    print(json_dict, type(json_dict))  # &#123;&#x27;username&#x27;: &#x27;dream&#x27;, &#x27;password&#x27;: 521521&#125; &lt;class &#x27;dict&#x27;&gt;</span><br><span class="line"></span><br><span class="line">    # （2）方式二：json.loads(二进制数据) 内部可以自动解码再反序列化</span><br><span class="line">    json_dict_loads = json.loads(json_bytes)</span><br><span class="line">    print(json_dict_loads, type(json_dict_loads))  # &#123;&#x27;username&#x27;: &#x27;dream&#x27;, &#x27;password&#x27;: 521521&#125; &lt;class &#x27;dict&#x27;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return render(request, &#x27;ab_json.html&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="【3】总结">【3】总结</h2>
<h3 id="（1）注意参数">（1）注意参数</h3>
<ul>
<li>前端在通过Ajax请求发送数据的时候，一定要注参数修改</li>
</ul>
```plain
// 不指定参数，默认就是 urlencoded
contentType: 'application/json',
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）符合JSON数据格式</span><br><span class="line"></span><br><span class="line">- 数据是真正的JSON格式数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">发送的数据一定要符合JSON格式</span><br><span class="line">或经过JSON序列化再传输</span><br></pre></td></tr></table></figure>

<h3 id="（3）手动处理前端传入的JSON数据">（3）手动处理前端传入的JSON数据</h3>
<ul>
<li>Django后端不会帮我们处理JSON格式数据，需要自己手动处理request.body中的数据</li>
</ul>
```plain
通过Ajax传过来的数据是二进制数据
在request.body中
要经过自己的反序列化才能拿到我们想要的数据
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【三】Ajax发送文件数据</span><br><span class="line"></span><br><span class="line">## 【1】发送方法(formdata对象)</span><br><span class="line"></span><br><span class="line">- Ajax发送文件数据需要借助js内置对象formdata</span><br><span class="line"></span><br><span class="line">### （1）前端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&lt;p&gt;username: &lt;input type=&quot;text&quot; name=&quot;username&quot; id=&quot;d1&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;password: &lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;d2&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;file: &lt;input type=&quot;file&quot; id=&quot;d3&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;button id=&quot;btn&quot; class=&quot;btn btn-danger&quot;&gt;提交&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 点击按钮向后端发送普通键值对数据和文件数据</span><br><span class="line">    $(&quot;#btn&quot;).on(&#x27;click&#x27;, function () &#123;</span><br><span class="line">        // （1）先生成一个内置对象</span><br><span class="line">        let formDataObj = new FormData();</span><br><span class="line"></span><br><span class="line">        // （2）支持添加普通的键值对</span><br><span class="line">        formDataObj.append(&#x27;username&#x27;, $(&quot;#d1&quot;).val());</span><br><span class="line">        formDataObj.append(&#x27;password&#x27;, $(&quot;#d2&quot;).val());</span><br><span class="line"></span><br><span class="line">        // （3）支持添加文件对象 ---&gt; 先拿到标签对象 ----&gt; 再拿到文件对象</span><br><span class="line">        formDataObj.append(&#x27;myfile&#x27;, $(&quot;#d3&quot;)[0].files[0]);</span><br><span class="line"></span><br><span class="line">        // （4）基于Ajax，将文件对象发送给后端</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url: &#x27;&#x27;,</span><br><span class="line">            type: &#x27;post&#x27;,</span><br><span class="line">            // 直接将对象放到data里面即可</span><br><span class="line">            data: formDataObj,</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">            // Ajax发送文件必须添加的两个参数</span><br><span class="line">            // 不需要使用任何编码 -  Django后端能自动识别 formdata 对象</span><br><span class="line">            contentType: false,</span><br><span class="line">            // 告诉浏览器不要对我的数据进行任何处理</span><br><span class="line">            processData: false,</span><br><span class="line"></span><br><span class="line">            success: function (args) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）后端">（2）后端</h3>
```python
def ab_file(request):
    if request.is_ajax():
        if request.method == 'POST':
            print('POST::>>', request.POST)
            # 普通键值对放在了  request.POST   中
            # POST::>> <QueryDict: {'username': ['dream'], 'password': ['666']}>
            print('FILES::>>', request.FILES)
            # 文件数据放在了  request.FILES   中
            # FILES::>> <MultiValueDict: {'myfile': [<InMemoryUploadedFile: img.png (image/png)>]}>

    return render(request, 'ab_file.html')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】发送文件数据的格式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">// 点击按钮向后端发送普通键值对数据和文件数据</span><br><span class="line">$(&quot;#btn&quot;).on(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    // （1）先生成一个内置对象</span><br><span class="line">    let formDataObj = new FormData();</span><br><span class="line"></span><br><span class="line">    // （2）支持添加普通的键值对</span><br><span class="line">    formDataObj.append(&#x27;username&#x27;, $(&quot;#d1&quot;).val());</span><br><span class="line">    formDataObj.append(&#x27;password&#x27;, $(&quot;#d2&quot;).val());</span><br><span class="line"></span><br><span class="line">    // （3）支持添加文件对象 ---&gt; 先拿到标签对象 ----&gt; 再拿到文件对象</span><br><span class="line">    formDataObj.append(&#x27;myfile&#x27;, $(&quot;#d3&quot;)[0].files[0]);</span><br><span class="line"></span><br><span class="line">    // （4）基于Ajax，将文件对象发送给后端</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">    url: &#x27;&#x27;,</span><br><span class="line">    type: &#x27;post&#x27;,</span><br><span class="line">    // 直接将对象放到data里面即可</span><br><span class="line">    data: formDataObj,</span><br><span class="line"></span><br><span class="line">    // Ajax发送文件必须添加的两个参数</span><br><span class="line">    // 不需要使用任何编码 -  Django后端能自动识别 formdata 对象</span><br><span class="line">    contentType: false,</span><br><span class="line">    // 告诉浏览器不要对我的数据进行任何处理</span><br><span class="line">    processData: false,</span><br><span class="line"></span><br><span class="line">    success: function (args) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="【3】小结">【3】小结</h2>
<h3 id="（1）借助FormData对象">（1）借助FormData对象</h3>
<ul>
<li>Ajax发送文件数据需要利用内置对象FormData</li>
</ul>
```plain
// （1）先生成一个内置对象
let formDataObj = new FormData();

// （2）支持添加普通的键值对
formDataObj.append('username', $("#d1").val());
formDataObj.append('password', $("#d2").val());

// （3）支持添加文件对象 ---> 先拿到标签对象 ----> 再拿到文件对象
formDataObj.append('myfile', $("#d3")[0].files[0]);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （2）必须携带两个参数</span><br><span class="line"></span><br><span class="line">- 需要指定两个关键性的参数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">// Ajax发送文件必须添加的两个参数</span><br><span class="line">// 不需要使用任何编码 -  Django后端能自动识别 formdata 对象</span><br><span class="line">contentType: false,</span><br><span class="line">// 告诉浏览器不要对我的数据进行任何处理</span><br><span class="line">processData: false,</span><br></pre></td></tr></table></figure>

<h3 id="（3）后端解析数据">（3）后端解析数据</h3>
<ul>
<li>
<p>Django后端能直接自动识别到FormData对象</p>
</li>
<li>
<ul>
<li>将内部的普通键值对自动解析并封装到request.POST中</li>
<li>将内部的文件数据自动解析并封装到request.FILES中</li>
</ul>
</li>
</ul>
```python
print('POST::>>', request.POST)
# 普通键值对放在了  request.POST   中
# POST::>> <QueryDict: {'username': ['dream'], 'password': ['666']}>

print('FILES::>>', request.FILES)
# 文件数据放在了  request.FILES   中
# FILES::>> <MultiValueDict: {'myfile': [<InMemoryUploadedFile: img.png (image/png)>]}>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【补充】request方法判断ajax</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">request.is_ajax()</span><br></pre></td></tr></table></figure>

<ul>
<li>返回当前请求是否是ajax请求，返回布尔值</li>
</ul>
```python
print(request.is_ajax())

# 正常浏览器网址回车提交的是 GET 请求 - 结果是False
# 当我们发送ajax请求后 - 结果是True
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Django%E6%A1%86%E6%9E%B6%E4%B9%8B%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BC%95%E5%85%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Django%E6%A1%86%E6%9E%B6%E4%B9%8B%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%BC%95%E5%85%A5/" class="post-title-link" itemprop="url">Django框架之中间件引入</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Django框架之中间件引入</h1>
<h2 id="【一】什么是Django的中间件">【一】什么是Django的中间件</h2>
<p>Django的中间件其实就是一个第三方的组件</p>
<ul>
<li>Django中间件是一个轻量级、可重用的组件，用于处理Django请求和响应的过程。</li>
<li>它提供了对请求和响应进行全局处理的机制，可以在请求达到视图之前进行预处理或在响应返回给客户端之前进行后处理。</li>
<li>中间件是按照顺序依次执行的，每个中间件都可以对请求和响应进行修改、补充或处理。</li>
<li>在Django的settings.py配置文件中，通过MIDDLEWARE设置来定义中间件的顺序。</li>
</ul>
```python
'django.middleware.csrf.CsrfViewMiddleware'
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【二】Django请求生命周期流程图</span><br><span class="line"></span><br><span class="line">- 当客户端发送一个请求到Django应用程序时，Django会按照一定的生命周期流程处理该请求。 </span><br><span class="line"></span><br><span class="line">- - 下面是Django请求的典型生命周期流程图：</span><br><span class="line"></span><br><span class="line">- 客户端发出HTTP请求。</span><br><span class="line">- 请求被Web服务器接收并传递给Django应用程序。</span><br><span class="line">- Django中的WSGI中间件开始处理请求，并可进行一些预处理操作。</span><br><span class="line">- 中间件将请求传递给URL分发器（URL Dispatcher）。</span><br><span class="line">- URL分发器根据URL模式将请求路由到相应的视图函数或处理器（View/Handler）。</span><br><span class="line">- 视图函数或处理器执行相应的业务逻辑，可能会与数据库等外部资源交互。</span><br><span class="line">- 视图函数或处理器返回一个HTTP响应对象。</span><br><span class="line">- 响应对象经过中间件，可以在此进行后处理操作。</span><br><span class="line">- 响应被发送给Web服务器。</span><br><span class="line">- Web服务器将响应发送回客户端。</span><br><span class="line"></span><br><span class="line">## 【三】Django中间件是Django的门户</span><br><span class="line"></span><br><span class="line">- 请求发来的时候需要先经过中间件才能到达真正的Django后端</span><br><span class="line">- 响应返回的时候，最后也需要进过中间件返回发送出去</span><br><span class="line"></span><br><span class="line">## 【四】Django中间件源码分析</span><br><span class="line"></span><br><span class="line">### 【1】默认的五个中间件详解</span><br><span class="line"></span><br><span class="line">#### （1）SecurityMiddleware</span><br><span class="line"></span><br><span class="line">- django.middleware.security.SecurityMiddleware： </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.middleware.security import SecurityMiddleware</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">class SecurityMiddleware(MiddlewareMixin):</span><br><span class="line">    # process_request ： 处理request 请求的</span><br><span class="line">    def process_request(self, request):</span><br><span class="line">        ...</span><br><span class="line">    # process_response ： 处理视图函数返回的 response 对象的</span><br><span class="line">    def process_response(self, request, response):</span><br><span class="line">        return response</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>
<ul>
<li>安全中间件负责处理与网站安全相关的任务</li>
<li>例如设置HTTP头部，防止跨站脚本攻击（XSS），点击劫持等。</li>
<li>它可以通过配置自定义安全策略来确保网站的安全性。</li>
</ul>
</li>
</ul>
<h4 id="（2）SessionMiddleware">（2）SessionMiddleware</h4>
<ul>
<li>django.contrib.sessions.middleware.SessionMiddleware：</li>
</ul>
```python
from django.contrib.sessions.middleware import SessionMiddleware

'''
class SessionMiddleware(MiddlewareMixin):
    # process_request ： 处理request 请求的
    def process_request(self, request):
        ...
    # process_response ： 处理视图函数返回的 response 对象的
    def process_response(self, request, response):
        return response
'''
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- - 会话中间件负责处理用户会话的创建之间存储和检索用户数据。</span><br><span class="line">  - 它基于浏览器提供的Cookie或URL传递的会话ID进行会话跟踪，并将会话数据存储在后端数据库或缓存中，以实现用户状态的跨请求保持。</span><br><span class="line"></span><br><span class="line">#### （3）CommonMiddleware</span><br><span class="line"></span><br><span class="line">- django.middleware.common.CommonMiddleware： </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br></pre></td></tr></table></figure>

<ul>
<li>通用中间件提供了一些常见而关键的HTTP请求处理功能</li>
<li>例如，根据请求的HTTP头信息设置语言、时区等。</li>
<li>此外，它还处理静态文件的serving，包括收集静态文件，为其生成URL，并在开发模式下提供静态文件的serving。</li>
</ul>
<h4 id="（4）CsrfViewMiddleware">（4）CsrfViewMiddleware</h4>
<ul>
<li>django.middleware.csrf.CsrfViewMiddleware：</li>
</ul>
```python
from django.contrib.sessions.middleware import SessionMiddleware

'''
class SessionMiddleware(MiddlewareMixkmadnein):
    # process_request ： 处理request 请求的
    def process_request(self, request):
        ...
    # process_response ： 处理视图函数返回的 response 对象的
    def process_response(self, request, response):
        return response
'''
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- - CSRF（Cross-Site Request Forgery）中间件用于防止跨站请求伪造攻击。</span><br><span class="line">  - 它在每个POST请求中验证一个CSRF标记，确保请求是通过合法的表单提交得到的，从而保护用户免受恶意站点的攻击。</span><br><span class="line"></span><br><span class="line">#### （5）AuthenticationMiddleware</span><br><span class="line"></span><br><span class="line">- django.contrib.auth.middleware.AuthenticationMiddleware： </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class AuthenticationMiddleware(MiddlewareMixin):</span><br><span class="line">    def process_request(self, request):</span><br><span class="line">        assert ...</span><br></pre></td></tr></table></figure>

<ul>
<li>
<ul>
<li>认证中间件负责处理用户身份认证相关的任务</li>
<li>例如将认证信息关联到请求对象上，为每个请求提供一个user对象，以便在请求处理过程中轻松地获取和使用用户身份信息。</li>
</ul>
</li>
</ul>
<h4 id="（6）MessageMiddleware">（6）MessageMiddleware</h4>
<ul>
<li>django.contrib.messages.middleware.MessageMiddleware：</li>
</ul>
```python
from django.contrib.messages.middleware import MessageMiddleware

'''
class MessageMiddleware(MiddlewareMixin):
    # process_request ： 处理request 请求的
    def process_request(self, request):
        ...
    # process_response ： 处理视图函数返回的 response 对象的
    def process_response(self, request, response):
        return response
'''
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- - 消息中间件用于在请求处理过程中存储和传递临时的、一次性的用户消息。</span><br><span class="line">  - 它允许在HTTP重定向之间跨请求传递消息，例如成功或错误提示，以改善用户体验。</span><br><span class="line"></span><br><span class="line">#### （7）XFrameOptionsMiddleware</span><br><span class="line"></span><br><span class="line">- django.middleware.clickjacking.XFrameOptionsMiddleware： </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.middleware.clickjacking import XFrameOptionsMiddleware</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">class MessageMiddleware(MiddlewareMixin):</span><br><span class="line">    # process_request ： 处理request 请求的</span><br><span class="line">    def process_request(self, request):</span><br><span class="line">        ...</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>
<ul>
<li>点击劫持中间件用于防止页面被嵌入到其他网站中，从而提供一定的点击劫持保护。</li>
<li>它通过设置X-Frame-Options HTTP头部来限制页面的显示方式，从而防止恶意网页通过iframe等方式嵌入当前网页。</li>
</ul>
</li>
</ul>
<h2 id="【五】中间方法–》重要">【五】中间方法–》重要</h2>
<ul>
<li>中间件就是settings.py文件里面的MIDDLEWARE里面的方法</li>
</ul>
<h3 id="【1】必须掌握的中间件">【1】必须掌握的中间件</h3>
<p>这些方法都是你点进中间件才能看到的方法</p>
<h4 id="（1）process-request">（1）process_request:</h4>
<ul>
<li>
<p>处理request请求的</p>
</li>
<li>
<p>该方法在每个请求到达视图之前被调用，可以对请求进行预处理</p>
</li>
<li>
<p>它接收一个HttpRequest对象作为参数，并且没有返回值</p>
</li>
</ul>
<h4 id="（2）process-response">（2）process_response:</h4>
<ul>
<li>处理response 响应出去的数据</li>
<li>响应被返回的时候需要结束每一个中间件里面的 process_response 方法</li>
<li>该方法在每个请求结束并且响应返回到客户端之前被调用</li>
<li>它接收一个HttpRequest对象和HttpResponse对象作为参数，并且必须返回一个HttpResponse对象</li>
<li>顺序是按照配置文件中注册过的中间件从下往上依次经过
<ul>
<li>如果没有定义，则跳过，校验下一个</li>
</ul>
</li>
</ul>
<h4 id="（3）process-view">（3）process_view:</h4>
<ul>
<li>
<p>路由器配成功后执行视图函数之前</p>
</li>
<li>
<p>会自动执行中间件里面的方法</p>
</li>
<li>
<p>顺序是按照配置文件中注册的中间件从上而下的顺序执行</p>
</li>
<li>
<p>该方法在请求到达视图之前被调用，在视图函数执行前执行</p>
</li>
<li>
<ul>
<li>可以在此处进行一些操作</li>
<li>如修改请求参数或进行记录等</li>
</ul>
</li>
<li>
<p>它接收一个HttpRequest对象和一个视图函数作为参数，并且可以返回一个HttpResponse对象或None</p>
</li>
</ul>
<h3 id="【2】了解方法">【2】了解方法</h3>
<h4 id="（1）process-template-response">（1）process_template_response</h4>
<ul>
<li>
<p>返回的HttpResponse对象有render属性的时候才会触发</p>
</li>
<li>
<p>该方法在视图函数返回一个TemplateResponse对象时调用。</p>
<ul>
<li>TemplateResponse:模板响应</li>
</ul>
</li>
<li>
<ul>
<li>可以在此处修改模板响应</li>
<li>例如添加全局的上下文数据或进行额外的渲染操作</li>
</ul>
</li>
<li>
<p>它接收一个HttpRequest对象和一个TemplateResponse对象作为参数，并且必须返回一个TemplateResponse对象</p>
</li>
</ul>
```python
class GlobalContextMiddleware:
    def process_template_response(self, request, response):
        # 在这里添加全局的上下文数据
        response.context_data['global_data'] = "Global Value"
        return response
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### （2）process_exception</span><br><span class="line"></span><br><span class="line">- 当视图函数中出现异常的情况下触发</span><br><span class="line">- 顺序是按照配置文件中注册了的中间件从下往上依次经过</span><br><span class="line"></span><br><span class="line">- 该方法在视图函数抛出异常时被调用</span><br><span class="line"></span><br><span class="line">- - 可以在此处捕获异常并进行处理</span><br><span class="line">  - 例如返回一个定制的错误页面或进行日志记录等</span><br><span class="line"></span><br><span class="line">- 它接收一个HttpRequest对象和一个异常对象作为参数，可以返回一个HttpResponse对象来替代原始的异常响应</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class ErrorHandlerMiddleware:</span><br><span class="line">    def process_exception(self, request, exception):</span><br><span class="line">        # 在这里处理异常</span><br><span class="line">        if isinstance(exception, CustomException):</span><br><span class="line">            # 如果自定义异常，返回一个定制的错误页面</span><br><span class="line">            return render(request, &#x27;error.html&#x27;, &#123;&#x27;error&#x27;: str(exception)&#125;)</span><br><span class="line">        else:</span><br><span class="line">            # 默认情况，返回一个500服务器错误</span><br><span class="line">            return HttpResponseServerError(&quot;Internal Server Error&quot;)</span><br></pre></td></tr></table></figure>

<h2 id="【六】中间件的流程大概步骤">【六】中间件的流程大概步骤</h2>
<ul>
<li>第一步：请求进入的时候会走每一个中间件的process_request
<ul>
<li>process_request走的顺序是从上之下一次走的</li>
</ul>
</li>
<li>第二步：也会走每一个中间件的process_view
<ul>
<li>process_view走的顺序是从上之下依次走</li>
</ul>
</li>
<li>第三步：进入到指定的视图函数中</li>
<li>第四步：响应回去的时候走process_response
<ul>
<li>process_response走的顺序从下之上依次走</li>
</ul>
</li>
</ul>
<h2 id="【七】自定义中间件">【七】自定义中间件</h2>
<ul>
<li>
<p>创建一个middlewares.py文件</p>
</li>
<li>
<p>记得将你自定义的中间价加入到settings的中间件列表里面</p>
</li>
<li>
<p>你自己写很难写，根本写不出来，模仿人家的写，把人家的中间件里面的信息cv过来模仿写</p>
<ul>
<li>每个中间件都有，可以查看</li>
</ul>
</li>
</ul>
```python
class SecurityMiddleware(MiddlewareMixin):
    def process_request(self, request):
        # 请求
        ...
    def process_exception(self, request, exception):
        # 在这里可以捕获异常类型
        ....
    def process_view(self, request, callback, callback_args, callback_kwargs):
        # 视图
        ...
    def process_response(self, request, response):
        # 响应
        ...
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 在里面可以进行判断等步骤</span><br><span class="line">- 顺序就是先进---请求process_request---再进process_view---再进视图--试图三板斧---在倒序进入响应process_response</span><br><span class="line"></span><br><span class="line">## 【八】基于中间件开发程序</span><br><span class="line"></span><br><span class="line">### 【1】功能部分</span><br><span class="line"></span><br><span class="line">- 先分别创建不同的消息功能文件 </span><br><span class="line"></span><br><span class="line">- - 在同一个文件夹下</span><br><span class="line">  - 创建三个功能文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># -*-coding: Utf-8 -*-</span><br><span class="line"># @File : WeChat .py</span><br><span class="line"># author: Chimengmeng</span><br><span class="line"># blog_url : https://www.cnblogs.com/dream-ze/</span><br><span class="line"># Time：2023/7/18</span><br><span class="line"></span><br><span class="line">class WeChat(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 发送消息前的准备工作</span><br><span class="line">        # 比如掉接口/初始化配置等</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def send(self, content):</span><br><span class="line">        print(f&quot;WeChat 发送的消息 :&gt;&gt;&gt;&#123;content&#125;&quot;)</span><br><span class="line">``````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line"># -*-coding: Utf-8 -*-</span><br><span class="line"># @File : QQ .py</span><br><span class="line"># author: Chimengmeng</span><br><span class="line"># blog_url : https://www.cnblogs.com/dream-ze/</span><br><span class="line"># Time：2023/7/18</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class QQ(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 发送消息前的准备工作</span><br><span class="line">        # 比如掉接口/初始化配置等</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def send(self, content):</span><br><span class="line">        print(f&quot;QQ 发送的消息 :&gt;&gt;&gt;&#123;content&#125;&quot;)</span><br><span class="line">&#123;% raw %&#125;``````python</span><br><span class="line"># -*-coding: Utf-8 -*-</span><br><span class="line"># @File : email .py</span><br><span class="line"># author: Chimengmeng</span><br><span class="line"># blog_url : https://www.cnblogs.com/dream-ze/</span><br><span class="line"># Time：2023/7/18</span><br><span class="line"></span><br><span class="line">class email(object):</span><br><span class="line">    def __init__(self):</span><br><span class="line">        # 发送消息前的准备工作</span><br><span class="line">        # 比如掉接口/初始化配置等</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def send(self, content):</span><br><span class="line">        print(f&quot;email 发送的消息 :&gt;&gt;&gt;&#123;content&#125;&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li>在上面的文件内创建初始化文件</li>
</ul>
```python
# -*-coding: Utf-8 -*-
# @File : __init__ .py
# author: Chimengmeng
# blog_url : https://www.cnblogs.com/dream-ze/
# Time：2023/7/18
import settings
import importlib


def send_all(content):
    # 拿到每一个包的路径
    for path_str in settings.MODEL_LIST:
        model_path, class_name = path_str.rsplit('.', maxsplit=1)
        # model_path : model.email
        # class_name : email
        # （1）利用字符串导入模块
        # models : 模块对象
        models = importlib.import_module(model_path)
        # （2）利用反射拿到类名
        cls = getattr(models, class_name)
        # （3）生成类的对象
        obj = cls()
        # （4）利用鸭子类型直接调用send发送消息
        obj.send(content)


if __name__ == '__main__':
    send_all('1')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【2】调用部分</span><br><span class="line"></span><br><span class="line">- 在外部定义一个配置文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># -*-coding: Utf-8 -*-</span><br><span class="line"># @File : settings .py</span><br><span class="line"># author: Chimengmeng</span><br><span class="line"># blog_url : https://www.cnblogs.com/dream-ze/</span><br><span class="line"># Time：2023/7/18</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MODEL_LIST = [</span><br><span class="line">    &#x27;model.email.email&#x27;,</span><br><span class="line">    &#x27;model.QQ.QQ&#x27;,</span><br><span class="line">    &#x27;model.WeChat.WeChat&#x27;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>在外部的真正功能文件</li>
</ul>
```python
# -*-coding: Utf-8 -*-
# @File : start .py
# author: Chimengmeng
# blog_url : https://www.cnblogs.com/dream-ze/
# Time：2023/7/18
import model

model.send_all('这是测试消息')
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">email 发送的消息 :&gt;&gt;&gt;这是测试消息</span><br><span class="line">QQ 发送的消息 :&gt;&gt;&gt;这是测试消息</span><br><span class="line">WeChat 发送的消息 :&gt;&gt;&gt;这是测试消息</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 小结</span><br><span class="line"></span><br><span class="line">- 遵从Python中的鸭子类型 </span><br><span class="line"></span><br><span class="line">- - 可以在功能文件中自定义功能文件添加或者注释</span><br><span class="line"></span><br><span class="line">- 在 settings.py 文件中相关的路径注释掉或添加上去即可</span><br><span class="line"></span><br><span class="line">## 【九】中间价限制登入频率</span><br><span class="line"></span><br><span class="line">- mddliewares .py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from django.shortcuts import HttpResponse</span><br><span class="line">from django.utils.deprecation import MiddlewareMixin</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class ControlRequestMiddleware(MiddlewareMixin):</span><br><span class="line">    visit_data_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    # process_request ： 处理request 请求的</span><br><span class="line">    def process_request(self, request):</span><br><span class="line">        # 做一个字典 每一个请求进来就是一个 字典的键</span><br><span class="line">        # 值做成字典 也可做成 列表</span><br><span class="line">        &#x27;&#x27;&#x27;</span><br><span class="line">        &#123;&quot;127.0.0.1&quot;:[time1,time2,time3]&#125;</span><br><span class="line">        # 当前请求已经访问了三次</span><br><span class="line">        # 1分钟只能只能访问三次</span><br><span class="line">        # time3 - time1 &lt; 60</span><br><span class="line">        &#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">        visit_addr = request.META.get(&quot;REMOTE_ADDR&quot;)</span><br><span class="line">        # 判断当前请求的地址是否在字典中</span><br><span class="line">        time_str_list = self.visit_data_dict.get(visit_addr)</span><br><span class="line">        now_time = time.time()</span><br><span class="line">        if time_str_list:</span><br><span class="line">            # [time1]</span><br><span class="line">            # 判断当前请求的地址访问次数是否为三次</span><br><span class="line">            if len(time_str_list) &lt;= 2:</span><br><span class="line">                # [time1,time2]</span><br><span class="line">                self.visit_data_dict[visit_addr].append(now_time)</span><br><span class="line">            # 判断当前请求的地址访问次数大于三次</span><br><span class="line">            elif len(time_str_list) == 3:</span><br><span class="line">                # [time1,time2,time3]</span><br><span class="line">                # 最后一次的访问时间 - 第一次的访问时间</span><br><span class="line">                time_time = time_str_list[-1] - time_str_list[0]</span><br><span class="line">                # 1 分钟之内合理</span><br><span class="line">                if int(time_time) &gt;= 3:</span><br><span class="line">                    # 把最开始的 时间戳删掉</span><br><span class="line">                    # 把新的时间戳 加进去</span><br><span class="line">                    # [time2,time3]</span><br><span class="line">                    self.visit_data_dict[visit_addr].pop(0)</span><br><span class="line">                    # [time2,time3,time4]</span><br><span class="line">                    self.visit_data_dict[visit_addr].append(now_time)</span><br><span class="line">                else:</span><br><span class="line">                    self.visit_data_dict[visit_addr][-1] = now_time</span><br><span class="line">                    return HttpResponse(&quot;你访问的太频繁了&quot;)</span><br><span class="line">            else:</span><br><span class="line">                return HttpResponse(&quot;你访问的太频繁了&quot;)</span><br><span class="line">        # 第一次访问的时候</span><br><span class="line">        else:</span><br><span class="line">            # 先给一个空列表</span><br><span class="line">            self.visit_data_dict[visit_addr] = []</span><br><span class="line">            # 再向空列表中增加一个新的时间戳</span><br><span class="line">            self.visit_data_dict[visit_addr].append(now_time)</span><br><span class="line"></span><br><span class="line">    # process_response ： 处理视图函数返回的 response 对象的</span><br><span class="line">    def process_response(self, request, response):</span><br><span class="line">        return response</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Django%E8%A1%A8%E5%8D%95API%E8%AF%A6%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Django%E8%A1%A8%E5%8D%95API%E8%AF%A6%E8%A7%A3/" class="post-title-link" itemprop="url">Django表单API详解</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】引入</h1>
<ul>
<li>声明：以下的Form、表单等术语都指的的广义的Django表单。</li>
<li>Form要么是绑定了数据的，要么是未绑定数据的。</li>
<li>如果是绑定的，那么它能够验证数据，并渲染表单及其数据，然后生成HTML表单。如果未绑定，则无法进行验证（因为没有数据可以验证！），但它仍然可以以HTML形式呈现空白表单。</li>
<li>若要创建一个未绑定的Form实例，只需简单地实例化该类：</li>
</ul>
```plain
f = ContactForm()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 若要绑定数据到表单，可以将数据以字典的形式传递给Form类的构造函数：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data)</span><br></pre></td></tr></table></figure>

<ul>
<li>在这个字典中，键为字段的名称，它们对应于Form类中的字段。 值为需要验证的数据。</li>
</ul>
<h1>【二】表单的绑定属性</h1>
<h2 id="【1】Form-is-bound：">【1】<strong>Form.is_bound</strong>：</h2>
<ul>
<li>如果你需要区分绑定的表单和未绑定的表单，可以检查下表单的is_bound属性值：</li>
</ul>
```plain
>>> f = ContactForm()
>>> f.is_bound
False
>>> f = ContactForm({'subject': 'hello'})
>>> f.is_bound
True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 注意，传递一个空的字典将创建一个带有空数据的绑定的表单：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(&#123;&#125;)</span><br><span class="line">&gt;&gt;&gt; f.is_bound</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<ul>
<li>如果你有一个绑定的Form实例但是想改下数据，或者你想给一个未绑定的Form表单绑定某些数据，你需要创建另外一个Form实例。</li>
<li>因为，Form实例的数据没是自读的，Form实例一旦创建，它的数据将不可变。</li>
</ul>
<h1>【三】使用表单验证数据</h1>
<h2 id="【1】Form-clean">【1】Form.clean()</h2>
<ul>
<li>如果你要自定义验证功能，那么你需要重新实现这个clean方法。</li>
<li>还记得我们在前面的自定义验证器章节的内容吗？</li>
<li>这里的clean()方法其实也是Django提供给我们的一个钩子，用于添加整个表单级别的验证功能。</li>
<li>其源代码很简单，就是走个过程：</li>
</ul>
```plain
def clean(self):
    return self.cleaned_data
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】Form.is_valid()</span><br><span class="line"></span><br><span class="line">- Form对象的主要任务之一就是验证数据。</span><br><span class="line">- 调用is_valid()方法来执行绑定表单的数据验证工作，并返回一个表示数据是否合法的布尔值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data)</span><br><span class="line">&gt;&gt;&gt; f.is_valid()python</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<ul>
<li>让我们试下非法的数据。下面的情形中，subject为空（默认所有字段都是必需的）且sender是一个不合法的邮件地址：</li>
</ul>
```plain
>>> data = {'subject': '',
...         'message': 'Hi there',
...         'sender': 'invalid email address',
...         'cc_myself': True}
>>> f = ContactForm(data)
>>> f.is_valid()
False
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】Form.errors</span><br><span class="line"></span><br><span class="line">- 表单的errors属性保存了错误信息字典：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f.errors</span><br><span class="line">&#123;&#x27;sender&#x27;: [&#x27;Enter a valid email address.&#x27;], &#x27;subject&#x27;: [&#x27;This field is required.&#x27;]&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在这个字典中，键为字段的名称，值为错误信息的Unicode字符串组成的列表。错误信息保存在列表中是因为字段可能有多个错误信息。</li>
<li>可以直接调用这个方法获得错误信息，不需要先调用is_valid方法，因为在后台，errors方法会自动调用is_valid。</li>
</ul>
<h2 id="【4】Form-errors-as-data">【4】Form.errors.as_data()</h2>
<ul>
<li>返回一个字典，它将字段映射到原始的ValidationError实例。</li>
</ul>
```plain
>>> f.errors.as_data()
{'sender': [ValidationError(['Enter a valid email address.'])],
'subject': [ValidationError(['This field is required.'])]}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【5】Form.errors.as_json(escape_html=False)</span><br><span class="line"></span><br><span class="line">- 返回JSON序列化后的错误信息字典。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f.errors.as_json()</span><br><span class="line">&#123;&quot;sender&quot;: [&#123;&quot;message&quot;: &quot;Enter a valid email address.&quot;, &quot;code&quot;: &quot;invalid&quot;&#125;],</span><br><span class="line">&quot;subject&quot;: [&#123;&quot;message&quot;: &quot;This field is required.&quot;, &quot;code&quot;: &quot;required&quot;&#125;]&#125;</span><br></pre></td></tr></table></figure>

<h2 id="【6】Form-add-error-field-error">【6】Form.add_error(field, error)</h2>
<ul>
<li>向表单特定字段添加错误信息。</li>
<li>field参数为字段的名称。</li>
<li>如果值为None，error将作为Form.non_field_errors()的一个非字段错误。</li>
</ul>
<h2 id="【7】Form-has-error-field-code-None">【7】Form.has_error(field, code=None)</h2>
<ul>
<li>判断某个字段是否具有指定code的错误。</li>
<li>当code为None时，如果字段有任何错误它都将返回True。</li>
</ul>
<h2 id="【8】Form-non-field-errors">【8】Form.non_field_errors()</h2>
<ul>
<li>返回Form.errors中不是与特定字段相关联的错误。</li>
</ul>
<h2 id="【9】对于没有绑定数据的表单">【9】对于没有绑定数据的表单</h2>
<ul>
<li>验证没有绑定数据的表单是没有意义的，下面的例子展示了这种情况：</li>
</ul>
```plain
>>> f = ContactForm()
>>> f.is_valid()
False
>>> f.errors
{}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【四】检查表单数据是否被修改</span><br><span class="line"></span><br><span class="line">## 【1】Form.has_changed()</span><br><span class="line"></span><br><span class="line">- 当你需要检查表单的数据是否从初始数据发生改变时，可以使用has_changed()方法。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data, initial=data)</span><br><span class="line">&gt;&gt;&gt; f.has_changed()</span><br><span class="line">False</span><br></pre></td></tr></table></figure>

<ul>
<li>注意其中的initial参数用于给表单一个原始的数据。</li>
<li>提交表单后，我们可以重新构建表单并提供初始值，进行比较：</li>
</ul>
```plain
>>> f = ContactForm(request.POST, initial=data)
>>> f.has_changed()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 如果request.POST与initial中的数据有区别，则返回True，否则返回False。</span><br><span class="line"></span><br><span class="line">## 【2】Form.changed_data</span><br><span class="line"></span><br><span class="line">- 返回有变化的字段的列表。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(request.POST, initial=data)</span><br><span class="line">&gt;&gt;&gt; if f.has_changed():</span><br><span class="line">...     print(&quot;The following fields changed: %s&quot; % &quot;, &quot;.join(f.changed_data))</span><br><span class="line">&gt;&gt;&gt; f.changed_data</span><br><span class="line">[&#x27;subject&#x27;, &#x27;message&#x27;]</span><br></pre></td></tr></table></figure>

<h1>【五】访问表单中的字段</h1>
<h2 id="【1】通过fileds属性访问表单的字段">【1】通过fileds属性访问表单的字段</h2>
```plain
>>> for row in f.fields.values(): print(row)
...
<django.forms.fields.CharField object at 0x7ffaac632510>
<django.forms.fields.URLField object at 0x7ffaac632f90>
<django.forms.fields.CharField object at 0x7ffaac3aa050>
>>> f.fields['name']
<django.forms.fields.CharField object at 0x7ffaac6324d0>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】修改Form实例的字段来改变字段在表单中的表示</span><br><span class="line"></span><br><span class="line">- 可以修改Form实例的字段来改变字段在表单中的表示</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f.as_table().split(&#x27;\n&#x27;)[0]</span><br><span class="line">&#x27;&lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input name=&quot;name&quot; type=&quot;text&quot; value=&quot;instance&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;&#x27;</span><br><span class="line">&gt;&gt;&gt; f.fields[&#x27;name&#x27;].label = &quot;Username&quot;</span><br><span class="line">&gt;&gt;&gt; f.as_table().split(&#x27;\n&#x27;)[0]</span><br><span class="line">&#x27;&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input name=&quot;name&quot; type=&quot;text&quot; value=&quot;instance&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意不要改变base_fields属性，因为一旦修改将影响同一个Python进程中接下来所有的ContactForm实例：</li>
</ul>
```plain
>>> f.base_fields['name'].label = "Username"
>>> another_f = CommentForm(auto_id=False)
>>> another_f.as_table().split('\n')[0]
'<tr><th>Username:</th><td><input name="name" type="text" value="class" required /></td></tr>'
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【六】访问cleaned_data</span><br><span class="line"></span><br><span class="line">- Form类中的每个字段不仅负责验证数据，还负责将它们转换为正确的格式。</span><br><span class="line"></span><br><span class="line">- - 例如，DateField将输入转换为Python的datetime.date对象。</span><br><span class="line"></span><br><span class="line">- 无论你传递的是普通字符串&#x27;1994-07-15&#x27;、DateField格式的字符串、datetime.date对象、还是其它格式的数字，Django将始终把它们转换成datetime.date对象。</span><br><span class="line">- 一旦你创建一个Form实例并通过验证后，你就可以通过它的cleaned_data属性访问干净的数据（未验证或者验证未通过时，是拿不到这个数据字典的）：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data)</span><br><span class="line">&gt;&gt;&gt; f.is_valid()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; f.cleaned_data</span><br><span class="line">&#123;&#x27;cc_myself&#x27;: True, &#x27;message&#x27;: &#x27;Hi there&#x27;, &#x27;sender&#x27;: &#x27;foo@example.com&#x27;, &#x27;subject&#x27;: &#x27;hello&#x27;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果你的数据没有通过验证，cleaned_data字典中只包含合法的字段：</li>
</ul>
```plain
>>> data = {'subject': '',
...         'message': 'Hi there',
...         'sender': 'invalid email address',
...         'cc_myself': True}
>>> f = ContactForm(data)
>>> f.is_valid()
False
>>> f.cleaned_data
{'cc_myself': True, 'message': 'Hi there'}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- cleaned_data字典始终只包含Form中定义的字段，即使你在构建Form时传递了额外的数据。</span><br><span class="line">- 在下面的例子中，我们传递了一组额外的字段给ContactForm构造函数，但是cleaned_data将只包含表单的字段：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True,</span><br><span class="line">...         &#x27;extra_field_1&#x27;: &#x27;foo&#x27;,</span><br><span class="line">...         &#x27;extra_field_2&#x27;: &#x27;bar&#x27;,</span><br><span class="line">...         &#x27;extra_field_3&#x27;: &#x27;baz&#x27;&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data)</span><br><span class="line">&gt;&gt;&gt; f.is_valid()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; f.cleaned_data # Doesn&#x27;t contain extra_field_1, etc.</span><br><span class="line">&#123;&#x27;cc_myself&#x27;: True, &#x27;message&#x27;: &#x27;Hi there&#x27;, &#x27;sender&#x27;: &#x27;foo@example.com&#x27;, &#x27;subject&#x27;: &#x27;hello&#x27;&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>当Form通过验证后，cleaned_data将包含所有字段的键和值，即使传递的数据中没有提供某些字段的值。</li>
<li>在下面的例子中，提供的实际数据中不包含nick_name字段，但是cleaned_data任然包含它，只是值为空：</li>
</ul>
```plain
>>> from django import forms
>>> class OptionalPersonForm(forms.Form):
...     first_name = forms.CharField()
...     last_name = forms.CharField()
...     nick_name = forms.CharField(required=False)
>>> data = {'first_name': 'John', 'last_name': 'Lennon'}
>>> f = OptionalPersonForm(data)
>>> f.is_valid()
True
>>> f.cleaned_data
{'nick_name': '', 'first_name': 'John', 'last_name': 'Lennon'}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【七】表单的HTML生成方式</span><br><span class="line"></span><br><span class="line">- Form的第二个任务是将它渲染成HTML代码，默认情况下，根据form类中字段的编写顺序，在HTML中以同样的顺序罗列。</span><br><span class="line">- 我们可以通过print方法展示出来：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm()</span><br><span class="line">&gt;&gt;&gt; print(f)</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果表单是绑定的，输出的HTML将包含数据。</li>
</ul>
```plain
>>> data = {'subject': 'hello',
...         'message': 'Hi there',
...         'sender': 'foo@example.com',
...         'cc_myself': True}
>>> f = ContactForm(data)
>>> print(f)
<tr><th><label for="id_subject">Subject:</label></th><td><input id="id_subject" type="text" name="subject" maxlength="100" value="hello" required /></td></tr>
<tr><th><label for="id_message">Message:</label></th><td><input type="text" name="message" id="id_message" value="Hi there" required /></td></tr>
<tr><th><label for="id_sender">Sender:</label></th><td><input type="email" name="sender" id="id_sender" value="foo@example.com" required /></td></tr>
<tr><th><label for="id_cc_myself">Cc myself:</label></th><td><input type="checkbox" name="cc_myself" id="id_cc_myself" checked /></td></tr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">注意事项：</span><br><span class="line"></span><br><span class="line">- 为了灵活性，输出不包含&lt;table&gt;和&lt;/table&gt;、&lt;form&gt;和&lt;/form&gt;以及&lt;input type=&quot;submit&quot;&gt;标签。 需要我们程序员手动添加它们。</span><br><span class="line">- 每个字段类型都由一个默认的HTML标签展示。注意，这些只是默认的，可以使用Widget 特别指定。</span><br><span class="line">- 每个HTML标签的name属性名直接从ContactForm类中获取。</span><br><span class="line">- form使用HTML5语法，顶部需添加&lt;!DOCTYPE html&gt;说明。</span><br><span class="line"></span><br><span class="line">## 【1】渲染成文字段落as_p()</span><br><span class="line"></span><br><span class="line">- 该方法将form渲染成一系列&lt;p&gt;标签，每个&lt;p&gt;标签包含一个字段；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm()</span><br><span class="line">&gt;&gt;&gt; f.as_p()</span><br><span class="line">&#x27;&lt;p&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; required /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; required /&gt;&lt;/p&gt;\n&lt;p&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/p&gt;&#x27;</span><br><span class="line">&gt;&gt;&gt; print(f.as_p())</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required /&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; required /&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; required /&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【2】渲染成无序列表as-ul">【2】渲染成无序列表as_ul()</h2>
<ul>
<li>该方法将form渲染成一系列<li>标签，每个<li>标签包含一个字段。</li>
<li>但不会自动生成</ul>和<ul>，所以你可以自己指定<ul>的任何HTML属性：</li>
</ul>
```plain
>>> f = ContactForm()
>>> f.as_ul()
'<li><label for="id_subject">Subject:</label> <input id="id_subject" type="text" name="subject" maxlength="100" required /></li>\n<li><label for="id_message">Message:</label> <input type="text" name="message" id="id_message" required /></li>\n<li><label for="id_sender">Sender:</label> <input type="email" name="sender" id="id_sender" required /></li>\n<li><label for="id_cc_myself">Cc myself:</label> <input type="checkbox" name="cc_myself" id="id_cc_myself" /></li>'
>>> print(f.as_ul())
<li><label for="id_subject">Subject:</label> <input id="id_subject" type="text" name="subject" maxlength="100" required /></li>
<li><label for="id_message">Message:</label> <input type="text" name="message" id="id_message" required /></li>
<li><label for="id_sender">Sender:</label> <input type="email" name="sender" id="id_sender" required /></li>
<li><label for="id_cc_myself">Cc myself:</label> <input type="checkbox" name="cc_myself" id="id_cc_myself" /></li>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】渲染成表格as_table()</span><br><span class="line"></span><br><span class="line">- 渲染成HTML表格。</span><br><span class="line">- 它与print完全相同，事实上，当你print一个表单对象时，在后台调用的就是as_table()方法：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm()</span><br><span class="line">&gt;&gt;&gt; f.as_table()</span><br><span class="line">&#x27;&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;&#x27;</span><br><span class="line">&gt;&gt;&gt; print(f)</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;id_subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;id_message&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;id_sender&quot; required /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;id_cc_myself&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;</span><br></pre></td></tr></table></figure>

<h1>【八】 为错误信息添加CSS样式</h1>
<ul>
<li>为一些特别强调的或者需要额外显示的内容设置醒目的CSS样式是一种常用做法，也是非常有必要的。</li>
<li>比如给必填字段加粗显示，设置错误文字为红色等等。</li>
<li>Form.error_css_class和Form.required_css_class属性就是做这个用的：</li>
</ul>
```plain
from django import forms

class ContactForm(forms.Form):
    error_css_class = 'error'
    required_css_class = 'required'

    # ... and the rest of your fields here
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 属性名是固定的，不可变（废话），通过赋值不同的字符串，表示给这两类属性添加不同的CSS的class属性。</span><br><span class="line">- 以后Django在渲染form成HTML时将自动为error和required行添加对应的CSS样式。</span><br><span class="line">- 上面的例子，其HTML看上去将类似：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(data)</span><br><span class="line">&gt;&gt;&gt; print(f.as_table())</span><br><span class="line">&lt;tr class=&quot;required&quot;&gt;&lt;th&gt;&lt;label class=&quot;required&quot; for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;    ...</span><br><span class="line">&lt;tr class=&quot;required&quot;&gt;&lt;th&gt;&lt;label class=&quot;required&quot; for=&quot;id_message&quot;&gt;Message:&lt;/label&gt;    ...</span><br><span class="line">&lt;tr class=&quot;required error&quot;&gt;&lt;th&gt;&lt;label class=&quot;required&quot; for=&quot;id_sender&quot;&gt;Sender:&lt;/label&gt;      ...</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;id_cc_myself&quot;&gt;Cc myself:&lt;label&gt; ...</span><br><span class="line">&gt;&gt;&gt; f[&#x27;subject&#x27;].label_tag()</span><br><span class="line">&lt;label class=&quot;required&quot; for=&quot;id_subject&quot;&gt;Subject:&lt;/label&gt;</span><br><span class="line">&gt;&gt;&gt; f[&#x27;subject&#x27;].label_tag(attrs=&#123;&#x27;class&#x27;: &#x27;foo&#x27;&#125;)</span><br><span class="line">&lt;label for=&quot;id_subject&quot; class=&quot;foo required&quot;&gt;Subject:&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<h1>【九】将上传的文件绑定到表单</h1>
<ul>
<li>处理带有FileField和ImageField字段的表单比普通的表单要稍微复杂一点。</li>
<li>首先，为了上传文件，你需要确保你的<form>元素定义enctype为&quot;multipart/form-data&quot;：</li>
</ul>
```plain
<form enctype="multipart/form-data" method="post" action="/foo/">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 其次，当你使用表单时，你需要绑定文件数据。</span><br><span class="line">- 文件数据的处理与普通的表单数据是分开的，所以如果表单包含FileField和ImageField，绑定表单时你需要指定第二个参数，参考下面的例子。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line"># 为表单绑定image字段</span><br><span class="line">&gt;&gt;&gt; from django.core.files.uploadedfile import SimpleUploadedFile</span><br><span class="line">&gt;&gt;&gt; data = &#123;&#x27;subject&#x27;: &#x27;hello&#x27;,</span><br><span class="line">...         &#x27;message&#x27;: &#x27;Hi there&#x27;,</span><br><span class="line">...         &#x27;sender&#x27;: &#x27;foo@example.com&#x27;,</span><br><span class="line">...         &#x27;cc_myself&#x27;: True&#125;</span><br><span class="line">&gt;&gt;&gt; file_data = &#123;&#x27;mugshot&#x27;: SimpleUploadedFile(&#x27;face.jpg&#x27;, &lt;file data&gt;)&#125;</span><br><span class="line">&gt;&gt;&gt; f = ContactFormWithMugshot(data, file_data)</span><br></pre></td></tr></table></figure>

<ul>
<li>实际上，一般使用request.FILES作为文件数据的源：</li>
</ul>
```plain
# Bound form with an image field, data from the request
>>> f = ContactFormWithMugshot(request.POST, request.FILES)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 构造一个未绑定的表单和往常一样，将表单数据和文件数据同时省略：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line"># Unbound form with an image field</span><br><span class="line">&gt;&gt;&gt; f = ContactFormWithMugshot()</span><br></pre></td></tr></table></figure>

<h1>【十】配置表单元素的HTML id属性和<label> 标签</h1>
<ul>
<li>默认情况下，表单在渲染的时候会自动提供一个<label> 标签和id属性。id属性值是id_加表单字段的名字。</li>
<li>我们可以在Form的构造器中设置参数auto_id=False来关闭此行为。</li>
</ul>
```plain
>>> f = ContactForm(auto_id=False)
>>> print(f.as_table())
<tr><th>Subject:</th><td><input type="text" name="subject" maxlength="100" required></td></tr>
<tr><th>Message:</th><td><input type="text" name="message" required></td></tr>
<tr><th>Sender:</th><td><input type="email" name="sender" required></td></tr>
<tr><th>Cc myself:</th><td><input type="checkbox" name="cc_myself"></td></tr>
>>> print(f.as_ul())
<li>Subject: <input type="text" name="subject" maxlength="100" required></li>
<li>Message: <input type="text" name="message" required></li>
<li>Sender: <input type="email" name="sender" required></li>
<li>Cc myself: <input type="checkbox" name="cc_myself"></li>
>>> print(f.as_p())
<p>Subject: <input type="text" name="subject" maxlength="100" required></p>
<p>Message: <input type="text" name="message" required></p>
<p>Sender: <input type="email" name="sender" required></p>
<p>Cc myself: <input type="checkbox" name="cc_myself"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 如果auto_id设置为 True，则表现形式如下：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; f = ContactForm(auto_id=True)</span><br><span class="line">&gt;&gt;&gt; print(f.as_table())</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; required&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;sender&quot; required&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;th&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&gt;&gt;&gt; print(f.as_ul())</span><br><span class="line">&lt;li&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;sender&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot;&gt;&lt;/li&gt;</span><br><span class="line">&gt;&gt;&gt; print(f.as_p())</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;subject&quot;&gt;Subject:&lt;/label&gt; &lt;input id=&quot;subject&quot; type=&quot;text&quot; name=&quot;subject&quot; maxlength=&quot;100&quot; required&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;message&quot; id=&quot;message&quot; required&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;sender&quot;&gt;Sender:&lt;/label&gt; &lt;input type=&quot;email&quot; name=&quot;sender&quot; id=&quot;sender&quot; required&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;label for=&quot;cc_myself&quot;&gt;Cc myself:&lt;/label&gt; &lt;input type=&quot;checkbox&quot; name=&quot;cc_myself&quot; id=&quot;cc_myself&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果auto_id 被设置为包含’%s’部分的字符串格式，那么就是指定id的值，'%s’部分会用表单字段的名字填充 。比如auto_id=‘id_for_%s’:</li>
</ul>
```plain
>>> f = ContactForm(auto_id='id_for_%s')
>>> print(f.as_table())
<tr><th><label for="id_for_subject">Subject:</label></th><td><input id="id_for_subject" type="text" name="subject" maxlength="100" required></td></tr>
<tr><th><label for="id_for_message">Message:</label></th><td><input type="text" name="message" id="id_for_message" required></td></tr>
<tr><th><label for="id_for_sender">Sender:</label></th><td><input type="email" name="sender" id="id_for_sender" required></td></tr>
<tr><th><label for="id_for_cc_myself">Cc myself:</label></th><td><input type="checkbox" name="cc_myself" id="id_for_cc_myself"></td></tr>
>>> print(f.as_ul())
<li><label for="id_for_subject">Subject:</label> <input id="id_for_subject" type="text" name="subject" maxlength="100" required></li>
<li><label for="id_for_message">Message:</label> <input type="text" name="message" id="id_for_message" required></li>
<li><label for="id_for_sender">Sender:</label> <input type="email" name="sender" id="id_for_sender" required></li>
<li><label for="id_for_cc_myself">Cc myself:</label> <input type="checkbox" name="cc_myself" id="id_for_cc_myself"></li>
>>> print(f.as_p())
<p><label for="id_for_subject">Subject:</label> <input id="id_for_subject" type="text" name="subject" maxlength="100" required></p>
<p><label for="id_for_message">Message:</label> <input type="text" name="message" id="id_for_message" required></p>
<p><label for="id_for_sender">Sender:</label> <input type="email" name="sender" id="id_for_sender" required></p>
<p><label for="id_for_cc_myself">Cc myself:</label> <input type="checkbox" name="cc_myself" id="id_for_cc_myself"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 如果auto_id 被设置为任何其它的真值，比如不包含&#x27;%s&#x27;的字符串，相当于设置为True。</span><br><span class="line">- 默认情况下，auto_id 被设置为 &#x27;id_%s&#x27;。</span><br><span class="line"></span><br><span class="line"># 【十一】配置表单的渲染器</span><br><span class="line"></span><br><span class="line">- 实际上，我们在渲染表单的时候都会用到一个渲染器。</span><br><span class="line">- 而用哪个渲染器是可配置的。</span><br><span class="line">- 这个配置项叫做default_renderer，它的默认值为None，表示使用settings中FORM_RENDERER指定的渲染器。</span><br><span class="line">- 我们可以在表单类中手动指定default_renderer，选择我们需要的渲染器：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">from django import forms</span><br><span class="line"></span><br><span class="line">class MyForm(forms.Form):</span><br><span class="line">    default_renderer = MyRenderer()</span><br></pre></td></tr></table></figure>

<ul>
<li>或者：</li>
</ul>
```plain
form = MyForm(renderer=MyRenderer())
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【十二】字段输入框的排序</span><br><span class="line"></span><br><span class="line">- 在我们使用 as_p(), as_ul() 和as_table()快捷方式生成HTML页面的input框时，这些input元素的先后顺序和表单类中字段定义的先后顺序是一致的。</span><br><span class="line">- 如果想要调整顺序，可以使用Form类的field_order 属性。</span><br><span class="line">- 默认情况下，Form.field_order=None，表示与字段采用同样顺序。</span><br><span class="line">- 如果给field_order 提供一个列表值，那么首先按列表中列出的项排出，剩下的继续按原顺序排出。如果列表中有无效的字段名，将被忽略。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">from django import forms</span><br><span class="line"></span><br><span class="line">class MyForm(forms.Form):</span><br><span class="line">    field_order = [...]</span><br></pre></td></tr></table></figure>

<h1>【十三】判断表单上传类型</h1>
<ul>
<li>Form类有一个is_multipart() 方法，可以用来判断表单是上传文件还是键值对。如下所示：</li>
</ul>
```plain
>>> f = ContactFormWithMugshot()
>>> f.is_multipart()
True
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 这样，我们就可以在模板中，根据上传方式的不同，生成不同的表头：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&#123;% if form.is_multipart %&#125;</span><br><span class="line">    &lt;form enctype=&quot;multipart/form-data&quot; method=&quot;post&quot; action=&quot;/foo/&quot;&gt;</span><br><span class="line">&#123;% else %&#125;</span><br><span class="line">    &lt;form method=&quot;post&quot; action=&quot;/foo/&quot;&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;&#123; form &#125;&#125;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h1>【十四】添加前缀</h1>
<ul>
<li>可以为Form类添加prefix属性或参数，来给每个字段名添加一个前缀，比如：</li>
</ul>
```plain
>>> mother = PersonForm(prefix="mother")
>>> father = PersonForm(prefix="father")
>>> print(mother.as_ul())
<li><label for="id_mother-first_name">First name:</label> <input type="text" name="mother-first_name" id="id_mother-first_name" required></li>
<li><label for="id_mother-last_name">Last name:</label> <input type="text" name="mother-last_name" id="id_mother-last_name" required></li>
>>> print(father.as_ul())
<li><label for="id_father-first_name">First name:</label> <input type="text" name="father-first_name" id="id_father-first_name" required></li>
<li><label for="id_father-last_name">Last name:</label> <input type="text" name="father-last_name" id="id_father-last_name" required></li>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 或者</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; class PersonForm(forms.Form):</span><br><span class="line">...     ...</span><br><span class="line">...     prefix = &#x27;person&#x27;</span><br></pre></td></tr></table></figure>

<h1>【十五】创建子类</h1>
<ul>
<li>如果你创建一个Form类的子类，那么子类将自动拥有父类所有的字段。如下所示:</li>
</ul>
```plain
>>> class ContactFormWithPriority(ContactForm):
...     priority = forms.CharField()
>>> f = ContactFormWithPriority(auto_id=False)
>>> print(f.as_ul())
<li>Subject: <input type="text" name="subject" maxlength="100" required></li>
<li>Message: <input type="text" name="message" required></li>
<li>Sender: <input type="email" name="sender" required></li>
<li>Cc myself: <input type="checkbox" name="cc_myself"></li>
<li>Priority: <input type="text" name="priority" required></li>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 可以同时继承多个父类：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```plain</span><br><span class="line">&gt;&gt;&gt; from django import forms</span><br><span class="line">&gt;&gt;&gt; class PersonForm(forms.Form):</span><br><span class="line">...     first_name = forms.CharField()</span><br><span class="line">...     last_name = forms.CharField()</span><br><span class="line">&gt;&gt;&gt; class InstrumentForm(forms.Form):</span><br><span class="line">...     instrument = forms.CharField()</span><br><span class="line">&gt;&gt;&gt; class BeatleForm(InstrumentForm, PersonForm):</span><br><span class="line">...     haircut_type = forms.CharField()</span><br><span class="line">&gt;&gt;&gt; b = BeatleForm(auto_id=False)</span><br><span class="line">&gt;&gt;&gt; print(b.as_ul())</span><br><span class="line">&lt;li&gt;First name: &lt;input type=&quot;text&quot; name=&quot;first_name&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;Last name: &lt;input type=&quot;text&quot; name=&quot;last_name&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;Instrument: &lt;input type=&quot;text&quot; name=&quot;instrument&quot; required&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;Haircut type: &lt;input type=&quot;text&quot; name=&quot;haircut_type&quot; required&gt;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在子类中，将某个父类中的字段设置为None，可以声明性地删除这个字段，也就是说子类不要父类的这个字段：</li>
</ul>
```plain
>>> from django import forms

>>> class ParentForm(forms.Form):
...     name = forms.CharField()
...     age = forms.IntegerField()

>>> class ChildForm(ParentForm):
...     name = None

>>> list(ChildForm().fields)
['age']
```


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/Flex%E5%B8%83%E5%B1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/15/Flex%E5%B8%83%E5%B1%80/" class="post-title-link" itemprop="url">Flex布局</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:55 / 修改时间：16:15:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:55+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】Flex布局介绍</h1>
<h2 id="【1】什么是Flex布局">【1】什么是Flex布局</h2>
```python
# Flex布局（Flexible Box Layout）是一种用于构建响应式和灵活布局的CSS布局模式。通过定义容器的 display: flex，可以轻松地排列和对齐其子元素

# 任何一个容器都可以指定flex布局
.box{  
    display: flex;
}

# 行内元素也可以使用 Flex 布局。
	- 行内元素：指那些不会在其前后创建换行的元素
.box{  
    display: inline-flex;
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】Flex布局的好处</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">#1 简单易懂：与传统的布局方式相比，Flex布局的语法和理解起来更加简单，容易上手。</span><br><span class="line"></span><br><span class="line">#2 弹性和自适应：Flex布局能够自动适应不同尺寸的屏幕，让页面更具有弹性。</span><br><span class="line"></span><br><span class="line">#3 等高布局：Flex布局可以方便地实现多列等高布局。</span><br><span class="line"></span><br><span class="line">#4 对齐和排序：Flex布局支持各种对齐方式，包括水平和垂直对齐，并且可以通过设置order属性对子元素进行排序。</span><br><span class="line"></span><br><span class="line">#5 可以与传统布局结合使用：Flex布局并不是完全取代传统的布局方式，它可以与传统布局方式结合使用，实现更灵活的布局效果</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】概念</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 1  采用 Flex 布局的元素，称为 Flex 容器（flex container），简称&quot;容器&quot;。它的所有子元素自动成为容器成员，称为 Flex 项目（flex item），简称&quot;项目&quot;</span><br><span class="line">	-容器和项目：container、item</span><br><span class="line"></span><br><span class="line"># 2 容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）</span><br><span class="line">	-主轴和交叉轴：main axis、cross axis</span><br><span class="line"># 3 主轴的开始位置（与边框的交叉点）叫做main start，结束位置叫做main end；交叉轴的开始位置叫做cross start，结束位置叫做cross end。</span><br><span class="line">	-起始位置：</span><br><span class="line">    	main start 主轴起始位置</span><br><span class="line">        cross start 侧轴起始位置</span><br><span class="line">    -结束位置：</span><br><span class="line">    	main end 主轴结束位置</span><br><span class="line">        cross start 侧轴结束位置</span><br><span class="line"># 4 项目默认沿主轴排列。单个项目占据的主轴空间叫做main size，占据的交叉轴空间叫做cross size</span><br><span class="line">	-主轴尺寸</span><br><span class="line">    -侧轴尺寸</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408010839214.png" alt="image-20240408010839214"></p>
<h1>【二】容器样式属性（6个）</h1>
`````python
# 1 flex-direction：决定主轴的方向。

# 2 flex-wrap：如果一条轴线排不下，如何换行。

# 3 flex-flow：flex-direction 属性和 flex-wrap 属性的简写属性。

# 4 justify-content：定义项目在主轴上的对齐方式。

# 5 align-items：定义项目在交叉轴上如何对齐。

# 6 align-content：定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【1】flex-direction</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 1 flex-direction属性决定主轴的方向（即项目的排列方向）</span><br><span class="line"># 2 有4个值（如下图）</span><br><span class="line">row（默认值）：主轴为水平方向，起点在左端。</span><br><span class="line">row-reverse：主轴为水平方向，起点在右端。</span><br><span class="line">column：主轴为垂直方向，起点在上沿。</span><br><span class="line">column-reverse：主轴为垂直方向，起点在下沿。</span><br><span class="line"></span><br><span class="line"># 3 强调：使用 flex-direction属性后，因为主轴的位置发生了改变，使用和主轴或交叉轴有关的属性之前一定要确定好主轴的位置</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240408012131994](D:\pycharm\Temporary_notes\图片\image-20240408012131994.png)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .box &#123;</span><br><span class="line">            width: 800px;</span><br><span class="line">            height: 400px;</span><br><span class="line">            border: 1px solid black;</span><br><span class="line">            margin: auto; /* box 居中*/</span><br><span class="line">            /* 使用弹性布局 */</span><br><span class="line">            display: flex;</span><br><span class="line">            /* row（默认值）：主轴为水平方向，起点在左端。 */</span><br><span class="line">            flex-direction: column-reverse; /* row  row-reverse    column    column-reverse */</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .box div &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">        &#123;# 背景颜色 #&#125; </span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#123;# 边框 #&#125; </span><br><span class="line">            border: 1px solid red;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;4&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;5&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;6&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】flex-wrap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"># 1 默认情况下，项目都排在一条线（又称&quot;轴线&quot;）上。flex-wrap属性定义，如果一条轴线排不下，如何换行。</span><br><span class="line"></span><br><span class="line"># 2 flex-wrap 属性规定flex容器是单行或者多行，同时横轴的方向决定了新行堆叠的方向</span><br><span class="line"></span><br><span class="line"># 3 3个值 flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">	- nowrap 不换行</span><br><span class="line">    - wrap 换行，第一行在上方</span><br><span class="line">    - wrap-reverse 换行，第一行在下方</span><br><span class="line">```````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">     &lt;style&gt;</span><br><span class="line">        .box &#123;</span><br><span class="line">            width: 800px;</span><br><span class="line">            height: 400px;</span><br><span class="line">            border: 1px solid black;</span><br><span class="line">            margin: auto; /* box 居中*/</span><br><span class="line">            /* 使用弹性布局 */</span><br><span class="line">            display: flex;</span><br><span class="line">            /* row（默认值）：主轴为水平方向，起点在左端。 */</span><br><span class="line">            flex-direction: row;</span><br><span class="line">            </span><br><span class="line">             /*nowrap 默认值 */</span><br><span class="line">            /*flex-wrap: nowrap*/</span><br><span class="line">            /*wrap 换行，第一行在上方*/</span><br><span class="line">            /*flex-wrap: wrap; */</span><br><span class="line">            /* wrap-reverse 换行，第一行在下方 */</span><br><span class="line">            flex-wrap: wrap-reverse;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .box div &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            border: 1px solid red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;4&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;5&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;6&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;7&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;8&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;9&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&#123;% raw %&#125;````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】flex-flow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">python</span><br><span class="line"># 1 flex-flow属性是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap。</span><br><span class="line"></span><br><span class="line">.box &#123;  </span><br><span class="line">    flex-flow: flex-direction || flex-wrap;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% raw %&#125;```````html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">     &lt;style&gt;</span><br><span class="line">        .box &#123;</span><br><span class="line">            width: 800px;</span><br><span class="line">            height: 400px;</span><br><span class="line">            border: 1px solid black;</span><br><span class="line">            margin: auto; /* box 居中*/</span><br><span class="line">            /* 使用弹性布局 */</span><br><span class="line">            display: flex;</span><br><span class="line">            /*flex-flow: row nowrap;*/</span><br><span class="line">            /*flex-flow: column wrap;*/</span><br><span class="line">            flex-flow: column-reverse wrap-reverse;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .box div &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            border: 1px solid red;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;4&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;5&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;6&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;7&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;8&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;9&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】justify-content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;`````python</span><br><span class="line"># 1 justify-content属性定义了项目在主轴上的对齐方式</span><br><span class="line"># 2  6个值，具体对齐方式与轴的方向有关。下面假设主轴为从左到右</span><br><span class="line">justify-content: flex-start | flex-end | center | space-between | space-around | space-evenly;</span><br><span class="line">    </span><br><span class="line">    flex-start（默认值）：左对齐</span><br><span class="line">    flex-end：右对齐</span><br><span class="line">    center： 居中</span><br><span class="line">    space-between：两端对齐，项目之间的间隔都相等。</span><br><span class="line">    space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。</span><br><span class="line">    space-evenly：项目与项目之间，项目与边框之间的间隔都相等</span><br></pre></td></tr></table></figure>

<ul>
<li>justify-content: flex-start(左对齐:默认值)</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014100102-17259551882831.png" alt="image-20240408014100102"></p>
<ul>
<li>justify-content: flex-end;右对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014202668.png" alt="image-20240408014202668"></p>
<ul>
<li>justify-content: center; 居中</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014336178.png" alt="image-20240408014336178"></p>
<ul>
<li>justify-content: space-between;两端对齐，项目之间的间隔都相等</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014428393.png" alt="image-20240408014428393"></p>
<ul>
<li>justify-content: space-around;每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014526892.png" alt="image-20240408014526892"></p>
<ul>
<li>justify-content: space-evenly;项目与项目之间，项目与边框之间的间隔都相等</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014618860.png" alt="image-20240408014618860"></p>
````html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .box {
            width: 800px;
            height: 400px;
            border: 1px solid black;
            margin: auto; /* box 居中*/
            /* 使用弹性布局 */
            display: flex;
            flex-flow: row wrap;
            /*决定了，主轴的方向*/
            /*justify-content: flex-start; !* 左对齐 *!*/
            /*justify-content: flex-end; !* 右对齐 *!*/
            /*justify-content: center; !* 居中 *!*/
            justify-content: space-between; /* 两端对齐，项目之间的间隔都相等 */
            /*justify-content: space-around; !*每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍*!*/
            /*justify-content: space-evenly; !*项目与项目之间，项目与边框之间的间隔都相等*!*/
        }

        .box div {
            width: 100px;
            height: 100px;
            background-color: pink;
            border: 1px solid red;

        }
    </style>
</head>
<body>
<div class="box">
    <div>1</div>
    <div>2</div>
    <div>3</div>

</div>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【5】align-items</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 1 align-items属性定义项目在交叉轴上如何对齐。</span><br><span class="line"># 2 align-items: flex-start | flex-end | center | baseline | stretch   5个值</span><br><span class="line">    flex-start：交叉轴的起点对齐。</span><br><span class="line">    flex-end：交叉轴的终点对齐。</span><br><span class="line">    center：交叉轴的中点对齐。</span><br><span class="line">    baseline：项目的第一行文字的基线对齐（换了主轴感觉有问题）</span><br><span class="line">    stretch（默认值）：如果项目未设置高度或设为 auto，将占满整个容器的高度</span><br></pre></td></tr></table></figure>

<ul>
<li>align-items:flex-start;交叉轴的起点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408014618860-17259553389182.png" alt="image-20240408014618860"></p>
<ul>
<li>align-items:flex-end;交叉轴的终点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408015107487.png" alt="image-20240408015107487"></p>
<ul>
<li>align-items:center;交叉轴的中点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408015150725.png" alt="image-20240408015150725"></p>
<ul>
<li>align-items:baseline;项目的第一行文字的基线对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408015749835.png" alt="image-20240408015749835"></p>
<ul>
<li>align-items:stretch;（默认值）如果项目未设置高度或设为 auto，将占满整个容器的高度</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408015900783.png" alt="image-20240408015900783"></p>
````html
    <style>
        .box {
            width: 800px;
            height: 400px;
            border: 1px solid black;
            margin: auto; /* box 居中*/
            /* 使用弹性布局 */
            display: flex;
            flex-flow: column wrap;
            /*justify-content: flex-start; !* 左对齐 *!*/
            /*justify-content: flex-end; !* 右对齐 *!*/
            /*justify-content: center; !* 居中 *!*/
            justify-content: space-between; /* 两端对齐，项目之间的间隔都相等 */
            /*justify-content: space-around; !*每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍*!*/
            /*justify-content: space-evenly; !*项目与项目之间，项目与边框之间的间隔都相等*!*/

            /*align-items: flex-start; !*交叉轴的起点对齐*!*/
            /*align-items: flex-end; !*交叉轴的终点对齐*!*/
            /*align-items: center; !*交叉轴的中点对齐*!*/
            align-items: baseline; /*项目的第一行文字的基线对齐*/
        }

        .box div {
            width: 100px;
            height: 100px;
            background-color: pink;
            border: 1px solid red;

        }

        .box div:nth-child(1) {
            padding-top: 10px;
        }

        .box div:nth-child(2) {
            padding-top: 15px;
        }

        .box div:nth-child(4) {
            padding-top: 20px;
        }
    </style>


<div class="box">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>

</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【6】align-content</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 1 align-content属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</span><br><span class="line">	-允许项目换行【flex-wrap: wrap】，使用align-content属性的前提，否则align-content属性不生效</span><br><span class="line"># 2 align-content: flex-start | flex-end | center | space-between | space-around | stretch; 6个值</span><br><span class="line">    flex-start：与交叉轴的起点对齐。</span><br><span class="line">    flex-end：与交叉轴的终点对齐。</span><br><span class="line">    center：与交叉轴的中点对齐。</span><br><span class="line">    space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。</span><br><span class="line">    space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</span><br><span class="line">    stretch（默认值）：轴线占满整个交叉轴。</span><br><span class="line"></span><br><span class="line">#3 align-content的属性值和前面的都一样， 只需要注意在使用align-content的属性之前一定要加上 flex-wrap: wrap;属性</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-start：与交叉轴的起点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020303584.png" alt="image-20240408020303584"></p>
<ul>
<li>flex-end：与交叉轴的终点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020434797.png" alt="image-20240408020434797"></p>
<ul>
<li>center：与交叉轴的中点对齐</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020502393.png" alt="image-20240408020502393"></p>
<ul>
<li>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020727882.png" alt="image-20240408020727882"></p>
<ul>
<li>space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020749525.png" alt="image-20240408020749525"></p>
<ul>
<li>stretch（默认值）：轴线占满整个交叉轴</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240408020928428.png" alt="image-20240408020928428"></p>
````html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .box {
            width: 800px;
            height: 400px;
            border: 1px solid black;
            margin: auto; /* box 居中*/
            /* 使用弹性布局 */
            display: flex;
            flex-flow: row wrap;

            /* flex-start：与交叉轴的起点对齐。 */
            /*align-content: flex-start;*/
            /* flex-end：与交叉轴的终点对齐。 */
            /*align-content: flex-end;*/
            /*!* center：与交叉轴的中点对齐。 *!*/
            /*align-content: center;*/
            /*!* space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。 *!*/
            /*align-content: space-between;*/
            /*!* space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。 *!*/
            /*align-content: space-around;*/
            /* !* stretch（默认值）：轴线占满整个交叉轴。 *!*/
            align-content: stretch;
        }

        .box div {
            width: 100px;
            height: 100px;  /*align-content: stretch  不设置高度*/
            background-color: pink;
            border: 1px solid red;

        }


    </style>
</head>
<body>
<div class="box">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>

</div>
</body>
</html>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【三】项目样式的属性</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 六个项目的属性</span><br><span class="line">	- order：定义项目的排列顺序，数值越小，排列越靠前，默认为零</span><br><span class="line">    - flex-grow：定义项目的放大比例，默认为0，即如何存在剩余的空间，也不放大</span><br><span class="line">    - </span><br></pre></td></tr></table></figure>

<h2 id="【1】order属性-控制项目的排列顺序">【1】order属性-----控制项目的排列顺序</h2>
````python
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````html</span><br></pre></td></tr></table></figure>

<h2 id="【2】flex-grow属性">【2】flex-grow属性</h2>
<h2 id="【3】flex-shrink属性">【3】flex-shrink属性</h2>
<h2 id="【4】flex-basls属性">【4】flex-basls属性</h2>
<h2 id="【5】flex属性">【5】flex属性</h2>
<h2 id="【6】align-self属性">【6】align-self属性</h2>
<h1>【四】案例</h1>
<h2 id="【1】元素垂直居中">【1】元素垂直居中</h2>
<h2 id="【2】圣杯布局">【2】圣杯布局</h2>
<h2 id="【3】小米商城案例">【3】小米商城案例</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
