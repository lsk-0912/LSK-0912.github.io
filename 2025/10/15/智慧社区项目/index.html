<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="【一】项目介绍 &#96;&#96;&#96;&#96;python # 项目名：智慧社区 	-欢迎页面 	-首页     	-轮播图         -公告         -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城    -信息采集页面 		-采集人数    -采集详情页面    -采集统计页面    -人脸检测页面    -语音识别页面    -积分商城页面    -活动 		-活动列表     	-报名">
<meta property="og:type" content="article">
<meta property="og:title" content="智慧社区项目">
<meta property="og:url" content="https://aurora-lsk.asia/2025/10/15/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="Aurora博客">
<meta property="og:description" content="【一】项目介绍 &#96;&#96;&#96;&#96;python # 项目名：智慧社区 	-欢迎页面 	-首页     	-轮播图         -公告         -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城    -信息采集页面 		-采集人数    -采集详情页面    -采集统计页面    -人脸检测页面    -语音识别页面    -积分商城页面    -活动 		-活动列表     	-报名">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155119604.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240913190942906.png">
<meta property="article:published_time" content="2025-10-15T03:34:56.000Z">
<meta property="article:modified_time" content="2025-10-15T08:41:50.632Z">
<meta property="article:author" content="Aurora">
<meta property="article:tag" content="Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155119604.png">

<link rel="canonical" href="https://aurora-lsk.asia/2025/10/15/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>智慧社区项目 | Aurora博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Aurora博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Aurora">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aurora博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          智慧社区项目
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：16:41:50" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1>【一】项目介绍</h1>
````python
# 项目名：智慧社区
	-欢迎页面
	-首页
    	-轮播图
        -公告
        -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城
   -信息采集页面
		-采集人数
   -采集详情页面
   -采集统计页面
   -人脸检测页面
   -语音识别页面
   -积分商城页面
   -活动
		-活动列表
    	-报名活动
        -加载更多
   -公告
		-公告列表
   -我的
		-信息展示
   -登录
	-微信快速登录
    -短信验证码登录
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">![image-20240418171500682](D:\pycharm\Temporary_notes\图片\image-20240418171500682.png)![image-20240418171542255](D:\pycharm\Temporary_notes\图片\image-20240418171542255.png)![image-20240418171613009](D:\pycharm\Temporary_notes\图片\image-20240418171613009.png)![image-20240418172048680](D:\pycharm\Temporary_notes\图片\image-20240418172048680.png)</span><br><span class="line"></span><br><span class="line"># 【二】项目创建</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 前端用微信小程序端写：smart_front</span><br><span class="line">	- 直接创建即可，不使用云服务，不选择模板</span><br><span class="line">    - 将创建好的项目修改一下，改成最干净的</span><br><span class="line">    </span><br><span class="line"># 后端用django和drf写：smart_api</span><br><span class="line">	- 后端我们使用虚拟环境创建fdjango项目</span><br><span class="line">    - 创建虚拟环境，使用pycharm或命令创建</span><br><span class="line">    - 配置环境和mysql和目录的结构</span><br></pre></td></tr></table></figure>

<h1>【三】小程序欢迎页面</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155119604.png" alt="image-20240912155119604"></p>
<h2 id="【1】分析">【1】分析</h2>
````python
# 小程序一打开，就会显示一个广告页面
	-点击会跳转到广告--》跳转内部页面--》到广告的页面
    -广告图片充满全屏，后台控制更换
    -定时器--》3s后----跳转到首页tab
    - 也可以直接点击跳过，进入到首页
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】写欢迎页面</span><br><span class="line"></span><br><span class="line">### （1）`wxml`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````xml</span><br><span class="line">&lt;!-- 欢迎的广告 --&gt;</span><br><span class="line">&lt;view class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;text bindtap=&quot;doJump&quot; class=&quot;jump&quot;&gt;跳过&#123;&#123;seconds&#125;&#125;秒&lt;/text&gt;</span><br><span class="line">  &lt;image class=&quot;img&quot; src=&quot;&#123;&#123;image&#125;&#125;&quot; /&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<h3 id="（2）js">（2）<code>js</code></h3>
````js
// 这里将请求的后端的地址进行了封装
import api from '../../conf/settings'
Page({

  data: {
    seconds:3,
    image:'/images/bg/splash.png'
  },
  // 点击跳过的时候，跳转到Tab首页
  doJump(){
    wx.switchTab({
      url: '/pages/index/index',
    })
  },
  // 我们的广告展示事件设置3秒钟
  // 三秒后自动跳过
  onLoad(options) {
    // 与后端发请求,得到首页图片
    wx.request({
      url: api.welcome,
      method:"GET",
      success:res=>{
        this.setData({image:res.data[0].img})
      }
    })

      // 启动一个定时器
      // instance:用于存储定时器的 ID
      var instance = setInterval(()=>{
        if(this.data.seconds<=0){
            // 清除定时器
            clearInterval(instance)
            // 跳转到首页
            wx.switchTab({
              url: '/pages/index/index',
            })
        }else{
          // 时间减1，附加响应式
          this.setData({seconds:this.data.seconds - 1})
        }
      },1000)
  },
  
})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （3）`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```css</span><br><span class="line">page&#123;</span><br><span class="line">	height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">.container .img&#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.jump&#123;</span><br><span class="line">  font-size: 30rpx;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 600rpx;</span><br><span class="line">  top: 20rpx;</span><br><span class="line">  background-color: #dddddd;</span><br><span class="line">  padding: 10rpx 20rpx;</span><br><span class="line">  border-radius: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （4）后端加载欢迎页面</span><br><span class="line"></span><br><span class="line">#### [1]数据库</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 数据库----将数据库的用户名和密码添加到环境变量中</span><br><span class="line">mysql_user = os.environ.get(&quot;MysqlUser&quot;, &quot;luffy&quot;)</span><br><span class="line">mysql_psw = os.environ.get(&quot;MysqlPSW&quot;, &quot;Luffy123?&quot;)</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">        &#x27;ENGINE&#x27;: &#x27;django.db.backends.mysql&#x27;,</span><br><span class="line">        # 数据库IP地址</span><br><span class="line">        &quot;HOST&quot;: &quot;localhost&quot;,</span><br><span class="line">        # 数据库端口</span><br><span class="line">        &quot;PORT&quot;: 3308,</span><br><span class="line">        # 数据库登入名</span><br><span class="line">        &quot;USER&quot;: mysql_user,</span><br><span class="line">        # 数据库密码</span><br><span class="line">        &quot;PASSWORD&quot;: mysql_psw,</span><br><span class="line">        # 数据库名字--&gt;不要用DATABASE,用NAME</span><br><span class="line">        &quot;NAME&quot;: &quot;smart&quot;,</span><br><span class="line">        # 数据库编码格式</span><br><span class="line">        &quot;CHARSET&quot;: &quot;utf8mb4&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-表模型">[2]表模型</h4>
````python
from django.db import models


# 欢迎首页表
class Welcome(models.Model):
    # 开启media访问----settings中配置----url中配置
    # 安装Pillow 模块
    img = models.ImageField(upload_to='welcome', default='slash.png', verbose_name='欢迎图片')
    order = models.IntegerField(verbose_name='图片顺序')
    create_time = models.DateTimeField(auto_now=True, verbose_name='创建时间')
    is_delete = models.BooleanField(default=False, verbose_name='是否删除')

    class Meta:
        db_table = 'welcome'
        verbose_name = '欢迎图片'
        verbose_name_plural = verbose_name
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### [3]开启media访问</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">########settings.py##</span><br><span class="line"># 开启media访问</span><br><span class="line">MEDIA_URL = &#x27;/media/&#x27;</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, &#x27;media&#x27;)</span><br><span class="line"></span><br><span class="line">#########总路由###</span><br><span class="line">path(&#x27;media/&lt;path:path&gt;&#x27;, serve, &#123;&#x27;document_root&#x27;: settings.MEDIA_ROOT&#125;),</span><br></pre></td></tr></table></figure>

<h4 id="4-视图函数">[4]视图函数</h4>
````python
from rest_framework.mixins import ListModelMixin
from rest_framework.viewsets import GenericViewSet
from .models import Welcome
from .serializer import WelcomeSerializer

# 欢迎用户的首页的接口
class WelcomeView(GenericViewSet, ListModelMixin):
    # 需要筛选，前端只要一张
    queryset = Welcome.objects.all().order_by("order")[:1]
    serializer_class = WelcomeSerializer
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### [5]序列化类</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class WelcomeSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Welcome</span><br><span class="line">        # 前端只要广告的图片</span><br><span class="line">        fields = [&quot;id&quot;, &quot;img&quot;]</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【四】首页</span><br><span class="line"></span><br><span class="line">![image-20240912155146353](D:\pycharm\Temporary_notes\图片\image-20240912155146353.png)</span><br><span class="line"></span><br><span class="line">## 【1】`app.json`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;pages&quot;: [</span><br><span class="line">     &quot;pages/welcome/welcome&quot;,  // 欢迎页面</span><br><span class="line">      &quot;pages/index/index&quot;,    // 首页</span><br><span class="line">      &quot;pages/my/my&quot;,    // 我的</span><br><span class="line">      &quot;pages/activity/activity&quot;,  // 活动tab页</span><br><span class="line">      &quot;pages/notice/notice&quot;  // 公告tab页</span><br><span class="line">  ],</span><br><span class="line">    // title头</span><br><span class="line">  &quot;window&quot;: &#123;</span><br><span class="line">    &quot;navigationBarTitleText&quot;: &quot;智慧社区&quot;,</span><br><span class="line">    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,   // 颜色</span><br><span class="line">    &quot;enablePullDownRefresh&quot;: false,    // 是否可以下拉</span><br><span class="line">    &quot;backgroundColor&quot;: &quot;#00FFFF&quot;,   // 颜色</span><br><span class="line">    &quot;backgroundTextStyle&quot;: &quot;light&quot;,  // 样式</span><br><span class="line">    &quot;navigationBarTextStyle&quot;: &quot;black&quot;  // 导航栏中使用的颜色</span><br><span class="line">  &#125;,</span><br><span class="line">    // tab页</span><br><span class="line">  &quot;tabBar&quot;: &#123;</span><br><span class="line">    &quot;selectedColor&quot;: &quot;#1c1c1b&quot;,</span><br><span class="line">    &quot;position&quot;: &quot;bottom&quot;,</span><br><span class="line">    &quot;list&quot;: [&#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/index/index&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;首页&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;images/icon/home.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;images/icon/home-o.png&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/activity/activity&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;活动&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;images/icon/aid.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;images/icon/aid-o.png&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/notice/notice&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;公告&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;images/icon/circle.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;images/icon/circle-o.png&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/my/my&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;我的&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;images/icon/my.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;images/icon/my-o.png&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="【2】wxml">【2】<code>wxml</code></h2>
```xml
<view class="container">
  <!-- 轮播图 -->
  <view class="banner">
    <swiper autoplay indicator-dots circular indicator-color='#FFFFF' interval='3000'>
      <swiper-item  wx:for="{{image}}" wx:key="*this">
        <image src="{{item.img}}" mode="widthFix" />
      </swiper-item>
    </swiper>
  </view>

  <!-- 通知 -->
  <van-notice-bar left-icon="volume-o" text="{{title}}" />

  <!-- 六宫格 -->
  <van-grid column-num="3">
    <van-grid-item icon="/images/menu/小黄鸡.png" text="信息采集" bind:click="gotoCollection"/>
    <van-grid-item icon="/images/menu/社区活动.png" text="社区活动" bind:click="gotoActivity"/>
    <van-grid-item icon="/images/menu/人脸检测.png" text="人脸检测" bind:click="gotoFace"/>
    <!-- 可以根据需要添加更多的快捷入口 -->
    <van-grid-item icon="/images/menu/语音识别.png" text="语音识别" bind:click="gotoVoice"/>
    <van-grid-item icon="/images/menu/Heart beat.png" text="心率检测" bind:click="gotoHeart"/>
    <van-grid-item icon="/images/menu/我的_积分商城_48.png" text="积分商城" bind:click="gotoGoods"/>
  </van-grid>

<!-- 底部的信息 -->
<view class="bottom">
  <view>
    <image src="/images/home/cute_1.jpg" mode="scaleToFill" />
  </view>
  <view>
    <image src="/images/home/cute_2.jpg" mode="scaleToFill" />
  </view>
  <view>
    <image src="/images/home/cute_3.jpg" mode="scaleToFill" />
  </view>
  <view>
    <image src="/images/home/cute_4.jpg" mode="scaleToFill" />
  </view>

</view>
</view>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````css</span><br><span class="line">/* 轮播图的图片 */</span><br><span class="line">.banner image&#123;</span><br><span class="line">  width: 100%; /* 图片宽度拉伸至容器宽度 */</span><br><span class="line">  height: 100%; /* 图片高度拉伸至容器高度 */</span><br><span class="line">  object-fit: cover; /* 图片将覆盖整个容器区域，可能被裁剪 */</span><br><span class="line">&#125;</span><br><span class="line">/* 底部 */</span><br><span class="line">.bottom&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-evenly;</span><br><span class="line">  margin-top: 20rpx;</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">/* 底部的img */</span><br><span class="line">.bottom&gt;view&gt;image&#123;</span><br><span class="line">  width: 345rpx;</span><br><span class="line">  height: 200rpx;</span><br><span class="line">&#125;</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】`js`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```js</span><br><span class="line">import api from &quot;../../conf/settings&quot;</span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    image:[&quot;../../images/banner/banner1.png&quot;],</span><br><span class="line">    title:&quot;&quot;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 六个跳转页面</span><br><span class="line">  gotoCollection()&#123;</span><br><span class="line">      wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/second/collection/collection&#x27;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoFace()&#123;</span><br><span class="line">      wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/second/face/face&#x27;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoVoice()&#123;</span><br><span class="line">      wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/second/voice/voice&#x27;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoActivity()&#123;</span><br><span class="line">      // 跳转到tab页面</span><br><span class="line">      wx.switchTab(&#123;</span><br><span class="line">          url: &#x27;/pages/activity/activity&#x27;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoHeart()&#123;</span><br><span class="line">      wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/second/heart/heart&#x27;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    gotoGoods()&#123;</span><br><span class="line">      wx.navigateTo(&#123;</span><br><span class="line">        url: &#x27;/pages/second/goods/goods&#x27;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面加载</span><br><span class="line">   */</span><br><span class="line">  onLoad: function (options) &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: api.banner_notice,</span><br><span class="line">      method:&quot;GET&quot;,</span><br><span class="line">      success:res=&gt;&#123;</span><br><span class="line">        if(res.data.code==100)&#123;</span><br><span class="line">          this.setData(&#123;image:res.data.banner,title:res.data.notice.title&#125;)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          console.log(&quot;报错！！&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="【5】app-json">【5】<code>app.json</code></h2>
````json
{
    "pages": [
        
        "pages/welcome/welcome",
        "pages/index/index",
        "pages/my/my",
        "pages/activity/activity",
        "pages/notice/notice",
        // 这里多了五个页面，还有一个跳转到tab页
        "pages/second/collection/collection",
        "pages/second/face/face",
        "pages/second/voice/voice",
        "pages/second/heart/heart",
        "pages/second/goods/goods"
    ],
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【五】首页轮播图和公告接口</span><br><span class="line"></span><br><span class="line">![image-20240912155041765](D:\pycharm\Temporary_notes\图片\image-20240912155041765.png)</span><br><span class="line"></span><br><span class="line">## 【1】后端</span><br><span class="line"></span><br><span class="line">### （1）`models.py`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 轮播图表</span><br><span class="line">class Banner(models.Model):</span><br><span class="line">    img = models.ImageField(upload_to=&#x27;banner&#x27;, default=&#x27;banner1.png&#x27;, verbose_name=&#x27;轮播图&#x27;)</span><br><span class="line">    order = models.IntegerField(verbose_name=&#x27;顺序&#x27;)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=True, verbose_name=&#x27;创建时间&#x27;)</span><br><span class="line">    is_delete = models.BooleanField(default=False, verbose_name=&#x27;是否删除&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;Banner&#x27;</span><br><span class="line">        verbose_name = &#x27;轮播图&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 公告表</span><br><span class="line">class Notice(models.Model):</span><br><span class="line">    title = models.CharField(max_length=255, verbose_name=&#x27;公共标题&#x27;)</span><br><span class="line">    content = models.TextField(verbose_name=&#x27;内容&#x27;)</span><br><span class="line">    img = models.ImageField(upload_to=&#x27;notice&#x27;, default=&#x27;notice1.png&#x27;, verbose_name=&#x27;公告照片&#x27;)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=True, verbose_name=&#x27;创建时间&#x27;)</span><br><span class="line">    is_delete = models.BooleanField(default=False, verbose_name=&#x27;是否删除&#x27;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;Notice&#x27;</span><br><span class="line">        verbose_name = &#x27;公告表&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br></pre></td></tr></table></figure>

<h3 id="（2）view-py">（2）<code>view.py</code></h3>
````python
# 轮播图和公告接口
class BannerNoticeView(GenericViewSet, ListModelMixin):
    queryset = Banner.objects.filter(is_delete=False).order_by("order")[:2]
    serializer_class = BannerSerializer

    def list(self, request, *args, **kwargs):
        res = super().list(request, *args, **kwargs)
        # 查询公告信息---查询最早时间的一个
        notices = Notice.objects.all().order_by("create_time").first()
        # 序列化
        serializer = NoticeSerializer(instance=notices)
        return Response({"code": "100", "msg": "查询成功", "banner": res.data, "notice": serializer.data})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （3）`serializer.py`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">class BannerSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Banner</span><br><span class="line">        fields = &quot;__all__&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class NoticeSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Notice</span><br><span class="line">        fields = [&quot;id&quot;, &quot;title&quot;]</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【六】个人中心</span><br><span class="line"></span><br><span class="line">![image-20240912154956752](D:\pycharm\Temporary_notes\图片\image-20240912154956752.png)</span><br><span class="line"></span><br><span class="line">## 【0】vant样式库----------笔记中有写</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 访问地址：</span><br><span class="line">	- https://vant-ui.github.io/vant/#/zh-CN</span><br><span class="line"># 安装npm</span><br><span class="line">	- npm init -y</span><br><span class="line"># 安装vant</span><br><span class="line">	- npm i @vant/weapp -S --production</span><br><span class="line"># 将 app.json 中的 &quot;style&quot;: &quot;v2&quot; 去除</span><br><span class="line"># 使用那个样式在app.json中注册或在xxx.json中注册</span><br></pre></td></tr></table></figure>

<h2 id="【1】json">【1】<code>json</code></h2>
````json
  "usingComponents": {
      // 这里我们使用了vant的样式库
    "van-notice-bar": "@vant/weapp/notice-bar/index",
    "van-grid": "@vant/weapp/grid/index",
    "van-grid-item": "@vant/weapp/grid-item/index"
  },
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】`wxml`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````html</span><br><span class="line"># 判断是否登录过</span><br><span class="line">&lt;block wx:if=&quot;&#123;&#123;userInfo==null&#125;&#125;&quot;&gt;</span><br><span class="line"> &lt;navigator class=&quot;login-area&quot; url=&quot;/pages/login/login&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;btn&quot;&gt;一键登录&lt;/view&gt;</span><br><span class="line">  &lt;/navigator&gt; </span><br><span class="line">&lt;/block&gt;</span><br><span class="line">&lt;block wx:else&gt;</span><br><span class="line">&lt;view class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;!-- 头部 --&gt;</span><br><span class="line">  &lt;view class=&quot;header&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;profile-info&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;avatar&quot; src=&quot;../../images/head/花香 美女 .png&quot; mode=&quot;aspectFill&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view class=&quot;numbers&quot;&gt;</span><br><span class="line">        &lt;view class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;text&gt;1000&lt;/text&gt;</span><br><span class="line">          &lt;text&gt;积分&lt;/text&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">        &lt;view class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;text&gt;55&lt;/text&gt;</span><br><span class="line">          &lt;text&gt;其他&lt;/text&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">        &lt;view class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;text&gt;77&lt;/text&gt;</span><br><span class="line">          &lt;text&gt;其他&lt;/text&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">        &lt;view class=&quot;row&quot;&gt;</span><br><span class="line">          &lt;text&gt;56&lt;/text&gt;</span><br><span class="line">          &lt;text&gt;其他&lt;/text&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 个人信息项 --&gt;</span><br><span class="line">  &lt;view class=&quot;info-section&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;info-item&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;info-icon&quot; src=&quot;../../images/head/昵称.png&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view class=&quot;info-text&quot;&gt;个人资料&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;info-item&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;info-icon&quot; src=&quot;../../images/head/昵称.png&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view class=&quot;info-text&quot;&gt;设置&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;info-item&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;info-icon&quot; src=&quot;../../images/head/昵称.png&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view type=&quot;info-text&quot; plain open-type=&quot;contact&quot;&gt;联系客服&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;info-item&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;info-icon&quot; src=&quot;../../images/head/昵称.png&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view type=&quot;info-text&quot; plain open-type=&quot;contact&quot;&gt;联系客服&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;view class=&quot;info-item&quot;&gt;</span><br><span class="line">      &lt;image class=&quot;info-icon&quot; src=&quot;../../images/head/昵称.png&quot; mode=&quot;aspectFit&quot;&gt;&lt;/image&gt;</span><br><span class="line">      &lt;view type=&quot;info-text&quot; plain open-type=&quot;contact&quot;&gt;联系客服&lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    </span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 退出登录 --&gt;</span><br><span class="line">  &lt;view class=&quot;logout-button&quot;&gt;</span><br><span class="line">    &lt;button class=&quot;logout-btn&quot; bindtap=&quot;handleLogout&quot;&gt;退出登录&lt;/button&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【3】wxss">【3】<code>wxss</code></h2>
```css
/* 全局样式 */
.container {
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: #f4f4f4;
}

/* 头部样式 */
.header {
  position: relative;
  height: 200px;
  background-color: #007bff;
  color: #fff;
  text-align: center;
  padding-top: 30px;
  border-bottom-left-radius: 20px;
  border-bottom-right-radius: 20px;
}

.profile-info {
  margin-top: 20px;
}

.avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 2px solid #fff;
}

.name {
  font-size: 20px;
  font-weight: bold;
  color: #fff;
}
.name1{
  font-size: 16px;
  font-weight: bold;
  color: #fff;
}

.email {
  font-size: 14px;
  margin-top: 5px;
}

.header-bg {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: rgba(0, 0, 0, 0.2);
}

/* 信息项样式 */
.info-section {
  margin: 20px;
  border-radius: 10px;
  background-color: #fff;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.info-item {
  display: flex;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid #eee;
}

.info-item:last-child {
  border-bottom: none;
}

.info-icon {
  width: 24px;
  height: 24px;
  margin-right: 15px;
}

.info-text {
  font-size: 16px;
}

/* 退出登录按钮样式 */
.logout-button {
  margin: 20px;
  text-align: center;
}

.logout-btn {
  background-color: #ff4d4f;
  color: #fff;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  font-size: 16px;
}

/* 一键登录 */
page{
  height: 100%;
}
.login-area{
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.login-area .btn{
  width: 200rpx;
  height: 200rpx;
  border-radius: 500%;
  background-color: #5cb85c;
  color: white;
  
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}

/*  */
.numbers{
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  font-size: 28rpx;
  padding: 40rpx;
  padding-bottom: 0rpx;
}

.row{
   display: flex;
  flex-direction: column;
  align-items: center;
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【4】`js`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````js</span><br><span class="line">Page(&#123;</span><br><span class="line">  handleLogout() &#123;</span><br><span class="line">    wx.showModal(&#123;</span><br><span class="line">      title: &#x27;确认退出&#x27;,</span><br><span class="line">      content: &#x27;您确定要退出登录吗？&#x27;,</span><br><span class="line">      success: (res) =&gt; &#123;</span><br><span class="line">        if (res.confirm) &#123;</span><br><span class="line">          // 这里可以添加退出登录的逻辑</span><br><span class="line">          wx.showToast(&#123;</span><br><span class="line">            title: &#x27;已退出登录&#x27;,</span><br><span class="line">            icon: &#x27;success&#x27;,</span><br><span class="line">            duration: 2000</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【七】信息采集页面</span><br><span class="line"></span><br><span class="line">## 【1】新建一个跳转的信息采集页面</span><br><span class="line"></span><br><span class="line">- 点击前端的信息采集按钮，跳转到采集信息页面</span><br><span class="line"></span><br><span class="line">![image-20240422172556754](D:\pycharm\Temporary_notes\图片\image-20240422172556754.png)</span><br><span class="line"></span><br><span class="line">## 【2】后端</span><br><span class="line"></span><br><span class="line">### （1）`view.py`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">from datetime import datetime</span><br><span class="line">from rest_framework.mixins import ListModelMixin, DestroyModelMixin</span><br><span class="line">from rest_framework.response import Response</span><br><span class="line">from rest_framework.viewsets import GenericViewSet</span><br><span class="line">from .models import Collection</span><br><span class="line">from .serializer import CollectionSerializer</span><br><span class="line"></span><br><span class="line">class CollectionView(GenericViewSet, ListModelMixin, DestroyModelMixin):</span><br><span class="line">    # reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对象</span><br><span class="line">    queryset = Collection.objects.all().filter(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    def list(self, request, *args, **kwargs):</span><br><span class="line">        res = super().list(request, *args, **kwargs)</span><br><span class="line">        # 计算采集的多少人</span><br><span class="line">        today_count = len(self.get_queryset())</span><br><span class="line">        return Response(&#123;&quot;code&quot;: 100, &quot;msg&quot;: &quot;查看成功&quot;, &quot;collection&quot;: res.data, &quot;today_count&quot;: today_count&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="（2）serializer-py">（2）<code>serializer.py</code></h3>
````python
from rest_framework import serializers
from gather.models import Collection

class CollectionSerializer(serializers.ModelSerializer):
    class Meta:
        model = Collection
        fields = ["id", "name", "avatar", "area"]
        # 往深处取一层
        depth = 1
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### （3）`models.py`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># 采集表</span><br><span class="line">class Collection(models.Model):</span><br><span class="line">    name = models.CharField(max_length=255, verbose_name=&quot;姓名&quot;)</span><br><span class="line">    name_pinyin = models.CharField(max_length=255, verbose_name=&quot;姓名拼音&quot;)</span><br><span class="line">    # upload_to=&#x27;collection/%Y/%m/%d/&#x27;：这指定了媒体根目录中将存储上传图像的目录。该部分是一种基于日期的格式，可按年、月和日将图像组织到子目录中。例如collection/2024/09/11/，2024 年 9 月 11 日上传的图像将存储在</span><br><span class="line">    avatar = models.ImageField(upload_to=&#x27;collection/%Y/%m/%d/&#x27;, default=&#x27;default.png&#x27;, verbose_name=&#x27;头像&#x27;)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=True, verbose_name=&#x27;采集时间&#x27;)</span><br><span class="line">    area = models.ForeignKey(to=&#x27;Area&#x27;, null=True, verbose_name=&#x27;网格区域&#x27;, on_delete=models.CASCADE)</span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;collection&#x27;</span><br><span class="line">        verbose_name = &#x27;采集表&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 用户表</span><br><span class="line">class UserInfo(models.Model):</span><br><span class="line">    name = models.CharField(max_length=255, verbose_name=&quot;用户名&quot;)</span><br><span class="line">    avatar = models.FileField(verbose_name=&quot;头像&quot;, max_length=128, upload_to=&#x27;avatar&#x27;)</span><br><span class="line">    create_date = models.DateField(verbose_name=&quot;日期&quot;, auto_now_add=True)</span><br><span class="line">    score = models.IntegerField(verbose_name=&quot;积分&quot;, default=0)</span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &#x27;userinfo&#x27;</span><br><span class="line">        verbose_name = &#x27;用户表&#x27;</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line"># 区域表</span><br><span class="line">class Area(models.Model):</span><br><span class="line">    name = models.CharField(max_length=32, verbose_name=&#x27;网格区域名&#x27;)</span><br><span class="line">    desc = models.CharField(max_length=32, verbose_name=&#x27;网格简称&#x27;)</span><br><span class="line">    # 与用户表是一对多关系</span><br><span class="line">    user = models.ForeignKey(to=&#x27;UserInfo&#x27;, on_delete=models.CASCADE, null=True, verbose_name=&quot;负责用户&quot;)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        verbose_name_plural = &#x27;区域表&#x27;</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="【3】引入矢量图标库">【3】引入矢量图标库</h2>
```python
# 1 url:阿里巴巴矢量图标库
	- https://www.iconfont.cn/
	-注册成功
    
# 2 搜索想要的图标
	-加入购物车
    -在购物车中添加至项目
    
# 3 我的项目--项目设置--》打开base64

# 4 选择font class --》生成代码--》点击链接地址打开

# 5 把打开的链接地址内容复制到项目中
	-static/css/iconfont.wxss
    
# 6 在app.wxss中引入
@import "/static/css/iconfont.wxss";

# 7 在想用图标的位置，加入text组件
<text class="iconfont icon-anquan">
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【八】信息采集详情页面</span><br><span class="line"></span><br><span class="line">## 【1】小程序--拍照页页面</span><br><span class="line"></span><br><span class="line">- wxml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````xml</span><br><span class="line">&lt;!-- 相机组件 --&gt;</span><br><span class="line">&lt;!-- &#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;：控制相机的前置后置摄像头 --&gt;</span><br><span class="line">&lt;!-- flash闪关灯 --&gt;</span><br><span class="line">&lt;camera class=&quot;camera&quot;  device-position=&quot;&#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;&quot;  flash=&quot;off&quot; frame-size=&quot;medium&quot; &gt;&lt;/camera&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 按钮和旋转的图标 --&gt;</span><br><span class="line">&lt;view class=&quot;function&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;switch&quot;&gt; &lt;/view&gt;</span><br><span class="line">  &lt;!-- switchCamera：控制拍照的按键 --&gt;</span><br><span class="line">  &lt;view class=&quot;record&quot; bindtap=&quot;takePhoto&quot;&gt;</span><br><span class="line">    &lt;image src=&quot;/images/camera/record_on.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;!-- takePhoto：控制backFront --&gt;</span><br><span class="line">  &lt;view class=&quot;switch&quot; bindtap=&quot;switchCamera&quot;&gt;</span><br><span class="line">    &lt;image src=&quot;/images/camera/rotate-camera-white.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"> &lt;/view&gt;</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````js</span><br><span class="line">// pages/second/camera/camera.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    backFront: true</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  switchCamera() &#123;</span><br><span class="line">    // 反转摄像头</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      backFront: false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 获取照片</span><br><span class="line">  // 文档里面有</span><br><span class="line">  takePhoto() &#123;</span><br><span class="line">    // 获得拍的照片</span><br><span class="line">    const ctx = wx.createCameraContext()</span><br><span class="line">    // 将拍的照片上传到</span><br><span class="line">    ctx.takePhoto(&#123;</span><br><span class="line">      quality: &#x27;high&#x27;,</span><br><span class="line">      success: (res) =&gt; &#123;</span><br><span class="line">        // 获取照片 </span><br><span class="line">        //console.log(res);</span><br><span class="line">        // 对上一个页面中的值，进行修改</span><br><span class="line">        var pages = getCurrentPages();  // 拿到所有开放的页面：[index collection form camera]</span><br><span class="line">        var prevPage = pages[pages.length - 2];  // 得到form页面</span><br><span class="line">        // 把上个页面的图片位置设为刚刚拍的照</span><br><span class="line">        prevPage.setData(&#123;</span><br><span class="line">          avatar: res.tempImagePath</span><br><span class="line">        &#125;)</span><br><span class="line">        //跳转回上一个页面,默认返回上一个页面</span><br><span class="line">        wx.navigateBack(&#123;&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- wxss</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;`````css</span><br><span class="line">page&#123;</span><br><span class="line">	height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.camera&#123;</span><br><span class="line">  height: 80%;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.function&#123;</span><br><span class="line">  height: 20%;</span><br><span class="line">  background-color: black;</span><br><span class="line">  </span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: row;</span><br><span class="line">  justify-content: space-around;</span><br><span class="line">  align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.record image&#123;</span><br><span class="line">  width: 160rpx;</span><br><span class="line">  height: 160rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.switch&#123;</span><br><span class="line">  color: white;</span><br><span class="line">  width: 80rpx;</span><br><span class="line">  height: 80rpx;</span><br><span class="line">&#125;</span><br><span class="line">.switch image&#123;</span><br><span class="line">  width: 80rpx;</span><br><span class="line">  height: 80rpx;</span><br><span class="line">&#125;</span><br><span class="line">`````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】小程序--采集页页面</span><br><span class="line"></span><br><span class="line">- wxml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"></span><br><span class="line"> &lt;view class=&quot;avatar&quot;&gt;</span><br><span class="line">  &lt;image src=&#x27;&#123;&#123;avatar&#125;&#125;&#x27; bindtap=&quot;bindToCamera&quot;&gt;&lt;/image&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;view class=&quot;form&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;row-group&quot;&gt;</span><br><span class="line">    &lt;input placeholder=&quot;请填写姓名&quot; placeholder-class=&#x27;txt&#x27; model:value=&quot;&#123;&#123;name&#125;&#125;&quot; bindinput=&quot;bindNameChange&quot; /&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view class=&quot;picker-group&quot;&gt;</span><br><span class="line">    &lt;picker bindchange=&quot;bindPickerChange&quot; value=&quot;&#123;&#123;index&#125;&#125;&quot; range=&quot;&#123;&#123;objectArray&#125;&#125;&quot; range-key=&quot;name&quot;&gt;</span><br><span class="line">      &lt;view wx:if=&quot;&#123;&#123; index &gt; -1&#125;&#125;&quot; class=&quot;picker-txt picker&quot;&gt;当前网格：&#123;&#123;objectArray[index].name&#125;&#125;&lt;/view&gt;</span><br><span class="line">      &lt;view wx:else class=&quot;picker-txt&quot; &gt;请选择网格&lt;/view&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/picker&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">  &lt;view&gt;</span><br><span class="line">    &lt;button class=&quot;submit&quot; bindtap=&quot;postUser&quot; &gt; 提 交 &lt;/button&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```js</span><br><span class="line">import api from &quot;../../../conf/settings&quot;</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    avatar: &quot;../../../images/camera/camera.png&quot;,</span><br><span class="line">    objectArray: [],</span><br><span class="line">    // 默认-1的意思是，默认状态下什么都不选择</span><br><span class="line">    index: -1,</span><br><span class="line">    name: &#x27;&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 点击条状拍照页面</span><br><span class="line">  bindToCamera() &#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url: &#x27;/pages/second/camera/camera&#x27;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onLoad(options) &#123;</span><br><span class="line">    // 获得所有的网格</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: api.area,</span><br><span class="line">      method: &quot;GET&quot;,</span><br><span class="line">      success: res =&gt; &#123;</span><br><span class="line">        this.setData(&#123;objectArray:res.data&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 点击提交，提交到后端，保存采集信息</span><br><span class="line">  postUser()&#123;</span><br><span class="line">    // 提交等待，wx提高的样式</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: &#x27;提交中&#x27;,</span><br><span class="line">      mask:true,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    // 提交给后端文件使用这个</span><br><span class="line">    wx.uploadFile(&#123;</span><br><span class="line">      // 后端的请求地址</span><br><span class="line">      url: api.collection,</span><br><span class="line">      // 图片的文件</span><br><span class="line">      filePath: this.data.avatar,</span><br><span class="line">      // 照片的名字</span><br><span class="line">      name: &#x27;avatar&#x27;,</span><br><span class="line">      // 提交给后端的数据</span><br><span class="line">      formData: &#123;</span><br><span class="line">        // 姓名</span><br><span class="line">        &#x27;name&#x27;: this.data.name,</span><br><span class="line">        // 选择的网络，传给后端id</span><br><span class="line">        &#x27;area&#x27;: this.data.objectArray[this.data.index].id</span><br><span class="line">      &#125;,</span><br><span class="line">      success:rex=&gt;&#123;</span><br><span class="line">          // 上传成功，返回给上一个页面,默认返回上一个页面</span><br><span class="line">          wx.navigateBack()</span><br><span class="line">      &#125;,</span><br><span class="line">      complete() &#123;</span><br><span class="line">        // 为了关闭showLoading提示框</span><br><span class="line">        wx.hideLoading()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 检测输入的信息</span><br><span class="line">  bindPickerChange(e)&#123;</span><br><span class="line">    this.setData(&#123;index:e.detail.value&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 获得你输入的名字</span><br><span class="line">  bindNameChange(event)&#123;</span><br><span class="line">    this.setData(&#123;name:event.detail.value&#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>wxss</li>
</ul>
````css
.avatar{
  display: flex;
  flex-direction: column;
  align-items: center;
}

.avatar image {
  margin-top: 140rpx;
  width: 300rpx;
  height: 300rpx;
  border-radius: 30rpx;
  border: 1px solid #ddd;
}

.form{
  padding: 40rpx;
}

.form .row-group{
  padding: 10rpx 0;
  border-bottom: 1rpx solid #ddd;
  position: relative;
  margin-top: 30rpx;
}



.form .row-group text{
  font-size: 28rpx;
  padding:20rpx 0;
}

.form .row-group input{
  padding: 10rpx 0;
}

.form .row-group .txt{
  color: #ccc;
  font-size: 28rpx;
}

.form .picker-group{
  border-bottom: 1rpx solid #ddd;
}

.form .picker-group .picker-txt{
  color: #ccc;
  font-size: 28rpx;
  padding: 40rpx 0 20rpx 0;
}

.form .picker-group .picker{
  color: black;
}

.form .submit{
  margin-top: 80rpx;
  color: #fff;
  border: 2rpx solid #00c8b6;
  background-color: #00c8b6;
  font-size: 32rpx;
  font-weight: bold;
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】采集页面后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">############view</span><br><span class="line">class CollectionView(GenericViewSet, ListModelMixin, CommonDeleteModelMixin, CommonCreateModelMixin):</span><br><span class="line">    # reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对象</span><br><span class="line">    queryset = Collection.objects.all().filter(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    # 使用不同的序列化类</span><br><span class="line">    def get_serializer_class(self):</span><br><span class="line">        if self.action == &#x27;create&#x27;:</span><br><span class="line">            return CollectionSaveSerializer</span><br><span class="line">        else:</span><br><span class="line">            return CollectionSerializer</span><br><span class="line"></span><br><span class="line">    def list(self, request, *args, **kwargs):</span><br><span class="line">        res = super().list(request, *args, **kwargs)</span><br><span class="line">        # 计算采集的多少人</span><br><span class="line">        today_count = len(self.get_queryset())</span><br><span class="line">        return Response(&#123;&quot;code&quot;: 100, &quot;msg&quot;: &quot;查看成功&quot;, &quot;collection&quot;: res.data, &quot;today_count&quot;: today_count&#125;)</span><br><span class="line">    </span><br><span class="line"># 获取所有的网格</span><br><span class="line">class AreaView(GenericViewSet, ListModelMixin):</span><br><span class="line">    queryset = Area.objects.all()</span><br><span class="line">    serializer_class = AreaSerializer</span><br><span class="line">    # 这里应该写当前的所有登录的用户，重新list进行筛选</span><br><span class="line"></span><br><span class="line">    # 这里我们需要加入登入类</span><br><span class="line">    # def list(self, request, *args, **kwargs):</span><br><span class="line">    #     res = self.get_queryset().filter(user=request.user)</span><br><span class="line">    #     serializer = self.get_serializer(instance=res, many=True)</span><br><span class="line">    #     return APIResponse(sults = serializer.data)</span><br><span class="line">    </span><br><span class="line">#####################serializer</span><br><span class="line">class CollectionSaveSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Collection</span><br><span class="line">        fields = [&quot;name&quot;, &quot;avatar&quot;, &quot;area&quot;]</span><br><span class="line"></span><br><span class="line">    def create(self, validated_data):</span><br><span class="line">        # 我们需要使用pypinyin模块</span><br><span class="line">        # 我们还需要将人脸上传到百度人脸库上</span><br><span class="line">        print(validated_data)</span><br><span class="line">        validated_data[&quot;name_pinyin&quot;] = validated_data[&quot;name&quot;]</span><br><span class="line">        instance = super().create(validated_data)</span><br><span class="line">        return instance </span><br><span class="line">    </span><br><span class="line">class AreaSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Area</span><br><span class="line">        fields = [&quot;id&quot;, &quot;name&quot;, &quot;desc&quot;]</span><br></pre></td></tr></table></figure>

<h1>【九】人脸识别项目中集成</h1>
<h2 id="【1】使用步骤">【1】使用步骤</h2>
````python
# 1 注册百度人脸识别接口
https://cloud.baidu.com/product/face.html
# 2 免费领取额度：https://console.bce.baidu.com/ai/#/ai/face/overview/index

# 3 创建应用：https://console.bce.baidu.com/ai/#/ai/face/app/list

# 4 查看人脸库：https://console.bce.baidu.com/ai/#/ai/face/facelib/groupList~appId=4652887

# 5 sdk位置：https://ai.baidu.com/ai-doc/FACE/ek37c1qiz
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】简单使用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line"></span><br><span class="line">import base64</span><br><span class="line">from aip import AipFace</span><br><span class="line">from pypinyin import Style, lazy_pinyin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class BaiDuAI:</span><br><span class="line">    def __init__(self,APP_ID=&#x27;115551890&#x27;,API_KEY=&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;,SECRET_KEY=&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;):</span><br><span class="line">        &quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span><br><span class="line">        self.APP_ID = APP_ID</span><br><span class="line">        self.API_KEY = API_KEY</span><br><span class="line">        self.SECRET_KEY = SECRET_KEY</span><br><span class="line">        self.client = AipFace(self.APP_ID, self.API_KEY, self.SECRET_KEY)</span><br><span class="line"></span><br><span class="line">    def name_to_pinyin(self, text):</span><br><span class="line">        style = Style.TONE3</span><br><span class="line">        name_list = lazy_pinyin(text, style=style)</span><br><span class="line">        return &#x27;&#x27;.join(name_list)</span><br><span class="line"></span><br><span class="line">    # 上传人脸</span><br><span class="line">    def add_user(self):</span><br><span class="line">        data = base64.b64encode(open(&#x27;./lyf.png&#x27;, &#x27;rb&#x27;).read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        image = data</span><br><span class="line">        imageType = &quot;BASE64&quot;</span><br><span class="line">        groupId = &quot;100&quot;</span><br><span class="line">        userId = self.name_to_pinyin(&#x27;刘亦菲&#x27;)</span><br><span class="line">        &quot;&quot;&quot; 调用人脸注册 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.addUser(image, imageType, groupId, userId)</span><br><span class="line">        print(res)</span><br><span class="line"></span><br><span class="line">        &quot;&quot;&quot; 如果有可选参数 &quot;&quot;&quot;</span><br><span class="line">        # options = &#123;&#125;</span><br><span class="line">        # options[&quot;user_info&quot;] = &quot;彭于晏&quot;</span><br><span class="line">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span><br><span class="line">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span><br><span class="line">        # options[&quot;action_type&quot;] = &quot;REPLACE&quot;</span><br><span class="line">        #</span><br><span class="line">        # &quot;&quot;&quot; 带参数调用人脸注册 &quot;&quot;&quot;</span><br><span class="line">        # self.client.addUser(image, imageType, groupId, userId, options)</span><br><span class="line"></span><br><span class="line">    # 删除百度AI的人脸</span><br><span class="line">    def delete(self):</span><br><span class="line">        userId = &quot;gu3tian1le4&quot;</span><br><span class="line">        groupId = &quot;100&quot;</span><br><span class="line">        # 这个是你上传人脸的是后返回的token</span><br><span class="line">        faceToken = &quot;4992689fcbbd3cf9851ca2f87ebb6ad0&quot;</span><br><span class="line">        &quot;&quot;&quot; 调用人脸删除 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.faceDelete(userId, groupId, faceToken)</span><br><span class="line">        print(res)</span><br><span class="line"></span><br><span class="line">    # 匹配人脸</span><br><span class="line">    def search(self):</span><br><span class="line">        data = base64.b64encode(open(&#x27;./lyf.png&#x27;, &#x27;rb&#x27;).read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        image = data</span><br><span class="line">        imageType = &quot;BASE64&quot;</span><br><span class="line">        groupIdList = &quot;100,2&quot;</span><br><span class="line">        &quot;&quot;&quot; 调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        self.client.search(image, imageType, groupIdList)</span><br><span class="line">        &quot;&quot;&quot; 如果有可选参数 &quot;&quot;&quot;</span><br><span class="line">        options = &#123;&#125;</span><br><span class="line">        # 识别度</span><br><span class="line">        options[&quot;match_threshold&quot;] = 70</span><br><span class="line">        options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span><br><span class="line">        options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span><br><span class="line">        # 比对id号</span><br><span class="line">        # options[&quot;user_id&quot;] = &quot;233451&quot;</span><br><span class="line">        # 返回的数量</span><br><span class="line">        options[&quot;max_user_num&quot;] = 3</span><br><span class="line"></span><br><span class="line">        &quot;&quot;&quot; 带参数调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.search(image, imageType, groupIdList, options)</span><br><span class="line">        print(res)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    ai = BaiDuAI()</span><br><span class="line">    # ai.add_user()</span><br><span class="line">    # ai.delete()</span><br><span class="line">    ai.search()</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【3】集成到项目中</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">##########libs/baidu/baidu_ai.py</span><br><span class="line">import base64</span><br><span class="line"></span><br><span class="line">from aip import AipFace</span><br><span class="line">from aip import AipSpeech</span><br><span class="line">from pypinyin import lazy_pinyin, Style</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class BaiDuAI:</span><br><span class="line">    def __init__(self, APP_ID=&#x27;115551890&#x27;, API_KEY=&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;,</span><br><span class="line">                 SECRET_KEY=&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;):</span><br><span class="line">        &quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span><br><span class="line">        self.APP_ID = APP_ID</span><br><span class="line">        self.API_KEY = API_KEY</span><br><span class="line">        self.SECRET_KEY = SECRET_KEY</span><br><span class="line">        self.client = AipFace(self.APP_ID, self.API_KEY, self.SECRET_KEY)</span><br><span class="line"></span><br><span class="line">    def name_to_pinyin(self, text):</span><br><span class="line">        style = Style.TONE3</span><br><span class="line">        name_list = lazy_pinyin(text, style=style)</span><br><span class="line">        return &#x27;&#x27;.join(name_list)</span><br><span class="line"></span><br><span class="line">    def add_user(self, path, name, userId, groupId=100):</span><br><span class="line">        # image = base64.b64encode(open(path).read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        image = base64.b64encode(path.read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        imageType = &quot;BASE64&quot;</span><br><span class="line">        &quot;&quot;&quot; 调用人脸注册 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.addUser(image, imageType, groupId, userId)</span><br><span class="line"></span><br><span class="line">        # &quot;&quot;&quot; 如果有可选参数 &quot;&quot;&quot;</span><br><span class="line">        # options = &#123;&#125;</span><br><span class="line">        # options[&quot;user_info&quot;] = name</span><br><span class="line">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span><br><span class="line">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span><br><span class="line">        # options[&quot;action_type&quot;] = &quot;REPLACE&quot;</span><br><span class="line">        #</span><br><span class="line">        # &quot;&quot;&quot; 带参数调用人脸注册 &quot;&quot;&quot;</span><br><span class="line">        # res = self.client.addUser(image, imageType, groupId, userId, options)</span><br><span class="line">        print(res)</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line">    def search(self, img_obj):</span><br><span class="line">        image = base64.b64encode(img_obj.read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        image_type = &quot;BASE64&quot;</span><br><span class="line">        group_id_list = &quot;100,101&quot;</span><br><span class="line">        &quot;&quot;&quot; 调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.search(image, image_type, group_id_list)</span><br><span class="line">        # &quot;&quot;&quot; 如果有可选参数 &quot;&quot;&quot;</span><br><span class="line">        # options = &#123;&#125;</span><br><span class="line">        # options[&quot;match_threshold&quot;] = 70</span><br><span class="line">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span><br><span class="line">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span><br><span class="line">        # # options[&quot;user_id&quot;] = &quot;233451&quot;</span><br><span class="line">        # options[&quot;max_user_num&quot;] = 3</span><br><span class="line">        #</span><br><span class="line">        # &quot;&quot;&quot; 带参数调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        # res = self.client.search(image, imageType, groupIdList, options)</span><br><span class="line">        print(res)</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line">    def delete(self, user_id, face_token, group_id=100):</span><br><span class="line">        &quot;&quot;&quot; 调用人脸删除 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.faceDelete(user_id, group_id, face_token)</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line">###########view.py</span><br><span class="line">class CollectionView(GenericViewSet, ListModelMixin, CommonDeleteModelMixin, CommonCreateModelMixin):</span><br><span class="line">    # reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对象</span><br><span class="line">    queryset = Collection.objects.all().filter(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    # 使用不同的序列化类</span><br><span class="line">    def get_serializer_class(self):</span><br><span class="line">        if self.action == &#x27;create&#x27;:</span><br><span class="line">            return CollectionSaveSerializer</span><br><span class="line">        else:</span><br><span class="line">            return CollectionSerializer</span><br><span class="line"></span><br><span class="line">    def list(self, request, *args, **kwargs):</span><br><span class="line">        res = super().list(request, *args, **kwargs)</span><br><span class="line">        # 计算采集的多少人</span><br><span class="line">        today_count = len(self.get_queryset())</span><br><span class="line">        return Response(&#123;&quot;code&quot;: 100, &quot;msg&quot;: &quot;查看成功&quot;, &quot;collection&quot;: res.data, &quot;today_count&quot;: today_count&#125;)</span><br><span class="line"></span><br><span class="line">    # 删除百度AI 的图片</span><br><span class="line">    def destroy(self, request, *args, **kwargs):</span><br><span class="line">        instance = self.get_object()</span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        res = baidu.delete(instance.name_pinyin, face_token=instance.face_token)</span><br><span class="line">        print(res)</span><br><span class="line">        self.perform_destroy(instance)</span><br><span class="line">        return APIResponse()</span><br><span class="line"></span><br><span class="line">##########serializer.py</span><br><span class="line"># 保存</span><br><span class="line">class CollectionSaveSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Collection</span><br><span class="line">        fields = [&quot;name&quot;, &quot;avatar&quot;, &quot;area&quot;]</span><br><span class="line"></span><br><span class="line">    def create(self, validated_data):</span><br><span class="line">        # 取出图片对象</span><br><span class="line">        avatar_file_object = validated_data.get(&quot;avatar&quot;)</span><br><span class="line">        # 取出name</span><br><span class="line">        name = validated_data.get(&quot;name&quot;)</span><br><span class="line">        # 获得我们封装的名字转拼音的对象</span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        # 转成拼音</span><br><span class="line">        name_pinyin = baidu.name_to_pinyin(name)</span><br><span class="line">        # 将有图片传到ai库</span><br><span class="line">        res = baidu.add_user(avatar_file_object, name, name_pinyin)</span><br><span class="line">        validated_data[&#x27;name_pinyin&#x27;] = name_pinyin</span><br><span class="line">        # 这里我们将保存到ai库中返回的token保存到表中</span><br><span class="line">        print(res)</span><br><span class="line">        validated_data[&#x27;face_token&#x27;] = res.get(&#x27;result&#x27;).get(&#x27;face_token&#x27;)</span><br><span class="line">        instance = super().create(validated_data)</span><br><span class="line">        return instance</span><br><span class="line"></span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【十】语音识别项目中集成</span><br><span class="line"></span><br><span class="line">## 【1】方案</span><br><span class="line"></span><br><span class="line">### （1）收费方案</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line"># 使用百度，科大讯飞等第三方平台</span><br><span class="line"></span><br><span class="line"># 语音识别的SDK地址:</span><br><span class="line">	- https://ai.baidu.com/ai-doc/SPEECH/0lbxfnc9b</span><br><span class="line"># 百度的语音URL：</span><br><span class="line">	- 使用百度，科大讯飞等第三方平台</span><br><span class="line">    </span><br><span class="line"># SDK：文档中有步骤</span><br><span class="line">def speed(file_object):</span><br><span class="line">    from aip import AipSpeech</span><br><span class="line">    APP_ID = &#x27;&#x27;</span><br><span class="line">    API_KEY = &#x27;&#x27;</span><br><span class="line">    SECRET_KEY = &#x27;&#x27;</span><br><span class="line">    client = AipSpeech(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line">    data = file_object.read()</span><br><span class="line">    # 识别本地文件</span><br><span class="line">    return client.asr(data, &#x27;pcm&#x27;, 16000, &#123;&#x27;dev_pid&#x27;: 1537&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240913190942906.png" alt="image-20240913190942906"></p>
<h3 id="（2）免费方案">（2）免费方案</h3>
````python
# pip3.11 install --force- SpeechRecognition
# pip3.11 install -i https://pypi.tuna.tsinghua.edu.cn/simple pocketsphinx
#https://pypi.org/project/pocketsphinx/#files

# 1 目前speech_recognition只有英文（en-US）的脱机识别库，如果需要脱机识别中文（zh-CN），需要手动加入对应的识别库，可参考如下操作

# 2 逐层找到文件夹 pocketsphinx-data （参考如下路径）：
\site-packages\speech_recognition\pocketsphinx-data

# 3 随后将 【zh-CN文件】 下载解压到pocketsphinx-data 中，如下图所示
 #4 检查文件是否缺失以及命名、存放的位置是否一致

# 5 语音文件准备 speech_recognition 对脱机识别的文件有要求，目前支持的格式有
1.WAV
2.AIFF/AIFF-C
3.FLAC

# 6 代码
import speech_recognition as sr

audio_file = './test1.wav'

r = sr.Recognizer()

with sr.AudioFile(audio_file) as source:
    audio = r.record(source)

# 识别音频文件
result = r.recognize_sphinx(audio, language="zh-CN")
print(result)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】前端</span><br><span class="line"></span><br><span class="line">### 【1】`json`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;&#125;,</span><br><span class="line">  &quot;navigationBarTitleText&quot;: &quot;语音识别&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="【2】wxml-2">【2】<code>wxml</code></h3>
````html
<!-- 显示文本的框 -->
<textarea class="text" placeholder="等待语音识别自动录入..." placeholder-class="hoder" model:value="{{content}}" maxlength="{{-1}}"></textarea>

<!-- 按住说话按钮 -->
<button class="btn" hover-class="press" bind:longpress="recordStart" bind:touchcancel="recordCancel" bind:touchend="recordStop"> <label class="fa fa-microphone"></label> 按住说话</button>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```css</span><br><span class="line">page&#123;</span><br><span class="line">  background-color: #f5f5f5;</span><br><span class="line">&#125;</span><br><span class="line">.text&#123;</span><br><span class="line">  height: 400rpx;</span><br><span class="line">  background-color: white;</span><br><span class="line">  width: 100%;</span><br><span class="line">  padding: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn&#123;</span><br><span class="line">  margin-top: 30rpx;</span><br><span class="line">  /* color: #fff; */</span><br><span class="line">  border: 2rpx solid #ddd;</span><br><span class="line">  background-color: white; </span><br><span class="line">  font-size: 32rpx;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.press label&#123;</span><br><span class="line">  color: #179B16;</span><br><span class="line">&#125;</span><br><span class="line">.press&#123;</span><br><span class="line">  background-color: #ddd;</span><br><span class="line">&#125;</span><br><span class="line">.hoder&#123;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【4】`js`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````js</span><br><span class="line">// https://developers.weixin.qq.com/miniprogram/dev/api/media/recorder/RecorderManager.start.html</span><br><span class="line">// 微信提供了录音管理，生成一个录音对象</span><br><span class="line">const recorderManager = wx.getRecorderManager()</span><br><span class="line">import api from &quot;../../../conf/settings&quot;</span><br><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  data: &#123;</span><br><span class="line">    content:&quot;&quot;,</span><br><span class="line">    record:false</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 开始录音</span><br><span class="line">  recordStart:function()&#123;</span><br><span class="line">    this.setData(&#123;record:true&#125;)</span><br><span class="line">    //  参数</span><br><span class="line">    const options = &#123;</span><br><span class="line">      // duration: 6000,//指定录音的时长，单位 ms</span><br><span class="line">      sampleRate: 16000,//采样率</span><br><span class="line">      numberOfChannels: 1,//录音通道数</span><br><span class="line">      encodeBitRate: 48000,//编码码率</span><br><span class="line">      format: &#x27;wav&#x27;//音频格式，有效值 </span><br><span class="line">    &#125;</span><br><span class="line">    //开始录音</span><br><span class="line">    recorderManager.start(options)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 停止录音</span><br><span class="line">  recordCancel:function()&#123;</span><br><span class="line">    console.log(&quot;停止&quot;);</span><br><span class="line">    this.setData(&#123;record:false&#125;)</span><br><span class="line">    wx.hideLoading()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 发请求，识别语音</span><br><span class="line">  recordStop:function()&#123;</span><br><span class="line">    if(!this.data.record)&#123;return&#125;</span><br><span class="line">    // 关闭录音</span><br><span class="line">    recorderManager.stop();</span><br><span class="line">    // 监听录音结束，发请求</span><br><span class="line">    recorderManager.onStop((res) =&gt; &#123;</span><br><span class="line">      // this.tempFilePath = res.tempFilePath</span><br><span class="line">      // 加载</span><br><span class="line">      wx.showLoading()</span><br><span class="line">      // 请求文件类型</span><br><span class="line">      wx.uploadFile(&#123;</span><br><span class="line">        filePath: res.tempFilePath,</span><br><span class="line">        name: &#x27;voice&#x27;,</span><br><span class="line">        url: api.voice,</span><br><span class="line">        success:(response)=&gt;&#123;</span><br><span class="line">          console.log(response)</span><br><span class="line">          // &#123;&#x27;code&#x27;: 100, &#x27;msg&#x27;:&#x27;成功&#x27;,&#x27;result&#x27;: [&#x27;欢迎欢迎&#x27;]&#125;</span><br><span class="line">          let voiceResponse = JSON.parse(response.data)</span><br><span class="line">          if(voiceResponse.code == 100)&#123;</span><br><span class="line">            console.log(voiceResponse)</span><br><span class="line">              this.setData(&#123;</span><br><span class="line">                content:this.data.content + voiceResponse.result[0]</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;else&#123;</span><br><span class="line">            wx.showToast(&#123;</span><br><span class="line">              title: &#x27;识别失败，请重新操作！&#x27;,</span><br><span class="line">              icon: &quot;none&quot;</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        complete:()=&gt;&#123;</span><br><span class="line">          wx.hideLoading()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      )</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setData(&#123;record:false&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="【3】后端">【3】后端</h2>
```python
##############view.py
class VoiceView(GenericViewSet):
    def create(self, request, *args, **kwargs):
        # 取出你的音频
        voice_object = request.data.get('voice')
        # with open('./a.wav','wb') as f:
        #     f.write(voice_object.read())
        # 获得语音对象
        ai = BaiDuVoice()
        # 将语音转文字
        result = ai.speed(voice_object)
        # {'corpus_no': '6847771638436561158', 'result': ['你是不是打过来？'], 'sn': '15921476781594371078', 'err_msg': 'success.', 'err_no': 0}
        if result.get('err_no') == 0:
            return Response({'code': 100, 'msg': '识别成功', 'result': result.get('result')})
        else:
            return Response({'code': 101, 'msg': '识别失败'})
        
##################libs/baidu/baidu_ia.py
# 语音识别
class BaiDuVoice:
    def __init__(self, APP_ID='115576951', API_KEY='YPkf1jQ7gSpLHf4Gd2H4SqWL',
                 SECRET_KEY='NWdeYXdti2LAIZfF1BEwNhlGS4KEnFkJ'):
        """ 你的 APPID AK SK """
        self.APP_ID = APP_ID
        self.API_KEY = API_KEY
        self.SECRET_KEY = SECRET_KEY
        self.client = AipSpeech(self.APP_ID, self.API_KEY, self.SECRET_KEY)

    def speed(self, voice_object):
        res = self.client.asr(voice_object.read(), 'pcm', 16000, {
            'dev_pid': 1537,
        })

        return res
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【十一】采集统计</span><br><span class="line"></span><br><span class="line">## 【1】前端</span><br><span class="line"></span><br><span class="line">### 【1】`json`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;&#125;,</span><br><span class="line">  &quot;navigationBarTitleText&quot;: &quot;数据统计&quot;,</span><br><span class="line">  &quot;enablePullDownRefresh&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="【2】wxml-3">【2】<code>wxml</code></h3>
```html
<view class="container">
  
  <view class="menu" wx:for="{{dataList}}" wx:key="index">
    <view> <label class="iconfont  icon-SCHEDULE" ></label>   {{item.date}}</view>
    <label>{{item.count}}个</label>
  </view>

</view>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```css</span><br><span class="line">.container&#123;</span><br><span class="line">  border-top: 1px solid #ddd;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.container .menu&#123;</span><br><span class="line">  font-size: small;</span><br><span class="line">  padding: 10px 40rpx;</span><br><span class="line">  border-bottom: 1px dotted #ddd;</span><br><span class="line">  text-align: center;</span><br><span class="line"></span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: row;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  background-color: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【4】js">【4】<code>js</code></h3>
```js
import api from "../../../conf/settings"
Page({

  /**
   * 页面的初始数据
   */
  data: {
    dataList:[]
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad(options) {
      this.getRecord()
  },
  getRecord(){
    wx.showLoading({mask:true})
    wx.request({
      url: api.statistics,
      method:"GET",
      success:res=>{
        this.setData({dataList:res.data})
      },complete(){
        // 隐藏加载
        wx.hideLoading()
      }
    })
  },

  // 监听下拉
  onPullDownRefresh() {
    this.getRecord()
  }
})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【十二】人脸检测</span><br><span class="line"></span><br><span class="line">## 【1】前端</span><br><span class="line"></span><br><span class="line">### 【1】`json`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;&#125;,</span><br><span class="line">  &quot;navigationBarTitleText&quot;: &quot;人脸检测&quot;,</span><br><span class="line">  &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,</span><br><span class="line">  &quot;enablePullDownRefresh&quot;: true,</span><br><span class="line">  &quot;backgroundColor&quot;: &quot;#00FFFF&quot;,</span><br><span class="line">  &quot;backgroundTextStyle&quot;: &quot;light&quot;,</span><br><span class="line">  &quot;navigationBarTextStyle&quot;: &quot;black&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="【2】wxml-4">【2】<code>wxml</code></h3>
```html
<!-- 照相机 -->
<!-- {{ backFront ? 'back' : 'front' }}判断摄像头是前置还是后置，默认值是true -->
<view class="header">
  <camera class="camera" device-position="{{ backFront ? 'back' : 'front' }}" flash="off" frame-size="medium"></camera>


  <view class="switch" bindtap="switchCamera">
    <!-- 这个图片是相机的反转，绑定了点击事件，来控制backFront的值 -->
    <image src="/images/camera/rotate-camera-white.png"></image>
  </view>
  <!-- 拍照检测按钮 -->
  <button class="submit" bindtap="takePhoto"> 拍照检测 </button>
</view>


<!-- 这个是显示你测试的人员信息 -->
<view class="table">
  <view class="item">
    <view class="title">检测记录</view>
  </view>

  <!--  -->
  <view class="item" wx:for="{{record}}" wx:for-item="row" wx:key="index">
    <view class="record">
      <view class="avatar">
      <!-- 检测的照片 -->
        <image src="{{row.avatar}}"></image>
      </view>
      <view class="desc">
      <!-- 成功的提示信息 -->
        <view wx:if="{{row.code == 100}}" class="username">检测成功：{{row.user_id}}</view>
        <!-- 失败的提示信息 -->
        <view wx:else class="username">检测失败:{{row.msg}}</view>
        <view>
          <view class="txt-group">
            <label class="zh"></label>
          </view>
        </view>
      </view>
      <view class="delete">
        <block wx:if="{{row.code == 100}}">
          <label class="iconfont icon-shanchu1" style="color:green"></label>
        </block>
        <block wx:else>
          <label class="iconfont icon-htmal5icon17" style="color:red"></label>
        </block>

      </view>
    </view>
  </view>
</view>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```css</span><br><span class="line">/* pages/face/face.wxss */</span><br><span class="line">.header&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.camera&#123;</span><br><span class="line">  height: 600rpx;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.switch&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 10rpx;</span><br><span class="line">  right: 20rpx;</span><br><span class="line"></span><br><span class="line">  height: 80rpx;</span><br><span class="line">  width: 80rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.switch image&#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.submit&#123;</span><br><span class="line">  margin-top: 40rpx;</span><br><span class="line">  color: #fff;</span><br><span class="line">  border: 2rpx solid #00c8b6;</span><br><span class="line">  background-color: #00c8b6;</span><br><span class="line">  font-size: 32rpx;</span><br><span class="line">  /* 控制文本的粗细 */</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.table&#123;</span><br><span class="line">  margin-top: 40rpx;</span><br><span class="line">  border-top: 1rpx solid #e7e7e7;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.table .item &#123;</span><br><span class="line">  border-bottom: 1rpx solid #e7e7e7;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.table .item .title&#123;</span><br><span class="line">  margin: 20rpx 30rpx;</span><br><span class="line">  padding-left: 10rpx;</span><br><span class="line">  border-left: 5rpx solid #02bfae;</span><br><span class="line">  font-size: 26rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.record&#123;</span><br><span class="line">  margin: 10rpx 40rpx;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: row;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.record .avatar&#123;</span><br><span class="line">  width: 100rpx;</span><br><span class="line">  height: 100rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.record .avatar image&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  border-radius: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.record .desc&#123;</span><br><span class="line">  margin: 0 40rpx;</span><br><span class="line">&#125;</span><br><span class="line">.desc&#123;</span><br><span class="line">  width: 290rpx;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  justify-content: space-around;</span><br><span class="line">&#125;</span><br><span class="line">.desc .username&#123;</span><br><span class="line">  font-size: 25rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.txt-group&#123;</span><br><span class="line">  font-size: 20rpx;</span><br><span class="line">  margin: 5rpx 0;</span><br><span class="line">&#125;</span><br><span class="line">.txt-group .zh&#123;</span><br><span class="line">  color: #8c8c8c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.txt-group .en&#123;</span><br><span class="line">  color: #cccccc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.area&#123;</span><br><span class="line">  color: #00c8b6;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.delete&#123;</span><br><span class="line">  width: 100rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  justify-content: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【4】js-2">【4】<code>js</code></h3>
```js
import api from "../../../conf/settings"
Page({
  data:{
    backFront:true,
    record:[]
  },

  // 点击反转摄像头
  switchCamera(){
    this.setData({backFront:false})
  },
  
  // 拍照检测
  takePhoto(){
    // 展示加载
    wx.showLoading({
      title:"检测中...",
      mask:true
    })
    // 获得照片
    const ctx = wx.createCameraContext()
    // 发请求
    // 提交给后端文件使用这个
    ctx.takePhoto({
      // 图片的质量
      quality:"high",
      success:res=>{
        wx.uploadFile({
          filePath: res.tempImagePath,
          name: 'avatar',
          url: api.face,
          success:ress=>{
            // 需要转一下,不然得到的不是字典二十字符串
            let resdata = JSON.parse(ress.data)
            console.log(resdata)
            // 判断是否成功----102不是本小区的业主
            if(resdata.code==100 || resdata.code==102){
              // 将当前的图片存到resdata中
              console.log(res.tempImagePath);
              resdata.avatar = res.tempImagePath
              var oldRecord = this.data.record
              // 拼接
              oldRecord.unshift(resdata)
              console.log(oldRecord);
              this.setData({
                record:oldRecord
              })
            }else{
              wx.showToast({
                title: '请正常拍照',
              })
            }

          },complete(){
            // 隐藏加载
            wx.hideLoading()
          }
        })
      }
    })
  }
})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;````python</span><br><span class="line">###############view.py</span><br><span class="line">class FaceView(GenericViewSet):</span><br><span class="line">    def create(self, request, *args, **kwargs):</span><br><span class="line">        # 取出前端传过来的饿图片</span><br><span class="line">        avatar = request.data.get(&#x27;avatar&#x27;)</span><br><span class="line">        # 判断</span><br><span class="line">        if not avatar:</span><br><span class="line">            return APIResponse(code=101, msg=&quot;图片未提交！&quot;)</span><br><span class="line">        # 获的百度ai对象</span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        result = baidu.search(avatar)</span><br><span class="line">        # &#123;&#x27;error_code&#x27;: 0, &#x27;error_msg&#x27;: &#x27;SUCCESS&#x27;, &#x27;log_id&#x27;: 1442474036, &#x27;timestamp&#x27;: 1726233673, &#x27;cached&#x27;: 0, &#x27;result&#x27;: &#123;&#x27;face_token&#x27;: &#x27;32c062967b0de37b260b957894347027&#x27;, &#x27;user_list&#x27;: [&#123;&#x27;group_id&#x27;: &#x27;100&#x27;, &#x27;user_id&#x27;: &#x27;li3mo4mo4&#x27;, &#x27;user_info&#x27;: &#x27;&#x27;, &#x27;score&#x27;: 97.40111541748047&#125;]&#125;&#125;</span><br><span class="line">        if result.get(&#x27;error_code&#x27;) == 0:</span><br><span class="line">            # 说明抢到了</span><br><span class="line">            # 获取数据---就是名字的拼音</span><br><span class="line">            user_id = result.get(&quot;result&quot;).get(&quot;user_list&quot;)[0].get(&quot;user_id&quot;)</span><br><span class="line">            # 名字</span><br><span class="line">            user_info = result.get(&quot;result&quot;).get(&quot;user_list&quot;)[0].get(&quot;user_info&quot;)</span><br><span class="line">            # 准确率</span><br><span class="line">            score = result.get(&quot;result&quot;).get(&quot;user_list&quot;)[0].get(&quot;score&quot;)</span><br><span class="line">            return APIResponse(user_id=user_id, user_info=user_info, score=score)</span><br><span class="line">        else:</span><br><span class="line">            APIResponse(code=101, msg=&quot;匹配失败！该成员不是我们小区的业主，注意注意！！！&quot;)</span><br><span class="line">            </span><br><span class="line">#############libs/baidu/baidu_ai.py</span><br><span class="line">class BaiDuAI:</span><br><span class="line">    def __init__(self, APP_ID=&#x27;115551890&#x27;, API_KEY=&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;,</span><br><span class="line">                 SECRET_KEY=&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;):</span><br><span class="line">        &quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span><br><span class="line">        self.APP_ID = APP_ID</span><br><span class="line">        self.API_KEY = API_KEY</span><br><span class="line">        self.SECRET_KEY = SECRET_KEY</span><br><span class="line">        self.client = AipFace(self.APP_ID, self.API_KEY, self.SECRET_KEY)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def search(self, img_obj):</span><br><span class="line">        image = base64.b64encode(img_obj.read()).decode(&#x27;utf-8&#x27;)</span><br><span class="line">        image_type = &quot;BASE64&quot;</span><br><span class="line">        group_id_list = &quot;100,101&quot;</span><br><span class="line">        &quot;&quot;&quot; 调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        res = self.client.search(image, image_type, group_id_list)</span><br><span class="line">        # &quot;&quot;&quot; 如果有可选参数 &quot;&quot;&quot;</span><br><span class="line">        # options = &#123;&#125;</span><br><span class="line">        # options[&quot;match_threshold&quot;] = 70</span><br><span class="line">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span><br><span class="line">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span><br><span class="line">        # # options[&quot;user_id&quot;] = &quot;233451&quot;</span><br><span class="line">        # options[&quot;max_user_num&quot;] = 3</span><br><span class="line">        #</span><br><span class="line">        # &quot;&quot;&quot; 带参数调用人脸搜索 &quot;&quot;&quot;</span><br><span class="line">        # res = self.client.search(image, imageType, groupIdList, options)</span><br><span class="line">        print(res)</span><br><span class="line">        return res</span><br><span class="line">````</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 【十三】公告tab页</span><br><span class="line"></span><br><span class="line">## 【1】前端</span><br><span class="line"></span><br><span class="line">### 【1】`json`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;usingComponents&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="【2】wxml-5">【2】<code>wxml</code></h3>
```html
<view class="container">
  <!-- 使用wx:for循环遍历社区公告列表 -->
  <view wx:for="{{noticeList}}" wx:key="index" class="notice-item">
    <!-- 左侧图片 -->
    <image class="notice-image" src="{{item.img}}" mode="aspectFill"></image>
    <!-- 右侧内容 -->
    <view class="notice-content">
      <view class="notice-title">{{item.title}}</view>
      <view class="notice-time">{{item.create_time}}</view>
      <view class="notice-details">{{item.content}}</view>
    </view>
  </view>
</view>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 【3】`wxss`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```css</span><br><span class="line">.container &#123;</span><br><span class="line">  padding: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-item &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: flex-start;</span><br><span class="line">  margin-bottom: 20rpx; /* 添加间距 */</span><br><span class="line">  border-bottom: 1px solid #f0f0f0; /* 添加底部边框 */</span><br><span class="line">  padding-bottom: 20rpx; /* 增加底部内边距 */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-image &#123;</span><br><span class="line">  width: 150rpx;</span><br><span class="line">  height: 120rpx;</span><br><span class="line">  border-radius: 6rpx;</span><br><span class="line">  margin-right: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-content &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-title &#123;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">  margin-bottom: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-time &#123;</span><br><span class="line">  font-size: 24rpx;</span><br><span class="line">  color: #666666;</span><br><span class="line">  margin-bottom: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.notice-details &#123;</span><br><span class="line">  font-size: 24rpx;</span><br><span class="line">  color: #333333;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="【4】js-3">【4】<code>js</code></h3>
```js
import api from "../../conf/settings"
Page({
  data: {
    noticeList: [
      {
        title: '公告标题1',
        create_time: '2024-04-25',
        content: '公告内容描述1，公告内容描述1，公告内容描述1。', // 可以根据实际情况添加更多内容
        igm: '/images/notice/notice1.jpg' // 图片路径，根据实际情况修改
      },
      {
        title: '公告标题2',
        create_time: '2024-04-26',
        content: '公告内容描述2，公告内容描述2，公告内容描述2。', // 可以根据实际情况添加更多内容
        igm: '/images/notice/notice2.jpg' // 图片路径，根据实际情况修改
      },
      // 可以添加更多社区公告数据
    ]
  },
  onLoad: function () {
    // 页面加载时执行的逻辑
    this.refresh()
  },
  refresh(){
    wx.showLoading({
      mask: true
    })
    wx.request({
      url: api.notice,
      method: "GET",
      success: (res) => {
        console.log(res.data);
        this.setData({
          noticeList: res.data
        })
      },
      complete() {
        wx.hideLoading()
      }
    })

  }
})
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% endraw %&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 【2】后端</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;% raw %&#125;```python</span><br><span class="line">##########view.py</span><br><span class="line">from .models import Notice</span><br><span class="line">from .serializer import NoticeSerializer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class NoticeView(GenericViewSet, ListModelMixin):</span><br><span class="line">    queryset = Notice.objects.all().order_by(&#x27;create_time&#x27;)</span><br><span class="line">    serializer_class = NoticeSerializer</span><br><span class="line">    </span><br><span class="line">#################serializer.py</span><br><span class="line"># 公告序列化表</span><br><span class="line">class NoticeSerializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = Notice</span><br><span class="line">        fields = [&quot;id&quot;, &quot;title&quot;, &quot;img&quot;, &quot;create_time&quot;, &quot;content&quot;]</span><br><span class="line">        extra_kwargs = &#123;</span><br><span class="line">            &#x27;create_time&#x27;: &#123;&#x27;format&#x27;: &quot;%Y-%m-%d&quot;&#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Blog/" rel="tag"># Blog</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/10/15/%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E7%A8%8B/" rel="prev" title="案例：多进程和多线程和协程">
      <i class="fa fa-chevron-left"></i> 案例：多进程和多线程和协程
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/10/15/%E7%BB%BC%E5%90%88%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95/" rel="next" title="综合内置函数方法">
      综合内置函数方法 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">【一】项目介绍</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">2.</span> <span class="nav-text">【三】小程序欢迎页面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%88%86%E6%9E%90"><span class="nav-number">2.1.</span> <span class="nav-text">【1】分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89js"><span class="nav-number">2.1.1.</span> <span class="nav-text">（2）js</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%A1%A8%E6%A8%A1%E5%9E%8B"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">[2]表模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">[4]视图函数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%902%E3%80%91wxml"><span class="nav-number">2.2.</span> <span class="nav-text">【2】wxml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%905%E3%80%91app-json"><span class="nav-number">2.3.</span> <span class="nav-text">【5】app.json</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89view-py"><span class="nav-number">2.3.1.</span> <span class="nav-text">（2）view.py</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%901%E3%80%91json"><span class="nav-number">2.4.</span> <span class="nav-text">【1】json</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%903%E3%80%91wxss"><span class="nav-number">2.5.</span> <span class="nav-text">【3】wxss</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89serializer-py"><span class="nav-number">2.5.1.</span> <span class="nav-text">（2）serializer.py</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%BC%95%E5%85%A5%E7%9F%A2%E9%87%8F%E5%9B%BE%E6%A0%87%E5%BA%93"><span class="nav-number">2.6.</span> <span class="nav-text">【3】引入矢量图标库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">3.</span> <span class="nav-text">【九】人脸识别项目中集成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.1.</span> <span class="nav-text">【1】使用步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%85%8D%E8%B4%B9%E6%96%B9%E6%A1%88"><span class="nav-number">3.1.1.</span> <span class="nav-text">（2）免费方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91wxml-2"><span class="nav-number">3.1.2.</span> <span class="nav-text">【2】wxml</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%90%8E%E7%AB%AF"><span class="nav-number">3.2.</span> <span class="nav-text">【3】后端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91wxml-3"><span class="nav-number">3.2.1.</span> <span class="nav-text">【2】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91js"><span class="nav-number">3.2.2.</span> <span class="nav-text">【4】js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91wxml-4"><span class="nav-number">3.2.3.</span> <span class="nav-text">【2】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91js-2"><span class="nav-number">3.2.4.</span> <span class="nav-text">【4】js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91wxml-5"><span class="nav-number">3.2.5.</span> <span class="nav-text">【2】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91js-3"><span class="nav-number">3.2.6.</span> <span class="nav-text">【4】js</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Aurora</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aurora</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
