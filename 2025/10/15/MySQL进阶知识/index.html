<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="MySQL进阶知识之视图 【一】视图介绍 【1】什么是视图  视图是一种查询结果的抽象表示 它提供了一种灵活和安全的方式来访问和操作数据库的数据 通过对视图的使用，用户可以根据自己的需求获取所需的数据，而无需直接访问底层的基本表  【2】为什么要用视图  如果要频繁操作一张虚拟的表（这张表是拼表组成），就可以制作成视图，后续直接操作  【3】视图的优点  简化复杂查询 数据安全性 数据完整性 逻辑">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL进阶知识">
<meta property="og:url" content="https://aurora-lsk.asia/2025/10/15/MySQL%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/index.html">
<meta property="og:site_name" content="Aurora博客">
<meta property="og:description" content="MySQL进阶知识之视图 【一】视图介绍 【1】什么是视图  视图是一种查询结果的抽象表示 它提供了一种灵活和安全的方式来访问和操作数据库的数据 通过对视图的使用，用户可以根据自己的需求获取所需的数据，而无需直接访问底层的基本表  【2】为什么要用视图  如果要频繁操作一张虚拟的表（这张表是拼表组成），就可以制作成视图，后续直接操作  【3】视图的优点  简化复杂查询 数据安全性 数据完整性 逻辑">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164131332.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164139257.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164725739.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164754960.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183928319.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183941620.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183957366.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603184015762.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cc2f707a1-189a-4dfe-bd28-e4572d65f3c3.png">
<meta property="article:published_time" content="2025-10-15T03:34:56.000Z">
<meta property="article:modified_time" content="2025-10-15T09:06:32.987Z">
<meta property="article:author" content="Aurora">
<meta property="article:tag" content="Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164131332.png">

<link rel="canonical" href="https://aurora-lsk.asia/2025/10/15/MySQL%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MySQL进阶知识 | Aurora博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Aurora博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/page-about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/15/MySQL%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Aurora">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Aurora博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL进阶知识
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2025-10-15 11:34:56 / 修改时间：17:06:32" itemprop="dateCreated datePublished" datetime="2025-10-15T11:34:56+08:00">2025-10-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1>MySQL进阶知识之视图</h1>
<h2 id="【一】视图介绍">【一】视图介绍</h2>
<h3 id="【1】什么是视图">【1】什么是视图</h3>
<ul>
<li>视图是一种查询结果的抽象表示</li>
<li>它提供了一种灵活和安全的方式来访问和操作数据库的数据</li>
<li>通过对视图的使用，用户可以根据自己的需求获取所需的数据，而无需直接访问底层的基本表</li>
</ul>
<h3 id="【2】为什么要用视图">【2】为什么要用视图</h3>
<ul>
<li>如果要频繁操作一张虚拟的表（这张表是拼表组成），就可以制作成视图，后续直接操作</li>
</ul>
<h3 id="【3】视图的优点">【3】视图的优点</h3>
<ul>
<li>简化复杂查询</li>
<li>数据安全性</li>
<li>数据完整性</li>
<li>逻辑数据独立性</li>
<li>性能优化</li>
</ul>
<h3 id="【4】总结">【4】总结</h3>
<ul>
<li>视图可以简化查询操作、保护数据安全性、实现数据安全性、提高系统的可维护性和性能优化</li>
<li>视图提供了一种灵活且安全的数据访问方式，使用视图能够根据自身需要方便地获取和操作数据</li>
</ul>
<h2 id="【二】使用视图">【二】使用视图</h2>
<h3 id="【1】语法">【1】语法</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> 视图名（表名）<span class="keyword">as</span> 虚拟表的查询<span class="keyword">SQL</span>语句</span><br></pre></td></tr></table></figure>
<h3 id="【2】创建视图">【2】创建视图</h3>
<ul>
<li>
<p>使用视图语法创建一个视图</p>
</li>
<li>
<p>创建视图时，需要指定视图的名称和查询的原表和过滤条件</p>
</li>
<li>
<p>案例</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> my_course <span class="keyword">as</span> <span class="keyword">select</span> cname,teacher_id <span class="keyword">from</span> course <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>my_course：视图名称</li>
<li><code>select cname,teacher_id from course where cid</code> ：SQL语句</li>
<li>course: 表名</li>
<li>cname,teacher_id：要选择的列</li>
<li>cid=2: 过滤条件</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164131332.png" alt="image-20240603164131332"></p>
<h3 id="【3】视图查询">【3】视图查询</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from my_course;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164139257.png" alt="image-20240603164139257"></p>
<h3 id="【4】更新视图">【4】更新视图</h3>
<ul>
<li>
<p>更新了视图表，之前的表也会随之更新</p>
</li>
<li>
<p>对视图进行操作：—》update语句</p>
</li>
<li>
<p>只有满足一定条件的视图才支持更新操作</p>
</li>
<li>
<p>语法</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> my_course <span class="keyword">SET</span> column1 <span class="operator">=</span> value1 <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>my_course：视图名</li>
<li>column1：更新的列</li>
<li>column1：设置的值</li>
<li>condition：更新的条件</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> my_course <span class="keyword">SET</span> cname <span class="operator">=</span> <span class="string">&#x27;化学&#x27;</span> <span class="keyword">WHERE</span> cname<span class="operator">=</span><span class="string">&#x27;物理&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164725739.png" alt="image-20240603164725739"></p>
<h3 id="【5】删除视图">【5】删除视图</h3>
<ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> my_course;</span><br></pre></td></tr></table></figure>
<ul>
<li>my_course : 视图名</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603164754960.png" alt="image-20240603164754960"></p>
<h2 id="【三】总结">【三】总结</h2>
<ul>
<li>创建视图在硬盘上只会有表结构不会有表数据
<ul>
<li>表数据还是来自之前的表</li>
</ul>
</li>
<li>视图一般只会用来查询</li>
<li>当创建了较多视图后，会造成数据的难以维护</li>
</ul>
<h1>MySQL进阶知识之触发器</h1>
<h2 id="【一】触发器介绍">【一】触发器介绍</h2>
<h3 id="【1】什么是触发器">【1】什么是触发器</h3>
<ul>
<li>满足对表数据的增删改的情况下，自动触发的功能，成为触发器</li>
<li>触发器可以作为一种数据库的约束，用于保证数据的完整性和一致性。</li>
</ul>
<h3 id="【2】触发器的特点">【2】触发器的特点</h3>
<ul>
<li>触发器和表一起创建，修改，删除</li>
<li>触发器可以在特定的数据操作之前或之后触发执行</li>
<li>触发器可以根据用户定义的条件判断是否执行相应的逻辑</li>
<li>触发器可以调用储存过程、函数、触发其他触发器等，实行更复杂的业务逻辑</li>
</ul>
<h3 id="【3】为何使用触发器">【3】为何使用触发器</h3>
<ul>
<li>
<p>可以帮助我们实现日志、监控、处理等操作</p>
<ul>
<li>
<p>使用触发器可以实现很多功能</p>
</li>
<li>
<ul>
<li>比如数据验证、数据补全、数据同步、日志记录等。</li>
</ul>
</li>
<li>
<p>但需要注意，触发器的使用也需要谨慎，过多或不当的触发器可能会对数据库性能产生负面影响，因此在设计和使用触发器时应考虑到业务需求和性能方面的平衡。</p>
</li>
</ul>
</li>
</ul>
<h2 id="【二】触发器的六种使用情况">【二】触发器的六种使用情况</h2>
<ul>
<li>增前，增后，删前，删后，改前，改后</li>
</ul>
<h2 id="【三】语法结构">【三】语法结构</h2>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> 触发器的名字 </span><br><span class="line">before<span class="operator">/</span>after </span><br><span class="line"><span class="keyword">insert</span><span class="operator">/</span><span class="keyword">update</span><span class="operator">/</span><span class="keyword">delete</span> </span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">表名 </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span> <span class="keyword">begin</span> </span><br><span class="line"><span class="keyword">SQL</span>语句</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<h2 id="【四】示例">【四】示例</h2>
<h3 id="【1】定义创建触发器（在插入数据前触发）">【1】定义创建触发器（在插入数据前触发）</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name</span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="comment">-- 触发器逻辑</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【2】定义绑定触发器案例（在插入数据前触发）">【2】定义绑定触发器案例（在插入数据前触发）</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name</span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="comment">-- 您可以在这里执行各种操作，比如插入另一张表、更新其他表、计算值等。</span></span><br><span class="line">    <span class="comment">-- 下面是一个示例，将新插入的数据中的某一列设置为当前时间。</span></span><br><span class="line">    <span class="keyword">SET</span> NEW.column_name <span class="operator">=</span> NOW();</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【3】绑定触发器案例">【3】绑定触发器案例</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将名为 &quot;trigger_name&quot; 的触发器绑定到名为 &quot;table_name&quot; 的表上</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> table_name</span><br><span class="line"><span class="keyword">ADD CONSTRAINT</span> trigger_name</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="comment">-- 触发器逻辑</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【4】在插入之前触发示例">【4】在插入之前触发示例</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_before_insert_t1 before <span class="keyword">insert</span> <span class="keyword">on</span> t1</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">sql</span>语句</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【5】在插入之后触发示例">【5】在插入之后触发示例</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tigger_name before <span class="keyword">insert</span> <span class="keyword">on</span> table_name</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="comment">--触发器逻辑</span></span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【6】查看当前下所有库的触发器信息">【6】查看当前下所有库的触发器信息</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers\G;</span><br></pre></td></tr></table></figure>
<h3 id="【7】删除当前库下指定的触发器信息">【7】删除当前库下指定的触发器信息</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> 触发器名称;</span><br></pre></td></tr></table></figure>
<h3 id="【8】案例">【8】案例</h3>
<h4 id="（1）建表">（1）建表</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> cmd (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> auto_increment,</span><br><span class="line">  <span class="keyword">USER</span> <span class="type">CHAR</span> (<span class="number">32</span>),</span><br><span class="line">  priv <span class="type">CHAR</span> (<span class="number">10</span>),</span><br><span class="line">  cmd <span class="type">CHAR</span> (<span class="number">64</span>),</span><br><span class="line">  sub_time datetime, #提交时间</span><br><span class="line">  success enum (<span class="string">&#x27;yes&#x27;</span>, <span class="string">&#x27;no&#x27;</span>) #<span class="number">0</span>代表执行失败</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE TABLE</span> errlog (</span><br><span class="line">  id <span class="type">INT</span> <span class="keyword">PRIMARY KEY</span> auto_increment,</span><br><span class="line">  err_cmd <span class="type">CHAR</span> (<span class="number">64</span>),</span><br><span class="line">  err_time datetime</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183928319.png" alt="image-20240603183928319"></p>
<h4 id="2-需求">(2)需求</h4>
<p>}cmd表插入数据的success如果值为no 则去errlog表中插入一条记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$  # 将mysql默认的结束符由;换成$$</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_after_insert_cmd after <span class="keyword">insert</span> <span class="keyword">on</span> cmd <span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  if NEW.success <span class="operator">=</span> <span class="string">&#x27;no&#x27;</span> <span class="keyword">then</span>  # 新记录都会被MySQL封装成<span class="keyword">NEW</span>对象</span><br><span class="line">      <span class="keyword">insert into</span> errlog(err_cmd,err_time) <span class="keyword">values</span>(NEW.cmd,NEW.sub_time);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line">delimiter ;  # 结束之后记得再改回来，不然后面结束符就都是$$了</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183941620.png" alt="image-20240603183941620"></p>
<h4 id="（3）往cmd表中插入数据">（3）往cmd表中插入数据</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT INTO</span> cmd (</span><br><span class="line">    <span class="keyword">USER</span>,</span><br><span class="line">    priv,</span><br><span class="line">    cmd,</span><br><span class="line">    sub_time,</span><br><span class="line">    success</span><br><span class="line">)<span class="keyword">VALUES</span></span><br><span class="line">  (<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;ls -l /etc&#x27;</span>,NOW(),<span class="string">&#x27;yes&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;cat /etc/passwd&#x27;</span>,NOW(),<span class="string">&#x27;no&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;useradd xxx&#x27;</span>,NOW(),<span class="string">&#x27;no&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;ps aux&#x27;</span>,NOW(),<span class="string">&#x27;yes&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603183957366.png" alt="image-20240603183957366"></p>
<h4 id="4-查看数据">(4)查看数据</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cmd;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> errlog;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240603184015762.png" alt="image-20240603184015762"></p>
<h2 id="【五】自定义触发器">【五】自定义触发器</h2>
<h3 id="【1】创建触发器">【1】创建触发器</h3>
<ul>
<li>使用数据库管理系统提供的语法，创建一个新的触发器对象。</li>
<li>在创建触发器时，您需要指定触发器的名称、触发时机（例如在插入、更新或删除之前或之后）、触发的表以及触发时执行的逻辑。</li>
</ul>
<h3 id="【2】定义触发器逻辑">【2】定义触发器逻辑</h3>
<ul>
<li>
<p>在创建触发器时，您需要定义触发器在触发时所执行的逻辑。</p>
<ul>
<li>这可以是任何数据库支持的操作</li>
</ul>
</li>
<li>
<p>比如插入数据、更新数据、删除数据、查询数据等。</p>
</li>
<li>
<ul>
<li>您可以使用SQL语句或调用存储过程、函数来实现触发器的逻辑。</li>
</ul>
</li>
</ul>
<h3 id="【3】定义触发器的条件">【3】定义触发器的条件</h3>
<ul>
<li>指定触发条件
<ul>
<li>触发条件是一个逻辑表达式，当表中的数据满足该表达式时，触发器才会被激活执行相关的逻辑。</li>
<li>例如，您可以指定只有当某列的值大于特定值时才触发触发器。</li>
</ul>
</li>
</ul>
<h3 id="【4】绑定触发器">【4】绑定触发器</h3>
<ul>
<li>将触发器绑定到相应的表上。一般情况下，触发器会与指定的表相关联，当该表发生特定的数据操作时，触发器才会被触发执行。</li>
</ul>
<h3 id="【5】测试触发器">【5】测试触发器</h3>
<ul>
<li>
<p>在绑定触发器后，您可以进行一些测试操作，验证触发器的逻辑是否按照预期执行。</p>
</li>
<li>
<ul>
<li>可以插入、更新或删除数据，观察触发器是否正确地处理这些操作。</li>
</ul>
</li>
</ul>
<h2 id="【六】语句结束符">【六】语句结束符</h2>
<ul>
<li>
<p>在写触发器的语句时，会遇到特殊情况，需要要修改默认的语句结束符</p>
</li>
<li>
<p>临时修改的原因是因为触发器 存储过程等技术点 代码中也需要使用分号</p>
</li>
<li>
<p>如果不修改，则无法书写出完整的代码</p>
</li>
</ul>
<h3 id="【1】创建触发器-2">【1】创建触发器</h3>
<ul>
<li>修改结束符</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br></pre></td></tr></table></figure>
<ul>
<li>修改结束符为了区分错误的执行语句和全局结束语句</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_after_insert_cmd after <span class="keyword">insert</span> <span class="keyword">on</span> cmd </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	if NEW.success <span class="operator">=</span> &quot;no&quot; <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">insert into</span> errlog(err_cmd,err_time)</span><br><span class="line">	<span class="keyword">values</span>(NEW.cmd,NEW.sub_time);</span><br><span class="line">		<span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> $$</span><br></pre></td></tr></table></figure>
<ul>
<li>使用完成后记得修改回来</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<h3 id="【2】删除触发器">【2】删除触发器</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> tri_after_insert_cmd;</span><br></pre></td></tr></table></figure>
<h2 id="【七】参考模板">【七】参考模板</h2>
<h3 id="【1】在表中插入新记录时，自动生成唯一标识符">【1】在表中插入新记录时，自动生成唯一标识符</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> generate_uuid_trigger BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">SET</span> NEW.uuid <span class="operator">=</span> UUID();</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【2】在表中更新记录时，更新最后修改时间">【2】在表中更新记录时，更新最后修改时间</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> generate_uuid_trigger BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">SET</span> NEW.uuid <span class="operator">=</span> UUID();</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【3】在表中删除记录时，将记录添加到历史记录表">【3】在表中删除记录时，将记录添加到历史记录表</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> archive_deleted_record_trigger AFTER <span class="keyword">DELETE</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">INSERT INTO</span> history_table (id, deleted_at)</span><br><span class="line">    <span class="keyword">VALUES</span> (OLD.id, NOW());</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<h3 id="【4】在表中插入新记录时，检查是否满足某个条件，若不满足则取消插入操作">【4】在表中插入新记录时，检查是否满足某个条件，若不满足则取消插入操作</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> check_condition_trigger BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> table_name</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    IF NEW.column_name <span class="operator">&lt;</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">        SIGNAL <span class="keyword">SQLSTATE</span> <span class="string">&#x27;45000&#x27;</span> <span class="keyword">SET</span> MESSAGE_TEXT <span class="operator">=</span> <span class="string">&#x27;Value must be greater than 10&#x27;</span>;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>上述模板中的&quot;table_name&quot;和&quot;column_name&quot;应替换为您实际使用的表名和列名</li>
</ul>
<h3 id="【5】日志模板">【5】日志模板</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 创建语句前修改默认语句结束符</span><br><span class="line">delimiter $$</span><br><span class="line"># 主要是为了区分错误执行语句和全局结束语句</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> tri_after_insert_cmd after <span class="keyword">insert</span> <span class="keyword">on</span> cmd </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	if NEW.success <span class="operator">=</span> &quot;no&quot; <span class="keyword">then</span></span><br><span class="line">		<span class="keyword">insert into</span> errlog(err_cmd,err_time)</span><br><span class="line">	<span class="keyword">values</span>(NEW.cmd,NEW.sub_time);</span><br><span class="line">		<span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span> $$</span><br><span class="line"># 使用完以后要修改回原来的默认语句</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<h1>MySQL进阶知识之事务</h1>
<h2 id="【一】什么是事务">【一】什么是事务</h2>
<ul>
<li>开启一个事务可以包含多条语句，这些语句要么同时成功，要么同时都不成功</li>
<li>事物的目标是确保多个操作中的每一个操作都成功执行，要么全部失败回滚</li>
</ul>
<h2 id="【二】事物的四大特性">【二】事物的四大特性</h2>
<ul>
<li>ACID</li>
</ul>
<h3 id="【1】原型性（Atomicity）">【1】原型性（Atomicity）</h3>
<ul>
<li><strong>事务被视为一个原子操作，不可再分割</strong>。</li>
<li>要么所有的操作都成功执行，要么所有的操作都会被回滚到事务开始前的状态，确保数据的一致性。</li>
</ul>
<h3 id="【2】一致性（Consistency）">【2】一致性（Consistency）</h3>
<ul>
<li><strong>事务执行前后，数据库应保持一致的状态</strong></li>
<li>在事物开始之前和结束之后，数据库必须满足所有的完整性约束，如数据类型、关系等</li>
</ul>
<h3 id="【3】隔离性（Isolation）">【3】隔离性（Isolation）</h3>
<ul>
<li><strong>事务的执行结果对其他并发执行的事务是隔离的。</strong></li>
<li>即一个事务的执行不应受到其他事务的干扰，各个事务之间应该相互独立工作，从而避免数据的不一致性。</li>
</ul>
<h3 id="【4】持久性-Durability">【4】持久性(Durability)</h3>
<ul>
<li><strong>也叫永久性</strong></li>
<li><strong>一旦事务被提交，其结果应该永久保存在数据库中，并且可以被系统故障恢复。</strong></li>
<li>即使系统发生宕机或崩溃，事务提交后的更改也应该是永久性的。</li>
</ul>
<h2 id="【三】事物的作用">【三】事物的作用</h2>
<ul>
<li>在操作多条数据的时候，可能会出现某几条操作不成功的情况</li>
</ul>
<h3 id="【1】数据库的一致性">【1】数据库的一致性</h3>
<ul>
<li>事务可以保证数据库的一致性</li>
<li>在一个事务中，要么所有操作都成功，要么全部回滚，保证了数据的完整性和一致性</li>
</ul>
<p>案例</p>
<ul>
<li><strong>在一个转账操作中，如果转出账户扣款成功而转入账户未能成功接收资金，事务可以将操作全部回滚，以确保资金的一致性。</strong></li>
</ul>
<h3 id="【2】并发控制">【2】并发控制</h3>
<ul>
<li>事务提供了并发控制机制，确保多个并发的事务不会互相干扰，并避免了数据的混乱和冲突</li>
<li>通过隔离级别的设置，事务可以控制不同事务之间的可见性和影响范围，保证并发执行时的数据一致性和隔离性</li>
</ul>
<h3 id="【3】故障恢复">【3】故障恢复</h3>
<ul>
<li>事务的持久特性确保了在事务提交后，即使系统发生了故障或崩溃，提交的结果仍然可以被恢复</li>
<li>数据库管理系统通过使用日志文件等机制，将事务的操作记录下来，以便在需要时进行恢复和重放</li>
</ul>
<h3 id="【4】高效运行">【4】高效运行</h3>
<ul>
<li>通过组织多个操作为一个事务，可以减少与数据库交互的次数，从而提高数据库的操作效率和性能</li>
<li>事务可以减少磁盘I/O、锁的竞争等操作开销，提高数据库的并发处理能力</li>
</ul>
<h3 id="【5】数据完整性和安全性">【5】数据完整性和安全性</h3>
<ul>
<li>事务可以保证数据的完整性和安全性</li>
<li>通过在事务中定义一些条件和约束，可以确保数据的有效性和准确性</li>
<li><strong>例如，在一个银行系统中，事务可以检查账户余额是否足够以及转账金额是否合法，从而保证数据的安全性和正确性</strong></li>
</ul>
<h3 id="【6】用户提交订单操作案例">【6】用户提交订单操作案例</h3>
<ul>
<li>
<p>检查库存：</p>
</li>
<li>
<ul>
<li>系统需要检查所需商品的库存是否足够。</li>
<li>如果库存不足，系统会提示用户库存不足，无法完成订单。</li>
</ul>
</li>
<li>
<p>扣减库存：</p>
</li>
<li>
<ul>
<li>如果库存充足，系统会将所购商品对应的库存数量减少。</li>
</ul>
</li>
<li>
<p>生成订单：</p>
</li>
<li>
<ul>
<li>系统会生成一个新的订单，包括订单号、商品信息、购买数量、价格等相关信息。</li>
</ul>
</li>
<li>
<p>计算总价：</p>
</li>
<li>
<ul>
<li>根据订单中的商品信息和购买数量，系统会计算出订单的总价格。</li>
</ul>
</li>
<li>
<p>更新用户账户：</p>
</li>
<li>
<ul>
<li>根据用户选择的支付方式，在扣除相应金额后，系统会更新用户账户余额或积分。</li>
</ul>
</li>
<li>
<p>生成支付信息：</p>
</li>
<li>
<ul>
<li>系统会生成相应的支付信息，以便用户完成支付。</li>
</ul>
</li>
<li>
<p>通知物流部门：</p>
</li>
<li>
<ul>
<li>系统会通知物流部门准备配送相关商品。</li>
</ul>
</li>
<li>
<p>发送订单确认邮件/短信：</p>
</li>
<li>
<ul>
<li>系统会向用户发送订单确认的邮件或短信，包括订单详细信息、配送信息等。</li>
</ul>
</li>
<li>
<p>监控商品配送：</p>
</li>
<li>
<ul>
<li>系统会跟踪订单的配送情况，并向用户提供订单状态更新。</li>
</ul>
</li>
<li>
<p>完成订单：</p>
</li>
<li>
<ul>
<li>当用户收到商品并确认满意后，订单状态会被更新为“已完成”。</li>
</ul>
</li>
</ul>
<h2 id="【四】如何使用事务">【四】如何使用事务</h2>
<h3 id="【1】事务的关键字">【1】事务的关键字</h3>
<ul>
<li>开启事务
<ul>
<li><code>start transaction;</code></li>
</ul>
</li>
<li>回滚（回到事务之前的操作）
<ul>
<li><code>rollback;</code></li>
</ul>
</li>
<li>二次确认(确认之后无法回滚)
<ul>
<li><code>commit;</code></li>
</ul>
</li>
<li>当多个数据库操作需要作为一个整体进行提交或回滚时，可以使用事务来实现</li>
</ul>
<h3 id="【2】使用事务的基本步骤">【2】使用事务的基本步骤</h3>
<h4 id="（1）开启">（1）开启</h4>
<h1>MySQL进阶知识之存储过程</h1>
<h1>MySQL进阶知识之函数</h1>
<h1>MySQL进阶知识之流程控制</h1>
<h1>MySQL进阶知识之索引</h1>
<h1>MySQL进阶知识之事务隔离机制</h1>
<h2 id="【一】数据库读现象的本质">【一】数据库读现象的本质</h2>
<ul>
<li>是数据库在高并发场景下</li>
<li>多个同时执行的事务带来的影响。</li>
</ul>
<h2 id="【二】数据库三大读现象">【二】数据库三大读现象</h2>
<ul>
<li>在数据库中，不同的事务隔离级别可能会导致脏读（Dirty Read）、不可重复读（Non-repeatable Read）和幻读（Phantom Read）等问题的出现。</li>
</ul>
<h3 id="【1】脏读">【1】脏读</h3>
<h4 id="（1）概述">（1）概述</h4>
<ul>
<li>事务1和事务2并发执行</li>
<li>事务1改了数据</li>
<li>事务2读取了以后</li>
<li>但事务1进行了回滚</li>
<li>导致事务2读取的数据有误。</li>
</ul>
<h4 id="（2）解释">（2）解释</h4>
<ul>
<li>脏读是指当一个事务读取了其他事务尚未提交的数据时发生的现象。</li>
<li>换句话说，脏读表示读取到的数据并不一定会最终存入数据库中，因此这些数据实际上是不存在的。</li>
<li>脏读现象发生在读取到了不一定存在的数据的情况下。</li>
</ul>
<h4 id="（3）总结">（3）总结</h4>
<ul>
<li>脏读指的是读当前事务到了其他事务未提交的数据，未提交意味着这些数据可能会回滚，</li>
<li>也就是可能最终不会存到数据库中，也就是不存在的数据。读到了并一定最终存在的数据，这就是脏读</li>
</ul>
<h3 id="【2】不可重复读">【2】不可重复读</h3>
<h4 id="（1）概述-2">（1）概述</h4>
<ul>
<li>事务1读取了数据</li>
<li>事务2修改了数据并且提交了</li>
<li>接着事务1再次读取</li>
<li>发现两次的数据不相同</li>
</ul>
<h4 id="（2）解释-2">（2）解释</h4>
<ul>
<li>不可重复读是指在一个事务内多次读取同一批数据，但在事务结束之前，这批数据可能发生了变化，导致读取结果不一致的情况。</li>
<li>不可重复读的产生通常是由于在事务A多次读取同一数据的过程中，事务B对数据进行了更新并提交。</li>
</ul>
<h4 id="（3）总结-2">（3）总结</h4>
<ul>
<li>解释：不可重复读指的是在一个事务内，最开始读到的数据和事务结束前的任意时刻读到的同一批数据出现不一致的情况</li>
<li>导致的原因：事务 A 多次读取同一数据，但事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致</li>
</ul>
<h3 id="【3】幻读">【3】幻读</h3>
<h4 id="（1）概述-3">（1）概述</h4>
<ul>
<li>本质上说是不可重复读的一种现象</li>
<li>事务1更改或查询了数据</li>
<li>在极短时间内,事务2又插入了一条新的数据</li>
<li>导致事务1在接下来的查询中</li>
<li>就会发现有⼏列数据是它先前所没有的。</li>
</ul>
<h4 id="（2）错误的理解">（2）错误的理解</h4>
<h5 id="1-解释">[1]解释</h5>
<ul>
<li>
<p>有时候，人们错误地将幻读理解为在两次select操作中获得了不同的数据集</p>
</li>
<li>
<ul>
<li>例如第一次select得到10条记录</li>
<li>第二次select得到15条记录。</li>
</ul>
</li>
<li>
<p>实际上，这种情况仍然属于不可重复读而非幻读。</p>
</li>
</ul>
<h5 id="2-总结">[2]总结</h5>
<ul>
<li>幻读是 事务A 执行两次 select 操作得到不同的数据集，即 select 1 得到 10 条记录，select 2 得到 15 条记录。</li>
<li>这其实并不是幻读，既然第一次和第二次读取的不一致，那不还是不可重复读吗，所以这是不可重复读的一种。</li>
</ul>
<h4 id="（3）正确的理解">（3）正确的理解</h4>
<h5 id="1-解释-2">[1]解释</h5>
<ul>
<li>幻读的本质在于某一次select操作得到的结果无法支撑后续的业务操作。</li>
<li>具体来说，例如在执行select判断某条记录是否存在时，假设该记录不存在，准备插入该记录，但在执行insert时却发现该记录已经存在，导致无法插入，这即是幻读的发生。</li>
</ul>
<h5 id="2-总结-2">[2]总结</h5>
<ul>
<li>幻读，并不是说两次读取获取的结果集不同，幻读侧重的方面是某一次的 select 操作得到的结果所表征的数据状态无法支撑后续的业务操作。</li>
<li>更为具体一些：select 某记录是否存在，不存在，准备插入此记录，但执行 insert 时发现此记录已存在，无法插入，此时就发生了幻读</li>
</ul>
<h3 id="【4】解决办法">【4】解决办法</h3>
<ul>
<li>要解决脏读，不可重复读和幻读的问题</li>
<li>我们就要引入几个概念：MVCC机制，事务隔离机制和数据库锁机制。</li>
</ul>
<h2 id="【三】数据库事务隔离机制">【三】数据库事务隔离机制</h2>
<ul>
<li>事务具有原子性、一致性、隔离性、持久性四大特性</li>
</ul>
<h3 id="【1】事务的四大特性-ACID">【1】事务的四大特性(ACID)</h3>
<h4 id="（1）原子性（Atomicity）">（1）原子性（Atomicity）</h4>
<ul>
<li>事务是一个不可再分割的单位，要么全部执行成功，要么全部回滚到初始状态，没有中间状态。</li>
<li>这意味着如果事务中的任何一步操作失败，整个事务都会被回滚，以确保数据的一致性。</li>
</ul>
<h4 id="（2）一致性（Consistency）">（2）一致性（Consistency）</h4>
<ul>
<li>事务执行前后，数据库的状态必须保持一致。</li>
<li>这意味着事务在执行期间对数据的操作必须满足预定义的规则和完整性约束，以确保数据的有效性和正确性。</li>
</ul>
<h4 id="（3）隔离性（Isolation）">（3）隔离性（Isolation）</h4>
<ul>
<li>多个事务可能同时执行，事务之间应该相互隔离，互不影响。</li>
<li>隔离性确保每个事务的操作在逻辑上独立于其他并发事务的操作，从而避免了数据不一致的问题。</li>
</ul>
<h4 id="（4）持久性（Durability）">（4）持久性（Durability）</h4>
<ul>
<li>一旦事务提交，对数据库的更改应该是永久性的，即使在系统故障的情况下也不应该丢失。</li>
<li>持久性通过将事务记录在持久存储介质（如磁盘）上来实现。</li>
</ul>
<h3 id="【2】隔离性的四种级别">【2】隔离性的四种级别</h3>
<h4 id="（1）引入">（1）引入</h4>
<ul>
<li>
<p>而隔离性顾名思义指的就是事务彼此之间隔离开</p>
</li>
<li>
<ul>
<li>多个事务在同时处理一个数据时彼此之间互相不影响</li>
<li>如如果隔离的不够好就有可能会产生脏读、不可重复度、幻读等读现象</li>
</ul>
</li>
<li>
<p>为此，隔离性总共分为四种级别</p>
</li>
<li>
<p>由低到高依次为</p>
</li>
<li>
<ul>
<li>Read uncommitted（未提交读）</li>
<li>Read committed （提交读）</li>
<li>Repeatable read（可重复读）</li>
<li>Serializable（串行化）</li>
</ul>
</li>
</ul>
<h4 id="（2）四种级别">（2）四种级别</h4>
<h5 id="1-Read-uncommitted（读未提交）">[1]Read uncommitted（读未提交）</h5>
<ul>
<li>最低的隔离级别，在这个级别下，一个事务可以读取到另一个事务尚未提交的数据，可能导致脏读（Dirty Read）问题，即读取到未经验证的数据。</li>
</ul>
<h5 id="2-Read-committed（读已提交）">[2]Read committed（读已提交）</h5>
<ul>
<li>在这个级别下，一个事务只能读取到已经提交的数据，避免了脏读问题。</li>
<li>但是可能会出现不可重复读（Non-repeatable Read）问题，即同一事务中，两次读取相同的记录可能得到不同的结果，因为其他事务修改了这些记录。</li>
</ul>
<h5 id="3-Repeatable-read（可重复读取）">[3]Repeatable read（可重复读取）</h5>
<ul>
<li>在这个级别下，事务开始读取数据后，其他事务无法修改这些数据，保证了同一个事务内两次读取相同记录的一致性。</li>
<li>但是可能会出现幻读（Phantom Read）问题，即同一查询在同一事务中两次执行可能返回不同的结果，因为其他事务插入或删除了符合查询条件的记录。</li>
</ul>
<h5 id="4-Serializable（串行化）">[4]Serializable（串行化）</h5>
<ul>
<li>最高级别的隔离级别，要求事务串行执行，事务之间完全隔离，避免了脏读、不可重复读和幻读问题。</li>
<li>但是这会牺牲并发性能，因为并发事务被限制为顺序执行。</li>
</ul>
<h3 id="【3】四大隔离级别解决了什么问题">【3】四大隔离级别解决了什么问题</h3>
<ul>
<li>
<p>Read uncommitted（读未提交）</p>
</li>
<li>
<ul>
<li><strong>存在脏读、不可重复读和幻读问题</strong>。</li>
</ul>
</li>
<li>
<p>Read committed（读已提交）</p>
</li>
<li>
<ul>
<li><strong>解决了脏读问题</strong>，但<strong>仍可能出现不可重复读和幻读</strong>。</li>
</ul>
</li>
<li>
<p>Repeatable read（可重复读取）</p>
</li>
<li>
<ul>
<li><strong>解决了脏读和不可重复读问题</strong>，但<strong>仍可能出现幻读</strong>。</li>
</ul>
</li>
<li>
<p>Serializable（串行化）</p>
</li>
<li>
<ul>
<li><strong>解决了脏读、不可重复读和幻读问题</strong>，但在<strong>效率方面有所牺牲</strong>。</li>
</ul>
</li>
</ul>
<h3 id="【4】MySQL的存储引擎默认的隔离级别">【4】MySQL的存储引擎默认的隔离级别</h3>
<ul>
<li>Repratable read (可重复读)</li>
</ul>
<h3 id="【5】幻读的解决办法">【5】幻读的解决办法</h3>
<ul>
<li>MySQL引入了Next-key lock的行级锁来解决，我们将会在下一节里详细叙述</li>
</ul>
<h2 id="【四】MVCC机制">【四】MVCC机制</h2>
<h3 id="【1】什么是MVCC机制">【1】什么是MVCC机制</h3>
<ul>
<li>MVCC是MySQL InnoDB存储引擎实现的一种基于多版本的并发控制协议。</li>
<li>基于多版本的并发控制协议——MVCC (Multi-Version Concurrency Control) 。</li>
</ul>
<h3 id="【2】MVCC的优势">【2】MVCC的优势</h3>
<ul>
<li>MVCC实现了读不加锁，避免了读写冲突，提高了系统的并发性能。</li>
<li>MVCC解决了数据的脏读问题，保证了数据的一致性。</li>
</ul>
<h3 id="【3】MVCC的读操作">【3】MVCC的读操作</h3>
<ul>
<li>MVCC的并发控制的系统中，读操作可分为两类：当前读和快照读。</li>
</ul>
<h4 id="（1）快照读">（1）快照读</h4>
<ul>
<li>快照读是指对数据库进行简单的select操作时，不会加锁，而是通过查询当前事务开始时的系统时间点，获取该时间点之前的数据副本。</li>
<li>由于每个事务都有自己的时间点，所以每个事务看到的都是自己创建时的状态，从而避免了脏读的发生。</li>
</ul>
<h4 id="（2）当前读">（2）当前读</h4>
<ul>
<li>特殊的读操作，插入/更新/删除操作，属于当前读，需要加锁。</li>
<li>当前读是指对数据库进行插入、更新或删除操作时，需要加锁，以防止其他事务修改已经锁定的数据。只有当事务完成所有更新后，才会将其提交到数据库，并释放所有的锁。</li>
<li>这种机制可以确保数据的一致性和完整性，但会降低系统的并发性能。</li>
</ul>
<h1>MySQL进阶知识之锁机制</h1>
<h2 id="【一】什么是锁机制">【一】什么是锁机制</h2>
<ul>
<li>
<p>我们可以通过一个很简单的比喻来理解事务的锁机制。</p>
</li>
<li>
<p>比如同一个办公室的同事们</p>
</li>
<li>
<ul>
<li>都想使用打印机打印文件</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>如果不加以控制</li>
<li>可能出现两个人同时打印不同的内容在一个文件里</li>
<li>就会引起内容混乱。</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>于是，我们就引入了锁的概念</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>当有并发的多个事务同时操作同一份数据时</li>
<li>只有“抢到”了锁的事务</li>
<li>才能真正去操作数据</li>
<li>使得数据的安全性得到保证。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【二】为什么要用锁机制">【二】为什么要用锁机制</h2>
<ul>
<li>
<p>锁保证并发的多个事务同一时间只有一个能运行</p>
</li>
<li>
<ul>
<li>会一定程度上降低程序的运行效率</li>
<li>但是能大大提升数据的安全性。</li>
</ul>
</li>
</ul>
<h2 id="【三】数据库锁的分类">【三】数据库锁的分类</h2>
<h3 id="【1】按粒度分">【1】按粒度分</h3>
<ul>
<li>
<p>数据库的锁按粒度分为</p>
</li>
<li>
<ul>
<li>行级锁</li>
<li>表级锁</li>
<li>页级锁</li>
</ul>
</li>
</ul>
<h4 id="（1）什么是⾏级锁">（1）什么是⾏级锁</h4>
<ul>
<li>
<p>⾏级锁是Mysql中锁定粒度最细的⼀种锁</p>
</li>
<li>
<ul>
<li>表示只针对当前操作的⾏进⾏加锁。</li>
</ul>
</li>
<li>
<p>⾏级锁能⼤⼤减少数据库操作的冲突。</p>
</li>
<li>
<ul>
<li>其加锁粒度最⼩，但加锁的开销也最⼤。</li>
</ul>
</li>
<li>
<p>⾏级锁分为共享锁和排他锁。</p>
</li>
</ul>
<h4 id="（2）⾏级锁的特点">（2）⾏级锁的特点</h4>
<ul>
<li>开销⼤，加锁慢；</li>
<li>会出现死锁；</li>
<li>锁定粒度最⼩，发⽣锁冲突的概率最低，并发度也最⾼</li>
</ul>
<h4 id="（3）⾏级锁解释">（3）⾏级锁解释</h4>
<ul>
<li>
<p>由于数据库的库和表都是事先建好的</p>
</li>
<li>
<ul>
<li>所以我们针对数据库的操作一般都是针对记录。</li>
<li>而对记录进行的四种操作（增删改查）</li>
<li>我们可以分为两类</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>增删改属于读操作</li>
<li>而查询属于写操作。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>写操作默认就会加锁，且加的是互斥锁</p>
</li>
<li>
<ul>
<li>很容易理解，在进行写行为的时候一定是必须“排他”的。</li>
<li>读操作默认不受任何锁影响</li>
<li>但是互斥锁和共享锁都可以加。</li>
</ul>
</li>
<li>
<p>读操作加互斥锁 for update;</p>
</li>
<li>
<p>读操作加共享锁 lock in share mode;</p>
</li>
</ul>
<p>提示：关于共享锁和互斥锁，我们将在下一小节更详细地讲述</p>
<h4 id="（4）行级锁锁的是索引">（4）行级锁锁的是索引</h4>
<ul>
<li>
<p>行级锁锁的是索引</p>
</li>
<li>
<ul>
<li>命中索引以后才会锁行</li>
<li>如果没有命中索引</li>
<li>会把整张表都锁起来。</li>
</ul>
</li>
<li>
<p>命中主键索引就锁定这条语句命中的主键索引</p>
</li>
<li>
<ul>
<li>命中辅助索引就会先锁定这条辅助索引</li>
<li>再锁定相关的主键索引</li>
<li>考虑到性能，innodb默认支持行级锁</li>
<li>但是只有在命中索引的情况下才锁行，</li>
</ul>
</li>
<li>
<p>否则锁住所有行</p>
</li>
<li>
<ul>
<li>本质还是行锁</li>
<li>但是此刻相当于锁表了</li>
</ul>
</li>
</ul>
<h4 id="（5）行级锁的三种算法">（5）行级锁的三种算法</h4>
<ul>
<li>
<p>1、Record lock</p>
</li>
<li>
<p>2、Gap lock</p>
</li>
<li>
<p>3、Next-key lock</p>
</li>
<li>
<p>其中 Next-key lock 为MySQL默认的锁机制</p>
</li>
<li>
<ul>
<li>相当于另外两种锁的功能的整合</li>
<li>并能够解决幻读问题。</li>
</ul>
</li>
<li>
<p>提示：</p>
</li>
<li>
<ul>
<li>在RR事务隔离机制下，才会锁间隙</li>
<li>而RR机制是mysql的默认事务隔离机制。</li>
<li>所以，在默认情况下，其实innodb存储引擎锁的是行以及间隙.</li>
</ul>
</li>
<li>
<p>我们可以用一个实验来验证上述关于行锁的结论</p>
</li>
</ul>
<h4 id="（6）实验">（6）<strong>实验</strong></h4>
<table>
<thead>
<tr>
<th>事务一</th>
<th>事务二</th>
</tr>
</thead>
<tbody>
<tr>
<td>start transaction;</td>
<td>开启事务start transaction;</td>
</tr>
<tr>
<td></td>
<td>– 加排他锁select from t1 where id=7 for update; – 须知-- 1、上述语句命中了索引，所以加的是行锁-- 2、InnoDB对于行的查询都是采用了Next-Key Lock的算法，锁定的不是单个值，而是一个范围（GAP）表记录的索引值为1，5，7，11，其记录的GAP区间如下：（-∞,1]，(1,5]，(5,7]，(7,11]，(11,+∞）因为记录行默认就是按照主键自增的，所以是一个左开右闭的区间其中上述查询条件id=7处于区间(5,7]中，所以Next-Key lock会锁定该区间的记录，但是还没完-- 3、<em>InnoDB存储引擎还会对辅助索引下一个键值加上gap lock</em>*。区间(5,7]的下一个Gap是(7,11],所以(7,11]也会被锁定综上所述，最终确定5-11之间的值都会被锁定</td>
</tr>
<tr>
<td>– 下述sql全都会阻塞在原地insert t1 values(5);insert t1 values(6);insert t1 values(7);insert t1 values(8);insert t1 values(9);insert t1 values(10); – 下述等sql均不会阻塞insert t1 values(11); insert t1 values(1); insert t1 values(2);insert t1 values(3);insert t1 values(4);</td>
<td></td>
</tr>
<tr>
<td>– 提交一下事务，不要影响下一次实验commit;</td>
<td>– 提交一下事务，不要影响下一次实验commit;</td>
</tr>
</tbody>
</table>
<h3 id="【2】按级别分">【2】按级别分</h3>
<ul>
<li>
<p>数据库的锁按级别分为</p>
</li>
<li>
<ul>
<li>共享锁，排他锁，共享锁</li>
<li>又被称作读锁，s锁</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>含义是多个事务共享同一把锁</li>
<li>其中每个事务都能访问到数据</li>
<li>但是没有办法进行修改。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>注意：</p>
</li>
<li>
<ul>
<li>如果事务T对数据A加上共享锁后</li>
<li>则其他事务只能对A再加共享锁或不加锁（在其他事务里一定不能再加排他锁</li>
<li>但是在事务T自己里面是可以加的）</li>
</ul>
</li>
<li>
<p>排他锁又被称作互斥锁，写锁，x锁</p>
</li>
<li>
<ul>
<li>含义是如果有一个事务获取了一个数据的排他锁</li>
<li>那么其它的事务都无法再次获得该数据的任何锁了</li>
<li>但是排他锁支持文件读取，修改和写入。</li>
</ul>
</li>
</ul>
<h3 id="【3】按使用方式分">【3】按使用方式分</h3>
<ul>
<li>
<p>数据库的锁按使用方式分为</p>
</li>
<li>
<ul>
<li>悲观锁、乐观锁</li>
</ul>
</li>
</ul>
<h4 id="（1）悲观锁（Pessimistic-Locking）">（1）悲观锁（Pessimistic Locking）</h4>
<ul>
<li>顾名思义指的是对外界将要进行的数据修改操作持悲观态度</li>
<li>因此，在整个数据处理过程中，将数据处于锁定状态。</li>
<li>现在由于互联网的高并发架构，即使加上悲观锁也无法保证数据不被外界修改，因此不推荐使用。</li>
</ul>
<h4 id="（2）乐观锁（Optimistic-Locking）">（2）乐观锁（Optimistic Locking）</h4>
<ul>
<li>
<p>相对悲观锁而言，乐观锁假设认为数据一般情况下不会造成冲突</p>
</li>
<li>
<p>所以在数据进行提交更新的时候，才会正式对数据的冲突与否进行检测</p>
</li>
<li>
<p>如果发现冲突了，则让返回用户错误的信息，让用户决定如何去做。</p>
</li>
<li>
<p>通常乐观锁的实现是在表中加一个字段（可能是时间戳或版本号）</p>
</li>
<li>
<p>在写入的时候会查询一下版本号</p>
</li>
<li>
<ul>
<li>如果版本号没有改变，就写入数据库并同时改变版本号。</li>
</ul>
</li>
<li>
<p>从本质上来说，乐观锁并没有加锁</p>
</li>
<li>
<ul>
<li>所以效率会大大提升</li>
<li>但也有一定的缺陷，就是可能导致一部分任务的写入失败。</li>
</ul>
</li>
</ul>
<h2 id="【四】死锁问题">【四】死锁问题</h2>
<ul>
<li>
<p>我们举一个例子来形象的说明死锁这个概念。</p>
</li>
<li>
<p>比如你和你的邻居同时被锁在了屋子里</p>
</li>
<li>
<ul>
<li>然而你有你邻居的钥匙</li>
<li>你的邻居也有你的钥匙</li>
<li>你们互相可以打开对方的房门</li>
<li>但是却都被锁在了各自的屋子里</li>
<li>这就是一个简单的死锁现象</li>
</ul>
</li>
</ul>
<h3 id="【1】第一种情况的死锁">【1】第一种情况的死锁</h3>
<table>
<thead>
<tr>
<th>事务1</th>
<th>事务2</th>
</tr>
</thead>
<tbody>
<tr>
<td>begin</td>
<td>begin</td>
</tr>
<tr>
<td>select * from t1 where id=6 for update;</td>
<td>delete from t1 where id=3;</td>
</tr>
<tr>
<td>update t1 set age=18 where id=3;</td>
<td>delete from t1 where id=6; – 阻塞</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>第一种死锁情况非常好理解，也是最常见的死锁</p>
</li>
<li>
<ul>
<li>每个事务执行两条SQL，分别持有了一把锁</li>
<li>然后加另一把锁，产生死锁。</li>
</ul>
</li>
<li>
<p>大多数死锁问题</p>
</li>
<li>
<ul>
<li>innodb存储引擎都会发现并抛出异常</li>
<li>但是有一种死锁问题极其隐蔽。</li>
</ul>
</li>
</ul>
<h3 id="【2】第二种情况的死锁">【2】第二种情况的死锁</h3>
<ul>
<li>
<p>与上一种死锁情况不同的是</p>
</li>
<li>
<ul>
<li>这种死锁现象必须是两个事务同时运行的情况下才可能发生。</li>
</ul>
</li>
<li>
<p>前面我们提到过，聚集索引对应的是一整行数据记录。</p>
</li>
<li>
<ul>
<li>当事务1根据一定的过滤条件</li>
<li>筛选出两条辅助索引时</li>
<li>根据索引的有序性</li>
<li>在锁完辅助索引后锁主键索引时</li>
<li>先锁主键1对应的记录再锁主键2。</li>
<li>如果在此同时</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>事务2通过别的辅助索引同样访问到了这两条数据</li>
<li>但顺序却是先锁主键2再锁主键1</li>
<li>就会互相锁住</li>
<li>产生死锁现象</li>
<li>而且这种情况非常隐蔽，较难排查。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>数据库的三大范式</h1>
<h2 id="【一】什么是范式">【一】什么是范式</h2>
<ul>
<li>范式就是我们设计数据库的表时，一些共同遵循的规范</li>
<li>掌握这些设计时的范式，可以让我们的项目之初，设计库的表结构更加合理和优雅</li>
</ul>
<h2 id="【二】三大范式之间的关系">【二】三大范式之间的关系</h2>
<ul>
<li>三大范式之间是递增的关系，一个范式是在前一个范式的基础上推行</li>
<li>三大范式之间不可颠倒，后者都是建立在前者之上</li>
</ul>
<h2 id="【三】第一范式（1NF）">【三】第一范式（1NF）</h2>
<h3 id="【1】什么是第一范式">【1】什么是第一范式</h3>
<ul>
<li>表库设计时，主要是确保原子性，也就是确保数据具有不可再分性</li>
<li>这里的原子性和MySQL特点中的原子性不同</li>
</ul>
<h3 id="【2】第一范式的原子性">【2】第一范式的原子性</h3>
<ul>
<li>指一个字段不可再分割，其中不可包含其它更小的数据单元</li>
<li>就是说一个字段的数据不能再被进一步分解为更小的数据单元</li>
</ul>
<h4 id="（1）例子说明">（1）例子说明</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 比如我们有一张表</span></span><br><span class="line"><span class="comment">-- 表的结构如下</span></span><br><span class="line"></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> student              <span class="operator">|</span> course <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> 蚩梦，男，<span class="number">185</span>cm      <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦，男，<span class="number">185</span>cm      <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦，男，<span class="number">185</span>cm      <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌，女，<span class="number">170</span>cm      <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌，女，<span class="number">170</span>cm      <span class="operator">|</span> 数学   <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌，女，<span class="number">170</span>cm      <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------+--------+-------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>student明显不符合我们第一范式的要求
<ul>
<li>第一规范的要求—》<strong>一个字段不可再分割，其中不可包含其它更小的数据单元</strong></li>
</ul>
</li>
<li>student字段还是可以在继续拆分</li>
</ul>
<h4 id="（2）基于第一范式优化">（2）基于第一范式优化</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> student_name <span class="operator">|</span> student_sex <span class="operator">|</span> student_height <span class="operator">|</span> course <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 数学   <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>将student字段拆分成三个字段后，这张表符合了第一范式的规范</li>
</ul>
<h4 id="（3）如果不去拆分列满足第一范式，会造成什么影响呢？">（3）如果不去拆分列满足第一范式，会造成什么影响呢？</h4>
<ul>
<li>我们使用不符合第一范式的表结构去做业务开发时，操作会比较麻烦一些，当我们进行符合第一范式的二次设计后，虽然表的字段变多了，但是数据结构变得清晰了很多</li>
</ul>
<h4 id="（4）第一范式（1NF）">（4）第一范式（1NF）</h4>
<ul>
<li>第一范式我们通常叫 1NF</li>
<li>第一范式要求我们必须遵守原子性
<ul>
<li>及数据库的每一列都是不可分割
<ul>
<li>每列的值具有原子性，不可再分割</li>
<li>每个字段的值都只能是单一值</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【四】第二范式（2NF）">【四】第二范式（2NF）</h2>
<h3 id="【1】什么是第二范式">【1】什么是第二范式</h3>
<ul>
<li>第二范式是满足第一范式的基础上</li>
<li>第二范式要求表中的所有列，其数据依赖于主键
<ul>
<li>既一张表只存储同一类型的数据，不能有任何一列数据的主键没有关系</li>
</ul>
</li>
</ul>
<h3 id="【2】案例（第二范式）">【2】案例（第二范式）</h3>
<h4 id="（1）基于第一范式的表">（1）基于第一范式的表</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> student_name <span class="operator">|</span> student_sex <span class="operator">|</span> student_height <span class="operator">|</span> course <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 数学   <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 蚩梦         <span class="operator">|</span> 男          <span class="operator">|</span> <span class="number">185</span>cm          <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 语文   <span class="operator">|</span>    <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 数学   <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 萌萌         <span class="operator">|</span> 女          <span class="operator">|</span> <span class="number">170</span>cm          <span class="operator">|</span> 英语   <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------------+----------------+--------+-------+</span></span><br></pre></td></tr></table></figure>
<h4 id="2-基于第二范式进行优化">(2)基于第二范式进行优化</h4>
<ul>
<li>表一
<ul>
<li>student：学生</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> student_id <span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> department   <span class="operator">|</span> dean         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> 蚩梦   <span class="operator">|</span> 男   <span class="operator">|</span> <span class="number">185</span>cm  <span class="operator">|</span> 计算机系     <span class="operator">|</span> 竹子老大     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> 萌萌   <span class="operator">|</span> 女   <span class="operator">|</span> <span class="number">170</span>cm  <span class="operator">|</span> 金融系       <span class="operator">|</span> 熊猫老大     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表二
<ul>
<li>course：学科</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+</span></span><br><span class="line"><span class="operator">|</span> course_id <span class="operator">|</span> course_name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span> 语文        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span> 数学        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span> 英语        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+-------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表三
<ul>
<li>score :成绩</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">----------+------------+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span> score_id <span class="operator">|</span> student_id <span class="operator">|</span> course_id <span class="operator">|</span> score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+-----------+-------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span>    <span class="number">88</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span>         <span class="number">1</span> <span class="operator">|</span>    <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span>         <span class="number">2</span> <span class="operator">|</span>    <span class="number">90</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">6</span> <span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span>         <span class="number">3</span> <span class="operator">|</span>    <span class="number">95</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+-----------+-------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>小结：</p>
<ul>
<li>
<p>我们将原来的第一范式优化的表拆成了三份</p>
</li>
<li>
<p>每张表的id作为自己本表的主键，其他字段都依赖于自己的主键</p>
</li>
<li>
<p>无论那张表都可以根据主键id获得其它字段的值</p>
</li>
<li>
<p>我们可以看出经过第二范式优化后，每张表都有各自的业务属性，都具有唯一性</p>
<ul>
<li>每张表只描述一件事</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="【3】小结">【3】小结</h3>
<ul>
<li>
<p>第二范式也叫做2NF</p>
<ul>
<li>第二范式是基于第一范式的基础上建立起来的</li>
<li>满足第二范式必须先满足第一范式</li>
</ul>
</li>
<li>
<p>第一范式要求我们必须遵守原子性</p>
</li>
<li>
<p>第二范式要求表中的所有列，其数据依赖于主键</p>
</li>
<li>
<ul>
<li>即一张表只存储同一类型的数据，不能有任何一列数据与主键没有关系</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>如果表是单主键，那么主键以外的列必须完全依赖于主键，其它列需要跟主键有关系</li>
<li>如果表是复合主键，那么主键以外的列必须完全依赖于主键，不能仅依赖主键的一部分</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="【五】第三范式（3NF）">【五】第三范式（3NF）</h2>
<h3 id="【1】什么是第三范式">【1】什么是第三范式</h3>
<ul>
<li>第三范式是满足第二范式的基础上</li>
<li>第三范式要求表中每一列数据不能与主键以外的字段有直接联系
<ul>
<li>表中的非主键列必须和主键直接相关而不能间接相关</li>
<li>非主键列之间不能相关依赖，不存在传递依赖</li>
</ul>
</li>
</ul>
<h3 id="【2】案例（第三范式）">【2】案例（第三范式）</h3>
<h4 id="（1）基于第二范式的基表">（1）基于第二范式的基表</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> student_id <span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> department   <span class="operator">|</span> dean         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> 蚩梦   <span class="operator">|</span> 男   <span class="operator">|</span> <span class="number">185</span>cm  <span class="operator">|</span> 计算机系     <span class="operator">|</span> 竹子老大     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> 萌萌   <span class="operator">|</span> 女   <span class="operator">|</span> <span class="number">170</span>cm  <span class="operator">|</span> 金融系       <span class="operator">|</span> 熊猫老大     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+--------------+--------------+</span></span><br></pre></td></tr></table></figure>
<h4 id="2-第三范式进行优化">(2)第三范式进行优化</h4>
<ul>
<li>department : 部门</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span> department_id <span class="operator">|</span> department_name <span class="operator">|</span> department_dean <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------------+-----------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span> 计算机系        <span class="operator">|</span> 竹子老大        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">2</span> <span class="operator">|</span> 金融系          <span class="operator">|</span> 熊猫老大        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-----------------+-----------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>student：学生</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+---------------+</span></span><br><span class="line"><span class="operator">|</span> student_id <span class="operator">|</span> name   <span class="operator">|</span> sex  <span class="operator">|</span> height <span class="operator">|</span> department_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+---------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span> 蚩梦   <span class="operator">|</span> 男   <span class="operator">|</span> <span class="number">185</span>cm  <span class="operator">|</span>             <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span> 萌萌   <span class="operator">|</span> 女   <span class="operator">|</span> <span class="number">170</span>cm  <span class="operator">|</span>             <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------+------+--------+---------------+</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>小结：</p>
</li>
<li>
<p>经过上述优化后，我们又将学生表拆成了 学生表 和 院系表 。</p>
</li>
<li>
<ul>
<li>学生表只存储一个院系对应的 ID</li>
<li>院系表存储院系相关的数据</li>
</ul>
</li>
<li>
<p>通过以上优化，我们可以发现</p>
</li>
<li>
<ul>
<li>学生表中的每个非主键字段与其他非主键字段之间都是相互独立的</li>
<li>彼此之间不存在任何依赖关系</li>
<li>所有的字段都依赖于主键</li>
</ul>
</li>
</ul>
<h3 id="【3】如果不调整表结构会如何？">【3】如果不调整表结构会如何？</h3>
<ul>
<li>
<p>如果不调整上述结构，那么我们在操作数据表的时候就会发生如下问题</p>
</li>
<li>
<ul>
<li>当一个院系院长换人后，需要修改学生信息表中的每一条数据</li>
<li>当一个院长离职后，需要删除院长的相关数据，包括学生表中的相关数据</li>
</ul>
</li>
<li>
<p>由此，会引发很多意料之外的错误和数据异常，让整张表较难维护</p>
</li>
</ul>
<h3 id="【4】小结">【4】小结</h3>
<ul>
<li>
<p>第三范式，我们通常也叫 3NF</p>
</li>
<li>
<ul>
<li>第三范式(3NF)是在第二范式(2NF)的基础上建立起来得</li>
<li>满足第三范式(3NF)必须先满足第二范式(2NF)</li>
</ul>
</li>
<li>
<p>第一范式要求我们必须遵守原子性</p>
</li>
<li>
<p>第二范式要求表中的所有列，其数据依赖于主键</p>
</li>
<li>
<ul>
<li>即一张表只存储同一类型的数据，不能有任何一列数据与主键没有关系</li>
</ul>
</li>
<li>
<ul>
<li>
<ul>
<li>如果表是单主键，那么主键以外的列必须完全依赖于主键，其它列需要跟主键有关系</li>
<li>如果表是复合主键，那么主键以外的列必须完全依赖于主键，不能仅依赖主键的一部分</li>
</ul>
</li>
</ul>
</li>
<li>
<p>第三范式要求表中每一列数据不能与主键之外的字段有直接关系</p>
</li>
<li>
<ul>
<li>表中的非主键列必须和主键直接相关而不能间接相关</li>
<li>非主键列之间不能相关依赖，不存在传递依赖</li>
</ul>
</li>
</ul>
<h2 id="【六】数据库三范式总结">【六】数据库三范式总结</h2>
<ul>
<li>
<p>三范式直观阐述，总结如下：</p>
</li>
<li>
<ul>
<li>第一范式：确保原子性，表中每一个列数据都必须是不可再分的字段。</li>
<li>第二范式：确保唯一性，每张表都只描述一种业务属性，一张表只描述一件事。</li>
<li>第三范式：确保独立性，表中除主键外，每个字段之间不存在任何依赖，都是独立的。</li>
</ul>
</li>
<li>
<p>没有按照范式设计时，会存在几个问题：</p>
</li>
<li>
<ul>
<li>整张表数据比较冗余，同一个学生信息会出现多条。</li>
<li>表结构特别臃肿，不易于操作，要新增一个学生信息时，需添加大量数据。</li>
<li>需要更新其他业务属性的数据时，比如院系院长换人了，需要修改所有学生的记录。</li>
</ul>
</li>
<li>
<p>但按照三范式将表结构拆开后</p>
</li>
<li>
<ul>
<li>假设要新增一条学生数据，就只需要插入学生相关的信息即可</li>
<li>同时如果某个院系的院长换人了，只需要修改院系表中的院长就行，学生表中的数据无需发生任何更改。</li>
</ul>
</li>
<li>
<p><strong>经过三范式的设计优化后，整个库中的所有表结构，会显得更为优雅，灵活性也会更强</strong></p>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cc2f707a1-189a-4dfe-bd28-e4572d65f3c3.png" alt=""></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Blog/" rel="tag"># Blog</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/10/15/pycharm%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B/" rel="prev" title="pycharm安装过程">
      <i class="fa fa-chevron-left"></i> pycharm安装过程
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/10/15/jQuery%E4%BB%8B%E7%BB%8D/" rel="next" title="jQuery介绍">
      jQuery介绍 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">1.</span> <span class="nav-text">MySQL进阶知识之视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E8%A7%86%E5%9B%BE%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.1.</span> <span class="nav-text">【一】视图介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE"><span class="nav-number">1.1.1.</span> <span class="nav-text">【1】什么是视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">1.1.2.</span> <span class="nav-text">【2】为什么要用视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BC%98%E7%82%B9"><span class="nav-number">1.1.3.</span> <span class="nav-text">【3】视图的优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E6%80%BB%E7%BB%93"><span class="nav-number">1.1.4.</span> <span class="nav-text">【4】总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">1.2.</span> <span class="nav-text">【二】使用视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E8%AF%AD%E6%B3%95"><span class="nav-number">1.2.1.</span> <span class="nav-text">【1】语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="nav-number">1.2.2.</span> <span class="nav-text">【2】创建视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E8%A7%86%E5%9B%BE%E6%9F%A5%E8%AF%A2"><span class="nav-number">1.2.3.</span> <span class="nav-text">【3】视图查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E6%9B%B4%E6%96%B0%E8%A7%86%E5%9B%BE"><span class="nav-number">1.2.4.</span> <span class="nav-text">【4】更新视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="nav-number">1.2.5.</span> <span class="nav-text">【5】删除视图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E6%80%BB%E7%BB%93"><span class="nav-number">1.3.</span> <span class="nav-text">【三】总结</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">2.</span> <span class="nav-text">MySQL进阶知识之触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.1.</span> <span class="nav-text">【一】触发器介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.1.1.</span> <span class="nav-text">【1】什么是触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-number">2.1.2.</span> <span class="nav-text">【2】触发器的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E4%B8%BA%E4%BD%95%E4%BD%BF%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.1.3.</span> <span class="nav-text">【3】为何使用触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E5%85%AD%E7%A7%8D%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-number">2.2.</span> <span class="nav-text">【二】触发器的六种使用情况</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="nav-number">2.3.</span> <span class="nav-text">【三】语法结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%9B%9B%E3%80%91%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.4.</span> <span class="nav-text">【四】示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88%E5%9C%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%89%8D%E8%A7%A6%E5%8F%91%EF%BC%89"><span class="nav-number">2.4.1.</span> <span class="nav-text">【1】定义创建触发器（在插入数据前触发）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%AE%9A%E4%B9%89%E7%BB%91%E5%AE%9A%E8%A7%A6%E5%8F%91%E5%99%A8%E6%A1%88%E4%BE%8B%EF%BC%88%E5%9C%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%89%8D%E8%A7%A6%E5%8F%91%EF%BC%89"><span class="nav-number">2.4.2.</span> <span class="nav-text">【2】定义绑定触发器案例（在插入数据前触发）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E7%BB%91%E5%AE%9A%E8%A7%A6%E5%8F%91%E5%99%A8%E6%A1%88%E4%BE%8B"><span class="nav-number">2.4.3.</span> <span class="nav-text">【3】绑定触发器案例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E5%9C%A8%E6%8F%92%E5%85%A5%E4%B9%8B%E5%89%8D%E8%A7%A6%E5%8F%91%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.4.4.</span> <span class="nav-text">【4】在插入之前触发示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E5%9C%A8%E6%8F%92%E5%85%A5%E4%B9%8B%E5%90%8E%E8%A7%A6%E5%8F%91%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.4.5.</span> <span class="nav-text">【5】在插入之后触发示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%906%E3%80%91%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E4%B8%8B%E6%89%80%E6%9C%89%E5%BA%93%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BF%A1%E6%81%AF"><span class="nav-number">2.4.6.</span> <span class="nav-text">【6】查看当前下所有库的触发器信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%907%E3%80%91%E5%88%A0%E9%99%A4%E5%BD%93%E5%89%8D%E5%BA%93%E4%B8%8B%E6%8C%87%E5%AE%9A%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BF%A1%E6%81%AF"><span class="nav-number">2.4.7.</span> <span class="nav-text">【7】删除当前库下指定的触发器信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%908%E3%80%91%E6%A1%88%E4%BE%8B"><span class="nav-number">2.4.8.</span> <span class="nav-text">【8】案例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%BB%BA%E8%A1%A8"><span class="nav-number">2.4.8.1.</span> <span class="nav-text">（1）建表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E9%9C%80%E6%B1%82"><span class="nav-number">2.4.8.2.</span> <span class="nav-text">(2)需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E5%BE%80cmd%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">2.4.8.3.</span> <span class="nav-text">（3）往cmd表中插入数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">2.4.8.4.</span> <span class="nav-text">(4)查看数据</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%94%E3%80%91%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.5.</span> <span class="nav-text">【五】自定义触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.5.1.</span> <span class="nav-text">【1】创建触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%AE%9A%E4%B9%89%E8%A7%A6%E5%8F%91%E5%99%A8%E9%80%BB%E8%BE%91"><span class="nav-number">2.5.2.</span> <span class="nav-text">【2】定义触发器逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%AE%9A%E4%B9%89%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="nav-number">2.5.3.</span> <span class="nav-text">【3】定义触发器的条件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E7%BB%91%E5%AE%9A%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.5.4.</span> <span class="nav-text">【4】绑定触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E6%B5%8B%E8%AF%95%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.5.5.</span> <span class="nav-text">【5】测试触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%85%AD%E3%80%91%E8%AF%AD%E5%8F%A5%E7%BB%93%E6%9D%9F%E7%AC%A6"><span class="nav-number">2.6.</span> <span class="nav-text">【六】语句结束符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8-2"><span class="nav-number">2.6.1.</span> <span class="nav-text">【1】创建触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">2.6.2.</span> <span class="nav-text">【2】删除触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%83%E3%80%91%E5%8F%82%E8%80%83%E6%A8%A1%E6%9D%BF"><span class="nav-number">2.7.</span> <span class="nav-text">【七】参考模板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%9C%A8%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%96%B0%E8%AE%B0%E5%BD%95%E6%97%B6%EF%BC%8C%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90%E5%94%AF%E4%B8%80%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="nav-number">2.7.1.</span> <span class="nav-text">【1】在表中插入新记录时，自动生成唯一标识符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%9C%A8%E8%A1%A8%E4%B8%AD%E6%9B%B4%E6%96%B0%E8%AE%B0%E5%BD%95%E6%97%B6%EF%BC%8C%E6%9B%B4%E6%96%B0%E6%9C%80%E5%90%8E%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4"><span class="nav-number">2.7.2.</span> <span class="nav-text">【2】在表中更新记录时，更新最后修改时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%9C%A8%E8%A1%A8%E4%B8%AD%E5%88%A0%E9%99%A4%E8%AE%B0%E5%BD%95%E6%97%B6%EF%BC%8C%E5%B0%86%E8%AE%B0%E5%BD%95%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E8%A1%A8"><span class="nav-number">2.7.3.</span> <span class="nav-text">【3】在表中删除记录时，将记录添加到历史记录表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E5%9C%A8%E8%A1%A8%E4%B8%AD%E6%8F%92%E5%85%A5%E6%96%B0%E8%AE%B0%E5%BD%95%E6%97%B6%EF%BC%8C%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E6%BB%A1%E8%B6%B3%E6%9F%90%E4%B8%AA%E6%9D%A1%E4%BB%B6%EF%BC%8C%E8%8B%A5%E4%B8%8D%E6%BB%A1%E8%B6%B3%E5%88%99%E5%8F%96%E6%B6%88%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C"><span class="nav-number">2.7.4.</span> <span class="nav-text">【4】在表中插入新记录时，检查是否满足某个条件，若不满足则取消插入操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E6%97%A5%E5%BF%97%E6%A8%A1%E6%9D%BF"><span class="nav-number">2.7.5.</span> <span class="nav-text">【5】日志模板</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">3.</span> <span class="nav-text">MySQL进阶知识之事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="nav-number">3.1.</span> <span class="nav-text">【一】什么是事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E4%BA%8B%E7%89%A9%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="nav-number">3.2.</span> <span class="nav-text">【二】事物的四大特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E5%8E%9F%E5%9E%8B%E6%80%A7%EF%BC%88Atomicity%EF%BC%89"><span class="nav-number">3.2.1.</span> <span class="nav-text">【1】原型性（Atomicity）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88Consistency%EF%BC%89"><span class="nav-number">3.2.2.</span> <span class="nav-text">【2】一致性（Consistency）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%88Isolation%EF%BC%89"><span class="nav-number">3.2.3.</span> <span class="nav-text">【3】隔离性（Isolation）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E6%8C%81%E4%B9%85%E6%80%A7-Durability"><span class="nav-number">3.2.4.</span> <span class="nav-text">【4】持久性(Durability)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E4%BA%8B%E7%89%A9%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">3.3.</span> <span class="nav-text">【三】事物的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7"><span class="nav-number">3.3.1.</span> <span class="nav-text">【1】数据库的一致性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="nav-number">3.3.2.</span> <span class="nav-text">【2】并发控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E6%95%85%E9%9A%9C%E6%81%A2%E5%A4%8D"><span class="nav-number">3.3.3.</span> <span class="nav-text">【3】故障恢复</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E9%AB%98%E6%95%88%E8%BF%90%E8%A1%8C"><span class="nav-number">3.3.4.</span> <span class="nav-text">【4】高效运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E5%92%8C%E5%AE%89%E5%85%A8%E6%80%A7"><span class="nav-number">3.3.5.</span> <span class="nav-text">【5】数据完整性和安全性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%906%E3%80%91%E7%94%A8%E6%88%B7%E6%8F%90%E4%BA%A4%E8%AE%A2%E5%8D%95%E6%93%8D%E4%BD%9C%E6%A1%88%E4%BE%8B"><span class="nav-number">3.3.6.</span> <span class="nav-text">【6】用户提交订单操作案例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%9B%9B%E3%80%91%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1"><span class="nav-number">3.4.</span> <span class="nav-text">【四】如何使用事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">3.4.1.</span> <span class="nav-text">【1】事务的关键字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.4.2.</span> <span class="nav-text">【2】使用事务的基本步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%BC%80%E5%90%AF"><span class="nav-number">3.4.2.1.</span> <span class="nav-text">（1）开启</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">4.</span> <span class="nav-text">MySQL进阶知识之存储过程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">5.</span> <span class="nav-text">MySQL进阶知识之函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">6.</span> <span class="nav-text">MySQL进阶知识之流程控制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">7.</span> <span class="nav-text">MySQL进阶知识之索引</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">8.</span> <span class="nav-text">MySQL进阶知识之事务隔离机制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E7%8E%B0%E8%B1%A1%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="nav-number">8.1.</span> <span class="nav-text">【一】数据库读现象的本质</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E5%A4%A7%E8%AF%BB%E7%8E%B0%E8%B1%A1"><span class="nav-number">8.2.</span> <span class="nav-text">【二】数据库三大读现象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E8%84%8F%E8%AF%BB"><span class="nav-number">8.2.1.</span> <span class="nav-text">【1】脏读</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%A6%82%E8%BF%B0"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">（1）概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E8%A7%A3%E9%87%8A"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">（2）解释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%80%BB%E7%BB%93"><span class="nav-number">8.2.1.3.</span> <span class="nav-text">（3）总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="nav-number">8.2.2.</span> <span class="nav-text">【2】不可重复读</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%A6%82%E8%BF%B0-2"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">（1）概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E8%A7%A3%E9%87%8A-2"><span class="nav-number">8.2.2.2.</span> <span class="nav-text">（2）解释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%80%BB%E7%BB%93-2"><span class="nav-number">8.2.2.3.</span> <span class="nav-text">（3）总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%B9%BB%E8%AF%BB"><span class="nav-number">8.2.3.</span> <span class="nav-text">【3】幻读</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%A6%82%E8%BF%B0-3"><span class="nav-number">8.2.3.1.</span> <span class="nav-text">（1）概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E9%94%99%E8%AF%AF%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-number">8.2.3.2.</span> <span class="nav-text">（2）错误的理解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E8%A7%A3%E9%87%8A"><span class="nav-number">8.2.3.2.1.</span> <span class="nav-text">[1]解释</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E6%80%BB%E7%BB%93"><span class="nav-number">8.2.3.2.2.</span> <span class="nav-text">[2]总结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%AD%A3%E7%A1%AE%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-number">8.2.3.3.</span> <span class="nav-text">（3）正确的理解</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E8%A7%A3%E9%87%8A-2"><span class="nav-number">8.2.3.3.1.</span> <span class="nav-text">[1]解释</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E6%80%BB%E7%BB%93-2"><span class="nav-number">8.2.3.3.2.</span> <span class="nav-text">[2]总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">8.2.4.</span> <span class="nav-text">【4】解决办法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E6%9C%BA%E5%88%B6"><span class="nav-number">8.3.</span> <span class="nav-text">【三】数据库事务隔离机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7-ACID"><span class="nav-number">8.3.1.</span> <span class="nav-text">【1】事务的四大特性(ACID)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%88Atomicity%EF%BC%89"><span class="nav-number">8.3.1.1.</span> <span class="nav-text">（1）原子性（Atomicity）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88Consistency%EF%BC%89"><span class="nav-number">8.3.1.2.</span> <span class="nav-text">（2）一致性（Consistency）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%88Isolation%EF%BC%89"><span class="nav-number">8.3.1.3.</span> <span class="nav-text">（3）隔离性（Isolation）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%8C%81%E4%B9%85%E6%80%A7%EF%BC%88Durability%EF%BC%89"><span class="nav-number">8.3.1.4.</span> <span class="nav-text">（4）持久性（Durability）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E9%9A%94%E7%A6%BB%E6%80%A7%E7%9A%84%E5%9B%9B%E7%A7%8D%E7%BA%A7%E5%88%AB"><span class="nav-number">8.3.2.</span> <span class="nav-text">【2】隔离性的四种级别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%BC%95%E5%85%A5"><span class="nav-number">8.3.2.1.</span> <span class="nav-text">（1）引入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%9B%9B%E7%A7%8D%E7%BA%A7%E5%88%AB"><span class="nav-number">8.3.2.2.</span> <span class="nav-text">（2）四种级别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-Read-uncommitted%EF%BC%88%E8%AF%BB%E6%9C%AA%E6%8F%90%E4%BA%A4%EF%BC%89"><span class="nav-number">8.3.2.2.1.</span> <span class="nav-text">[1]Read uncommitted（读未提交）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-Read-committed%EF%BC%88%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4%EF%BC%89"><span class="nav-number">8.3.2.2.2.</span> <span class="nav-text">[2]Read committed（读已提交）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-Repeatable-read%EF%BC%88%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E5%8F%96%EF%BC%89"><span class="nav-number">8.3.2.2.3.</span> <span class="nav-text">[3]Repeatable read（可重复读取）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-Serializable%EF%BC%88%E4%B8%B2%E8%A1%8C%E5%8C%96%EF%BC%89"><span class="nav-number">8.3.2.2.4.</span> <span class="nav-text">[4]Serializable（串行化）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%9B%9B%E5%A4%A7%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E8%A7%A3%E5%86%B3%E4%BA%86%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98"><span class="nav-number">8.3.3.</span> <span class="nav-text">【3】四大隔离级别解决了什么问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91MySQL%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E9%BB%98%E8%AE%A4%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">8.3.4.</span> <span class="nav-text">【4】MySQL的存储引擎默认的隔离级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%905%E3%80%91%E5%B9%BB%E8%AF%BB%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">8.3.5.</span> <span class="nav-text">【5】幻读的解决办法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%9B%9B%E3%80%91MVCC%E6%9C%BA%E5%88%B6"><span class="nav-number">8.4.</span> <span class="nav-text">【四】MVCC机制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AFMVCC%E6%9C%BA%E5%88%B6"><span class="nav-number">8.4.1.</span> <span class="nav-text">【1】什么是MVCC机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91MVCC%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">8.4.2.</span> <span class="nav-text">【2】MVCC的优势</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91MVCC%E7%9A%84%E8%AF%BB%E6%93%8D%E4%BD%9C"><span class="nav-number">8.4.3.</span> <span class="nav-text">【3】MVCC的读操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%BF%AB%E7%85%A7%E8%AF%BB"><span class="nav-number">8.4.3.1.</span> <span class="nav-text">（1）快照读</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%BD%93%E5%89%8D%E8%AF%BB"><span class="nav-number">8.4.3.2.</span> <span class="nav-text">（2）当前读</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">9.</span> <span class="nav-text">MySQL进阶知识之锁机制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E9%94%81%E6%9C%BA%E5%88%B6"><span class="nav-number">9.1.</span> <span class="nav-text">【一】什么是锁机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E9%94%81%E6%9C%BA%E5%88%B6"><span class="nav-number">9.2.</span> <span class="nav-text">【二】为什么要用锁机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">9.3.</span> <span class="nav-text">【三】数据库锁的分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E6%8C%89%E7%B2%92%E5%BA%A6%E5%88%86"><span class="nav-number">9.3.1.</span> <span class="nav-text">【1】按粒度分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E4%BB%80%E4%B9%88%E6%98%AF%E2%BE%8F%E7%BA%A7%E9%94%81"><span class="nav-number">9.3.1.1.</span> <span class="nav-text">（1）什么是⾏级锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E2%BE%8F%E7%BA%A7%E9%94%81%E7%9A%84%E7%89%B9%E7%82%B9"><span class="nav-number">9.3.1.2.</span> <span class="nav-text">（2）⾏级锁的特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E2%BE%8F%E7%BA%A7%E9%94%81%E8%A7%A3%E9%87%8A"><span class="nav-number">9.3.1.3.</span> <span class="nav-text">（3）⾏级锁解释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E8%A1%8C%E7%BA%A7%E9%94%81%E9%94%81%E7%9A%84%E6%98%AF%E7%B4%A2%E5%BC%95"><span class="nav-number">9.3.1.4.</span> <span class="nav-text">（4）行级锁锁的是索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E8%A1%8C%E7%BA%A7%E9%94%81%E7%9A%84%E4%B8%89%E7%A7%8D%E7%AE%97%E6%B3%95"><span class="nav-number">9.3.1.5.</span> <span class="nav-text">（5）行级锁的三种算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E5%AE%9E%E9%AA%8C"><span class="nav-number">9.3.1.6.</span> <span class="nav-text">（6）实验</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E6%8C%89%E7%BA%A7%E5%88%AB%E5%88%86"><span class="nav-number">9.3.2.</span> <span class="nav-text">【2】按级别分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E6%8C%89%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E5%88%86"><span class="nav-number">9.3.3.</span> <span class="nav-text">【3】按使用方式分</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E6%82%B2%E8%A7%82%E9%94%81%EF%BC%88Pessimistic-Locking%EF%BC%89"><span class="nav-number">9.3.3.1.</span> <span class="nav-text">（1）悲观锁（Pessimistic Locking）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E4%B9%90%E8%A7%82%E9%94%81%EF%BC%88Optimistic-Locking%EF%BC%89"><span class="nav-number">9.3.3.2.</span> <span class="nav-text">（2）乐观锁（Optimistic Locking）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%9B%9B%E3%80%91%E6%AD%BB%E9%94%81%E9%97%AE%E9%A2%98"><span class="nav-number">9.4.</span> <span class="nav-text">【四】死锁问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%83%85%E5%86%B5%E7%9A%84%E6%AD%BB%E9%94%81"><span class="nav-number">9.4.1.</span> <span class="nav-text">【1】第一种情况的死锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%83%85%E5%86%B5%E7%9A%84%E6%AD%BB%E9%94%81"><span class="nav-number">9.4.2.</span> <span class="nav-text">【2】第二种情况的死锁</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number">10.</span> <span class="nav-text">数据库的三大范式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%80%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E8%8C%83%E5%BC%8F"><span class="nav-number">10.1.</span> <span class="nav-text">【一】什么是范式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%8C%E3%80%91%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">10.2.</span> <span class="nav-text">【二】三大范式之间的关系</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%B8%89%E3%80%91%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%EF%BC%881NF%EF%BC%89"><span class="nav-number">10.3.</span> <span class="nav-text">【三】第一范式（1NF）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="nav-number">10.3.1.</span> <span class="nav-text">【1】什么是第一范式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%E7%9A%84%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="nav-number">10.3.2.</span> <span class="nav-text">【2】第一范式的原子性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E4%BE%8B%E5%AD%90%E8%AF%B4%E6%98%8E"><span class="nav-number">10.3.2.1.</span> <span class="nav-text">（1）例子说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%9F%BA%E4%BA%8E%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%E4%BC%98%E5%8C%96"><span class="nav-number">10.3.2.2.</span> <span class="nav-text">（2）基于第一范式优化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E5%A6%82%E6%9E%9C%E4%B8%8D%E5%8E%BB%E6%8B%86%E5%88%86%E5%88%97%E6%BB%A1%E8%B6%B3%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%EF%BC%8C%E4%BC%9A%E9%80%A0%E6%88%90%E4%BB%80%E4%B9%88%E5%BD%B1%E5%93%8D%E5%91%A2%EF%BC%9F"><span class="nav-number">10.3.2.3.</span> <span class="nav-text">（3）如果不去拆分列满足第一范式，会造成什么影响呢？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%EF%BC%881NF%EF%BC%89"><span class="nav-number">10.3.2.4.</span> <span class="nav-text">（4）第一范式（1NF）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%9B%9B%E3%80%91%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%EF%BC%882NF%EF%BC%89"><span class="nav-number">10.4.</span> <span class="nav-text">【四】第二范式（2NF）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="nav-number">10.4.1.</span> <span class="nav-text">【1】什么是第二范式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E6%A1%88%E4%BE%8B%EF%BC%88%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%EF%BC%89"><span class="nav-number">10.4.2.</span> <span class="nav-text">【2】案例（第二范式）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%9F%BA%E4%BA%8E%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%E7%9A%84%E8%A1%A8"><span class="nav-number">10.4.2.1.</span> <span class="nav-text">（1）基于第一范式的表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%9F%BA%E4%BA%8E%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96"><span class="nav-number">10.4.2.2.</span> <span class="nav-text">(2)基于第二范式进行优化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%B0%8F%E7%BB%93"><span class="nav-number">10.4.3.</span> <span class="nav-text">【3】小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E4%BA%94%E3%80%91%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%EF%BC%883NF%EF%BC%89"><span class="nav-number">10.5.</span> <span class="nav-text">【五】第三范式（3NF）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%901%E3%80%91%E4%BB%80%E4%B9%88%E6%98%AF%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="nav-number">10.5.1.</span> <span class="nav-text">【1】什么是第三范式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%902%E3%80%91%E6%A1%88%E4%BE%8B%EF%BC%88%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%EF%BC%89"><span class="nav-number">10.5.2.</span> <span class="nav-text">【2】案例（第三范式）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%9F%BA%E4%BA%8E%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%E7%9A%84%E5%9F%BA%E8%A1%A8"><span class="nav-number">10.5.2.1.</span> <span class="nav-text">（1）基于第二范式的基表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%E8%BF%9B%E8%A1%8C%E4%BC%98%E5%8C%96"><span class="nav-number">10.5.2.2.</span> <span class="nav-text">(2)第三范式进行优化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%903%E3%80%91%E5%A6%82%E6%9E%9C%E4%B8%8D%E8%B0%83%E6%95%B4%E8%A1%A8%E7%BB%93%E6%9E%84%E4%BC%9A%E5%A6%82%E4%BD%95%EF%BC%9F"><span class="nav-number">10.5.3.</span> <span class="nav-text">【3】如果不调整表结构会如何？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E3%80%904%E3%80%91%E5%B0%8F%E7%BB%93"><span class="nav-number">10.5.4.</span> <span class="nav-text">【4】小结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%85%AD%E3%80%91%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%89%E8%8C%83%E5%BC%8F%E6%80%BB%E7%BB%93"><span class="nav-number">10.6.</span> <span class="nav-text">【六】数据库三范式总结</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Aurora</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">194</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aurora</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
