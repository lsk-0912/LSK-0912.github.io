<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="title: �ǻ�������Ŀ date: 2023-01-01 categories: Blog tags: [Blog] 【一】项目介�? 123456789101112131415161718192021222324# 项目名：智慧社区	-欢迎页面	-首页    	-轮播�?        -公告        -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城   -信息采">
<meta property="og:type" content="article">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/2023/01/01/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="title: �ǻ�������Ŀ date: 2023-01-01 categories: Blog tags: [Blog] 【一】项目介�? 123456789101112131415161718192021222324# 项目名：智慧社区	-欢迎页面	-首页    	-轮播�?        -公告        -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城   -信息采">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171500682.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171542255.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171613009.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418172048680.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155119604.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155146353.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155041765.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912154956752.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240422172556754.png">
<meta property="og:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240913190942906.png">
<meta property="article:published_time" content="2022-12-31T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-11T09:56:30.586Z">
<meta property="article:author" content="坤">
<meta property="article:tag" content="Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171500682.png">

<link rel="canonical" href="https://aurora-lsk.asia/2023/01/01/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title> | 坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2023/01/01/%E6%99%BA%E6%85%A7%E7%A4%BE%E5%8C%BA%E9%A1%B9%E7%9B%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-01T00:00:00+08:00">2023-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:56:30" itemprop="dateModified" datetime="2025-10-11T17:56:30+08:00">2025-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <hr>
<h2 id="title-�a�������Ldate-2023-01-01categories-Blogtags-Blog">title: �ǻ�������Ŀ<br>
date: 2023-01-01<br>
categories: Blog<br>
tags: [Blog]</h2>
<h1>【一】项目介�?</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 项目名：智慧社区</span></span><br><span class="line">	-欢迎页面</span><br><span class="line">	-首页</span><br><span class="line">    	-轮播�?</span><br><span class="line">        -公告</span><br><span class="line">        -信息采集，社区活动，人脸检测，语音识别，心率检测，积分商城</span><br><span class="line">   -信息采集页面</span><br><span class="line">		-采集人数</span><br><span class="line">   -采集详情页面</span><br><span class="line">   -采集统计页面</span><br><span class="line">   -人脸检测页�?</span><br><span class="line">   -语音识别页面</span><br><span class="line">   -积分商城页面</span><br><span class="line">   -活动</span><br><span class="line">		-活动列表</span><br><span class="line">    	-报名活动</span><br><span class="line">        -加载更多</span><br><span class="line">   -公告</span><br><span class="line">		-公告列表</span><br><span class="line">   -我的</span><br><span class="line">		-信息展示</span><br><span class="line">   -登录</span><br><span class="line">	-微信快速登�?</span><br><span class="line">    -短信验证码登�?</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171500682.png" alt="image-20240418171500682"><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171542255.png" alt="image-20240418171542255"><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418171613009.png" alt="image-20240418171613009"><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240418172048680.png" alt="image-20240418172048680"></p>
<h1>【二】项目创�?</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 前端用微信小程序端写：smart_front</span></span><br><span class="line">	- 直接创建即可，不使用云服务，不选择模板</span><br><span class="line">    - 将创建好的项目修改一下，改成最干净�?</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 后端用django和drf写：smart_api</span></span><br><span class="line">	- 后端我们使用虚拟环境创建fdjango项目</span><br><span class="line">    - 创建虚拟环境，使用pycharm或命令创�?</span><br><span class="line">    - 配置环境和mysql和目录的结构</span><br></pre></td></tr></table></figure>
<h1>【三】小程序欢迎页面</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155119604.png" alt="image-20240912155119604"></p>
<h2 id="�-】分�">�?】分�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 小程序一打开，就会显示一个广告页�?</span></span><br><span class="line">	-点击会跳转到广告--》跳转内部页�?-》到广告的页�?</span><br><span class="line">    -广告图片充满全屏，后台控制更�?</span><br><span class="line">    -定时�?-�?s�?---跳转到首页tab</span><br><span class="line">    - 也可以直接点击跳过，进入到首�?</span><br></pre></td></tr></table></figure>
<h2 id="�-】写欢迎页面">�?】写欢迎页面</h2>
<h3 id="�-）wxml">�?）<code>wxml</code></h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 欢迎的广�?--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;doJump&quot;</span> <span class="attr">class</span>=<span class="string">&quot;jump&quot;</span>&gt;</span>跳过`&#123;&#123;seconds&#125;&#125;`�?/text&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;image&#125;&#125;```&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）js">�?）<code>js</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里将请求的后端的地址进行了封�?</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;../../conf/settings&#x27;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">seconds</span>:<span class="number">3</span>,</span><br><span class="line">    <span class="attr">image</span>:<span class="string">&#x27;/images/bg/splash.png&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 点击跳过的时候，跳转到Tab首页</span></span><br><span class="line">  <span class="title function_">doJump</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 我们的广告展示事件设�?秒钟</span></span><br><span class="line">  <span class="comment">// 三秒后自动跳�?</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 与后端发请求,得到首页图片</span></span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: api.<span class="property">welcome</span>,</span><br><span class="line">      <span class="attr">method</span>:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>:<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">image</span>:res.<span class="property">data</span>[<span class="number">0</span>].<span class="property">img</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 启动一个定时器</span></span><br><span class="line">      <span class="comment">// instance:用于存储定时器的 ID</span></span><br><span class="line">      <span class="keyword">var</span> instance = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">seconds</span>&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">// 清除定时�?</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(instance)</span><br><span class="line">            <span class="comment">// 跳转到首�?</span></span><br><span class="line">            wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">              <span class="attr">url</span>: <span class="string">&#x27;/pages/index/index&#x27;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="comment">// 时间�?，附加响应式</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">seconds</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">seconds</span> - <span class="number">1</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="�-）wxss">�?）<code>wxss</code></h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">page</span>&#123;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.img</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.jump</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">600</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#dddddd</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="�-）后端加载欢迎页�">�?）后端加载欢迎页�?</h3>
<h4 id="1-数据�">[1]数据�?</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据�?---将数据库的用户名和密码添加到环境变量�?</span></span><br><span class="line">mysql_user = os.environ.get(<span class="string">&quot;MysqlUser&quot;</span>, <span class="string">&quot;luffy&quot;</span>)</span><br><span class="line">mysql_psw = os.environ.get(<span class="string">&quot;MysqlPSW&quot;</span>, <span class="string">&quot;Luffy123?&quot;</span>)</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="comment"># 数据库IP地址</span></span><br><span class="line">        <span class="string">&quot;HOST&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">        <span class="comment"># 数据库端�?</span></span><br><span class="line">        <span class="string">&quot;PORT&quot;</span>: <span class="number">3308</span>,</span><br><span class="line">        <span class="comment"># 数据库登入名</span></span><br><span class="line">        <span class="string">&quot;USER&quot;</span>: mysql_user,</span><br><span class="line">        <span class="comment"># 数据库密�?</span></span><br><span class="line">        <span class="string">&quot;PASSWORD&quot;</span>: mysql_psw,</span><br><span class="line">        <span class="comment"># 数据库名�?-&gt;不要用DATABASE,用NAME</span></span><br><span class="line">        <span class="string">&quot;NAME&quot;</span>: <span class="string">&quot;smart&quot;</span>,</span><br><span class="line">        <span class="comment"># 数据库编码格�?</span></span><br><span class="line">        <span class="string">&quot;CHARSET&quot;</span>: <span class="string">&quot;utf8mb4&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-表模�">[2]表模�?</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 欢迎首页�?</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Welcome</span>(models.Model):</span><br><span class="line">    <span class="comment"># 开启media访问----settings中配�?---url中配�?</span></span><br><span class="line">    <span class="comment"># 安装Pillow 模块</span></span><br><span class="line">    img = models.ImageField(upload_to=<span class="string">&#x27;welcome&#x27;</span>, default=<span class="string">&#x27;slash.png&#x27;</span>, verbose_name=<span class="string">&#x27;欢迎图片&#x27;</span>)</span><br><span class="line">    order = models.IntegerField(verbose_name=<span class="string">&#x27;图片顺序&#x27;</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=<span class="literal">True</span>, verbose_name=<span class="string">&#x27;创建时间&#x27;</span>)</span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>, verbose_name=<span class="string">&#x27;是否删除&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;welcome&#x27;</span></span><br><span class="line">        verbose_name = <span class="string">&#x27;欢迎图片&#x27;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br></pre></td></tr></table></figure>
<h4 id="3-开启media访问">[3]开启media访问</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">########settings.py##</span></span><br><span class="line"><span class="comment"># 开启media访问</span></span><br><span class="line">MEDIA_URL = <span class="string">&#x27;/media/&#x27;</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">&#x27;media&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#########总路�?##</span></span><br><span class="line">path(<span class="string">&#x27;media/&lt;path:path&gt;&#x27;</span>, serve, &#123;<span class="string">&#x27;document_root&#x27;</span>: settings.MEDIA_ROOT&#125;),</span><br></pre></td></tr></table></figure>
<h4 id="4-视图函数">[4]视图函数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.mixins <span class="keyword">import</span> ListModelMixin</span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> GenericViewSet</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Welcome</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> WelcomeSerializer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 欢迎用户的首页的接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WelcomeView</span>(GenericViewSet, ListModelMixin):</span><br><span class="line">    <span class="comment"># 需要筛选，前端只要一�?</span></span><br><span class="line">    queryset = Welcome.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;order&quot;</span>)[:<span class="number">1</span>]</span><br><span class="line">    serializer_class = WelcomeSerializer</span><br></pre></td></tr></table></figure>
<h4 id="5-序列化类">[5]序列化类</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WelcomeSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Welcome</span><br><span class="line">        <span class="comment"># 前端只要广告的图�?</span></span><br><span class="line">        fields = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;img&quot;</span>]</span><br></pre></td></tr></table></figure>
<h1>【四】首�?</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155146353.png" alt="image-20240912155146353"></p>
<h2 id="�-】app-json">�?】<code>app.json</code></h2>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">     <span class="string">&quot;pages/welcome/welcome&quot;</span><span class="punctuation">,</span>  <span class="comment">// 欢迎页面</span></span><br><span class="line">      <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span>    <span class="comment">// 首页</span></span><br><span class="line">      <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span>    <span class="comment">// 我的</span></span><br><span class="line">      <span class="string">&quot;pages/activity/activity&quot;</span><span class="punctuation">,</span>  <span class="comment">// 活动tab�?</span></span><br><span class="line">      <span class="string">&quot;pages/notice/notice&quot;</span>  <span class="comment">// 公告tab�?</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// title�?</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;智慧社区&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span>   <span class="comment">// 颜色</span></span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span>    <span class="comment">// 是否可以下拉</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#00FFFF&quot;</span><span class="punctuation">,</span>   <span class="comment">// 颜色</span></span><br><span class="line">    <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;light&quot;</span><span class="punctuation">,</span>  <span class="comment">// 样式</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span>  <span class="comment">// 导航栏中使用的颜�?</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// tab�?</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#1c1c1b&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;position&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bottom&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/home-o.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/activity/activity&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;活动&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/aid.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/aid-o.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/notice/notice&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;公告&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/circle.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/circle-o.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/my.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon/my-o.png&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】wxml">�?】<code>wxml</code></h2>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 轮播�?--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;banner&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">autoplay</span> <span class="attr">indicator-dots</span> <span class="attr">circular</span> <span class="attr">indicator-color</span>=<span class="string">&#x27;#FFFFF&#x27;</span> <span class="attr">interval</span>=<span class="string">&#x27;3000&#x27;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-item</span>  <span class="attr">wx:for</span>=<span class="string">&quot;```&#123;&#123;image&#125;&#125;```&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;*this&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;item.img&#125;&#125;```&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 通知 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-notice-bar</span> <span class="attr">left-icon</span>=<span class="string">&quot;volume-o&quot;</span> <span class="attr">text</span>=<span class="string">&quot;```&#123;&#123;title&#125;&#125;```&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 六宫�?--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">column-num</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/小黄�?png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;信息采集&quot;</span> <span class="attr">bind:click</span>=<span class="string">&quot;gotoCollection&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/社区活动.png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;社区活动&quot;</span> <span class="attr">bind:click</span>=<span class="string">&quot;gotoActivity&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/人脸检�?png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;人脸检�? bind:click=&quot;</span><span class="attr">gotoFace</span>&quot;/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以根据需要添加更多的快捷入口 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/语音识别.png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;语音识别&quot;</span> <span class="attr">bind:click</span>=<span class="string">&quot;gotoVoice&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/Heart beat.png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;心率检�? bind:click=&quot;</span><span class="attr">gotoHeart</span>&quot;/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid-item</span> <span class="attr">icon</span>=<span class="string">&quot;/images/menu/我的_积分商城_48.png&quot;</span> <span class="attr">text</span>=<span class="string">&quot;积分商城&quot;</span> <span class="attr">bind:click</span>=<span class="string">&quot;gotoGoods&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 底部的信�?--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;bottom&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/home/cute_1.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;scaleToFill&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/home/cute_2.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;scaleToFill&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/home/cute_3.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;scaleToFill&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/home/cute_4.jpg&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;scaleToFill&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】wxss">�?】<code>wxss</code></h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 轮播图的图片 */</span></span><br><span class="line"><span class="selector-class">.banner</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>; <span class="comment">/* 图片宽度拉伸至容器宽�?*/</span></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 图片高度拉伸至容器高�?*/</span></span><br><span class="line">  <span class="attribute">object-fit</span>: cover; <span class="comment">/* 图片将覆盖整个容器区域，可能被裁�?*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 底部 */</span></span><br><span class="line"><span class="selector-class">.bottom</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-evenly;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 底部的img */</span></span><br><span class="line"><span class="selector-class">.bottom</span>&gt;view&gt;<span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">345</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="�-】js">�?】<code>js</code></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">image</span>:[<span class="string">&quot;../../images/banner/banner1.png&quot;</span>],</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&quot;&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 六个跳转页面</span></span><br><span class="line">  <span class="title function_">gotoCollection</span>(<span class="params"></span>)&#123;</span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/second/collection/collection&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">gotoFace</span>(<span class="params"></span>)&#123;</span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/second/face/face&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">gotoVoice</span>(<span class="params"></span>)&#123;</span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/second/voice/voice&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">gotoActivity</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">// 跳转到tab页面</span></span><br><span class="line">      wx.<span class="title function_">switchTab</span>(&#123;</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;/pages/activity/activity&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">gotoHeart</span>(<span class="params"></span>)&#123;</span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/second/heart/heart&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">gotoGoods</span>(<span class="params"></span>)&#123;</span><br><span class="line">      wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/second/goods/goods&#x27;</span>,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: api.<span class="property">banner_notice</span>,</span><br><span class="line">      <span class="attr">method</span>:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>:<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span>==<span class="number">100</span>)&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">image</span>:res.<span class="property">data</span>.<span class="property">banner</span>,<span class="attr">title</span>:res.<span class="property">data</span>.<span class="property">notice</span>.<span class="property">title</span>&#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;报错！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="�-】app-json-2">�?】<code>app.json</code></h2>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        </span><br><span class="line">        <span class="string">&quot;pages/welcome/welcome&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/my/my&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/activity/activity&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/notice/notice&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">// 这里多了五个页面，还有一个跳转到tab�?</span></span><br><span class="line">        <span class="string">&quot;pages/second/collection/collection&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/second/face/face&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/second/voice/voice&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/second/heart/heart&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/second/goods/goods&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h1>【五】首页轮播图和公告接�?</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912155041765.png" alt="image-20240912155041765"></p>
<h2 id="�-】后�">�?】后�?</h2>
<h3 id="�-）models-py">�?）<code>models.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 轮播图表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Banner</span>(models.Model):</span><br><span class="line">    img = models.ImageField(upload_to=<span class="string">&#x27;banner&#x27;</span>, default=<span class="string">&#x27;banner1.png&#x27;</span>, verbose_name=<span class="string">&#x27;轮播�?)</span></span><br><span class="line"><span class="string">    order = models.IntegerField(verbose_name=&#x27;</span>顺序<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    create_time = models.DateTimeField(auto_now=True, verbose_name=&#x27;</span>创建时间<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    is_delete = models.BooleanField(default=False, verbose_name=&#x27;</span>是否删除<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    class Meta:</span></span><br><span class="line"><span class="string">        db_table = &#x27;</span>Banne<span class="string">r&#x27;</span></span><br><span class="line"><span class="string">        verbose_name = &#x27;</span>轮播�?</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 公告�?</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Notice</span>(models.Model):</span><br><span class="line">    title = models.CharField(max_length=<span class="number">255</span>, verbose_name=<span class="string">&#x27;公共标题&#x27;</span>)</span><br><span class="line">    content = models.TextField(verbose_name=<span class="string">&#x27;内容&#x27;</span>)</span><br><span class="line">    img = models.ImageField(upload_to=<span class="string">&#x27;notice&#x27;</span>, default=<span class="string">&#x27;notice1.png&#x27;</span>, verbose_name=<span class="string">&#x27;公告照片&#x27;</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=<span class="literal">True</span>, verbose_name=<span class="string">&#x27;创建时间&#x27;</span>)</span><br><span class="line">    is_delete = models.BooleanField(default=<span class="literal">False</span>, verbose_name=<span class="string">&#x27;是否删除&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;Notice&#x27;</span></span><br><span class="line">        verbose_name = <span class="string">&#x27;公告�?</span></span><br><span class="line"><span class="string">        verbose_name_plural = verbose_name</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）view-py">�?）<code>view.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 轮播图和公告接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BannerNoticeView</span>(GenericViewSet, ListModelMixin):</span><br><span class="line">    queryset = Banner.objects.<span class="built_in">filter</span>(is_delete=<span class="literal">False</span>).order_by(<span class="string">&quot;order&quot;</span>)[:<span class="number">2</span>]</span><br><span class="line">    serializer_class = BannerSerializer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">list</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        res = <span class="built_in">super</span>().<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line">        <span class="comment"># 查询公告信息---查询最早时间的一�?</span></span><br><span class="line">        notices = Notice.objects.<span class="built_in">all</span>().order_by(<span class="string">&quot;create_time&quot;</span>).first()</span><br><span class="line">        <span class="comment"># 序列�?</span></span><br><span class="line">        serializer = NoticeSerializer(instance=notices)</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;code&quot;</span>: <span class="string">&quot;100&quot;</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;查询成功&quot;</span>, <span class="string">&quot;banner&quot;</span>: res.data, <span class="string">&quot;notice&quot;</span>: serializer.data&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="�-）serializer-py">�?）<code>serializer.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BannerSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Banner</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NoticeSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Notice</span><br><span class="line">        fields = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;title&quot;</span>]</span><br></pre></td></tr></table></figure>
<h1>【六】个人中�?</h1>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240912154956752.png" alt="image-20240912154956752"></p>
<h2 id="�-】vant样式�-笔记中有�">�?】vant样式�?---------笔记中有�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 访问地址�?</span></span><br><span class="line">	- https://vant-ui.github.io/vant/<span class="comment">#/zh-CN</span></span><br><span class="line"><span class="comment"># 安装npm</span></span><br><span class="line">	- npm init -y</span><br><span class="line"><span class="comment"># 安装vant</span></span><br><span class="line">	- npm i @vant/weapp -S --production</span><br><span class="line"><span class="comment"># �?app.json 中的 &quot;style&quot;: &quot;v2&quot; 去除</span></span><br><span class="line"><span class="comment"># 使用那个样式在app.json中注册或在xxx.json中注�?</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】json">�?】<code>json</code></h2>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 这里我们使用了vant的样式库</span></span><br><span class="line">  <span class="attr">&quot;van-notice-bar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vant/weapp/notice-bar/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;van-grid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vant/weapp/grid/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;van-grid-item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;@vant/weapp/grid-item/index&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】wxml-2">�?】<code>wxml</code></h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"># 判断是否登录�?</span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;```&#123;&#123;userInfo==null&#125;&#125;```&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;login-area&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/login/login&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>一键登�?/view&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 头部 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;profile-info&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/花香 美女 .png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;numbers&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>积分<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>55<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>77<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>56<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">text</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 个人信息�?--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-section&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;info-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/昵称.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-text&quot;</span>&gt;</span>个人资料<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;info-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/昵称.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-text&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;info-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/昵称.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">type</span>=<span class="string">&quot;info-text&quot;</span> <span class="attr">plain</span> <span class="attr">open-type</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>联系客服<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;info-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/昵称.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">type</span>=<span class="string">&quot;info-text&quot;</span> <span class="attr">plain</span> <span class="attr">open-type</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>联系客服<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info-item&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;info-icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../images/head/昵称.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">type</span>=<span class="string">&quot;info-text&quot;</span> <span class="attr">plain</span> <span class="attr">open-type</span>=<span class="string">&quot;contact&quot;</span>&gt;</span>联系客服<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 退出登�?--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;logout-button&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;logout-btn&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleLogout&quot;</span>&gt;</span>退出登�?/button&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】wxss-2">�?】<code>wxss</code></h2>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局样式 */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 头部样式 */</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#007bff</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.profile-info</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.name1</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.email</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header-bg</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 信息项样�?*/</span></span><br><span class="line"><span class="selector-class">.info-section</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.info-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.info-item</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.info-icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.info-text</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 退出登录按钮样�?*/</span></span><br><span class="line"><span class="selector-class">.logout-button</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.logout-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ff4d4f</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 一键登�?*/</span></span><br><span class="line"><span class="attribute">page</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.login-area</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.login-area</span> <span class="selector-class">.btn</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">500%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  */</span></span><br><span class="line"><span class="selector-class">.numbers</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">0</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.row</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="�-】js-2">�?】<code>js</code></h2>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleLogout</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;确认退�?,</span></span><br><span class="line"><span class="string">      content: &#x27;</span>您确定要退出登录吗�?,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">confirm</span>) &#123;</span><br><span class="line">          <span class="comment">// 这里可以添加退出登录的逻辑</span></span><br><span class="line">          wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;已退出登�?,</span></span><br><span class="line"><span class="string">            icon: &#x27;</span>success<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">            duration: 2000</span></span><br><span class="line"><span class="string">          &#125;);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure>
<h1>【七】信息采集页�?</h1>
<h2 id="�-】新建一个跳转的信息采集页面">�?】新建一个跳转的信息采集页面</h2>
<ul>
<li>点击前端的信息采集按钮，跳转到采集信息页�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240422172556754.png" alt="image-20240422172556754"></p>
<h2 id="�-】后�-2">�?】后�?</h2>
<h3 id="�-）view-py-2">�?）<code>view.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> rest_framework.mixins <span class="keyword">import</span> ListModelMixin, DestroyModelMixin</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> GenericViewSet</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Collection</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> CollectionSerializer</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionView</span>(GenericViewSet, ListModelMixin, DestroyModelMixin):</span><br><span class="line">    <span class="comment"># reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对�?</span></span><br><span class="line">    queryset = Collection.objects.<span class="built_in">all</span>().<span class="built_in">filter</span>(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">list</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        res = <span class="built_in">super</span>().<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line">        <span class="comment"># 计算采集的多少人</span></span><br><span class="line">        today_count = <span class="built_in">len</span>(<span class="variable language_">self</span>.get_queryset())</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;code&quot;</span>: <span class="number">100</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;查看成功&quot;</span>, <span class="string">&quot;collection&quot;</span>: res.data, <span class="string">&quot;today_count&quot;</span>: today_count&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="�-）serializer-py-2">�?）<code>serializer.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> gather.models <span class="keyword">import</span> Collection</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Collection</span><br><span class="line">        fields = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;avatar&quot;</span>, <span class="string">&quot;area&quot;</span>]</span><br><span class="line">        <span class="comment"># 往深处取一�?</span></span><br><span class="line">        depth = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）models-py-2">�?）<code>models.py</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># 采集�?</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Collection</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">255</span>, verbose_name=<span class="string">&quot;姓名&quot;</span>)</span><br><span class="line">    name_pinyin = models.CharField(max_length=<span class="number">255</span>, verbose_name=<span class="string">&quot;姓名拼音&quot;</span>)</span><br><span class="line">    <span class="comment"># upload_to=&#x27;collection/%Y/%m/%d/&#x27;：这指定了媒体根目录中将存储上传图像的目录。该部分是一种基于日期的格式，可按年、月和日将图像组织到子目录中。例如collection/2024/09/11/�?024 �?9 �?11 日上传的图像将存储在</span></span><br><span class="line">    avatar = models.ImageField(upload_to=<span class="string">&#x27;collection/%Y/%m/%d/&#x27;</span>, default=<span class="string">&#x27;default.png&#x27;</span>, verbose_name=<span class="string">&#x27;头像&#x27;</span>)</span><br><span class="line">    create_time = models.DateTimeField(auto_now=<span class="literal">True</span>, verbose_name=<span class="string">&#x27;采集时间&#x27;</span>)</span><br><span class="line">    area = models.ForeignKey(to=<span class="string">&#x27;Area&#x27;</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&#x27;网格区域&#x27;</span>, on_delete=models.CASCADE)</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&#x27;collection&#x27;</span></span><br><span class="line">        verbose_name = <span class="string">&#x27;采集�?</span></span><br><span class="line"><span class="string">        verbose_name_plural = verbose_name</span></span><br><span class="line"><span class="string">    def __str__(self):</span></span><br><span class="line"><span class="string">        return self.name</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 用户�?</span></span><br><span class="line"><span class="string">class UserInfo(models.Model):</span></span><br><span class="line"><span class="string">    name = models.CharField(max_length=255, verbose_name=&quot;用户�?)</span></span><br><span class="line"><span class="string">    avatar = models.FileField(verbose_name=&quot;头像&quot;, max_length=128, upload_to=&#x27;</span>avata<span class="string">r&#x27;)</span></span><br><span class="line"><span class="string">    create_date = models.DateField(verbose_name=&quot;日期&quot;, auto_now_add=True)</span></span><br><span class="line"><span class="string">    score = models.IntegerField(verbose_name=&quot;积分&quot;, default=0)</span></span><br><span class="line"><span class="string">    class Meta:</span></span><br><span class="line"><span class="string">        db_table = &#x27;</span>userinfo<span class="string">&#x27;</span></span><br><span class="line"><span class="string">        verbose_name = &#x27;</span>用户�?</span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 区域�?</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Area</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>, verbose_name=<span class="string">&#x27;网格区域�?)</span></span><br><span class="line"><span class="string">    desc = models.CharField(max_length=32, verbose_name=&#x27;</span>网格简�?)</span><br><span class="line">    <span class="comment"># 与用户表是一对多关系</span></span><br><span class="line">    user = models.ForeignKey(to=<span class="string">&#x27;UserInfo&#x27;</span>, on_delete=models.CASCADE, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;负责用户&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        verbose_name_plural = <span class="string">&#x27;区域�?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def __str__(self):</span></span><br><span class="line"><span class="string">        return self.name</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<h2 id="�-】引入矢量图标库">�?】引入矢量图标库</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 url:阿里巴巴矢量图标�?</span></span><br><span class="line">	- https://www.iconfont.cn/</span><br><span class="line">	-注册成功</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2 搜索想要的图�?</span></span><br><span class="line">	-加入购物�?</span><br><span class="line">    -在购物车中添加至项目</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 3 我的项目--项目设置--》打开base64</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 选择font class --》生成代�?-》点击链接地址打开</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5 把打开的链接地址内容复制到项目中</span></span><br><span class="line">	-static/css/iconfont.wxss</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 6 在app.wxss中引�?</span></span><br><span class="line"><span class="meta">@import <span class="string">&quot;/static/css/iconfont.wxss&quot;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7 在想用图标的位置，加入text组件</span></span><br><span class="line">&lt;text <span class="keyword">class</span>=<span class="string">&quot;iconfont icon-anquan&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<h1>【八】信息采集详情页�?</h1>
<h2 id="�-】小程序–拍照页页�">�?】小程序–拍照页页�?</h2>
<ul>
<li>wxml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 相机组件 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ```&#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;```：控制相机的前置后置摄像�?--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- flash闪关�?--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">camera</span> <span class="attr">class</span>=<span class="string">&quot;camera&quot;</span>  <span class="attr">device-position</span>=<span class="string">&quot;```&#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;```&quot;</span>  <span class="attr">flash</span>=<span class="string">&quot;off&quot;</span> <span class="attr">frame-size</span>=<span class="string">&quot;medium&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 按钮和旋转的图标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;function&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;switch&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- switchCamera：控制拍照的按键 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;record&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;takePhoto&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/camera/record_on.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- takePhoto：控制backFront --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;switch&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;switchCamera&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/camera/rotate-camera-white.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/second/camera/camera.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">backFront</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">switchCamera</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 反转摄像�?</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">backFront</span>: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取照片</span></span><br><span class="line">  <span class="comment">// 文档里面�?</span></span><br><span class="line">  <span class="title function_">takePhoto</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获得拍的照片</span></span><br><span class="line">    <span class="keyword">const</span> ctx = wx.<span class="title function_">createCameraContext</span>()</span><br><span class="line">    <span class="comment">// 将拍的照片上传到</span></span><br><span class="line">    ctx.<span class="title function_">takePhoto</span>(&#123;</span><br><span class="line">      <span class="attr">quality</span>: <span class="string">&#x27;high&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 获取照片 </span></span><br><span class="line">        <span class="comment">//console.log(res);</span></span><br><span class="line">        <span class="comment">// 对上一个页面中的值，进行修改</span></span><br><span class="line">        <span class="keyword">var</span> pages = <span class="title function_">getCurrentPages</span>();  <span class="comment">// 拿到所有开放的页面：[index collection form camera]</span></span><br><span class="line">        <span class="keyword">var</span> prevPage = pages[pages.<span class="property">length</span> - <span class="number">2</span>];  <span class="comment">// 得到form页面</span></span><br><span class="line">        <span class="comment">// 把上个页面的图片位置设为刚刚拍的�?</span></span><br><span class="line">        prevPage.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">avatar</span>: res.<span class="property">tempImagePath</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">//跳转回上一个页�?默认返回上一个页�?</span></span><br><span class="line">        wx.<span class="title function_">navigateBack</span>(&#123;&#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>wxss</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">page</span>&#123;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.camera</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.function</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  </span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.record</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">160</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">160</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.switch</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.switch</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="�-】小程序–采集页页�">�?】小程序–采集页页�?</h2>
<ul>
<li>wxml</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> &lt;view <span class="keyword">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span><br><span class="line">  &lt;image src=<span class="string">&#x27;```&#123;&#123;avatar&#125;&#125;```&#x27;</span> bindtap=<span class="string">&quot;bindToCamera&quot;</span>&gt;&lt;/image&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;view <span class="keyword">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span><br><span class="line">  &lt;view <span class="keyword">class</span>=<span class="string">&quot;row-group&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">input</span> placeholder=<span class="string">&quot;请填写姓�? placeholder-class=&#x27;txt&#x27; model:value=&quot;</span>```&#123;&#123;name&#125;&#125;```<span class="string">&quot; bindinput=&quot;</span>bindNameChange<span class="string">&quot; /&gt;</span></span><br><span class="line"><span class="string">  &lt;/view&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &lt;view class=&quot;</span>picker-group<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;picker bindchange=&quot;</span>bindPickerChange<span class="string">&quot; value=&quot;</span>`&#123;&#123;index&#125;&#125;`<span class="string">&quot; range=&quot;</span>```&#123;&#123;objectArray&#125;&#125;```<span class="string">&quot; range-key=&quot;</span>name<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;view wx:if=&quot;</span>```&#123;&#123; index &gt; -<span class="number">1</span>&#125;&#125;```<span class="string">&quot; class=&quot;</span>picker-txt picke<span class="string">r&quot;&gt;当前网格：`&#123;&#123;objectArray[index].name&#125;&#125;`&lt;/view&gt;</span></span><br><span class="line"><span class="string">      &lt;view wx:else class=&quot;</span>picker-txt<span class="string">&quot; &gt;请选择网格&lt;/view&gt;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">    &lt;/picker&gt;</span></span><br><span class="line"><span class="string">  &lt;/view&gt;</span></span><br><span class="line"><span class="string">  &lt;view&gt;</span></span><br><span class="line"><span class="string">    &lt;button class=&quot;</span>submit<span class="string">&quot; bindtap=&quot;</span>postUse<span class="string">r&quot; &gt; �?�?&lt;/button&gt;</span></span><br><span class="line"><span class="string">  &lt;/view&gt;</span></span><br><span class="line"><span class="string">&lt;/view&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">avatar</span>: <span class="string">&quot;../../../images/camera/camera.png&quot;</span>,</span><br><span class="line">    <span class="attr">objectArray</span>: [],</span><br><span class="line">    <span class="comment">// 默认-1的意思是，默认状态下什么都不选择</span></span><br><span class="line">    <span class="attr">index</span>: -<span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击条状拍照页面</span></span><br><span class="line">  <span class="title function_">bindToCamera</span>(<span class="params"></span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/pages/second/camera/camera&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 获得所有的网格</span></span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: api.<span class="property">area</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">objectArray</span>:res.<span class="property">data</span>&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击提交，提交到后端，保存采集信�?</span></span><br><span class="line">  <span class="title function_">postUser</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 提交等待，wx提高的样�?</span></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;提交�?,</span></span><br><span class="line"><span class="string">      mask:true,</span></span><br><span class="line"><span class="string">    &#125;),</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    // 提交给后端文件使用这�?</span></span><br><span class="line"><span class="string">    wx.uploadFile(&#123;</span></span><br><span class="line"><span class="string">      // 后端的请求地址</span></span><br><span class="line"><span class="string">      url: api.collection,</span></span><br><span class="line"><span class="string">      // 图片的文�?</span></span><br><span class="line"><span class="string">      filePath: this.data.avatar,</span></span><br><span class="line"><span class="string">      // 照片的名�?</span></span><br><span class="line"><span class="string">      name: &#x27;</span>avatar<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">      // 提交给后端的数据</span></span><br><span class="line"><span class="string">      formData: &#123;</span></span><br><span class="line"><span class="string">        // 姓名</span></span><br><span class="line"><span class="string">        &#x27;</span>name<span class="string">&#x27;: this.data.name,</span></span><br><span class="line"><span class="string">        // 选择的网络，传给后端id</span></span><br><span class="line"><span class="string">        &#x27;</span>area<span class="string">&#x27;: this.data.objectArray[this.data.index].id</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      success:rex=&gt;&#123;</span></span><br><span class="line"><span class="string">          // 上传成功，返回给上一个页�?默认返回上一个页�?</span></span><br><span class="line"><span class="string">          wx.navigateBack()</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      complete() &#123;</span></span><br><span class="line"><span class="string">        // 为了关闭showLoading提示�?</span></span><br><span class="line"><span class="string">        wx.hideLoading()</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 检测输入的信息</span></span><br><span class="line"><span class="string">  bindPickerChange(e)&#123;</span></span><br><span class="line"><span class="string">    this.setData(&#123;index:e.detail.value&#125;)</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 获得你输入的名字</span></span><br><span class="line"><span class="string">  bindNameChange(event)&#123;</span></span><br><span class="line"><span class="string">    this.setData(&#123;name:event.detail.value&#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<ul>
<li>wxss</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> <span class="selector-tag">image</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">140</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.row-group</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.row-group</span> <span class="selector-tag">text</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.row-group</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.row-group</span> <span class="selector-class">.txt</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.picker-group</span>&#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.picker-group</span> <span class="selector-class">.picker-txt</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40</span>rpx <span class="number">0</span> <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.picker-group</span> <span class="selector-class">.picker</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.form</span> <span class="selector-class">.submit</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2</span>rpx solid <span class="number">#00c8b6</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#00c8b6</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="�-】采集页面后�">�?】采集页面后�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############view</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionView</span>(GenericViewSet, ListModelMixin, CommonDeleteModelMixin, CommonCreateModelMixin):</span><br><span class="line">    <span class="comment"># reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对�?</span></span><br><span class="line">    queryset = Collection.objects.<span class="built_in">all</span>().<span class="built_in">filter</span>(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用不同的序列化�?</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_serializer_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.action == <span class="string">&#x27;create&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> CollectionSaveSerializer</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> CollectionSerializer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">list</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        res = <span class="built_in">super</span>().<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line">        <span class="comment"># 计算采集的多少人</span></span><br><span class="line">        today_count = <span class="built_in">len</span>(<span class="variable language_">self</span>.get_queryset())</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;code&quot;</span>: <span class="number">100</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;查看成功&quot;</span>, <span class="string">&quot;collection&quot;</span>: res.data, <span class="string">&quot;today_count&quot;</span>: today_count&#125;)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 获取所有的网格</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AreaView</span>(GenericViewSet, ListModelMixin):</span><br><span class="line">    queryset = Area.objects.<span class="built_in">all</span>()</span><br><span class="line">    serializer_class = AreaSerializer</span><br><span class="line">    <span class="comment"># 这里应该写当前的所有登录的用户，重新list进行筛�?</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 这里我们需要加入登入类</span></span><br><span class="line">    <span class="comment"># def list(self, request, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     res = self.get_queryset().filter(user=request.user)</span></span><br><span class="line">    <span class="comment">#     serializer = self.get_serializer(instance=res, many=True)</span></span><br><span class="line">    <span class="comment">#     return APIResponse(sults = serializer.data)</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#####################serializer</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionSaveSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Collection</span><br><span class="line">        fields = [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;avatar&quot;</span>, <span class="string">&quot;area&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, validated_data</span>):</span><br><span class="line">        <span class="comment"># 我们需要使用pypinyin模块</span></span><br><span class="line">        <span class="comment"># 我们还需要将人脸上传到百度人脸库�?</span></span><br><span class="line">        <span class="built_in">print</span>(validated_data)</span><br><span class="line">        validated_data[<span class="string">&quot;name_pinyin&quot;</span>] = validated_data[<span class="string">&quot;name&quot;</span>]</span><br><span class="line">        instance = <span class="built_in">super</span>().create(validated_data)</span><br><span class="line">        <span class="keyword">return</span> instance </span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AreaSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Area</span><br><span class="line">        fields = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;desc&quot;</span>]</span><br></pre></td></tr></table></figure>
<h1>【九】人脸识别项目中集成</h1>
<h2 id="�-】使用步�">�?】使用步�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 注册百度人脸识别接口</span></span><br><span class="line">https://cloud.baidu.com/product/face.html</span><br><span class="line"><span class="comment"># 2 免费领取额度：https://console.bce.baidu.com/ai/#/ai/face/overview/index</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 创建应用：https://console.bce.baidu.com/ai/#/ai/face/app/list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 查看人脸库：https://console.bce.baidu.com/ai/#/ai/face/facelib/groupList~appId=4652887</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5 sdk位置：https://ai.baidu.com/ai-doc/FACE/ek37c1qiz</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】简单使�">�?】简单使�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipFace</span><br><span class="line"><span class="keyword">from</span> pypinyin <span class="keyword">import</span> Style, lazy_pinyin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiDuAI</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,APP_ID=<span class="string">&#x27;115551890&#x27;</span>,API_KEY=<span class="string">&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;</span>,SECRET_KEY=<span class="string">&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.APP_ID = APP_ID</span><br><span class="line">        <span class="variable language_">self</span>.API_KEY = API_KEY</span><br><span class="line">        <span class="variable language_">self</span>.SECRET_KEY = SECRET_KEY</span><br><span class="line">        <span class="variable language_">self</span>.client = AipFace(<span class="variable language_">self</span>.APP_ID, <span class="variable language_">self</span>.API_KEY, <span class="variable language_">self</span>.SECRET_KEY)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name_to_pinyin</span>(<span class="params">self, text</span>):</span><br><span class="line">        style = Style.TONE3</span><br><span class="line">        name_list = lazy_pinyin(text, style=style)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(name_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 上传人脸</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_user</span>(<span class="params">self</span>):</span><br><span class="line">        data = base64.b64encode(<span class="built_in">open</span>(<span class="string">&#x27;./lyf.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>).read()).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        image = data</span><br><span class="line">        imageType = <span class="string">&quot;BASE64&quot;</span></span><br><span class="line">        groupId = <span class="string">&quot;100&quot;</span></span><br><span class="line">        userId = <span class="variable language_">self</span>.name_to_pinyin(<span class="string">&#x27;刘亦�?)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 调用人脸注册 &quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        res = self.client.addUser(image, imageType, groupId, userId)</span></span><br><span class="line"><span class="string">        print(res)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 如果有可选参�?&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        # options = &#123;&#125;</span></span><br><span class="line"><span class="string">        # options[&quot;user_info&quot;] = &quot;彭于�?</span></span><br><span class="line"><span class="string">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span></span><br><span class="line"><span class="string">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span></span><br><span class="line"><span class="string">        # options[&quot;action_type&quot;] = &quot;REPLACE&quot;</span></span><br><span class="line"><span class="string">        #</span></span><br><span class="line"><span class="string">        # &quot;&quot;&quot; 带参数调用人脸注�?&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        # self.client.addUser(image, imageType, groupId, userId, options)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 删除百度AI的人�?</span></span><br><span class="line"><span class="string">    def delete(self):</span></span><br><span class="line"><span class="string">        userId = &quot;gu3tian1le4&quot;</span></span><br><span class="line"><span class="string">        groupId = &quot;100&quot;</span></span><br><span class="line"><span class="string">        # 这个是你上传人脸的是后返回的token</span></span><br><span class="line"><span class="string">        faceToken = &quot;4992689fcbbd3cf9851ca2f87ebb6ad0&quot;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 调用人脸删除 &quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        res = self.client.faceDelete(userId, groupId, faceToken)</span></span><br><span class="line"><span class="string">        print(res)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    # 匹配人脸</span></span><br><span class="line"><span class="string">    def search(self):</span></span><br><span class="line"><span class="string">        data = base64.b64encode(open(&#x27;</span>./lyf.png<span class="string">&#x27;, &#x27;</span><span class="string">rb&#x27;).read()).decode(&#x27;</span>utf-<span class="number">8</span><span class="string">&#x27;)</span></span><br><span class="line"><span class="string">        image = data</span></span><br><span class="line"><span class="string">        imageType = &quot;BASE64&quot;</span></span><br><span class="line"><span class="string">        groupIdList = &quot;100,2&quot;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 调用人脸搜索 &quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        self.client.search(image, imageType, groupIdList)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 如果有可选参�?&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        options = &#123;&#125;</span></span><br><span class="line"><span class="string">        # 识别�?</span></span><br><span class="line"><span class="string">        options[&quot;match_threshold&quot;] = 70</span></span><br><span class="line"><span class="string">        options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span></span><br><span class="line"><span class="string">        options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span></span><br><span class="line"><span class="string">        # 比对id�?</span></span><br><span class="line"><span class="string">        # options[&quot;user_id&quot;] = &quot;233451&quot;</span></span><br><span class="line"><span class="string">        # 返回的数�?</span></span><br><span class="line"><span class="string">        options[&quot;max_user_num&quot;] = 3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &quot;&quot;&quot; 带参数调用人脸搜�?&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        res = self.client.search(image, imageType, groupIdList, options)</span></span><br><span class="line"><span class="string">        print(res)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if __name__ == &#x27;</span>__main__<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">    ai = BaiDuAI()</span></span><br><span class="line"><span class="string">    # ai.add_user()</span></span><br><span class="line"><span class="string">    # ai.delete()</span></span><br><span class="line"><span class="string">    ai.search()</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】集成到项目�">�?】集成到项目�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########libs/baidu/baidu_ai.py</span></span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipFace</span><br><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech</span><br><span class="line"><span class="keyword">from</span> pypinyin <span class="keyword">import</span> lazy_pinyin, Style</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiDuAI</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, APP_ID=<span class="string">&#x27;115551890&#x27;</span>, API_KEY=<span class="string">&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;</span>,</span></span><br><span class="line"><span class="params">                 SECRET_KEY=<span class="string">&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.APP_ID = APP_ID</span><br><span class="line">        <span class="variable language_">self</span>.API_KEY = API_KEY</span><br><span class="line">        <span class="variable language_">self</span>.SECRET_KEY = SECRET_KEY</span><br><span class="line">        <span class="variable language_">self</span>.client = AipFace(<span class="variable language_">self</span>.APP_ID, <span class="variable language_">self</span>.API_KEY, <span class="variable language_">self</span>.SECRET_KEY)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name_to_pinyin</span>(<span class="params">self, text</span>):</span><br><span class="line">        style = Style.TONE3</span><br><span class="line">        name_list = lazy_pinyin(text, style=style)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(name_list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_user</span>(<span class="params">self, path, name, userId, groupId=<span class="number">100</span></span>):</span><br><span class="line">        <span class="comment"># image = base64.b64encode(open(path).read()).decode(&#x27;utf-8&#x27;)</span></span><br><span class="line">        image = base64.b64encode(path.read()).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        imageType = <span class="string">&quot;BASE64&quot;</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot; 调用人脸注册 &quot;&quot;&quot;</span></span><br><span class="line">        res = <span class="variable language_">self</span>.client.addUser(image, imageType, groupId, userId)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># &quot;&quot;&quot; 如果有可选参�?&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># options = &#123;&#125;</span></span><br><span class="line">        <span class="comment"># options[&quot;user_info&quot;] = name</span></span><br><span class="line">        <span class="comment"># options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span></span><br><span class="line">        <span class="comment"># options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span></span><br><span class="line">        <span class="comment"># options[&quot;action_type&quot;] = &quot;REPLACE&quot;</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># &quot;&quot;&quot; 带参数调用人脸注�?&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># res = self.client.addUser(image, imageType, groupId, userId, options)</span></span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self, img_obj</span>):</span><br><span class="line">        image = base64.b64encode(img_obj.read()).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        image_type = <span class="string">&quot;BASE64&quot;</span></span><br><span class="line">        group_id_list = <span class="string">&quot;100,101&quot;</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot; 调用人脸搜索 &quot;&quot;&quot;</span></span><br><span class="line">        res = <span class="variable language_">self</span>.client.search(image, image_type, group_id_list)</span><br><span class="line">        <span class="comment"># &quot;&quot;&quot; 如果有可选参�?&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># options = &#123;&#125;</span></span><br><span class="line">        <span class="comment"># options[&quot;match_threshold&quot;] = 70</span></span><br><span class="line">        <span class="comment"># options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span></span><br><span class="line">        <span class="comment"># options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span></span><br><span class="line">        <span class="comment"># # options[&quot;user_id&quot;] = &quot;233451&quot;</span></span><br><span class="line">        <span class="comment"># options[&quot;max_user_num&quot;] = 3</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        <span class="comment"># &quot;&quot;&quot; 带参数调用人脸搜�?&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># res = self.client.search(image, imageType, groupIdList, options)</span></span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, user_id, face_token, group_id=<span class="number">100</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 调用人脸删除 &quot;&quot;&quot;</span></span><br><span class="line">        res = <span class="variable language_">self</span>.client.faceDelete(user_id, group_id, face_token)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment">###########view.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionView</span>(GenericViewSet, ListModelMixin, CommonDeleteModelMixin, CommonCreateModelMixin):</span><br><span class="line">    <span class="comment"># reate_time__gte=datetime.now().date():筛选字段大于或等于当前日期的这些对�?</span></span><br><span class="line">    queryset = Collection.objects.<span class="built_in">all</span>().<span class="built_in">filter</span>(create_time__gte=datetime.now().date())</span><br><span class="line">    serializer_class = CollectionSerializer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 使用不同的序列化�?</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_serializer_class</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.action == <span class="string">&#x27;create&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> CollectionSaveSerializer</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> CollectionSerializer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">list</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        res = <span class="built_in">super</span>().<span class="built_in">list</span>(request, *args, **kwargs)</span><br><span class="line">        <span class="comment"># 计算采集的多少人</span></span><br><span class="line">        today_count = <span class="built_in">len</span>(<span class="variable language_">self</span>.get_queryset())</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;code&quot;</span>: <span class="number">100</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;查看成功&quot;</span>, <span class="string">&quot;collection&quot;</span>: res.data, <span class="string">&quot;today_count&quot;</span>: today_count&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 删除百度AI 的图�?</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">destroy</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        instance = <span class="variable language_">self</span>.get_object()</span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        res = baidu.delete(instance.name_pinyin, face_token=instance.face_token)</span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        <span class="variable language_">self</span>.perform_destroy(instance)</span><br><span class="line">        <span class="keyword">return</span> APIResponse()</span><br><span class="line"></span><br><span class="line"><span class="comment">##########serializer.py</span></span><br><span class="line"><span class="comment"># 保存</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollectionSaveSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Collection</span><br><span class="line">        fields = [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;avatar&quot;</span>, <span class="string">&quot;area&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, validated_data</span>):</span><br><span class="line">        <span class="comment"># 取出图片对象</span></span><br><span class="line">        avatar_file_object = validated_data.get(<span class="string">&quot;avatar&quot;</span>)</span><br><span class="line">        <span class="comment"># 取出name</span></span><br><span class="line">        name = validated_data.get(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        <span class="comment"># 获得我们封装的名字转拼音的对�?</span></span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        <span class="comment"># 转成拼音</span></span><br><span class="line">        name_pinyin = baidu.name_to_pinyin(name)</span><br><span class="line">        <span class="comment"># 将有图片传到ai�?</span></span><br><span class="line">        res = baidu.add_user(avatar_file_object, name, name_pinyin)</span><br><span class="line">        validated_data[<span class="string">&#x27;name_pinyin&#x27;</span>] = name_pinyin</span><br><span class="line">        <span class="comment"># 这里我们将保存到ai库中返回的token保存到表�?</span></span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        validated_data[<span class="string">&#x27;face_token&#x27;</span>] = res.get(<span class="string">&#x27;result&#x27;</span>).get(<span class="string">&#x27;face_token&#x27;</span>)</span><br><span class="line">        instance = <span class="built_in">super</span>().create(validated_data)</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1>【十】语音识别项目中集成</h1>
<h2 id="�-】方�">�?】方�?</h2>
<h3 id="�-）收费方�">�?）收费方�?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用百度，科大讯飞等第三方平�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 语音识别的SDK地址:</span></span><br><span class="line">	- https://ai.baidu.com/ai-doc/SPEECH/0lbxfnc9b</span><br><span class="line"><span class="comment"># 百度的语音URL�?</span></span><br><span class="line">	- 使用百度，科大讯飞等第三方平�?</span><br><span class="line">    </span><br><span class="line"><span class="comment"># SDK：文档中有步�?</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">speed</span>(<span class="params">file_object</span>):</span><br><span class="line">    <span class="keyword">from</span> aip <span class="keyword">import</span> AipSpeech</span><br><span class="line">    APP_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    API_KEY = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    SECRET_KEY = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    client = AipSpeech(APP_ID, API_KEY, SECRET_KEY)</span><br><span class="line">    data = file_object.read()</span><br><span class="line">    <span class="comment"># 识别本地文件</span></span><br><span class="line">    <span class="keyword">return</span> client.asr(data, <span class="string">&#x27;pcm&#x27;</span>, <span class="number">16000</span>, &#123;<span class="string">&#x27;dev_pid&#x27;</span>: <span class="number">1537</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240913190942906.png" alt="image-20240913190942906"></p>
<h3 id="�-）免费方�">�?）免费方�?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip3.11 install --force- SpeechRecognition</span></span><br><span class="line"><span class="comment"># pip3.11 install -i https://pypi.tuna.tsinghua.edu.cn/simple pocketsphinx</span></span><br><span class="line"><span class="comment">#https://pypi.org/project/pocketsphinx/#files</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 目前speech_recognition只有英文（en-US）的脱机识别库，如果需要脱机识别中文（zh-CN），需要手动加入对应的识别库，可参考如下操�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 逐层找到文件�?pocketsphinx-data （参考如下路径）�?</span></span><br><span class="line">\site-packages\speech_recognition\pocketsphinx-data</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 随后�?【zh-CN文件�?下载解压到pocketsphinx-data 中，如下图所�?</span></span><br><span class="line"> <span class="comment">#4 检查文件是否缺失以及命名、存放的位置是否一�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5 语音文件准备 speech_recognition 对脱机识别的文件有要求，目前支持的格式有</span></span><br><span class="line"><span class="number">1.</span>WAV</span><br><span class="line"><span class="number">2.</span>AIFF/AIFF-C</span><br><span class="line"><span class="number">3.</span>FLAC</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6 代码</span></span><br><span class="line"><span class="keyword">import</span> speech_recognition <span class="keyword">as</span> sr</span><br><span class="line"></span><br><span class="line">audio_file = <span class="string">&#x27;./test1.wav&#x27;</span></span><br><span class="line"></span><br><span class="line">r = sr.Recognizer()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> sr.AudioFile(audio_file) <span class="keyword">as</span> source:</span><br><span class="line">    audio = r.record(source)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 识别音频文件</span></span><br><span class="line">result = r.recognize_sphinx(audio, language=<span class="string">&quot;zh-CN&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>
<h2 id="�-】前�">�?】前�?</h2>
<h3 id="�-】json-2">�?】<code>json</code></h3>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;语音识别&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxml-3">�?】<code>wxml</code></h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 显示文本的框 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;等待语音识别自动录入...&quot;</span> <span class="attr">placeholder-class</span>=<span class="string">&quot;hoder&quot;</span> <span class="attr">model:value</span>=<span class="string">&quot;`&#123;&#123;content&#125;&#125;`&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;```&#123;&#123;-1&#125;&#125;```&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 按住说话按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">hover-class</span>=<span class="string">&quot;press&quot;</span> <span class="attr">bind:longpress</span>=<span class="string">&quot;recordStart&quot;</span> <span class="attr">bind:touchcancel</span>=<span class="string">&quot;recordCancel&quot;</span> <span class="attr">bind:touchend</span>=<span class="string">&quot;recordStop&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-microphone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span> 按住说话<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxss-3">�?】<code>wxss</code></h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">page</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="comment">/* color: #fff; */</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2</span>rpx solid <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: white; </span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.press</span> <span class="selector-tag">label</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#179B16</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.press</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hoder</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="�-】js-3">�?】<code>js</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://developers.weixin.qq.com/miniprogram/dev/api/media/recorder/RecorderManager.start.html</span></span><br><span class="line"><span class="comment">// 微信提供了录音管理，生成一个录音对�?</span></span><br><span class="line"><span class="keyword">const</span> recorderManager = wx.<span class="title function_">getRecorderManager</span>()</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">content</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">record</span>:<span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 开始录�?</span></span><br><span class="line">  <span class="attr">recordStart</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">record</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">    <span class="comment">//  参数</span></span><br><span class="line">    <span class="keyword">const</span> options = &#123;</span><br><span class="line">      <span class="comment">// duration: 6000,//指定录音的时长，单位 ms</span></span><br><span class="line">      <span class="attr">sampleRate</span>: <span class="number">16000</span>,<span class="comment">//采样�?</span></span><br><span class="line">      <span class="attr">numberOfChannels</span>: <span class="number">1</span>,<span class="comment">//录音通道�?</span></span><br><span class="line">      <span class="attr">encodeBitRate</span>: <span class="number">48000</span>,<span class="comment">//编码码率</span></span><br><span class="line">      <span class="attr">format</span>: <span class="string">&#x27;wav&#x27;</span><span class="comment">//音频格式，有效�?</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//开始录�?</span></span><br><span class="line">    recorderManager.<span class="title function_">start</span>(options)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 停止录音</span></span><br><span class="line">  <span class="attr">recordCancel</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;停止&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">record</span>:<span class="literal">false</span>&#125;)</span><br><span class="line">    wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 发请求，识别语音</span></span><br><span class="line">  <span class="attr">recordStop</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">record</span>)&#123;<span class="keyword">return</span>&#125;</span><br><span class="line">    <span class="comment">// 关闭录音</span></span><br><span class="line">    recorderManager.<span class="title function_">stop</span>();</span><br><span class="line">    <span class="comment">// 监听录音结束，发请求</span></span><br><span class="line">    recorderManager.<span class="title function_">onStop</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// this.tempFilePath = res.tempFilePath</span></span><br><span class="line">      <span class="comment">// 加载</span></span><br><span class="line">      wx.<span class="title function_">showLoading</span>()</span><br><span class="line">      <span class="comment">// 请求文件类型</span></span><br><span class="line">      wx.<span class="title function_">uploadFile</span>(&#123;</span><br><span class="line">        <span class="attr">filePath</span>: res.<span class="property">tempFilePath</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;voice&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: api.<span class="property">voice</span>,</span><br><span class="line">        <span class="attr">success</span>:<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">          <span class="comment">// &#123;&#x27;code&#x27;: 100, &#x27;msg&#x27;:&#x27;成功&#x27;,&#x27;result&#x27;: [&#x27;欢迎欢迎&#x27;]&#125;</span></span><br><span class="line">          <span class="keyword">let</span> voiceResponse = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(response.<span class="property">data</span>)</span><br><span class="line">          <span class="keyword">if</span>(voiceResponse.<span class="property">code</span> == <span class="number">100</span>)&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(voiceResponse)</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">content</span>:<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">content</span> + voiceResponse.<span class="property">result</span>[<span class="number">0</span>]</span><br><span class="line">              &#125;)</span><br><span class="line">          &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;识别失败，请重新操作�?,</span></span><br><span class="line"><span class="string">              icon: &quot;none&quot;</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        complete:()=&gt;&#123;</span></span><br><span class="line"><span class="string">          wx.hideLoading()</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      )</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">    this.setData(&#123;record:false&#125;)</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】后�-3">�?】后�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############view.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VoiceView</span>(<span class="title class_ inherited__">GenericViewSet</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># 取出你的音频</span></span><br><span class="line">        voice_object = request.data.get(<span class="string">&#x27;voice&#x27;</span>)</span><br><span class="line">        <span class="comment"># with open(&#x27;./a.wav&#x27;,&#x27;wb&#x27;) as f:</span></span><br><span class="line">        <span class="comment">#     f.write(voice_object.read())</span></span><br><span class="line">        <span class="comment"># 获得语音对象</span></span><br><span class="line">        ai = BaiDuVoice()</span><br><span class="line">        <span class="comment"># 将语音转文字</span></span><br><span class="line">        result = ai.speed(voice_object)</span><br><span class="line">        <span class="comment"># &#123;&#x27;corpus_no&#x27;: &#x27;6847771638436561158&#x27;, &#x27;result&#x27;: [&#x27;你是不是打过来？&#x27;], &#x27;sn&#x27;: &#x27;15921476781594371078&#x27;, &#x27;err_msg&#x27;: &#x27;success.&#x27;, &#x27;err_no&#x27;: 0&#125;</span></span><br><span class="line">        <span class="keyword">if</span> result.get(<span class="string">&#x27;err_no&#x27;</span>) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">100</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;识别成功&#x27;</span>, <span class="string">&#x27;result&#x27;</span>: result.get(<span class="string">&#x27;result&#x27;</span>)&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">101</span>, <span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;识别失败&#x27;</span>&#125;)</span><br><span class="line">        </span><br><span class="line"><span class="comment">##################libs/baidu/baidu_ia.py</span></span><br><span class="line"><span class="comment"># 语音识别</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaiDuVoice</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, APP_ID=<span class="string">&#x27;115576951&#x27;</span>, API_KEY=<span class="string">&#x27;YPkf1jQ7gSpLHf4Gd2H4SqWL&#x27;</span>,</span></span><br><span class="line"><span class="params">                 SECRET_KEY=<span class="string">&#x27;NWdeYXdti2LAIZfF1BEwNhlGS4KEnFkJ&#x27;</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot; 你的 APPID AK SK &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.APP_ID = APP_ID</span><br><span class="line">        <span class="variable language_">self</span>.API_KEY = API_KEY</span><br><span class="line">        <span class="variable language_">self</span>.SECRET_KEY = SECRET_KEY</span><br><span class="line">        <span class="variable language_">self</span>.client = AipSpeech(<span class="variable language_">self</span>.APP_ID, <span class="variable language_">self</span>.API_KEY, <span class="variable language_">self</span>.SECRET_KEY)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speed</span>(<span class="params">self, voice_object</span>):</span><br><span class="line">        res = <span class="variable language_">self</span>.client.asr(voice_object.read(), <span class="string">&#x27;pcm&#x27;</span>, <span class="number">16000</span>, &#123;</span><br><span class="line">            <span class="string">&#x27;dev_pid&#x27;</span>: <span class="number">1537</span>,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<h1>【十一】采集统�?</h1>
<h2 id="�-】前�-2">�?】前�?</h2>
<h3 id="�-】json-3">�?】<code>json</code></h3>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;数据统计&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxml-4">�?】<code>wxml</code></h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;```&#123;&#123;dataList&#125;&#125;```&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span> <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;iconfont  icon-SCHEDULE&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span>   `&#123;&#123;item.date&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>`&#123;&#123;item.count&#125;&#125;`�?/label&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxss-4">�?】<code>wxss</code></h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.menu</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: small;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#ddd</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="�-】js-4">�?】<code>js</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数�?</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">dataList</span>:[]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getRecord</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getRecord</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;<span class="attr">mask</span>:<span class="literal">true</span>&#125;)</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: api.<span class="property">statistics</span>,</span><br><span class="line">      <span class="attr">method</span>:<span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>:<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">dataList</span>:res.<span class="property">data</span>&#125;)</span><br><span class="line">      &#125;,<span class="title function_">complete</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="comment">// 隐藏加载</span></span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听下拉</span></span><br><span class="line">  <span class="title function_">onPullDownRefresh</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getRecord</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1>【十二】人脸检�?</h1>
<h2 id="�-】前�-3">�?】前�?</h2>
<h3 id="�-】json-4">�?】<code>json</code></h3>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;人脸检�?,</span></span><br><span class="line"><span class="string">  &quot;</span>navigationBarBackgroundColor<span class="string">&quot;: &quot;</span>#fff<span class="string">&quot;,</span></span><br><span class="line"><span class="string">  &quot;</span>enablePullDownRefresh<span class="string">&quot;: true,</span></span><br><span class="line"><span class="string">  &quot;</span>backgroundColor<span class="string">&quot;: &quot;</span>#<span class="number">00</span>FFFF<span class="string">&quot;,</span></span><br><span class="line"><span class="string">  &quot;</span>backgroundTextStyle<span class="string">&quot;: &quot;</span>light<span class="string">&quot;,</span></span><br><span class="line"><span class="string">  &quot;</span>navigationBarTextStyle<span class="string">&quot;: &quot;</span>black<span class="string">&quot;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxml-5">�?】<code>wxml</code></h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 照相�?--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ```&#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;```判断摄像头是前置还是后置，默认值是true --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">camera</span> <span class="attr">class</span>=<span class="string">&quot;camera&quot;</span> <span class="attr">device-position</span>=<span class="string">&quot;```&#123;&#123; backFront ? &#x27;back&#x27; : &#x27;front&#x27; &#125;&#125;```&quot;</span> <span class="attr">flash</span>=<span class="string">&quot;off&quot;</span> <span class="attr">frame-size</span>=<span class="string">&quot;medium&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">camera</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;switch&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;switchCamera&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这个图片是相机的反转，绑定了点击事件，来控制backFront的�?--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/camera/rotate-camera-white.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 拍照检测按�?--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;takePhoto&quot;</span>&gt;</span> 拍照检�?<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 这个是显示你测试的人员信�?--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;table&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>检测记�?/view&gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;```&#123;&#123;record&#125;&#125;```&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;row&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;record&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 检测的照片 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;row.avatar&#125;&#125;```&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 成功的提示信�?--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;```&#123;&#123;row.code == 100&#125;&#125;```&quot;</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>检测成功：`&#123;&#123;row.user_id&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 失败的提示信�?--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>检测失�?`&#123;&#123;row.msg&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;txt-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;zh&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;```&#123;&#123;row.code == 100&#125;&#125;```&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-shanchu1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:green&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-htmal5icon17&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxss-5">�?】<code>wxss</code></h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/face/face.wxss */</span></span><br><span class="line"><span class="selector-class">.header</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.camera</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.switch</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10</span>rpx;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">20</span>rpx;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.switch</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.submit</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2</span>rpx solid <span class="number">#00c8b6</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#00c8b6</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">  <span class="comment">/* 控制文本的粗�?*/</span></span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.table</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#e7e7e7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.table</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#e7e7e7</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.table</span> <span class="selector-class">.item</span> <span class="selector-class">.title</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10</span>rpx;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">5</span>rpx solid <span class="number">#02bfae</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.record</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.record</span> <span class="selector-class">.avatar</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.record</span> <span class="selector-class">.avatar</span> <span class="selector-tag">image</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.record</span> <span class="selector-class">.desc</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.desc</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">290</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.desc</span> <span class="selector-class">.username</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">25</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.txt-group</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">5</span>rpx <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.txt-group</span> <span class="selector-class">.zh</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#8c8c8c</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.txt-group</span> <span class="selector-class">.en</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#cccccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.area</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#00c8b6</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.delete</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="�-】js-5">�?】<code>js</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">backFront</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">record</span>:[]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击反转摄像�?</span></span><br><span class="line">  <span class="title function_">switchCamera</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">backFront</span>:<span class="literal">false</span>&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 拍照检�?</span></span><br><span class="line">  <span class="title function_">takePhoto</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// 展示加载</span></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>:<span class="string">&quot;检测中...&quot;</span>,</span><br><span class="line">      <span class="attr">mask</span>:<span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 获得照片</span></span><br><span class="line">    <span class="keyword">const</span> ctx = wx.<span class="title function_">createCameraContext</span>()</span><br><span class="line">    <span class="comment">// 发请�?</span></span><br><span class="line">    <span class="comment">// 提交给后端文件使用这�?</span></span><br><span class="line">    ctx.<span class="title function_">takePhoto</span>(&#123;</span><br><span class="line">      <span class="comment">// 图片的质�?</span></span><br><span class="line">      <span class="attr">quality</span>:<span class="string">&quot;high&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>:<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        wx.<span class="title function_">uploadFile</span>(&#123;</span><br><span class="line">          <span class="attr">filePath</span>: res.<span class="property">tempImagePath</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;avatar&#x27;</span>,</span><br><span class="line">          <span class="attr">url</span>: api.<span class="property">face</span>,</span><br><span class="line">          <span class="attr">success</span>:<span class="function"><span class="params">ress</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 需要转一�?不然得到的不是字典二十字符串</span></span><br><span class="line">            <span class="keyword">let</span> resdata = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(ress.<span class="property">data</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(resdata)</span><br><span class="line">            <span class="comment">// 判断是否成功----102不是本小区的业主</span></span><br><span class="line">            <span class="keyword">if</span>(resdata.<span class="property">code</span>==<span class="number">100</span> || resdata.<span class="property">code</span>==<span class="number">102</span>)&#123;</span><br><span class="line">              <span class="comment">// 将当前的图片存到resdata�?</span></span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">tempImagePath</span>);</span><br><span class="line">              resdata.<span class="property">avatar</span> = res.<span class="property">tempImagePath</span></span><br><span class="line">              <span class="keyword">var</span> oldRecord = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">record</span></span><br><span class="line">              <span class="comment">// 拼接</span></span><br><span class="line">              oldRecord.<span class="title function_">unshift</span>(resdata)</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(oldRecord);</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">record</span>:oldRecord</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;请正常拍�?,</span></span><br><span class="line"><span class="string">              &#125;)</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">          &#125;,complete()&#123;</span></span><br><span class="line"><span class="string">            // 隐藏加载</span></span><br><span class="line"><span class="string">            wx.hideLoading()</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】后�-4">�?】后�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###############view.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FaceView</span>(<span class="title class_ inherited__">GenericViewSet</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, request, *args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># 取出前端传过来的饿图�?</span></span><br><span class="line">        avatar = request.data.get(<span class="string">&#x27;avatar&#x27;</span>)</span><br><span class="line">        <span class="comment"># 判断</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> avatar:</span><br><span class="line">            <span class="keyword">return</span> APIResponse(code=<span class="number">101</span>, msg=<span class="string">&quot;图片未提交！&quot;</span>)</span><br><span class="line">        <span class="comment"># 获的百度ai对象</span></span><br><span class="line">        baidu = BaiDuAI()</span><br><span class="line">        result = baidu.search(avatar)</span><br><span class="line">        <span class="comment"># &#123;&#x27;error_code&#x27;: 0, &#x27;error_msg&#x27;: &#x27;SUCCESS&#x27;, &#x27;log_id&#x27;: 1442474036, &#x27;timestamp&#x27;: 1726233673, &#x27;cached&#x27;: 0, &#x27;result&#x27;: &#123;&#x27;face_token&#x27;: &#x27;32c062967b0de37b260b957894347027&#x27;, &#x27;user_list&#x27;: [&#123;&#x27;group_id&#x27;: &#x27;100&#x27;, &#x27;user_id&#x27;: &#x27;li3mo4mo4&#x27;, &#x27;user_info&#x27;: &#x27;&#x27;, &#x27;score&#x27;: 97.40111541748047&#125;]&#125;&#125;</span></span><br><span class="line">        <span class="keyword">if</span> result.get(<span class="string">&#x27;error_code&#x27;</span>) == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># 说明抢到�?</span></span><br><span class="line">            <span class="comment"># 获取数据---就是名字的拼�?</span></span><br><span class="line">            user_id = result.get(<span class="string">&quot;result&quot;</span>).get(<span class="string">&quot;user_list&quot;</span>)[<span class="number">0</span>].get(<span class="string">&quot;user_id&quot;</span>)</span><br><span class="line">            <span class="comment"># 名字</span></span><br><span class="line">            user_info = result.get(<span class="string">&quot;result&quot;</span>).get(<span class="string">&quot;user_list&quot;</span>)[<span class="number">0</span>].get(<span class="string">&quot;user_info&quot;</span>)</span><br><span class="line">            <span class="comment"># 准确�?</span></span><br><span class="line">            score = result.get(<span class="string">&quot;result&quot;</span>).get(<span class="string">&quot;user_list&quot;</span>)[<span class="number">0</span>].get(<span class="string">&quot;score&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> APIResponse(user_id=user_id, user_info=user_info, score=score)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            APIResponse(code=<span class="number">101</span>, msg=<span class="string">&quot;匹配失败！该成员不是我们小区的业主，注意注意！！�?)</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">#############libs/baidu/baidu_ai.py</span></span><br><span class="line"><span class="string">class BaiDuAI:</span></span><br><span class="line"><span class="string">    def __init__(self, APP_ID=&#x27;115551890&#x27;, API_KEY=&#x27;QqyXyz0Fv5Ans3QBY5ZBd0jF&#x27;,</span></span><br><span class="line"><span class="string">                 SECRET_KEY=&#x27;ntt3BVfsDcK8KZJCSHAs086jCGWCQOUL&#x27;):</span></span><br><span class="line"><span class="string">        &quot;</span><span class="string">&quot;&quot;</span> 你的 APPID AK SK <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        self.APP_ID = APP_ID</span></span><br><span class="line"><span class="string">        self.API_KEY = API_KEY</span></span><br><span class="line"><span class="string">        self.SECRET_KEY = SECRET_KEY</span></span><br><span class="line"><span class="string">        self.client = AipFace(self.APP_ID, self.API_KEY, self.SECRET_KEY)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def search(self, img_obj):</span></span><br><span class="line"><span class="string">        image = base64.b64encode(img_obj.read()).decode(&#x27;utf-8&#x27;)</span></span><br><span class="line"><span class="string">        image_type = &quot;BASE64&quot;</span></span><br><span class="line"><span class="string">        group_id_list = &quot;100,101&quot;</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span> 调用人脸搜索 <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        res = self.client.search(image, image_type, group_id_list)</span></span><br><span class="line"><span class="string">        # &quot;&quot;&quot;</span> 如果有可选参�?<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        # options = &#123;&#125;</span></span><br><span class="line"><span class="string">        # options[&quot;match_threshold&quot;] = 70</span></span><br><span class="line"><span class="string">        # options[&quot;quality_control&quot;] = &quot;NORMAL&quot;</span></span><br><span class="line"><span class="string">        # options[&quot;liveness_control&quot;] = &quot;LOW&quot;</span></span><br><span class="line"><span class="string">        # # options[&quot;user_id&quot;] = &quot;233451&quot;</span></span><br><span class="line"><span class="string">        # options[&quot;max_user_num&quot;] = 3</span></span><br><span class="line"><span class="string">        #</span></span><br><span class="line"><span class="string">        # &quot;&quot;&quot;</span> 带参数调用人脸搜�?<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        # res = self.client.search(image, imageType, groupIdList, options)</span></span><br><span class="line"><span class="string">        print(res)</span></span><br><span class="line"><span class="string">        return res</span></span><br></pre></td></tr></table></figure>
<h1>【十三】公告tab�?</h1>
<h2 id="�-】前�-4">�?】前�?</h2>
<h3 id="�-】json-5">�?】<code>json</code></h3>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxml-6">�?】<code>wxml</code></h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 使用wx:for循环遍历社区公告列表 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;```&#123;&#123;noticeList&#125;&#125;```&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">class</span>=<span class="string">&quot;notice-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 左侧图片 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;notice-image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;item.img&#125;&#125;```&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 右侧内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;notice-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;notice-title&quot;</span>&gt;</span>`&#123;&#123;item.title&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;notice-time&quot;</span>&gt;</span>`&#123;&#123;item.create_time&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;notice-details&quot;</span>&gt;</span>`&#123;&#123;item.content&#125;&#125;`<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-】wxss-6">�?】<code>wxss</code></h3>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-item</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx; <span class="comment">/* 添加间距 */</span></span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f0f0f0</span>; <span class="comment">/* 添加底部边框 */</span></span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">20</span>rpx; <span class="comment">/* 增加底部内边�?*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-image</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">120</span>rpx;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">6</span>rpx;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-content</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">28</span>rpx;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-time</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666666</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.notice-details</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="�-】js-6">�?】<code>js</code></h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&quot;../../conf/settings&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">noticeList</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;公告标题1&#x27;</span>,</span><br><span class="line">        <span class="attr">create_time</span>: <span class="string">&#x27;2024-04-25&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;公告内容描述1，公告内容描�?，公告内容描�?�?, // 可以根据实际情况添加更多内容</span></span><br><span class="line"><span class="string">        igm: &#x27;</span>/images/notice/notice1.<span class="property">jpg</span><span class="string">&#x27; // 图片路径，根据实际情况修�?</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        title: &#x27;</span>公告标题<span class="number">2</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        create_time: &#x27;</span><span class="number">2024</span>-<span class="number">04</span>-<span class="number">26</span><span class="string">&#x27;,</span></span><br><span class="line"><span class="string">        content: &#x27;</span>公告内容描述<span class="number">2</span>，公告内容描�?，公告内容描�?�?, <span class="comment">// 可以根据实际情况添加更多内容</span></span><br><span class="line">        <span class="attr">igm</span>: <span class="string">&#x27;/images/notice/notice2.jpg&#x27;</span> <span class="comment">// 图片路径，根据实际情况修�?</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 可以添加更多社区公告数据</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 页面加载时执行的逻辑</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">refresh</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">refresh</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">mask</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: api.<span class="property">notice</span>,</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">noticeList</span>: res.<span class="property">data</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">complete</span>(<span class="params"></span>) &#123;</span><br><span class="line">        wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="�-】后�-5">�?】后�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########view.py</span></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Notice</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> NoticeSerializer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NoticeView</span>(GenericViewSet, ListModelMixin):</span><br><span class="line">    queryset = Notice.objects.<span class="built_in">all</span>().order_by(<span class="string">&#x27;create_time&#x27;</span>)</span><br><span class="line">    serializer_class = NoticeSerializer</span><br><span class="line">    </span><br><span class="line"><span class="comment">#################serializer.py</span></span><br><span class="line"><span class="comment"># 公告序列化表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NoticeSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = Notice</span><br><span class="line">        fields = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;title&quot;</span>, <span class="string">&quot;img&quot;</span>, <span class="string">&quot;create_time&quot;</span>, <span class="string">&quot;content&quot;</span>]</span><br><span class="line">        extra_kwargs = &#123;</span><br><span class="line">            <span class="string">&#x27;create_time&#x27;</span>: &#123;<span class="string">&#x27;format&#x27;</span>: <span class="string">&quot;%Y-%m-%d&quot;</span>&#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Blog/" rel="tag"># Blog</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/01/01/%E9%98%B6%E6%AE%B5%E6%80%A7%E8%80%83%E8%AF%95%E4%B8%80%E3%80%90%E4%B9%A0%E9%A2%98%E7%89%88%E3%80%91/" rel="prev" title="">
      <i class="fa fa-chevron-left"></i> 
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/01/01/%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90/" rel="next" title="">
       <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#title-%EF%BF%BDa%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BDLdate-2023-01-01categories-Blogtags-Blog"><span class="nav-number">1.</span> <span class="nav-text">title: �ǻ�������Ŀ
date: 2023-01-01
categories: Blog
tags: [Blog]</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【一】项目介�?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【二】项目创�?</span></a></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【三】小程序欢迎页面</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%88%86%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】分�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%86%99%E6%AC%A2%E8%BF%8E%E9%A1%B5%E9%9D%A2"><span class="nav-number">2.</span> <span class="nav-text">�?】写欢迎页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89wxml"><span class="nav-number">2.1.</span> <span class="nav-text">�?）wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89js"><span class="nav-number">2.2.</span> <span class="nav-text">�?）js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89wxss"><span class="nav-number">2.3.</span> <span class="nav-text">�?）wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89%E5%90%8E%E7%AB%AF%E5%8A%A0%E8%BD%BD%E6%AC%A2%E8%BF%8E%E9%A1%B5%EF%BF%BD"><span class="nav-number">2.4.</span> <span class="nav-text">�?）后端加载欢迎页�?</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%EF%BF%BD"><span class="nav-number">2.4.1.</span> <span class="nav-text">[1]数据�?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%A1%A8%E6%A8%A1%EF%BF%BD"><span class="nav-number">2.4.2.</span> <span class="nav-text">[2]表模�?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%BC%80%E5%90%AFmedia%E8%AE%BF%E9%97%AE"><span class="nav-number">2.4.3.</span> <span class="nav-text">[3]开启media访问</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0"><span class="nav-number">2.4.4.</span> <span class="nav-text">[4]视图函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E5%BA%8F%E5%88%97%E5%8C%96%E7%B1%BB"><span class="nav-number">2.4.5.</span> <span class="nav-text">[5]序列化类</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【四】首�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91app-json"><span class="nav-number">1.</span> <span class="nav-text">�?】app.json</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml"><span class="nav-number">2.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss"><span class="nav-number">3.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js"><span class="nav-number">4.</span> <span class="nav-text">�?】js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91app-json-2"><span class="nav-number">5.</span> <span class="nav-text">�?】app.json</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【五】首页轮播图和公告接�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%90%8E%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】后�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89models-py"><span class="nav-number">1.1.</span> <span class="nav-text">�?）models.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89view-py"><span class="nav-number">1.2.</span> <span class="nav-text">�?）view.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89serializer-py"><span class="nav-number">1.3.</span> <span class="nav-text">�?）serializer.py</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【六】个人中�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91vant%E6%A0%B7%E5%BC%8F%EF%BF%BD-%E7%AC%94%E8%AE%B0%E4%B8%AD%E6%9C%89%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】vant样式�?---------笔记中有�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91json"><span class="nav-number">2.</span> <span class="nav-text">�?】json</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml-2"><span class="nav-number">3.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss-2"><span class="nav-number">4.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js-2"><span class="nav-number">5.</span> <span class="nav-text">�?】js</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【七】信息采集页�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%B7%B3%E8%BD%AC%E7%9A%84%E4%BF%A1%E6%81%AF%E9%87%87%E9%9B%86%E9%A1%B5%E9%9D%A2"><span class="nav-number">1.</span> <span class="nav-text">�?】新建一个跳转的信息采集页面</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%90%8E%EF%BF%BD-2"><span class="nav-number">2.</span> <span class="nav-text">�?】后�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89view-py-2"><span class="nav-number">2.1.</span> <span class="nav-text">�?）view.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89serializer-py-2"><span class="nav-number">2.2.</span> <span class="nav-text">�?）serializer.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89models-py-2"><span class="nav-number">2.3.</span> <span class="nav-text">�?）models.py</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%BC%95%E5%85%A5%E7%9F%A2%E9%87%8F%E5%9B%BE%E6%A0%87%E5%BA%93"><span class="nav-number">3.</span> <span class="nav-text">�?】引入矢量图标库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【八】信息采集详情页�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E2%80%93%E6%8B%8D%E7%85%A7%E9%A1%B5%E9%A1%B5%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】小程序–拍照页页�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%B0%8F%E7%A8%8B%E5%BA%8F%E2%80%93%E9%87%87%E9%9B%86%E9%A1%B5%E9%A1%B5%EF%BF%BD"><span class="nav-number">2.</span> <span class="nav-text">�?】小程序–采集页页�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E9%87%87%E9%9B%86%E9%A1%B5%E9%9D%A2%E5%90%8E%EF%BF%BD"><span class="nav-number">3.</span> <span class="nav-text">�?】采集页面后�?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【九】人脸识别项目中集成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E4%BD%BF%E7%94%A8%E6%AD%A5%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】使用步�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E7%AE%80%E5%8D%95%E4%BD%BF%EF%BF%BD"><span class="nav-number">2.</span> <span class="nav-text">�?】简单使�?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E9%9B%86%E6%88%90%E5%88%B0%E9%A1%B9%E7%9B%AE%EF%BF%BD"><span class="nav-number">3.</span> <span class="nav-text">�?】集成到项目�?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【十】语音识别项目中集成</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E6%96%B9%EF%BF%BD"><span class="nav-number">1.</span> <span class="nav-text">�?】方�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89%E6%94%B6%E8%B4%B9%E6%96%B9%EF%BF%BD"><span class="nav-number">1.1.</span> <span class="nav-text">�?）收费方�?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%EF%BC%89%E5%85%8D%E8%B4%B9%E6%96%B9%EF%BF%BD"><span class="nav-number">1.2.</span> <span class="nav-text">�?）免费方�?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%89%8D%EF%BF%BD"><span class="nav-number">2.</span> <span class="nav-text">�?】前�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91json-2"><span class="nav-number">2.1.</span> <span class="nav-text">�?】json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml-3"><span class="nav-number">2.2.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss-3"><span class="nav-number">2.3.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js-3"><span class="nav-number">2.4.</span> <span class="nav-text">�?】js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%90%8E%EF%BF%BD-3"><span class="nav-number">3.</span> <span class="nav-text">�?】后�?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【十一】采集统�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%89%8D%EF%BF%BD-2"><span class="nav-number">1.</span> <span class="nav-text">�?】前�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91json-3"><span class="nav-number">1.1.</span> <span class="nav-text">�?】json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml-4"><span class="nav-number">1.2.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss-4"><span class="nav-number">1.3.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js-4"><span class="nav-number">1.4.</span> <span class="nav-text">�?】js</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【十二】人脸检�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%89%8D%EF%BF%BD-3"><span class="nav-number">1.</span> <span class="nav-text">�?】前�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91json-4"><span class="nav-number">1.1.</span> <span class="nav-text">�?】json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml-5"><span class="nav-number">1.2.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss-5"><span class="nav-number">1.3.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js-5"><span class="nav-number">1.4.</span> <span class="nav-text">�?】js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%90%8E%EF%BF%BD-4"><span class="nav-number">2.</span> <span class="nav-text">�?】后�?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-number"></span> <span class="nav-text">【十三】公告tab�?</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%89%8D%EF%BF%BD-4"><span class="nav-number">1.</span> <span class="nav-text">�?】前�?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91json-5"><span class="nav-number">1.1.</span> <span class="nav-text">�?】json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxml-6"><span class="nav-number">1.2.</span> <span class="nav-text">�?】wxml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91wxss-6"><span class="nav-number">1.3.</span> <span class="nav-text">�?】wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91js-6"><span class="nav-number">1.4.</span> <span class="nav-text">�?】js</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BF%BD-%E3%80%91%E5%90%8E%EF%BF%BD-5"><span class="nav-number">2.</span> <span class="nav-text">�?】后�?</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
