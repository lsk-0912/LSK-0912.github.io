<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aurora-lsk.asia","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:type" content="website">
<meta property="og:title" content="坤博客">
<meta property="og:url" content="https://aurora-lsk.asia/index.html">
<meta property="og:site_name" content="坤博客">
<meta property="og:description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="坤">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://aurora-lsk.asia/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>坤博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">坤博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E4%B8%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E4%B8%83/" class="post-title-link" itemprop="url">Flask七</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】flask-sqlalchemy使用</h1>
<h2 id="【1】集成到项目中（自己集成）">【1】集成到项目中（自己集成）</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################__init__.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> .view <span class="keyword">import</span> view</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 加载配置文件</span></span><br><span class="line">app.config.from_pyfile(<span class="string">&#x27;./settings.py&#x27;</span>)</span><br><span class="line"><span class="comment"># 注册蓝图</span></span><br><span class="line">app.register_blueprint(view)</span><br><span class="line"></span><br><span class="line"><span class="comment">################commone.py</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker, scoped_session</span><br><span class="line"></span><br><span class="line">engine = create_engine(</span><br><span class="line">    <span class="string">&#x27;mysql+pymysql://root:710912@localhost:3308/flask_day07?charset=utf8mb4&#x27;</span>,</span><br><span class="line">    max_overflow=<span class="number">0</span>,  <span class="comment"># 超出连接池大小外最多创建的连接</span></span><br><span class="line">    pool_size=<span class="number">5</span>,  <span class="comment"># 连接池大小</span></span><br><span class="line">    pool_timeout=<span class="number">30</span>,  <span class="comment"># 池中没有线程最多等待的时间，否则报错</span></span><br><span class="line">    pool_recycle=-<span class="number">1</span>,  <span class="comment"># 多久之后对线程池中的线程进行一次连接的回收（重置）</span></span><br><span class="line">)</span><br><span class="line">session = sessionmaker(engine)</span><br><span class="line">session = scoped_session(session)</span><br><span class="line"></span><br><span class="line"><span class="comment">################models.py</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> DeclarativeBase</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, DateTime, Text</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">DeclarativeBase</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="comment"># 表的名字</span></span><br><span class="line">    __tablename__ = <span class="string">&quot;user&quot;</span></span><br><span class="line">    <span class="comment"># 主键自增</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 索引，不可以为空</span></span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># 这个字段是唯一的</span></span><br><span class="line">    email = Column(String(<span class="number">32</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># datetime.datetime.now不能加括号，加了括号，以后永远是当前时间</span></span><br><span class="line">    ctime = Column(DateTime, default=datetime.datetime.now)</span><br><span class="line">    extra = Column(Text, nullable=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 打印对象的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line">    <span class="comment"># 打印列表的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"><span class="comment">################settings.py</span></span><br><span class="line">DEBUG = <span class="literal">True</span></span><br><span class="line">	<span class="comment"># 可以在这里写配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">################view.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, jsonify</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> .commone <span class="keyword">import</span> session</span><br><span class="line"></span><br><span class="line">view = Blueprint(<span class="string">&#x27;view&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, endpoint=<span class="string">&#x27;index&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/user&#x27;</span>, endpoint=<span class="string">&#x27;user&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>():</span><br><span class="line">    <span class="comment"># 查询数据</span></span><br><span class="line">    res = session.query(User.<span class="built_in">id</span>, User.name).<span class="built_in">filter</span>(User.<span class="built_in">id</span>&gt;<span class="number">1</span>).<span class="built_in">all</span>()</span><br><span class="line">    l = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">        l.append(&#123;<span class="string">&#x27;id&#x27;</span>: item.<span class="built_in">id</span>, <span class="string">&#x27;name&#x27;</span>: item.name&#125;)</span><br><span class="line">    <span class="keyword">return</span> jsonify(l)</span><br><span class="line"></span><br><span class="line"><span class="comment">################app.py</span></span><br><span class="line"><span class="keyword">from</span> src <span class="keyword">import</span> app</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240925164010911.png" alt="image-20240925164010911"></p>
<h2 id="【2】使用flask-sqlalchemy集成到flask中">【2】使用flask-sqlalchemy集成到flask中</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 借助于flask-sqlalchemy</span></span><br><span class="line">	<span class="number">1</span> 导入 <span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line">    <span class="number">2</span> 实例化得到对象</span><br><span class="line">    	db = SQLAlchemy()</span><br><span class="line">    <span class="number">3</span>  将db注册到app中</span><br><span class="line">    	db.init_app(app)</span><br><span class="line">    ------<span class="number">2</span>,<span class="number">3</span> 可以合并为db = SQLAlchemy(app)--------</span><br><span class="line">    </span><br><span class="line">    <span class="number">4</span> 视图函数中使用session</span><br><span class="line">    	全局的db.session  <span class="comment"># 线程安全的，每个session都是本事自己的，做了封装</span></span><br><span class="line">    <span class="number">5</span> models.py 中继承Model</span><br><span class="line">    	db.Model</span><br><span class="line">    <span class="number">6</span> 写字段 </span><br><span class="line">    	username = db.Column(db.String(<span class="number">80</span>), unique=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="number">7</span> 配置文件中加入</span><br><span class="line">    SQLALCHEMY_DATABASE_URI = <span class="string">&quot;mysql+pymysql://root@127.0.0.1:3306/ddd?charset=utf8&quot;</span></span><br><span class="line">    SQLALCHEMY_POOL_SIZE = <span class="number">5</span></span><br><span class="line">    SQLALCHEMY_POOL_TIMEOUT = <span class="number">30</span></span><br><span class="line">    SQLALCHEMY_POOL_RECYCLE = -<span class="number">1</span></span><br><span class="line">    <span class="comment"># 追踪对象的修改并且发送信号</span></span><br><span class="line">    SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h3 id="（1）使用">（1）使用</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################__init__.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注册配置文件</span></span><br><span class="line">app.config.from_pyfile(<span class="string">&#x27;./settings.py&#x27;</span>)</span><br><span class="line"><span class="comment"># 实例化得到一个对象</span></span><br><span class="line"><span class="comment"># db = SQLAlchemy()</span></span><br><span class="line"><span class="comment"># 讲db注册到app中</span></span><br><span class="line"><span class="comment"># db.init_app(app)</span></span><br><span class="line"><span class="comment"># # 讲上面的两句合成一句</span></span><br><span class="line">db = SQLAlchemy(app)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 放在db下面不然会有循环导入的问题</span></span><br><span class="line"><span class="keyword">from</span> .view <span class="keyword">import</span> view</span><br><span class="line"><span class="comment"># 注册蓝图</span></span><br><span class="line">app.register_blueprint(view)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################models.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(db.Model):</span><br><span class="line">    <span class="comment"># 表的名字</span></span><br><span class="line">    __tablename__ = <span class="string">&quot;user&quot;</span></span><br><span class="line">    <span class="comment"># 主键自增</span></span><br><span class="line">    <span class="built_in">id</span> = db.Column(db.Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 索引，不可以为空</span></span><br><span class="line">    name = db.Column(db.String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># 这个字段是唯一的</span></span><br><span class="line">    email = db.Column(db.String(<span class="number">32</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># datetime.datetime.now不能加括号，加了括号，以后永远是当前时间</span></span><br><span class="line">    ctime = db.Column(db.DateTime, default=datetime.datetime.now)</span><br><span class="line">    extra = db.Column(db.Text, nullable=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 打印对象的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line">    <span class="comment"># 打印列表的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################settings.py</span></span><br><span class="line">DEBUG = <span class="literal">True</span></span><br><span class="line">	<span class="comment"># 可以在这里写配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">################view.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> db</span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> jsonify, Blueprint</span><br><span class="line"></span><br><span class="line">view = Blueprint(<span class="string">&#x27;view&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, endpoint=<span class="string">&#x27;index&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/user&#x27;</span>, endpoint=<span class="string">&#x27;user&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>():</span><br><span class="line">    res = db.session.query(User.<span class="built_in">id</span>, User.name).where(User.<span class="built_in">id</span> &gt; <span class="number">1</span>).<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    l = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">        l.append(&#123;<span class="string">&#x27;id&#x27;</span>: item.<span class="built_in">id</span>, <span class="string">&#x27;name&#x27;</span>: item.name&#125;)</span><br><span class="line">    <span class="keyword">return</span> jsonify(l)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################app.py</span></span><br><span class="line"><span class="keyword">from</span> src <span class="keyword">import</span> app</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h1>【二】flask-migrate使用</h1>
<h2 id="【1】前言">【1】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这个方法是用来创建迁移数据库命令的，第三方的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在django中创建表，迁移数据库，对表增删改字段都可以，只需要执行命令即可</span></span><br><span class="line">	- python manage.py makemigrations</span><br><span class="line">     - python manage.py migrate</span><br><span class="line"></span><br><span class="line"><span class="comment"># flask中</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装：pip3 install Flask-Migrate --upgrade</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先你要自己创建数据库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自己创建表-----和django一样，只是命令不同</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开源地址：https://github.com/miguelgrinberg/Flask-Migrate/</span></span><br></pre></td></tr></table></figure>
<h2 id="【2】使用">【2】使用</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">########在py文件中写</span></span><br><span class="line"><span class="comment">#创建迁移命令</span></span><br><span class="line"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate</span><br><span class="line"></span><br><span class="line">migrate = Migrate(app, db)</span><br><span class="line"></span><br><span class="line"><span class="comment"># flask --app manage:app db init  # 初始化，第一次执行，以后再也不执行了，它执行完，会出现一个migrations文件夹---相当于记录你的迁移文件</span></span><br><span class="line"><span class="comment"># flask --app manage:app db migrate # django中的makemigrations 是一模一样---数据库会多一个表，不用管是自带的</span></span><br><span class="line"><span class="comment"># flask --app manage:app db upgrade  # 跟django的migrate一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果你的执行文件就叫app.py---不用写--app manage:app</span></span><br><span class="line">	- flask db init</span><br><span class="line">    - flask db migrate</span><br><span class="line">    - flask db upgrade</span><br></pre></td></tr></table></figure>
<h1>【三】flask项目</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://gitee.com/pear-admin/pear-admin-flask</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://github.com/elunez/eladmin-web/tree/master/src</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://gitee.com/layui-vue/layui-vue-admin</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E4%BA%8C/" class="post-title-link" itemprop="url">Flask�?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <img src="D:\pycharm\Temporary_notes\图片\image-20240918090356955.png" alt="image-20240918090356955"  />
<h1>【一】路由系�?</h1>
<h2 id="�-】路由系统本�">�?】路由系统本�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask路由系统�?--》基于装饰器</span></span><br><span class="line">	<span class="comment"># 直接router指定请求方式</span></span><br><span class="line">	app.route:使用methods指定请求方式</span><br><span class="line">    <span class="comment"># 也可以直接指定请�?</span></span><br><span class="line">    app.get</span><br><span class="line">    app.post</span><br><span class="line">    app.....</span><br><span class="line">    </span><br><span class="line"><span class="comment"># router的参�?</span></span><br><span class="line">	- rule；请求的地址</span><br><span class="line">    - methods：请求方�?</span><br><span class="line">    - endpoint：指定路径的别名--》使用url_for反向解析</span><br><span class="line">    	- 路由别名如果一样，就会报错</span><br><span class="line">        - 如果不指定路由别名：路由别名用函数名，一旦加了装饰器，所有视图函数的名字都变成了inner</span><br></pre></td></tr></table></figure>
<h2 id="�-】源码解析-app-route-》add-url-rule">�?】<code>源码解析@app.route()----------》add_url_rule</code></h2>
<h3 id="�-）解�">�?）解�?</h3>
<ul>
<li>点进装饰器<code>@app.route() </code>----源码就可以看到<code>add_url_rule</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app.route 的本质是（结合源码）：self.add_url_rule--——》self 是app对象</span></span><br><span class="line"><span class="meta">	@app.route()   </span><span class="comment"># 装饰器的本质是： index=app.route()(index)---&gt;内部本质 decorator(index)--&gt;内部执行�?self.add_url_rule---》传了一些参�?-�?rule, endpoint, f, **options)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 路由的本质实际上是执行了 self.add_url_rule(rule,endpoint,视图函数内存地址,其他:methods..)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># route参数--》最终给了add_url_rule--》add_url_rule的参�?</span></span><br><span class="line">	-rule：请求地址</span><br><span class="line">    -endpoint：指定路径的别名--》使用url_for反向解析</span><br><span class="line">        -路由别名如果一样，就会报错</span><br><span class="line">        -如果不指定路由别名：路由别名用函数名，一旦加了装饰器，所有视图函数的名字都变成了inner</span><br><span class="line">    -view_func:视图函数内存地址</span><br><span class="line">    -methods:请求方式</span><br><span class="line">    - defaults = <span class="literal">None</span>, 默认�? 路径解析时，函数需要参数时，使用defaults = &#123;<span class="string">&#x27;k&#x27;</span>: <span class="string">&#x27;v&#x27;</span>&#125;-为函数提供参�?---》django中也有，叫kwargs</span><br><span class="line">	- strict_slashes = <span class="literal">None</span> 对URL最后的 / 符号是否严格要求</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            @app.route(&#x27;/index&#x27;, strict_slashes=False)</span></span><br><span class="line"><span class="string">            #访问http://www.xx.com/index/ 或http://www.xx.com/index均可</span></span><br><span class="line"><span class="string">            @app.route(&#x27;/index&#x27;, strict_slashes=True)</span></span><br><span class="line"><span class="string">            #仅访问http://www.xx.com/index</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">    - redirect_to = <span class="literal">None</span>重定向到指定地址</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">            @app.route(&#x27;/index/&lt;int:nid&gt;&#x27;, redirect_to=&#x27;/home/&lt;nid&gt;&#x27;)</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）注册路由的另一种方�">�?）注册路由的另一种方�?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手动注册路由---------基本上不会这样用</span></span><br><span class="line">	- app.add_url_rule(<span class="string">&#x27;路径&#x27;</span>，endpoint=<span class="string">&#x27;别名&#x27;</span>, view_func=视图函数的内存地址�?methods=[请求的方式])</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 案例</span></span><br><span class="line">    app.add_url_rule(<span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, view_func=Login, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>])</span><br><span class="line">    app.add_url_rule(<span class="string">&#x27;/&#x27;</span>, endpoint=<span class="string">&#x27;/&#x27;</span>, view_func=index, methods=[<span class="string">&#x27;GET&#x27;</span>])</span><br><span class="line">    app.add_url_rule(<span class="string">&#x27;/detail&#x27;</span>, endpoint=<span class="string">&#x27;detail&#x27;</span>, view_func=detail, methods=[<span class="string">&#x27;GET&#x27;</span>])</span><br></pre></td></tr></table></figure>
<h2 id="�-】装饰器案例-解决路由别名相同的问�">�?】装饰器案例----解决路由别名相同的问�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果你的装饰，装饰了两个以上的视图函�?</span></span><br><span class="line">	- 就会报错：AssertionError: View function mapping <span class="keyword">is</span> overwriting an existing endpoint function: inner</span><br><span class="line"><span class="comment"># 这个报错的原因是</span></span><br><span class="line">	- 多个视图函数使用了相同的端点名称，每个视图函数的端点都必须唯一</span><br><span class="line">    - 我们可以使用wraps来控�?----得到的端点名子就是被装饰的函数名�?</span><br><span class="line">    - 我们还可以使用@app.route() 装饰器中，通过endpoint指定端点的名�?</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, session, render_template, request, redirect</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line">app.secret_key = <span class="string">&#x27;andljhdjandijawd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写一个装饰器</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="comment"># 要加这个装饰器，不然会报�?</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="keyword">if</span> session.get(<span class="string">&#x27;username&#x27;</span>):</span><br><span class="line">            res = func(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="comment"># 一定要放在下面因为是依次执行的</span></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">    password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> username == <span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;1234&#x27;</span>:</span><br><span class="line">        session[<span class="string">&#x27;username&#x27;</span>] = username</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>, error=<span class="string">&#x27;用户名或密码错误&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/detail&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>():</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&#x27;/detail&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(index.__name__)</span><br><span class="line"><span class="built_in">print</span>(detail.__name__)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">print(index.__name__)  # index</span></span><br><span class="line"><span class="string">print(detail.__name__) # detail</span></span><br><span class="line"><span class="string">加了：@wraps(func)之后，就是index和detail</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">在@app.route()中写一个参数endpoint</span></span><br><span class="line"><span class="string">    - 这个endpoint是指定路由的别名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">不加@wraps(func)就会报错</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 使用装饰�?</span></span><br><span class="line">	- 会报�?</span><br><span class="line"><span class="comment"># 解决办法</span></span><br><span class="line">	- 给装饰器的inner添加一个装饰器@wraps(func)</span><br><span class="line">    - 给@app.route()中写一个参数endpoint=<span class="string">&#x27;别名&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】转换器">�?】转换器</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 转换�?app.add_url_rule(&#x27;/index/&lt;int:pk&gt;&#x27;)</span></span><br><span class="line">DEFAULT_CONVERTERS = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>:          UnicodeConverter,</span><br><span class="line">    <span class="string">&#x27;string&#x27;</span>:           UnicodeConverter,</span><br><span class="line">    <span class="string">&#x27;any&#x27;</span>:              AnyConverter,</span><br><span class="line">    <span class="string">&#x27;path&#x27;</span>:             PathConverter,</span><br><span class="line">    <span class="string">&#x27;int&#x27;</span>:              IntegerConverter,</span><br><span class="line">    <span class="string">&#x27;float&#x27;</span>:            FloatConverter,</span><br><span class="line">    <span class="string">&#x27;uuid&#x27;</span>:             UUIDConverter,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">	- app.add_url_rule(<span class="string">&#x27;/index/&lt;string:pk&gt;&#x27;</span>)</span><br><span class="line">    - app.add_url_rule(<span class="string">&#x27;/index/&lt;int:pk&gt;&#x27;</span>)</span><br><span class="line">    - app.add_url_rule(<span class="string">&#x27;/index/&lt;path:path&gt;/...&#x27;</span>)</span><br><span class="line">    - .............以上这样书写</span><br></pre></td></tr></table></figure>
<h1>【二】cbv</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 针对于cbv</span></span><br><span class="line">	- 如果指定了endpoint，反向解析需要使用endpoint对应的�?</span><br><span class="line">    - 如果没有指定，以as_view(name=<span class="string">&#x27;static&#x27;</span>)的name为准</span><br><span class="line">    </span><br><span class="line"><span class="comment"># cbv注册路由</span></span><br><span class="line"><span class="comment"># endpoint这里你不写url_for解析会解析as_view(name=&#x27;login&#x27;)name的名�?</span></span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, view_func=LoginFrom.as_view(name=<span class="string">&#x27;login&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="�-】cbv基本使用">�?】cbv基本使用</h2>
<h3 id="1-继承MethodView">(1)继承<code>MethodView</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, url_for</span><br><span class="line"><span class="keyword">from</span> flask.views <span class="keyword">import</span> MethodView</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginFrom</span>(<span class="title class_ inherited__">MethodView</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(url_for(<span class="string">&#x27;login&#x27;</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;get请求&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;post请求&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># cbv注册路由</span></span><br><span class="line"><span class="comment"># endpoint这里你不�?url_for解析会解析as_view(name=&#x27;login&#x27;)name的名�?</span></span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, view_func=LoginFrom.as_view(name=<span class="string">&#x27;login&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h3 id="�-）继承View">�?）继承<code>View</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 继承View,必须要重写dispatch_request方法</span></span><br><span class="line"><span class="comment"># 如果methods 没有设置,默认是[&#x27;GET&#x27;]，只可以访问GET请求</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, url_for, request</span><br><span class="line"><span class="keyword">from</span> flask.views <span class="keyword">import</span> View</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginFrom</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="comment"># 如果methods 没有设置,默认是[&#x27;GET&#x27;]，只可以访问GET请求</span></span><br><span class="line">    methods = [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span><br><span class="line">    <span class="comment"># 继承View,必须要重写dispatch_request方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">dispatch_request</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.get()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.post()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;get请求&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;post请求&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cbv注册路由</span></span><br><span class="line"><span class="comment"># endpoint这里你不�?url_for解析会解析as_view(name=&#x27;login&#x27;)name的名�?</span></span><br><span class="line">app.add_url_rule(<span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, view_func=LoginFrom.as_view(name=<span class="string">&#x27;login&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h2 id="�-】cbv源码分析">�?】cbv源码分析</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从请求来开�?</span></span><br><span class="line">	- 路由匹配成功，执行：app.add_url_rule(<span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, view_func=LoginFrom.as_view(name=<span class="string">&#x27;login&#x27;</span>))</span><br><span class="line">    - 执行：LoginFrom.as_view(name=<span class="string">&#x27;login&#x27;</span>)--我们要看执行的结果是什�?</span><br><span class="line">    - 源码�?</span><br><span class="line"><span class="meta">     @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">as_view</span>(<span class="params">cls, name, *class_args, **class_kwargs</span>):</span><br><span class="line">        <span class="comment"># 不会走这�?</span></span><br><span class="line">        <span class="keyword">if</span> cls.init_every_request:</span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">view</span>(<span class="params">**kwargs: t.<span class="type">Any</span></span>) -&gt; ft.ResponseReturnValue:</span><br><span class="line">                <span class="variable language_">self</span> = view.view_class(  </span><br><span class="line">                    *class_args, **class_kwargs</span><br><span class="line">                )</span><br><span class="line">                <span class="keyword">return</span> current_app.ensure_sync(<span class="variable language_">self</span>.dispatch_request)(**kwargs)  <span class="comment"># </span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 直接来到这里</span></span><br><span class="line">            <span class="comment"># 视图类实例化的到一个对�?</span></span><br><span class="line">            <span class="variable language_">self</span> = cls(*class_args, **class_kwargs)</span><br><span class="line">            <span class="keyword">def</span> <span class="title function_">view</span>(<span class="params">**kwargs: t.<span class="type">Any</span></span>) -&gt; ft.ResponseReturnValue:</span><br><span class="line">                <span class="comment"># 这里的意思是</span></span><br><span class="line">                <span class="comment"># 一个请求就是一条线程在处理---》current_app.ensure_sync</span></span><br><span class="line">                <span class="comment"># 开启线程处理：self.dispatch_request</span></span><br><span class="line">                <span class="keyword">return</span> current_app.ensure_sync(<span class="variable language_">self</span>.dispatch_request)(**kwargs)  <span class="comment"># </span></span><br><span class="line">		</span><br><span class="line">        <span class="keyword">if</span> cls.decorators:</span><br><span class="line">            view.__name__ = name</span><br><span class="line">            view.__module__ = cls.__module__</span><br><span class="line">            <span class="keyword">for</span> decorator <span class="keyword">in</span> cls.decorators:</span><br><span class="line">                view = decorator(view)</span><br><span class="line">                </span><br><span class="line">        view.__name__ = name</span><br><span class="line">        <span class="comment"># 最终返回的是view的函数内存地址</span></span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 我们可以得出LoginFrom.as_view(name=&#x27;login&#x27;)()---&gt;就是 view()</span></span><br><span class="line">	-view()本质在执�?<span class="variable language_">self</span>.dispatch_request(**kwargs) </span><br><span class="line">    -不重�?<span class="variable language_">self</span>.dispatch_request(**kwargs) ，就会报�?</span><br><span class="line">    -MethodView重写了dispatch_request</span><br><span class="line">    </span><br><span class="line"><span class="comment"># MethodView的dispatch_request</span></span><br><span class="line">	- 源码�?</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">dispatch_request</span>(<span class="params">self, **kwargs</span>):  <span class="comment"># -----&gt;self是视图类的对�?</span></span><br><span class="line">        	<span class="comment"># 如果是get请求meth就是视图类中的get方法</span></span><br><span class="line">            meth = <span class="built_in">getattr</span>(<span class="variable language_">self</span>, request.method.lower(), <span class="literal">None</span>)</span><br><span class="line">            <span class="comment"># </span></span><br><span class="line">            <span class="keyword">if</span> meth <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> request.method == <span class="string">&quot;HEAD&quot;</span>:</span><br><span class="line">                meth = <span class="built_in">getattr</span>(<span class="variable language_">self</span>, <span class="string">&quot;get&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">			<span class="comment"># 断言：走到这里meth肯定不是none</span></span><br><span class="line">            <span class="keyword">assert</span> meth <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>,	</span><br><span class="line">            <span class="comment"># 本质其实是在执行视图类中的get方法</span></span><br><span class="line">            <span class="keyword">return</span> current_app.ensure_sync(meth)(**kwargs) </span><br><span class="line">        </span><br><span class="line"><span class="comment"># 本质就是，继承MethodView后，请求来了，路由匹配成功，会执�?视图类：GoodsrView 中跟请求方式同名的方�?--》本身跟django一模一�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  为什么cbv传的name最终给了endpoint</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">as_view</span>(<span class="params">cls, name</span>)---&gt;传进来的name，最终变成了 endpoint</span><br><span class="line">    <span class="comment"># view�?_view的返回结果，如果不写下面这句，所有配置的view_func=GoodsrView.as_view(name=&#x27;goods&#x27;) 的名字都叫view，都叫view，大家又重了---》下面那句是改view的名�?--》不写endpoint，默认以函数名作为endpoint，现在函数名改了--》别名就是传入的name</span></span><br><span class="line">        <span class="keyword">if</span> cls.decorators:</span><br><span class="line">            view.__name__ = name</span><br><span class="line">            view.__module__ = cls.__module__</span><br><span class="line">            <span class="keyword">for</span> decorator <span class="keyword">in</span> cls.decorators:</span><br><span class="line">                view = decorator(view)</span><br><span class="line">                </span><br><span class="line"><span class="comment"># 为什么，不传endpoint，endpoint 就是函数�?</span></span><br><span class="line"> <span class="keyword">if</span> endpoint <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">   endpoint = _endpoint_from_view_func(view_func)  <span class="comment"># view_func 是函数内存地址</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_endpoint_from_view_func</span>(<span class="params">view_func</span>):</span><br><span class="line">    <span class="keyword">return</span> view_func.__name__ <span class="comment"># 返回函数名，给了endpoint，endpoint传了，就不走这里�?</span></span><br></pre></td></tr></table></figure>
<h1>【三】模板语�?</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 前后端混合才会使�?-------因为它使用的是jinja2的模�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># django的dtl，拿到这直接可以�?</span></span><br><span class="line">	-区别在有的函数不一样：过滤器，标签   |safe</span><br><span class="line">    -<span class="keyword">if</span>  <span class="keyword">for</span>  </span><br><span class="line">    -取字典，取列�?都完全一�?</span><br><span class="line">    -include</span><br><span class="line">    -extends</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 比dtl多的</span></span><br><span class="line">	- 函数可以加括�?--》就能传参数</span><br></pre></td></tr></table></figure>
<ul>
<li><code>py</code>文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>], endpoint=<span class="string">&#x27;index&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    a=<span class="string">&#x27;&lt;a href=&quot;http://www.baidu.com&quot;&gt;点击进入百度&lt;/a&gt;&#x27;</span></span><br><span class="line">    <span class="comment"># 传值：a</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>, a=a)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<ul>
<li><code>index.html</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>模板语法<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">`&#123;&#123;a|safe&#125;&#125;`</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1>【四】请求响�?</h1>
<h2 id="�-】request对象">�?】request对象</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, session</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.secret_key=<span class="string">&#x27;adfafa&#x27;</span></span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="built_in">print</span>(request)  <span class="comment"># &lt;Request &#x27;http://192.168.1.69:5000/&#x27; [GET]&gt;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(request))  <span class="comment"># &lt;class &#x27;werkzeug.local.LocalProxy&#x27;&gt;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(session))  <span class="comment"># &lt;class &#x27;werkzeug.local.LocalProxy&#x27;&gt;</span></span><br><span class="line">    <span class="built_in">print</span>(request.method)  <span class="comment"># 得到请求提交的数�?</span></span><br><span class="line">    <span class="built_in">print</span>(request.args)  <span class="comment"># get请求地址中的参数</span></span><br><span class="line">    <span class="built_in">print</span>(request.form)  <span class="comment"># post请求参数</span></span><br><span class="line">    <span class="built_in">print</span>(request.values)  <span class="comment"># get和post请求参数</span></span><br><span class="line">    <span class="built_in">print</span>(request.headers)  <span class="comment"># 请求�?</span></span><br><span class="line">    <span class="built_in">print</span>(request.path)  <span class="comment"># 请求路径, 不带域名</span></span><br><span class="line">    <span class="built_in">print</span>(request.cookies)  <span class="comment"># 客户端提交的cookie</span></span><br><span class="line">    <span class="built_in">print</span>(request.full_path)  <span class="comment"># 不带域名，带参数的请求路�?</span></span><br><span class="line">    <span class="built_in">print</span>(request.url)  <span class="comment"># 带域名，带参数的请求路径</span></span><br><span class="line">    <span class="built_in">print</span>(request.base_url)  <span class="comment"># 不带参数的请求路�?</span></span><br><span class="line">    <span class="built_in">print</span>(request.url_root)  <span class="comment"># 带域名，不带参数的请求路�?</span></span><br><span class="line">    <span class="built_in">print</span>(request.host)  <span class="comment"># 192.168.1.69:5000</span></span><br><span class="line">    <span class="comment"># 取文�?</span></span><br><span class="line">    obj = request.files[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">    <span class="comment"># 保存的位�?，文件名：传递的文件�?</span></span><br><span class="line">    obj.save(<span class="string">&#x27;./&#x27;</span> + obj.filename)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;请求对象！！&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="�-】response对象">�?】response对象</h2>
<ul>
<li>存储数据，返�?</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, make_response</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># 新手四件套：字符串，重定向，json，模�?</span></span><br><span class="line">    <span class="comment"># 写入浏览器cookie---新手四件套都适用</span></span><br><span class="line">    res = <span class="string">&#x27;response&#x27;</span></span><br><span class="line">    <span class="comment"># 得到一个响应对�?</span></span><br><span class="line">    res = make_response(res)</span><br><span class="line">    <span class="comment"># 存储cookie</span></span><br><span class="line">    res.set_cookie(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;lsk&#x27;</span>)</span><br><span class="line">    <span class="comment"># 写入响应�?</span></span><br><span class="line">    res.headers[<span class="string">&#x27;xxxx&#x27;</span>] = <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1>【五】补�?</h1>
<h2 id="�-】偏函数-了解">�?】偏函数---------了解</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 源码里使用的比较�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 偏函数：partial-----使用的时候就是提前传�?</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b, c</span>):</span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add = partial(add, <span class="number">14</span>)</span><br><span class="line"><span class="comment"># 这样写是错误的：TypeError: add() takes 3 positional arguments but 4 were given</span></span><br><span class="line"><span class="comment"># 因为你使用了偏函数：partial,你提前传入了一个参�?4�?4给了a，后面你有传了三个参�?所以会报错</span></span><br><span class="line"><span class="comment"># print(add(1, 2, 3))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 正确写法</span></span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">1</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h2 id="�-】Flask-RESTful–-写cbv">�?】Flask-RESTful–&gt;写cbv</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flask-RESTful 就是 Flask 扩展中的佼佼�?它增加了对快速构�?RESTful API 的支�?�?Flask 封装了一�?使其更容易、更快速、更便捷的开发RESTful API</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类似于drf，比drf功能差太�?</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"><span class="keyword">from</span> flask_restful <span class="keyword">import</span> Resource, Api</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 创建API对象</span></span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloWorld</span>(<span class="title class_ inherited__">Resource</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(request.method)  <span class="comment"># GET</span></span><br><span class="line">        <span class="built_in">print</span>(request.path)  <span class="comment"># /</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;hello&#x27;</span>: <span class="string">&#x27;world&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将HelloWorld资源绑定�?/&#x27;端点</span></span><br><span class="line">api.add_resource(HelloWorld, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1>【六】session使用</h1>
<h2 id="�-】分�">�?】分�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cookie --&gt;不安�?-》明文返回到客户端浏览器�?</span></span><br><span class="line">	-存放在客户端浏览器上的键值对</span><br><span class="line">    	-js操作</span><br><span class="line">        -混合项目，后端写入：res.set_cookie</span><br><span class="line">            res.set_cookie(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;lsk&#x27;</span>)</span><br><span class="line">            res.set_cookie(<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;19&#x27;</span>)</span><br><span class="line">        	-这个的本质是：在响应头中写入cookie--&gt;&#123;cookeie:name=lsk;age=<span class="number">19</span>&#125;</span><br><span class="line">            -浏览器读到这个，会自动解析出来后，放到cookie�?</span><br><span class="line">            </span><br><span class="line"><span class="comment"># 使用session:服务端的键值对</span></span><br><span class="line">	-django中：django-session表，可以不放到表�?</span><br><span class="line">    -flask：默认，使用secret_key签名后，放在了cookie�?</span><br><span class="line">    </span><br><span class="line"><span class="comment"># session使用--自动检测有没有被篡改，如果被篡改了会取不到</span></span><br><span class="line">	<span class="comment"># session[&#x27;name&#x27;] = name</span></span><br><span class="line">    <span class="comment"># name = session.get(&#x27;name&#x27;)</span></span><br><span class="line">    <span class="comment"># session.pop(&#x27;name&#x27;)</span></span><br><span class="line">    <span class="comment"># session.clear()</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】使�">�?】使�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, session</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 使用session需要设置密钥，否则会报�?</span></span><br><span class="line">app.secret_key = <span class="string">&#x27;A0Zr98j/3yX R~XHH!jmN]LWX/,?RT&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    session[<span class="string">&#x27;user_id&#x27;</span>] = <span class="string">&#x27;12345&#x27;</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    # 存进去的是三段式：eyJ1c2VyX2lkIjoiMTIzNDUifQ.Zu-t5Q.iREVT3E-90JOZbTTJ-24ZiBl0Y4</span></span><br><span class="line"><span class="string">        # 三段式要是被修改了，就会查不打信�?</span></span><br><span class="line"><span class="string">    # 可以使用base64解码</span></span><br><span class="line"><span class="string">    import base64</span></span><br><span class="line"><span class="string">    print(base64.b64decode(&#x27;eyJ1c2VyX2lkIjoiMTIzNDUifQ==&#x27;))</span></span><br><span class="line"><span class="string">    # b&#x27;&#123;&quot;user_id&quot;:&quot;12345&quot;&#125;&#x27;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 取出�?</span></span><br><span class="line">    <span class="built_in">print</span>(session.get(<span class="string">&#x27;user_id&#x27;</span>))  <span class="comment"># 12345</span></span><br><span class="line">    <span class="comment"># pop数据</span></span><br><span class="line">    session.pop(<span class="string">&#x27;user_id&#x27;</span>)</span><br><span class="line">    <span class="comment"># 清空</span></span><br><span class="line">    session.clear()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h2 id="�-】源码分�">�?】源码分�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app.session_interface---进入源码，找到open_session方法和save_session方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># session 类中有两个方�?</span></span><br><span class="line">	-open_session:请求来了--》等同于django的process_request</span><br><span class="line">    -save_session：请求走--》等同于django的process_response</span><br><span class="line"></span><br><span class="line"><span class="comment"># SecureCookieSessionInterface()  是session的类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SecureCookieSessionInterface</span>(<span class="title class_ inherited__">SessionInterface</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;The default session interface that stores sessions in signed cookies</span></span><br><span class="line"><span class="string">    through the :mod:`itsdangerous` module.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#: the salt that should be applied on top of the secret key for the</span></span><br><span class="line">    <span class="comment">#: signing of cookie based sessions.</span></span><br><span class="line">    salt = <span class="string">&quot;cookie-session&quot;</span></span><br><span class="line">    <span class="comment">#: the hash function to use for the signature.  The default is sha1</span></span><br><span class="line">    digest_method = <span class="built_in">staticmethod</span>(_lazy_sha1)</span><br><span class="line">    key_derivation = <span class="string">&quot;hmac&quot;</span></span><br><span class="line">    serializer = session_json_serializer</span><br><span class="line">    session_class = SecureCookieSession</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_signing_serializer</span>(<span class="params">self, app: Flask</span>) -&gt; URLSafeTimedSerializer | <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> app.secret_key:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        signer_kwargs = <span class="built_in">dict</span>(</span><br><span class="line">            key_derivation=<span class="variable language_">self</span>.key_derivation, digest_method=<span class="variable language_">self</span>.digest_method</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> URLSafeTimedSerializer(</span><br><span class="line">            app.secret_key,</span><br><span class="line">            salt=<span class="variable language_">self</span>.salt,</span><br><span class="line">            serializer=<span class="variable language_">self</span>.serializer,</span><br><span class="line">            signer_kwargs=signer_kwargs,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_session</span>(<span class="params">self, app, request</span>) :</span><br><span class="line">        s = <span class="variable language_">self</span>.get_signing_serializer(app)</span><br><span class="line">        <span class="keyword">if</span> s <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="comment"># 1 从请求的cookie中，根据session拿到value的值：eyJhIjoiYSJ9.ZupVjQ.vNcHC4GNs8uFckoY3yYP06Ijvn_U</span></span><br><span class="line">        val = request.cookies.get(<span class="variable language_">self</span>.get_cookie_name(app))</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> val:</span><br><span class="line">            <span class="comment">#2如果为空，返回空session</span></span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.session_class() </span><br><span class="line">        max_age = <span class="built_in">int</span>(app.permanent_session_lifetime.total_seconds())</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 3 s.loads--&gt;把value的值解�?-》成字典</span></span><br><span class="line">            data = s.loads(val, max_age=max_age)</span><br><span class="line">            <span class="comment"># 4 返回一个有值的session---》后续视图函数中直接使用即可</span></span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.session_class(data) </span><br><span class="line">        <span class="keyword">except</span> BadSignature:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.session_class()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_session</span>(<span class="params">self, app, session, response</span>):</span><br><span class="line">        name = <span class="variable language_">self</span>.get_cookie_name(app)</span><br><span class="line">        domain = <span class="variable language_">self</span>.get_cookie_domain(app)</span><br><span class="line">        path = <span class="variable language_">self</span>.get_cookie_path(app)</span><br><span class="line">        secure = <span class="variable language_">self</span>.get_cookie_secure(app)</span><br><span class="line">        samesite = <span class="variable language_">self</span>.get_cookie_samesite(app)</span><br><span class="line">        httponly = <span class="variable language_">self</span>.get_cookie_httponly(app)</span><br><span class="line">        <span class="keyword">if</span> session.accessed:</span><br><span class="line">            response.vary.add(<span class="string">&quot;Cookie&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> session:</span><br><span class="line">            <span class="keyword">if</span> session.modified:</span><br><span class="line">                response.delete_cookie(</span><br><span class="line">                    name,</span><br><span class="line">                    domain=domain,</span><br><span class="line">                    path=path,</span><br><span class="line">                    secure=secure,</span><br><span class="line">                    samesite=samesite,</span><br><span class="line">                    httponly=httponly,</span><br><span class="line">                )</span><br><span class="line">                response.vary.add(<span class="string">&quot;Cookie&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.should_set_cookie(app, session):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        expires = <span class="variable language_">self</span>.get_expiration_time(app, session)</span><br><span class="line">        <span class="comment"># 没有存数据库</span></span><br><span class="line">        val = <span class="variable language_">self</span>.get_signing_serializer(app).dumps(<span class="built_in">dict</span>(session))  <span class="comment"># type: ignore</span></span><br><span class="line">        response.set_cookie(</span><br><span class="line">            name,   <span class="comment"># session字符�?</span></span><br><span class="line">            val,  <span class="comment"># 把session的明文，签名得到：asdfas.adfa.asdfa</span></span><br><span class="line">            expires=expires,</span><br><span class="line">            httponly=httponly,</span><br><span class="line">            domain=domain,</span><br><span class="line">            path=path,</span><br><span class="line">            secure=secure,</span><br><span class="line">            samesite=samesite,</span><br><span class="line">        )</span><br><span class="line">        response.vary.add(<span class="string">&quot;Cookie&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 学到的：后续我们自己写个Session类，重写 -open_session  save_session，可以把session放到数据库或redis�?</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 虽然操作session，本质还是以cookie形式保存到浏览器中了</span></span><br><span class="line">	-过期时间，httponly</span><br><span class="line">    -配置文件配置</span><br></pre></td></tr></table></figure>
<ul>
<li>这个图是django的session认证机制------中间�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240918122834932.png" alt="image-20240918122834932"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E5%85%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E5%85%AD/" class="post-title-link" itemprop="url">Flask六</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】scoped线程安全</h1>
<h2 id="【1】分析">【1】分析</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scoped（范围）通常指的是某种资源或对象的生命周期被限制在特定的作用域内</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 我们把session做成全局的，单例的</span></span><br><span class="line">	- 每个视图函数，用同一session，会有问题，会导致数据的错乱等</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 我们对每个视图函数都对session实例化一次，代码会很麻烦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如何保证线程安全---python中提供了threading模块下的local对象</span></span><br><span class="line">	- threading模块下的local对象----就是线程安全对象</span><br><span class="line">    - local.session <span class="comment">#  在不同的线程中，用的是自己的</span></span><br><span class="line">    	-线程<span class="number">1</span>中：local.session=<span class="string">&#x27;lqz&#x27;</span></span><br><span class="line">        -线程<span class="number">2</span>中：local.session=<span class="string">&#x27;qqq&#x27;</span></span><br><span class="line">        -后续，只要是在线程<span class="number">1</span>中，取local.session 值 ，永远是 lqz</span><br><span class="line">        -后续，只要是在线程<span class="number">2</span>中，取local.session 值 ，永远是 qqq</span><br><span class="line">	- 本质原理</span><br><span class="line">        -local--》实际上是通过字典，key是线程<span class="built_in">id</span>号，区分</span><br><span class="line">            -线程<span class="number">1</span>中：local.session=<span class="string">&#x27;lqz&#x27;</span>--&gt;本质是--》local[<span class="string">&#x27;线程1id号&#x27;</span>].session=<span class="string">&#x27;lqz&#x27;</span></span><br><span class="line">            -线程<span class="number">2</span>中：local.session=<span class="string">&#x27;qqq&#x27;</span>--&gt;本质是--》local[<span class="string">&#x27;线程2id号&#x27;</span>].session=<span class="string">&#x27;qqq&#x27;</span></span><br><span class="line">            </span><br><span class="line"><span class="comment"># threading.local() 是 Python 标准库 threading 模块中的一个函数，它用于为每个线程创建一个独立的变量空间。这意味着，每个线程都可以有自己的数据副本，而不会影响到其他线程中的数据。这对于编写多线程程序时避免数据竞争和共享状态问题非常有用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用场景</span></span><br><span class="line">当你需要在多线程环境中存储和访问与线程相关的数据时，threading.local() 就非常有用。例如，你可能需要为每个线程存储数据库连接、用户会话信息、日志记录器实例等</span><br></pre></td></tr></table></figure>
<h2 id="【2】使用">【2】使用</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker, scoped_session</span><br><span class="line"></span><br><span class="line">engine = create_engine(</span><br><span class="line">    <span class="string">&quot;mysql+pymysql://root:710912@127.0.0.1:3308/demo_1?charset=utf8mb4&quot;</span>,</span><br><span class="line">    max_overflow=<span class="number">0</span>,  <span class="comment"># 超出连接池大小外最多创建的连接</span></span><br><span class="line">    pool_size=<span class="number">5</span>,  <span class="comment"># 连接池大小</span></span><br><span class="line">    pool_timeout=<span class="number">30</span>,  <span class="comment"># 池中没有线程最多等待的时间，否则报错</span></span><br><span class="line">    pool_recycle=-<span class="number">1</span>,  <span class="comment"># 多久之后对线程池中的线程进行一次连接的回收（重置）</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">#####线程安全的session对象</span></span><br><span class="line">Session = sessionmaker(bind=engine)</span><br><span class="line"><span class="comment">######虽然是全局的，但是每次都会新建一个session，每个视图函数用的都是自己的</span></span><br><span class="line">session = scoped_session(Session)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> session</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index&#x27;</span>, endpoint=<span class="string">&#x27;index&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="comment"># 查数据</span></span><br><span class="line">    res = session.query(User).filter_by(<span class="built_in">id</span>=<span class="number">2</span>).first()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="comment"># 查数据</span></span><br><span class="line">    res = session.query(User).filter_by(<span class="built_in">id</span>=<span class="number">3</span>).first()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1>【二】多对多关系</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, Text, DateTime, ForeignKey</span><br><span class="line"><span class="comment"># 先版本创建基类</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> DeclarativeBase, relationship</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> engine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">DeclarativeBase</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Girl2Boy</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;girl2boy&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    girl_id = Column(Integer, ForeignKey(<span class="string">&#x27;girl.id&#x27;</span>))</span><br><span class="line">    boy_id = Column(Integer, ForeignKey(<span class="string">&#x27;boy.id&#x27;</span>))</span><br><span class="line">    ctime = Column(DateTime, default=datetime.datetime.now)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Girl</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&quot;girl&quot;</span></span><br><span class="line">    <span class="comment"># 这里设置了主键，不设置自增他也会自增的</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Boy</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&quot;boy&quot;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">32</span>), unique=<span class="literal">True</span>, nullable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 与生成表结构无关，仅用于查询方便,放在哪个单表中都可以</span></span><br><span class="line">    girls = relationship(<span class="string">&#x27;Girl&#x27;</span>, secondary=<span class="string">&#x27;girl2boy&#x27;</span>, backref=<span class="string">&#x27;boys&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建表</span></span><br><span class="line">    Base.metadata.create_all(engine)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> session</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Girl, Boy</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#######增</span></span><br><span class="line">    <span class="comment"># boy = Boy(name=&#x27;小明&#x27;)</span></span><br><span class="line">    <span class="comment"># girl = Girl(name=&#x27;小红&#x27;)</span></span><br><span class="line">    <span class="comment"># session.add_all([boy, girl])</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># #######小明和小红约会一次---传统方案</span></span><br><span class="line">    <span class="comment"># res = Girl2Boy(girl_id=1, boy_id=1)</span></span><br><span class="line">    <span class="comment"># session.add(res)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">###########简单方案--&gt;小明和小红和小李约会一次</span></span><br><span class="line">    <span class="comment"># boy = session.query(Boy).filter_by(name=&#x27;小明&#x27;).first()</span></span><br><span class="line">    <span class="comment"># girl1 = session.query(Girl).filter_by(name=&#x27;小红&#x27;).first()</span></span><br><span class="line">    <span class="comment"># girl2 = session.query(Girl).filter_by(name=&#x27;小李&#x27;).first()</span></span><br><span class="line">    <span class="comment"># boy.girls = [girl1, girl2]</span></span><br><span class="line">    <span class="comment"># session.add(boy)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#########基于对象的夸表查询---正向</span></span><br><span class="line">    boy = session.query(Boy).filter_by(<span class="built_in">id</span>=<span class="number">1</span>).first()</span><br><span class="line">    <span class="built_in">print</span>(boy.girls)   <span class="comment"># [&lt;models.Girl object at 0x0000021745455570&gt;, &lt;models.Girl object at 0x0000021745455510&gt;]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#########基于对象的夸表查询---反向</span></span><br><span class="line">    girl = session.query(Girl).filter_by(<span class="built_in">id</span>=<span class="number">2</span>).first()</span><br><span class="line">    <span class="built_in">print</span>(girl.boys)</span><br></pre></td></tr></table></figure>
<h1>【三】常用查询</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> session</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User, Person</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># filter_by查询，写参数</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter_by(id=2).first()  # 返回单条，但是不能all() 在用first，因为all后是列表</span></span><br><span class="line">    <span class="comment"># res= session.query(User).filter_by(id=2).all()  # 返回一个列表</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter_by(id=2, name=&#x27;pop&#x27;).all()  # 返回一个列表</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># filter/where 查询，写条件</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id == 2).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id &gt;= 1).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id &lt;= 2).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id == 3).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id &gt;= 1)  ########得到的是原生的sql语句</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">##between-----在...之间</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.between(1, 4)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.between(1, 4), User.name==&#x27;opp&#x27;).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">##in----在...中，因为in是关键字需要加_使用</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_([1,2,3,4])).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## ~非---除....之外-----可以理解为相反的查结果,~n你可以理解为not</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(~User.id.in_([1, 2])).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 二次筛选</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_(session.query(Person.nid).filter_by(name=&#x27;小明&#x27;)))  # 可以查看原声的sql语句</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_(session.query(Person.nid).filter_by(name=&#x27;小明&#x27;))).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(Person.nid).filter_by(name=&#x27;小明&#x27;).all()  # 查到的是id：[(1,)]</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># and,or条件----因为and是关键字，需要加_使用</span></span><br><span class="line">    <span class="comment"># 引入使用</span></span><br><span class="line">    <span class="comment"># from sqlalchemy import and_, or_</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(and_(User.id &gt; 1, User.name == &#x27;opp&#x27;)) # 原生的sql</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(and_(User.id &gt; 1, User.name == &#x27;opp&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(or_(User.id&gt;1, User.name==&#x27;opp&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 通配符，以e开头，不异e开头</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.name.like(&#x27;p%&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.name.like(&#x27;%p%&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 限制， 用分页，区间</span></span><br><span class="line">    <span class="comment"># res = session.query(User)[0:2]  # 每页显示三条</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 排序， 如果name降序排列(从大到小)  desc和asc</span></span><br><span class="line">    <span class="comment"># res = session.query(User).order_by(User.name.desc()).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).order_by(User.name.asc()).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># User.name.desc() 表示按 name 列的降序（从 Z 到 A）排序</span></span><br><span class="line">    <span class="comment"># User.id.asc() 表示按 id 列的升序（从小到大）排序</span></span><br><span class="line">    <span class="comment"># 这意味着在 name 列相同的情况下，会根据 id 列进行排序</span></span><br><span class="line">    res = ses+sion.query(User).order_by(User.name.desc(),User.<span class="built_in">id</span>.asc()).<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">from</span> sqlalchemy.sql <span class="keyword">import</span> func</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> session</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User, Person, Hobby</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># filter_by查询，写参数</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter_by(id=2).first()  # 返回单条，但是不能all() 在用first，因为all后是列表</span></span><br><span class="line">    <span class="comment"># res= session.query(User).filter_by(id=2).all()  # 返回一个列表</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter_by(id=2, name=&#x27;pop&#x27;).all()  # 返回一个列表</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># filter/where 查询，写条件</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id == 2).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id &gt;= 1).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).filter(User.id &lt;= 2).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id == 3).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id &gt;= 1)  ########得到的是原生的sql语句</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">##between-----在...之间</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.between(1, 4)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.between(1, 4), User.name==&#x27;opp&#x27;).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">##in----在...中，因为in是关键字需要加_使用</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_([1,2,3,4])).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## ~非---除....之外-----可以理解为相反的查结果,~n你可以理解为not</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(~User.id.in_([1, 2])).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 二次筛选</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_(session.query(Person.nid).filter_by(name=&#x27;小明&#x27;)))  # 可以查看原声的sql语句</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.id.in_(session.query(Person.nid).filter_by(name=&#x27;小明&#x27;))).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(Person.nid).filter_by(name=&#x27;小明&#x27;).all()  # 查到的是id：[(1,)]</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># and,or条件----因为and是关键字，需要加_使用</span></span><br><span class="line">    <span class="comment"># 引入使用</span></span><br><span class="line">    <span class="comment"># from sqlalchemy import and_, or_</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(and_(User.id &gt; 1, User.name == &#x27;opp&#x27;)) # 原生的sql</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(and_(User.id &gt; 1, User.name == &#x27;opp&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(or_(User.id&gt;1, User.name==&#x27;opp&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 通配符，以e开头，不异e开头</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.name.like(&#x27;p%&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).where(User.name.like(&#x27;%p%&#x27;)).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 限制， 用分页，区间</span></span><br><span class="line">    <span class="comment"># res = session.query(User)[0:2]  # 每页显示三条</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 排序， 如果name降序排列(从大到小)  desc和asc</span></span><br><span class="line">    <span class="comment"># res = session.query(User).order_by(User.name.desc()).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(User).order_by(User.name.asc()).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># User.name.desc() 表示按 name 列的降序（从 Z 到 A）排序</span></span><br><span class="line">    <span class="comment"># User.id.asc() 表示按 id 列的升序（从小到大）排序</span></span><br><span class="line">    <span class="comment"># 这意味着在 name 列相同的情况下，会根据 id 列进行排序</span></span><br><span class="line">    <span class="comment"># res = session.query(User).order_by(User.name.desc(),User.id.asc()).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 分组擦寻</span></span><br><span class="line">    <span class="comment"># res = session.query(User).group_by(User.name).all()  # 分组了就要统计</span></span><br><span class="line">    <span class="comment"># res = session.query(func.max(Person.nid), func.count(Person.nid), func.sum(Person.nid),</span></span><br><span class="line">    <span class="comment">#                     func.min(Person.nid)).group_by(Person.name).all()</span></span><br><span class="line">    <span class="comment"># print(res)  # [(2, 1, Decimal(&#x27;2&#x27;), 2), (1, 1, Decimal(&#x27;1&#x27;), 1), (3, 1, Decimal(&#x27;3&#x27;), 3)]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 筛选having</span></span><br><span class="line">    <span class="comment"># res = session.query(func.max(User.id), func.sum(User.id), func.min(User.id)).filter(User.id &gt; 1).group_by(</span></span><br><span class="line">    <span class="comment">#     User.name).having(func.sum(User.id) &gt; 1).all()</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    过滤（filter）：首先应用 filter(User.id &gt;1)，筛选出满足条件的记录。</span></span><br><span class="line"><span class="string">    分组（group_by）：然后对结果进行 group_by(User.name)，按用户名称分组。</span></span><br><span class="line"><span class="string">    聚合计算：接着计算 max(User.id)、sum(User.id) 和 min(User.id)。</span></span><br><span class="line"><span class="string">    条件筛选（having）：最后应用 having(func.sum(User.id) &gt; 1)，筛选出满足条件的分组。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 这个语法的执行过程</span></span><br><span class="line">    <span class="comment"># print(res)  # [(5, Decimal(&#x27;7&#x27;), 2), (3, Decimal(&#x27;3&#x27;), 3)]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 连表</span></span><br><span class="line">    <span class="comment"># d笛卡尔积连表</span></span><br><span class="line">    <span class="comment"># select * from person,hobby where person.hobby_id=hobby.id;</span></span><br><span class="line">    <span class="comment"># res = session.query(Person, Hobby).filter(Person.hobby_id == Hobby.id).all()</span></span><br><span class="line">    <span class="comment"># print(res)  # [(小明, 足球), (小李, 足球), (小红, 篮球), (六六, 羽毛球)]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># join内连接，默认是inner join没有指定 on 条件时，默认是外键关系存在</span></span><br><span class="line">    <span class="comment"># select * from person INNER join hobby on person.hobby_id=hobby.id;</span></span><br><span class="line">    <span class="comment"># res = session.query(Person, Hobby).join(Hobby).all()  # 通常意味着在 Person 表和 Hobby 表之间应该存在外键关系。</span></span><br><span class="line">    <span class="comment"># print(res)  # [(小明, 足球), (小李, 足球), (小红, 篮球), (六六, 羽毛球)]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># isouter=Ture 表示外连接-------没有右连接，反过来即可</span></span><br><span class="line">    <span class="comment"># select * from person left join hobby on person.hobby_id=hobby.id;</span></span><br><span class="line">    <span class="comment"># select * from hobby left join person on person.hobby_id=hobby.id;</span></span><br><span class="line">    <span class="comment"># res = session.query(Person).join(Hobby, isouter=True).all()</span></span><br><span class="line">    <span class="comment"># res = session.query(Hobby).join(Person, isouter=True).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 自己指定on条件（连表条件）,第二个参数，支持on多个条件，用and_,同上   因为我们可以没有强外键关联</span></span><br><span class="line">    <span class="comment"># res = session.query(Person).join(Hobby, Person.nid == Hobby.id, isouter=True).all()</span></span><br><span class="line">    <span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">########了解###########</span></span><br><span class="line">    <span class="comment"># union和union all的区别？</span></span><br><span class="line">        <span class="comment"># 去重：</span></span><br><span class="line">            <span class="comment"># UNION 会自动去除重复的行，只返回唯一的结果。</span></span><br><span class="line">            <span class="comment"># UNION ALL 会返回所有结果，包括重复的行。</span></span><br><span class="line">    <span class="comment"># union和union all都是用于合并两个或多个查询的结果集。</span></span><br><span class="line">    <span class="comment"># 但是，union只返回唯一的行，而union all返回所有行。</span></span><br><span class="line">    res = session.query(Person.name).<span class="built_in">filter</span>(Person.nid &gt; <span class="number">1</span>)</span><br><span class="line">    res1 = session.query(User.name).<span class="built_in">filter</span>(User.<span class="built_in">id</span>&gt;<span class="number">1</span>)</span><br><span class="line">    res = res.union(res1).<span class="built_in">all</span>()</span><br><span class="line">    <span class="built_in">print</span>(res)  <span class="comment"># [(&#x27;六六&#x27;,), (&#x27;小红&#x27;,), (&#x27;小李&#x27;,), (&#x27;pop&#x27;,), (&#x27;opp&#x27;,)]</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E4%B8%80/" class="post-title-link" itemprop="url">Flask一</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】flask</h1>
<h2 id="�-】介�">�?】介�?</h2>
<h3 id="�-）flask介绍">�?）flask介绍</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 博客地址�?</span></span><br><span class="line">	- https://www.cnblogs.com/liuqingzheng/p/<span class="number">16005923.</span>html</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 python 界的web框架</span></span><br><span class="line">    -Django：大而全，你要的东西都有  [orm，缓存，认证,session,admin]</span><br><span class="line">    	django-ninja</span><br><span class="line">    -flask：小而精，所有web开发需要的东西，借助于第三方集成[sqlalchemy,peewee,flask-cache,flask-admin]</span><br><span class="line">    -web.py :用的不多</span><br><span class="line">    -----同步框架--进程线程架构--django--<span class="number">3.</span>x以后支持异步--</span><br><span class="line">    tornado </span><br><span class="line">    sanic</span><br><span class="line">    fastapi：高性能小而精，借助于第三方：orm ：tortoise：仿django-rom写的</span><br><span class="line">    	- Starlette �?Pydantic</span><br><span class="line">    ----异步框架--协程架构-----性能�?</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2 flask框架：Werkzeug WSGI工具包和Jinja2模板引擎</span></span><br><span class="line">	Werkzeug WSGI工具�?类似�?wsgiref</span><br><span class="line">    Jinja2模板：类似于dtl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 0 Flask是一个用Python编写的Web应用框架。它由Armin Ronacher开发，他领导着一个名为Pocco的国际Python爱好者团队。Flask基于Werkzeug WSGI工具包和Jinja2模板引擎。两者都是Pocco项目</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 Flask是一个基于Python开发并且依赖jinja2模板和Werkzeug WSGI服务的一个微型框架，对于Werkzeug本质是Socket服务端，其用于接收http请求并对请求进行预处理，然后触发Flask框架，开发人员基于Flask框架提供的功能对请求进行相应的处理，并返回给用户，如果要返回给用户复杂的内容时，需要借助jinja2模板来实现对模板的处理，即：将模板和数据进行渲染，将渲染后的字符串返回给用户浏览�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2 “微�?micro) 并不表示你需要把整个 Web 应用塞进单个 Python 文件（虽然确实可以），也不意味着 Flask 在功能上有所欠缺。微框架中的“微”意味着 Flask 旨在保持核心简单而易于扩展。Flask 不会替你做出太多决策——比如使用何种数据库。而那�?Flask 所选择的——比如使用何种模板引擎——则很容易替换。除此之外的一切都由可由你掌握</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3 默认情况下，Flask 不包含数据库抽象层、表单验证，或是其它任何已有多种库可以胜任的功能。然而，Flask 支持用扩展来给应用添加这些功能，如同�?Flask 本身实现的一样。众多的扩展提供了数据库集成、表单验证、上传处理、各种各样的开放认证技术等功能。Flask 也许是“微小”的，但它已准备好在需求繁杂的生产环境中投入使�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 Flask depends on the Werkzeug WSGI toolkit, the Jinja template engine, and the Click CLI toolkit</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）Werkzeug介绍">�?）Werkzeug介绍</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Werkzeug是一个WSGI工具包，他可以作为一个Web框架的底层库。这里稍微说一下， werkzeug 不是一个web服务器，也不是一个web框架，而是一个工具包，官方的介绍说是一�?WSGI 工具包，它可以作为一�?Web 框架的底层库，因为它封装好了很多 Web 框架的东西，例如 Request，Response 等等</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1  wsgi :python web 网关接口  协议，标�? python的web框架都遵循这个协�?</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2  具体实现�?</span></span><br><span class="line">	wsgiref</span><br><span class="line">    uwsgi</span><br><span class="line">    gunicorn</span><br><span class="line">    </span><br><span class="line"><span class="comment">#3  Werkzeug 工具�?--》遵循wsgi协议---》又做了一些封�?</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4 Werkzeug介绍</span></span><br><span class="line">Werkzeug <span class="keyword">is</span> a comprehensive WSGI web application library. It began <span class="keyword">as</span> a simple collection of various utilities <span class="keyword">for</span> WSGI applications <span class="keyword">and</span> has become one of the most advanced WSGI utility libraries.</span><br><span class="line">Werkzeug 是一个综合�?WSGI Web 应用程序库。它最初是 WSGI 应用程序的各种实用程序的简单集合，现已成为最先进�?WSGI 实用程序库之一�?</span><br><span class="line"></span><br><span class="line">Werkzeug doesn’t enforce <span class="built_in">any</span> dependencies. It <span class="keyword">is</span> up to the developer to choose a template engine, database adapter, <span class="keyword">and</span> even how to handle requests</span><br><span class="line">Werkzeug 不强制执行任何依赖关系。由开发人员选择模板引擎、数据库适配器，甚至如何处理请求</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://werkzeug.palletsprojects.com/en/3.0.x/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5 Werkzeug 快速体�?</span></span><br><span class="line"><span class="keyword">from</span> werkzeug.wrappers <span class="keyword">import</span> Request, Response</span><br><span class="line"><span class="keyword">from</span> werkzeug.serving <span class="keyword">import</span> run_simple</span><br><span class="line"></span><br><span class="line"><span class="meta">@Request.application</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> Response(<span class="string">&#x27;Hello World!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run_simple(<span class="string">&#x27;localhost&#x27;</span>, <span class="number">5000</span>, hello_world)</span><br></pre></td></tr></table></figure>
<h3 id="�-�-wsgiref-介绍">�?�?wsgiref 介绍</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">最简单的Web应用就是先把HTML用文件保存好，用一个现成的HTTP服务器软件，接收用户请求，从文件中读取HTML，返回�?</span><br><span class="line"></span><br><span class="line">如果要动态生成HTML，就需要把上述步骤自己来实现。不过，接受HTTP请求、解析HTTP请求、发送HTTP响应都是苦力活，如果我们自己来写这些底层代码，还没开始写动态HTML呢，就得花个把月去读HTTP规范�?</span><br><span class="line"></span><br><span class="line">正确的做法是底层代码由专门的服务器软件实现，我们用Python专注于生成HTML文档。因为我们不希望接触到TCP连接、HTTP原始请求和响应格式，所以，需要一个统一的接口协议来实现这样的服务器软件，让我们专心用Python编写Web业务。这个接口就是WSGI：Web Server Gateway Interface。而wsgiref模块就是python基于wsgi协议开发的服务模块</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mya</span>(<span class="params">environ, start_response</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param environ: 请求对象的字�?</span></span><br><span class="line"><span class="string">    :param start_response:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(environ)  <span class="comment"># 所有地址，存储方式是k:v键值对(http请求里面的在信息都在里面)</span></span><br><span class="line">    start_response(<span class="string">&#x27;200 OK&#x27;</span>, [(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html&#x27;</span>)])</span><br><span class="line">    <span class="keyword">if</span> environ[<span class="string">&#x27;PATH_INFO&#x27;</span>] == <span class="string">&#x27;/index&#x27;</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;index.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data = f.read()</span><br><span class="line">    <span class="keyword">elif</span> environ[<span class="string">&#x27;PATH_INFO&#x27;</span>] == <span class="string">&#x27;/login&#x27;</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;login.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            data = f.read()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data = <span class="string">b&#x27;&lt;h1&gt;web!!&lt;/h1&gt;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> [data]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 实例化的到一个server对象</span></span><br><span class="line">    myserver = make_server(<span class="string">&#x27;&#x27;</span>, <span class="number">8011</span>, mya)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;监听8011&#x27;</span>)</span><br><span class="line">    <span class="comment"># 启动</span></span><br><span class="line">    myserver.serve_forever()</span><br><span class="line">    <span class="comment"># 访问本地�?011端口：http://localhost:8011/</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）jinja2介绍">�?）jinja2介绍</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Jinja <span class="keyword">is</span> a fast, expressive, extensible templating engine. Special placeholders <span class="keyword">in</span> the template allow writing code similar to Python syntax. Then the template <span class="keyword">is</span> passed data to render the final document</span><br><span class="line">Jinja 是一个快速、富有表现力、可扩展的模板引擎。模板中的特殊占位符允许编写类似�?Python 语法的代码。然后向模板传递数据以渲染最终文�?</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://jinja.palletsprojects.com/en/3.1.x/</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）click介绍（django中的命令�">�?）click介绍（django中的命令�?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1 Click is a Python package for creating beautiful command line interfaces in a composable way with as little code as necessary. It’s the “Command Line Interface Creation Kit�? It’s highly configurable but comes with sensible defaults out of the box</span></span><br><span class="line">Click 是一�?Python 包，用于以可组合的方式使用尽可能少的代码创建漂亮的命令行界面。它是“命令行界面创建工具包”。它具有高度可配置性，但具有开箱即用的合理默认�?</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2  It aims to make the process of writing command line tools quick and fun while also preventing any frustration caused by the inability to implement an intended CLI API</span></span><br><span class="line">它的目的是使编写命令行工具的过程变得快速而有趣，同时也防止因无法实现预期�?CLI API 而造成的任何挫败感</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3  Click in three points:</span></span><br><span class="line">  arbitrary nesting of commands	</span><br><span class="line">  automatic <span class="built_in">help</span> page generation</span><br><span class="line">  supports lazy loading of subcommands at runtime </span><br><span class="line">Click三点�?</span><br><span class="line">  命令的任意嵌�?</span><br><span class="line">  自动生成帮助页面</span><br><span class="line">  支持运行时延迟加载子命令</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">https://click.palletsprojects.com/en/<span class="number">8.1</span>.x/</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">##############定制命令    </span></span><br><span class="line"><span class="comment"># pip3 install click</span></span><br><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--count&#x27;</span>, default=<span class="number">1</span>, <span class="built_in">help</span>=<span class="string">&#x27;Number of greetings&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--name&#x27;</span>, prompt=<span class="string">&#x27;Your name&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;The person to great&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>(<span class="params">count, name</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        <span class="built_in">print</span>(name, <span class="string">f&#x27;第<span class="subst">&#123;x&#125;</span>次打印！�?)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if __name__ == &#x27;</span>__main__<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">    hello()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 主要是在命令行中使用</span></span><br><span class="line"><span class="string"># PS D:\pycharm\project\Django\flask_exercise&gt; python .\click定制命令.py --count=4 --name=lsk</span></span><br><span class="line"><span class="string"># lsk �?次打印！�?</span></span><br><span class="line"><span class="string"># lsk �?次打印！�?</span></span><br><span class="line"><span class="string"># lsk �?次打印！�?</span></span><br><span class="line"><span class="string"># lsk �?次打印！�?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># python 文件�?--count=4 --name=lsk</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># python .\click定制命令.py --help  ####可以打印你需要穿的信�?</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># flask定制命令是有click’定制的</span></span><br><span class="line"><span class="string"># django也可以定制命�?</span></span><br></pre></td></tr></table></figure>
<h1>【二】flask的创建和运行</h1>
<h2 id="�-】python-dotenv">�?】<code>python-dotenv</code></h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新版本的flask是基于dotenv来做配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 什么是dotenv�?</span></span><br><span class="line">	- 它就是一个可以加载环境变量或者是加载文件中配置的一个第三方模块</span><br><span class="line">    - 存储到环境变量的格式是key=value</span><br><span class="line"></span><br><span class="line"><span class="comment"># pip install python-dotenv</span></span><br><span class="line"><span class="comment"># 创建一个文件夹</span></span><br><span class="line">	- 必须�?env</span><br><span class="line">    <span class="keyword">import</span> os</span><br><span class="line">    <span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line">    <span class="keyword">from</span> dotenv <span class="keyword">import</span> dotenv_values</span><br><span class="line">    <span class="comment"># 1 加载配置文件</span></span><br><span class="line">    <span class="comment"># 必须在根路径下新建一�?.env 的文件，并写入配置才能返回True,会把.env下的配置文件设置进环境变�?</span></span><br><span class="line">    res = load_dotenv()</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 得到你在.env的设置的数据</span></span><br><span class="line">    <span class="built_in">print</span>(os.environ.get(<span class="string">&quot;DEBUG&quot;</span>))</span><br><span class="line">    <span class="built_in">print</span>(os.environ.get(<span class="string">&quot;BACKEND_URL&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取环境变量字典</span></span><br><span class="line">    config = dotenv_values(<span class="string">&quot;.env&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(config)</span><br><span class="line">    <span class="built_in">print</span>(config.get(<span class="string">&#x27;ALLOWED_HOSTS&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="�-】watchdog">�?】<code>watchdog</code></h2>
<ul>
<li>当前目录下文件修改会被监控到，打印日�?</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip3 install watchdog</span></span><br><span class="line"><span class="comment"># 当前目录下文件修改会被监控到，打印日�?</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> watchdog.observers <span class="keyword">import</span> Observer</span><br><span class="line"><span class="keyword">from</span> watchdog.events <span class="keyword">import</span> LoggingEventHandler</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    logging.basicConfig(level=logging.INFO,</span><br><span class="line">                        <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(message)s&#x27;</span>,</span><br><span class="line">                        datefmt=<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)</span><br><span class="line">    path = sys.argv[<span class="number">1</span>] <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) &gt; <span class="number">1</span> <span class="keyword">else</span> <span class="string">&#x27;.&#x27;</span></span><br><span class="line">    event_handler = LoggingEventHandler()</span><br><span class="line">    observer = Observer()</span><br><span class="line">    observer.schedule(event_handler, path, recursive=<span class="literal">True</span>)</span><br><span class="line">    observer.start()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        observer.stop()</span><br><span class="line">    observer.join()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建文件，输入内容都会被监控</span></span><br><span class="line"><span class="comment"># python watchdog文件�?监听的文�?</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】虚拟环�">�?】虚拟环�?</h2>
<h3 id="�-）介�">�?）介�?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Use a virtual environment to manage the dependencies <span class="keyword">for</span> your project, both <span class="keyword">in</span> development <span class="keyword">and</span> <span class="keyword">in</span> production.</span><br><span class="line"><span class="comment"># 在开发和生产�?使用虚拟环境来管理项目的依赖关系</span></span><br><span class="line"></span><br><span class="line">What problem does a virtual environment solve? The more Python projects you have, the more likely it <span class="keyword">is</span> that you need to work <span class="keyword">with</span> different versions of Python libraries, <span class="keyword">or</span> even Python itself. Newer versions of libraries <span class="keyword">for</span> one project can <span class="keyword">break</span> compatibility <span class="keyword">in</span> another project.</span><br><span class="line"><span class="comment"># 虚拟环境解决什么问题？您拥有的 Python 项目越多，您就越有可能需要使用不同版本的 Python 库，甚至�?Python 本身。一个项目的较新版本的库可能会破坏另一项目的兼容性�?</span></span><br><span class="line"></span><br><span class="line">Virtual environments are independent groups of Python libraries, one <span class="keyword">for</span> each project. Packages installed <span class="keyword">for</span> one project will <span class="keyword">not</span> affect other projects <span class="keyword">or</span> the operating system’s packages.</span><br><span class="line"><span class="comment"># 虚拟环境是一组独立的 Python 库，每个项目对应一个。为一个项目安装的软件包不会影响其他项目或操作系统的软件包</span></span><br><span class="line"></span><br><span class="line">Python comes bundled <span class="keyword">with</span> the venv module to create virtual environments.</span><br><span class="line"><span class="comment"># Python 使用 venv 模块来创建虚拟环�?</span></span><br></pre></td></tr></table></figure>
<h3 id="�-）Mac-Linux">�?）Mac/Linux</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">mkdir myproject</span><br><span class="line">cd myproject</span><br><span class="line">python3 -m venv .venv</span><br><span class="line"><span class="comment"># 激活虚拟环�?</span></span><br><span class="line">. .venv/<span class="built_in">bin</span>/activate</span><br></pre></td></tr></table></figure>
<h3 id="�-）Win">�?）Win</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件�?</span></span><br><span class="line">mkdir myproject</span><br><span class="line"><span class="comment"># 移动到目录下</span></span><br><span class="line">cd myproject</span><br><span class="line"><span class="comment"># 创建虚拟环境</span></span><br><span class="line">py -<span class="number">3</span> -m venv .venv</span><br><span class="line"><span class="comment"># 激活虚拟环�?</span></span><br><span class="line">.venv\Scripts\activate</span><br></pre></td></tr></table></figure>
<h2 id="�-】安�">�?】安�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pip install Flask</span><br><span class="line">	- 必须装：</span><br><span class="line">    	- werkzeug：web工具�?</span><br><span class="line">        - jinja：模�?</span><br><span class="line">        - MarkupSafe：模板渲染的xss工具去除</span><br><span class="line">        - ItsDangerous ：加密模块，对cookie进行加密</span><br><span class="line">        - Click：定制命�?</span><br><span class="line">        - Blinker ：处理信�?</span><br><span class="line">    - 选装</span><br><span class="line">    	- dotenv：处理配置文�?</span><br><span class="line">        - watchdog：监控文件变�?</span><br></pre></td></tr></table></figure>
<h1>【三】快速入�?</h1>
<h2 id="�-】使用pycharm创建flask项目">�?】使用pycharm创建flask项目</h2>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240918185937461.png" alt="image-20240918185937461"></p>
<h2 id="�-】纯手动创建">�?】纯手动创建</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个空的python项目，自己写代码</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="comment"># 开发者模�?</span></span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 注册路由</span></span><br><span class="line"><span class="comment"># �?”：路径</span></span><br><span class="line"><span class="comment"># methods：请求的方式</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span>, methods=[<span class="string">&quot;GET&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8801</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">################运行flask项目的几种方�?</span></span><br><span class="line"><span class="comment"># 方式一：pyton -m flask --app 文件�?run</span></span><br><span class="line"><span class="comment"># 方式二：flask --app 文件�?run</span></span><br><span class="line"><span class="comment"># 方式三：flask run --host=0.0.0.0    # py文件必须叫app.py</span></span><br><span class="line"><span class="comment"># 方式四：使用pycharm快速运行，配置一个flaskserver</span></span><br><span class="line"><span class="comment"># 方式五：直接右键运行下面的代�?</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8801</span>)</span><br></pre></td></tr></table></figure>
<h1>【四】案�?—前后端混合登录案�?</h1>
<h2 id="�-】app-py">�?】<a target="_blank" rel="noopener" href="http://app.py">app.py</a></h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, redirect, render_template, session</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置一个密�?--使用session，必须加密钥</span></span><br><span class="line">app.secret_key = <span class="string">&quot;amdkawjdkoamd&quot;</span></span><br><span class="line"><span class="comment"># 设置开发者模�?</span></span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 假数�?</span></span><br><span class="line">USERS = &#123;</span><br><span class="line">    <span class="number">1</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;刘亦�?, &#x27;</span>age<span class="string">&#x27;: 18, &#x27;</span>gende<span class="string">r&#x27;: &#x27;</span>�?, <span class="string">&#x27;text&#x27;</span>: <span class="string">&quot;刘亦菲，1987�?�?5日出生于湖北省武汉市，华语影视女演员、歌手，毕业于北京电影学�?002级表演系本科&quot;</span>,<span class="string">&#x27;img&#x27;</span>:<span class="string">&#x27;https://img2.woyaogexing.com/2021/10/16/e3ccba623848430ba83209c0621a2256!400x400.jpeg&#x27;</span>&#125;,</span><br><span class="line">    <span class="number">2</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;彭于�?, &#x27;</span>age<span class="string">&#x27;: 28, &#x27;</span>gende<span class="string">r&#x27;: &#x27;</span>�?, <span class="string">&#x27;text&#x27;</span>: <span class="string">&quot;彭于晏，1982�?�?4日出生于中国台湾省澎湖县，毕业于不列颠哥伦比亚大学，华语影视男演员。。。。。。。�?,&#x27;img&#x27;:&#x27;https://img2.woyaogexing.com/2021/10/16/e71aa35728c34313bccb4c371192990f!400x400.jpeg&#x27;&#125;,</span></span><br><span class="line"><span class="string">    3: &#123;&#x27;name&#x27;: &#x27;迪丽热巴&#x27;, &#x27;age&#x27;: 38, &#x27;gender&#x27;: &#x27;�?, &#x27;text&#x27;: &quot;</span>迪丽热巴（Dilraba），<span class="number">1992</span>�?�?日出生于中国新疆乌鲁木齐市，毕业于上海戏剧学院，中国内地影视女演�?,<span class="string">&#x27;img&#x27;</span>:<span class="string">&#x27;https://img2.woyaogexing.com/2021/10/30/6a34146dde2d4f1c832463a5be1ed027!400x400.jpeg&#x27;</span>&#125;,</span><br><span class="line">    <span class="number">4</span>: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;亚瑟&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">38</span>, <span class="string">&#x27;gender&#x27;</span>: <span class="string">&#x27;�?, &#x27;</span>text<span class="string">&#x27;: &quot;亚瑟，是腾讯手游《王者荣耀》中一名战士型英雄角色，也是《王者荣耀》的新手英雄之一，既可攻又可�?,&#x27;</span>img<span class="string">&#x27;:&#x27;</span>https://img2.woyaogexing.com/<span class="number">2021</span>/<span class="number">10</span>/<span class="number">30</span>/371b2aa7a03c4f53b7b1bc86f877d7d1!400x400.jpeg<span class="string">&#x27;&#125;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 登录才能访问的页�?</span></span><br><span class="line"><span class="string">@app.route(&#x27;</span>/<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">def index():</span></span><br><span class="line"><span class="string">    # 判断有没有登�?</span></span><br><span class="line"><span class="string">    if session.get(&#x27;</span>username<span class="string">&#x27;):</span></span><br><span class="line"><span class="string">        # 返回模板</span></span><br><span class="line"><span class="string">        return render_template(&#x27;</span>index.html<span class="string">&#x27;, user_dict=USERS)</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">        # 没有登录，重定向到login</span></span><br><span class="line"><span class="string">        return redirect(&#x27;</span>/login<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 登录</span></span><br><span class="line"><span class="string">@app.route(&#x27;</span>/login<span class="string">&#x27;, methods=[&#x27;</span>GET<span class="string">&#x27;, &#x27;</span>POST<span class="string">&#x27;])</span></span><br><span class="line"><span class="string">def Login():</span></span><br><span class="line"><span class="string">    # 判断是什么请�?</span></span><br><span class="line"><span class="string">    if request.method == &#x27;</span>GET<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">        return render_template(&quot;login.html&quot;)</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">        # 取出用户名和密码</span></span><br><span class="line"><span class="string">        username = request.form.get(&#x27;</span>username<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">        password = request.form.get(&#x27;</span>password<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">        if username == &#x27;</span>lsk<span class="string">&#x27; and password == &#x27;</span><span class="number">1234</span><span class="string">&#x27;:</span></span><br><span class="line"><span class="string">            # 登陆成功---登录信息写入到cookie--使用session</span></span><br><span class="line"><span class="string">            session[&#x27;</span>username<span class="string">&#x27;] = username</span></span><br><span class="line"><span class="string">            # 登录成功，重定向到index页面</span></span><br><span class="line"><span class="string">            return redirect(&quot;/&quot;)</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">            # 登录失败，返回login.html页面，但是要在页面中渲染页面</span></span><br><span class="line"><span class="string">            # 在前端获取错误信息：`&#123;&#123;error&#125;&#125;`</span></span><br><span class="line"><span class="string">            return render_template(&#x27;</span>login.html<span class="string">&#x27;, error=&#x27;</span>用户名或密码错误�?)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 详情页面</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/detail/&lt;int:pk&gt;&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">detail</span>(<span class="params">pk</span>):</span><br><span class="line">    <span class="keyword">if</span> session.get(<span class="string">&#x27;username&#x27;</span>):</span><br><span class="line">        <span class="comment"># 查看详情传过来一个pk</span></span><br><span class="line">        user = USERS[pk]</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;detail.html&#x27;</span>, info=user)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 没有登录跳转到，登录页面</span></span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>
<h2 id="�-】index-html">�?】<code>index.html</code></h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    头部--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sticky-top&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;bi me-2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;40&quot;</span> <span class="attr">height</span>=<span class="string">&quot;32&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#bootstrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fs-4&quot;</span>&gt;</span>交友平台<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-pills&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link active&quot;</span> <span class="attr">aria-current</span>=<span class="string">&quot;page&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>女生<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>男生<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>国产<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>欧美<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--轮播�?-&gt;</span></span><br><span class="line"><span class="comment">    &lt;div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class=&quot;bd-example-snippet bd-code-snippet&quot;&gt;</span></span><br><span class="line"><span class="comment">            &lt;div class=&quot;bd-example&quot;&gt;</span></span><br><span class="line"><span class="comment">                &lt;div id=&quot;carouselExampleCaptions&quot; class=&quot;carousel slide&quot; data-bs-ride=&quot;carousel&quot;&gt;</span></span><br><span class="line"><span class="comment">                    &lt;div class=&quot;carousel-indicators&quot;&gt;</span></span><br><span class="line"><span class="comment">                        &lt;button type=&quot;button&quot; data-bs-target=&quot;#carouselExampleCaptions&quot; data-bs-slide-to=&quot;0&quot; class=&quot;&quot;</span></span><br><span class="line"><span class="comment">                                aria-label=&quot;Slide 1&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="comment">                        &lt;button type=&quot;button&quot; data-bs-target=&quot;#carouselExampleCaptions&quot; data-bs-slide-to=&quot;1&quot;</span></span><br><span class="line"><span class="comment">                                aria-label=&quot;Slide 2&quot; class=&quot;active&quot; aria-current=&quot;true&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="comment">                        &lt;button type=&quot;button&quot; data-bs-target=&quot;#carouselExampleCaptions&quot; data-bs-slide-to=&quot;2&quot;</span></span><br><span class="line"><span class="comment">                                aria-label=&quot;Slide 3&quot; class=&quot;&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                    &lt;div class=&quot;carousel-inner&quot;&gt;</span></span><br><span class="line"><span class="comment">                        &lt;div class=&quot;carousel-item&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;img src=&quot;https://img.zcool.cn/community/01fb5458fedf57a801214550f9677a.jpg@2o.jpg&quot; alt=&quot;&quot;</span></span><br><span class="line"><span class="comment">                                 width=&quot;100%&quot; height=&quot;300&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;div class=&quot;carousel-caption d-none d-md-block&quot;&gt;</span></span><br><span class="line"><span class="comment">                                &lt;h5&gt;激情绿�?/h5&gt;</span></span><br><span class="line"><span class="comment">                                &lt;p&gt;Some representative placeholder content for the first slide.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">                            &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                        &lt;div class=&quot;carousel-item active&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;img src=&quot;https://img2.baidu.com/it/u=2951612437,4135887500&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG&quot;</span></span><br><span class="line"><span class="comment">                                 alt=&quot;&quot; width=&quot;100%&quot; height=&quot;300&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;div class=&quot;carousel-caption d-none d-md-block&quot;&gt;</span></span><br><span class="line"><span class="comment">                                &lt;h5&gt;品牌雨伞&lt;/h5&gt;</span></span><br><span class="line"><span class="comment">                                &lt;p&gt;Some representative placeholder content for the second slide.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">                            &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                        &lt;div class=&quot;carousel-item&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;img src=&quot;https://img1.baidu.com/it/u=1417689082,3333220267&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG&quot;</span></span><br><span class="line"><span class="comment">                                 alt=&quot;&quot; width=&quot;100%&quot; height=&quot;300&quot;&gt;</span></span><br><span class="line"><span class="comment">                            &lt;div class=&quot;carousel-caption d-none d-md-block&quot;&gt;</span></span><br><span class="line"><span class="comment">                                &lt;h5&gt;家装�?/h5&gt;</span></span><br><span class="line"><span class="comment">                                &lt;p&gt;Some representative placeholder content for the third slide.&lt;/p&gt;</span></span><br><span class="line"><span class="comment">                            &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/div&gt;</span></span><br><span class="line"><span class="comment">                    &lt;button class=&quot;carousel-control-prev&quot; type=&quot;button&quot; data-bs-target=&quot;#carouselExampleCaptions&quot;</span></span><br><span class="line"><span class="comment">                            data-bs-slide=&quot;prev&quot;&gt;</span></span><br><span class="line"><span class="comment">                        &lt;span class=&quot;carousel-control-prev-icon&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="comment">                        &lt;span class=&quot;visually-hidden&quot;&gt;Previous&lt;/span&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/button&gt;</span></span><br><span class="line"><span class="comment">                    &lt;button class=&quot;carousel-control-next&quot; type=&quot;button&quot; data-bs-target=&quot;#carouselExampleCaptions&quot;</span></span><br><span class="line"><span class="comment">                            data-bs-slide=&quot;next&quot;&gt;</span></span><br><span class="line"><span class="comment">                        &lt;span class=&quot;carousel-control-next-icon&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="comment">                        &lt;span class=&quot;visually-hidden&quot;&gt;Next&lt;/span&gt;</span></span><br><span class="line"><span class="comment">                    &lt;/button&gt;</span></span><br><span class="line"><span class="comment">                &lt;/div&gt;</span></span><br><span class="line"><span class="comment">            &lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;/div&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &lt;/div&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &lt;!--    内容--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row row-cols-md-2&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px&quot;</span>&gt;</span></span><br><span class="line">        `(妯℃澘鏍囩)`</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row &quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 10px&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;v.get(&#x27;img&#x27;)&#125;&#125;```&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-8&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">h5</span> <span class="attr">class</span>=<span class="string">&quot;card-title&quot;</span>&gt;</span>`&#123;&#123;v[&#x27;name&#x27;]&#125;&#125;`<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span>&gt;</span>性别：`&#123;&#123;v.gender&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span>&gt;</span>年龄：`&#123;&#123;v.age&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;card-text&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/detail/```&#123;&#123;k&#125;&#125;```&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>查看详细<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        (妯℃澘鏍囩)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    table--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bd-example&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover table-striped table-bordered&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-danger&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span>更多交友<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-success&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>杨幂<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>�?/td&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>33<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-warning&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>刘亦�?/th&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>未知<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>40<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-success&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>彭于�?/th&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>�?/td&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>23<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-warning&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>陈奕�?/th&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>�?/td&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>44<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-success&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>薛之�?/th&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>�?/td&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>36<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">&quot;table-warning&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span>&gt;</span>李清�?/th&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>�?/td&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>未知<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--分页--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;d-flex justify-content-center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pagination pagination-lg&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Previous&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>«<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;page-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;page-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Next&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span>»<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    尾部--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;py-3 my-4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav justify-content-center border-bottom pb-3 mb-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>特�?/a&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>联系我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>资料获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-center text-muted&quot;</span>&gt;</span>Copyright © 1998 - 2029 liuqingzheng. All Rights Reserved. <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】login-html">�?】<code>login.html</code></h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container col-xl-10 col-xxl-8 px-4 py-5&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row align-items-center g-lg-5 py-5&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-7 text-center text-lg-start&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;display-4 fw-bold lh-1 mb-3&quot;</span>&gt;</span>亚洲最大交友平�?/h1&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-10 fs-4&quot;</span>&gt;</span>Bootstrap是Twitter推出的一个用于前端开发的开源工具包。它由Twitter的设计师Mark</span><br><span class="line">                Otto和Jacob Thornton合作开�?是一个CSS/HTML框架。目�?Bootstrap最新版本为5.0<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-10 mx-auto col-lg-5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;p-4 p-md-5 border rounded-3 bg-light&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-floating mb-3&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;floatingInput&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;name@example.com&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;floatingInput&quot;</span>&gt;</span>用户�?/label&gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-floating mb-3&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;floatingPassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Password&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;floatingPassword&quot;</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;checkbox mb-3&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">value</span>=<span class="string">&quot;remember-me&quot;</span>&gt;</span> 记住密码</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;w-100 btn btn-lg btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;my-4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span></span><br><span class="line">                    `&#123;&#123;error&#125;&#125;`</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】detai-html">�?】<code>detai.html</code></h2>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sticky-top&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;bi me-2&quot;</span> <span class="attr">width</span>=<span class="string">&quot;40&quot;</span> <span class="attr">height</span>=<span class="string">&quot;32&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#bootstrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fs-4&quot;</span>&gt;</span>交友平台<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-pills&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link active&quot;</span> <span class="attr">aria-current</span>=<span class="string">&quot;page&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>女生<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>男生<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>国产<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>欧美<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;position-relative overflow-hidden p-3 p-md-5 m-md-3 text-center bg-light&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-5 p-lg-5 mx-auto my-5&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;display-4 fw-normal&quot;</span>&gt;</span>`&#123;&#123;info.name&#125;&#125;`<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;```&#123;&#123;info.img&#125;&#125;```&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">width</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 20px&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;lead fw-normal&quot;</span>&gt;</span>`&#123;&#123;info.text&#125;&#125;`<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-outline-secondary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>收藏<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;product-device shadow-sm d-none d-md-block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;product-device product-device-2 shadow-sm d-none d-md-block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;py-3 my-4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav justify-content-center border-bottom pb-3 mb-3&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>特�?/a&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>联系我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>资料获取<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link px-2 text-muted&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-center text-muted&quot;</span>&gt;</span>Copyright © 1998 - 2029 liuqingzheng. All Rights Reserved. <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】学到了什�">�?】学到了什�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重定�?</span></span><br><span class="line">	- redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"><span class="comment"># 访问路由</span></span><br><span class="line">	- @app.route(<span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>])</span><br><span class="line"><span class="comment"># 返回页面</span></span><br><span class="line">	- 在前端获取错误信息：`&#123;&#123;error&#125;&#125;`</span><br><span class="line">	- render_template(<span class="string">&#x27;login.html&#x27;</span>, error=<span class="string">&#x27;用户名或密码错误�?)</span></span><br><span class="line"><span class="string"># 使用session---必须导入</span></span><br><span class="line"><span class="string">	- 存：session[&#x27;</span>username<span class="string">&#x27;] = username</span></span><br><span class="line"><span class="string">    - 读取：session.get(&#x27;</span>username<span class="string">&#x27;):</span></span><br><span class="line"><span class="string"># 请求体的参数</span></span><br><span class="line"><span class="string">	- request.from</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;</span><span class="string">&#x27;&#x27;</span> 学到�?</span><br><span class="line"><span class="number">1</span> 返回新手四件�?</span><br><span class="line">    - 返回字符�?-》<span class="keyword">return</span> <span class="string">&#x27;字符�?</span></span><br><span class="line"><span class="string">    - 返回模板--》render_template(&#x27;</span>detail.html<span class="string">&#x27;,info=user)</span></span><br><span class="line"><span class="string">    - 返回重定�?-》redirect(&#x27;</span>/login<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">    - 返回json--》jsonify(&#123;&#x27;</span>code<span class="string">&#x27;:100,&#x27;</span>msg<span class="string">&#x27;:&#x27;</span>成功<span class="string">&#x27;&#125;)</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">2 request对象，是全局�?-》from flask import  request</span></span><br><span class="line"><span class="string">    -request.path</span></span><br><span class="line"><span class="string">    -request.method</span></span><br><span class="line"><span class="string">    .... 有很多，不展开�?-》记django的request---》类�?</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">3 前端传入的：请求�?  请求参数</span></span><br><span class="line"><span class="string">    -请求体：request.form---&gt;编码格式�?urlencoded</span></span><br><span class="line"><span class="string">    -请求参数：request.args--&gt;路径后的  /demo01?name=lqz&amp;age=19</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4 渲染 模板--》跟django 90%---》它比django更强�?-》可以加括号--》字典可�?get   []</span></span><br><span class="line"><span class="string">    for   `&#123;&#123;&#125;&#125;` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5 session 使用</span></span><br><span class="line"><span class="string">    - 设置 app.secret_key=&#x27;</span>adsfa33w9SAD<span class="comment">##@sdr434l&#x27;</span></span><br><span class="line">    - 设置值：session[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">    - 取值：session.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="number">6</span> 路由转换�?</span><br><span class="line"><span class="meta">    @app.route(<span class="params"><span class="string">&#x27;/detail/&lt;int:pk&gt;&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h1>【五】flask配置文件</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># django中配置文件用的是�?settings.py</span></span><br><span class="line">	-实际开发中用了两套配置文件</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask配置文件使用--�?默认配置�? -debug --SECRET_KEY</span></span><br><span class="line">	<span class="built_in">print</span>(app.config)</span><br><span class="line">    </span><br><span class="line">flask中的配置文件是一个flask.config.Config对象（继承字典）,默认配置为：</span><br><span class="line"> &#123;</span><br><span class="line">        <span class="string">&#x27;DEBUG&#x27;</span>:                                get_debug_flag(default=<span class="literal">False</span>),  是否开启Debug模式</span><br><span class="line">        <span class="string">&#x27;TESTING&#x27;</span>:                              <span class="literal">False</span>,                          是否开启测试模�?</span><br><span class="line">        <span class="string">&#x27;PROPAGATE_EXCEPTIONS&#x27;</span>:                 <span class="literal">None</span>,                          </span><br><span class="line">        <span class="string">&#x27;PRESERVE_CONTEXT_ON_EXCEPTION&#x27;</span>:        <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;SECRET_KEY&#x27;</span>:                           <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;PERMANENT_SESSION_LIFETIME&#x27;</span>:           timedelta(days=<span class="number">31</span>),</span><br><span class="line">        <span class="string">&#x27;USE_X_SENDFILE&#x27;</span>:                       <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&#x27;LOGGER_NAME&#x27;</span>:                          <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;LOGGER_HANDLER_POLICY&#x27;</span>:               <span class="string">&#x27;always&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;SERVER_NAME&#x27;</span>:                          <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;APPLICATION_ROOT&#x27;</span>:                     <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_COOKIE_NAME&#x27;</span>:                  <span class="string">&#x27;session&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_COOKIE_DOMAIN&#x27;</span>:                <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_COOKIE_PATH&#x27;</span>:                  <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_COOKIE_HTTPONLY&#x27;</span>:              <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_COOKIE_SECURE&#x27;</span>:                <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&#x27;SESSION_REFRESH_EACH_REQUEST&#x27;</span>:         <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;MAX_CONTENT_LENGTH&#x27;</span>:                   <span class="literal">None</span>,</span><br><span class="line">        <span class="string">&#x27;SEND_FILE_MAX_AGE_DEFAULT&#x27;</span>:            timedelta(hours=<span class="number">12</span>),</span><br><span class="line">        <span class="string">&#x27;TRAP_BAD_REQUEST_ERRORS&#x27;</span>:              <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&#x27;TRAP_HTTP_EXCEPTIONS&#x27;</span>:                 <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&#x27;EXPLAIN_TEMPLATE_LOADING&#x27;</span>:             <span class="literal">False</span>,</span><br><span class="line">        <span class="string">&#x27;PREFERRED_URL_SCHEME&#x27;</span>:                 <span class="string">&#x27;http&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;JSON_AS_ASCII&#x27;</span>:                        <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;JSON_SORT_KEYS&#x27;</span>:                       <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;JSONIFY_PRETTYPRINT_REGULAR&#x27;</span>:          <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;JSONIFY_MIMETYPE&#x27;</span>:                     <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;TEMPLATES_AUTO_RELOAD&#x27;</span>:                <span class="literal">None</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 修改默认</span></span><br><span class="line">	<span class="comment"># 方式一：直接在app上改，实际他们在config属性上（开发阶段用�?</span></span><br><span class="line">    	app.debug=<span class="literal">True</span></span><br><span class="line">		app.secret_key=<span class="string">&#x27;asdfasdf&#x27;</span></span><br><span class="line">    <span class="comment"># 方式二：通过app.config�?-》celery就是这样</span></span><br><span class="line">    	app.config[<span class="string">&#x27;DEBUG&#x27;</span>]=<span class="literal">True</span></span><br><span class="line">		app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>]=<span class="string">&#x27;aaaa&#x27;</span></span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 方式三：app.config.from_pyfile(&quot;python文件名称&quot;)--跟django一�?</span></span><br><span class="line">    	<span class="number">1</span> 写一�?settings.py</span><br><span class="line">        <span class="number">2</span> app.config.from_pyfile(<span class="string">&#x27;settings.py&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># 方式四：app.config.from_object(&#x27;settings.TestingConfig&#x27;)</span></span><br><span class="line">                <span class="keyword">class</span> <span class="title class_">Config</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">                    DEBUG = <span class="literal">False</span></span><br><span class="line">                    TESTING = <span class="literal">False</span></span><br><span class="line">                    DATABASE_URI = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">                    DATABASE_PORT = <span class="number">3306</span></span><br><span class="line">                <span class="keyword">class</span> <span class="title class_">ProductionConfig</span>(<span class="title class_ inherited__">Config</span>):</span><br><span class="line">                    DATABASE_URI = <span class="string">&#x27;192.168.1.11&#x27;</span></span><br><span class="line">                    DATABASE_PORT = <span class="number">3308</span></span><br><span class="line">                <span class="keyword">class</span> <span class="title class_">DevelopmentConfig</span>(<span class="title class_ inherited__">Config</span>):</span><br><span class="line">                    DEBUG = <span class="literal">True</span></span><br><span class="line">    <span class="comment"># 方式其他�?</span></span><br><span class="line">    app.config.from_envvar(<span class="string">&quot;环境变量名称&quot;</span>)</span><br><span class="line">	app.config.from_json(<span class="string">&quot;json文件名称&quot;</span>) </span><br><span class="line">	app.config.from_mapping(&#123;<span class="string">&#x27;DEBUG&#x27;</span>: <span class="literal">True</span>&#125;) <span class="comment">#可能会用</span></span><br><span class="line">    	- 配置中心---》服�?-》有个地址，发送请求会返回一对json格式配置文件</span><br><span class="line">		-nocos:配置中心</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># dotenv的使�? </span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 设置自己（跟修改默认一样）</span></span><br><span class="line">	-app.config[<span class="string">&#x27;DB_PASSWORD&#x27;</span>]=<span class="string">&#x27;lqz123&#x27;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E4%B8%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E4%B8%89/" class="post-title-link" itemprop="url">Flask�?</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】请求扩�?</h1>
<h2 id="�-】前言">�?】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask的请求扩展：本质作用和django的中间件作用一�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># flask也有中间件，但是一般不用，使用flaks的请求扩展即�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 常用的请求扩展：</span></span><br><span class="line">	- before_equest：请求来了，触发</span><br><span class="line">    - after_request：请求走了，触发</span><br><span class="line">    - teardown_request：无论视图函数执行成功或失败，都会走这里</span><br><span class="line">    - errorhandler：指定http状态码</span><br></pre></td></tr></table></figure>
<h2 id="�-】使�">�?】使�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用请求扩展@app.方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"># before_request:</span></span><br><span class="line"><span class="string">    - 进视图类之前执行</span></span><br><span class="line"><span class="string">    - 多个的话会从上往下一次执�?</span></span><br><span class="line"><span class="string">    - 如果返回none，表示继续下一�?</span></span><br><span class="line"><span class="string">    - 返回了四件套：表示结束，不继续往下走</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.before_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">before1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;before1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.before_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">before2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;before2&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">after_request</span></span><br><span class="line"><span class="string">    - 视图函数执行完走</span></span><br><span class="line"><span class="string">    - 多个会往下依次执�?</span></span><br><span class="line"><span class="string">    - 必须有返回值，使用响应对象</span></span><br><span class="line"><span class="string">    - 我们处理跨域的时候，可以在这里面使用，再响应头种�?</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.after_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">after1</span>(<span class="params">response</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after&quot;</span>)</span><br><span class="line">    <span class="comment"># 必须有返回值，返回的是响应对象</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.after_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">after2</span>(<span class="params">response</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;after2&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">teardown_request�?</span></span><br><span class="line"><span class="string">    - 无论视图函数执行成功或失败，都会走这�?</span></span><br><span class="line"><span class="string">    - 即便视图函数执行出异�?也会�?</span></span><br><span class="line"><span class="string">    - 一般会用来记录日志多一�?</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.teardown_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">teardown</span>(<span class="params">e</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;teardown&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">errorhandler</span></span><br><span class="line"><span class="string">    - 监听http响应状态码----在括号中可以写监听的状态码</span></span><br><span class="line"><span class="string">    - 全局异常处理</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">404</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">error_404</span>(<span class="params">e</span>):</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;code&quot;</span>: <span class="number">404</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;404&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.errorhandler(<span class="params"><span class="number">500</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">error_500</span>(<span class="params">e</span>):</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&quot;code&quot;</span>: <span class="number">500</span>, <span class="string">&quot;msg&quot;</span>: <span class="string">&quot;500&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1>【二】cbv加装饰器</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask.views <span class="keyword">import</span> MethodView</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;进来�?)</span></span><br><span class="line"><span class="string">        res = func(*args, **kwargs)</span></span><br><span class="line"><span class="string">        print(&#x27;</span>走了<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">        return res</span></span><br><span class="line"><span class="string">    return inner</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@app.route(&#x27;</span>/<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"># 装饰器放在下�?</span></span><br><span class="line"><span class="string">@outer</span></span><br><span class="line"><span class="string">def index():</span></span><br><span class="line"><span class="string">    return &#x27;</span>index<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">class UserView(MethodView):</span></span><br><span class="line"><span class="string">    # # 添加装饰�?</span></span><br><span class="line"><span class="string">    decorators = [outer]</span></span><br><span class="line"><span class="string">    # # 请求</span></span><br><span class="line"><span class="string">    methods = [&#x27;</span>GET<span class="string">&#x27;]</span></span><br><span class="line"><span class="string">    def get(self):</span></span><br><span class="line"><span class="string">        return &#x27;</span>get<span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">app.add_url_rule(&#x27;</span>/use<span class="string">r&#x27;, endpoint=&#x27;</span>use<span class="string">r&#x27;, view_func=UserView.as_view(name=&#x27;</span>use<span class="string">r&#x27;))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if __name__ == &#x27;</span>__main__<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">    app.run()</span></span><br></pre></td></tr></table></figure>
<h1>【三】闪�?</h1>
<h2 id="�-】前言-2">�?】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 闪现�?Flask 中，“闪现”（flashing）指的是一种在请求之间传递消息的机制，通常用于显示短暂的通知或提�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># flask中得闪现是存放数据的地方，一旦取出，数据就会消失----数据室一次性的</span></span><br><span class="line">	- 可以实现夸请求间数据通讯</span><br><span class="line">    - 本质就是借助于session--使用闪送：必须设置secret_key</span><br><span class="line">    </span><br><span class="line"><span class="comment"># flash：存放在session 中，但仅用于暂时的消息处�?</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># django中也会有类似的方�?</span></span><br><span class="line">	- 但是叫message----中间�?</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 基本使用</span></span><br><span class="line">	- 设置：flash(<span class="string">&#x27;成功了：lsk&#x27;</span>)</span><br><span class="line">    - 取值：get_flashed_messages()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 高级使用</span></span><br><span class="line">	<span class="comment"># 根据标签设置和取�?</span></span><br><span class="line">		- flash(<span class="string">&#x27;信息&#x27;</span>,category=<span class="string">&#x27;标志&#x27;</span>) ------但是你使用标志存值的话，还是会被get_flashed_messages()直接取到</span><br><span class="line">        </span><br><span class="line">         - get_flashed_messages(category_filter=[<span class="string">&#x27;标志&#x27;</span>])  <span class="comment"># 你想去什么数据就写半壁字节设置的标志，然后，获取到你写的数据</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】使�-2">�?】使�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template, redirect, flash, get_flashed_messages</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 要用闪现，必须指定secret_key--》闪现内部使用session实现�?</span></span><br><span class="line">app.secret_key = <span class="string">&#x27;asdfasdf&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        username = request.form.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        password = request.form.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> username == <span class="string">&#x27;lsk&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;1234&#x27;</span>:</span><br><span class="line">            <span class="comment"># 使用闪现，放个数�?</span></span><br><span class="line">            flash(<span class="string">&#x27;欢迎你：lqz&#x27;</span>)</span><br><span class="line">            flash(<span class="string">&#x27;ss&#x27;</span>)</span><br><span class="line">            flash(<span class="string">&#x27;ee&#x27;</span>)</span><br><span class="line">            <span class="comment"># 用标志放数据</span></span><br><span class="line">            flash(<span class="string">&#x27;lsk&#x27;</span>, category=<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">            flash(<span class="string">&#x27;18&#x27;</span>, category=<span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> redirect(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            flash(<span class="string">&#x27;用户名密码错�?)</span></span><br><span class="line"><span class="string">            return redirect(&#x27;</span>/<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@app.route(&#x27;</span>/<span class="string">&#x27;)</span></span><br><span class="line"><span class="string">def index():</span></span><br><span class="line"><span class="string">    # 从闪现中取出数据----直接在html中取出`&#123;&#123;get_flashed_messages()&#125;&#125;`</span></span><br><span class="line"><span class="string">    print(get_flashed_messages(category_filter=&#x27;</span>name<span class="string">&#x27;))</span></span><br><span class="line"><span class="string">    return render_template(&#x27;</span>index.html<span class="string">&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">if __name__ == &#x27;</span>__main__<span class="string">&#x27;:</span></span><br><span class="line"><span class="string">    app.run()</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">########################index.html页面</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>index页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>使用闪送取出数据：`&#123;&#123;get_flashed_messages()&#125;&#125;`<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>使用闪送取出标志的数据：`&#123;&#123;get_flashed_messages(category_filter=&#x27;name&#x27;)&#125;&#125;`<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】在django中使�-–在django中叫messages">�?】在django中使�?–在django中叫messages</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">################ 1 基础配置############</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 在django setting.py 取消注释的message app</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 在django setting.py 取消注释的message 的中间件</span></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [],</span><br><span class="line">        <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                ...</span><br><span class="line">                <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">################ 2 设置存放位置############</span></span><br><span class="line">MESSAGE_STORAGE = <span class="string">&quot;django.contrib.messages.storage.session.SessionStorage&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################ 3 放入�?###########</span></span><br><span class="line"><span class="comment">#添加message</span></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">concel_order</span>(<span class="params">request</span>):</span><br><span class="line">    messages.add_message(request, messages.SUCCESS, <span class="string">&quot;删除成功1&quot;</span>)</span><br><span class="line">    messages.add_message(request, messages.SUCCESS, <span class="string">&quot;删除成功2&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/order/control/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">################ 4 视图函数中取############</span></span><br><span class="line"><span class="comment"># 在视图函数中添加messages模块</span></span><br><span class="line"><span class="comment"># 再通过messages.add_message导入提示信息</span></span><br><span class="line"><span class="comment"># 在视图函数中import get_messages模块获取添加的提示信�?</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">control_order</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">from</span> django.contrib.messages.api <span class="keyword">import</span> get_messages</span><br><span class="line">        m1 = get_messages(request)</span><br><span class="line">        <span class="built_in">print</span>(m1)</span><br><span class="line">        </span><br><span class="line"><span class="comment">################ 5 模板中取############</span></span><br><span class="line"><span class="comment"># 在html模板中添加for循环拿到message</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">    `(妯℃澘鏍囩)`</span><br><span class="line">        &lt;ul&gt;`&#123;&#123; obj.message &#125;&#125;`&lt;/ul&gt;</span><br><span class="line">    `(妯℃澘鏍囩)`</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h1>【四】g对象</h1>
<h2 id="�-】前言-3">�?】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># g对象是一个全局对象---是global的缩�?</span></span><br><span class="line">	 - <span class="keyword">global</span>是关键字，不可以用来做变量，所以叫它g</span><br><span class="line">    </span><br><span class="line"><span class="comment"># g在当次请求中，可以放入值，可以取出�?</span></span><br><span class="line">	- 我们使用：index 视图函数---》内部又调用了add--》add()又调用了aa()--&gt;如果有参数，需要依次传�?</span><br><span class="line">    -通过g对象，我们可以把参数放到g中，以后直接从g中取即可</span><br><span class="line">    </span><br><span class="line"><span class="comment"># g和request对象都在当次请求中有�?</span></span><br><span class="line">	-我们一般不直接把数据放到request对象�?</span><br><span class="line">    -因为可能会污染数�?</span><br><span class="line"><span class="comment"># django中没有g,django中使用request对象</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】使�-3">�?】使�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, g, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">app.debug = <span class="literal">True</span></span><br><span class="line">app.secret_key = <span class="string">&#x27;asdfasdf&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.before_request</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">before</span>():</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;index&#x27;</span> <span class="keyword">in</span> request.full_path:</span><br><span class="line">        g.name = <span class="string">&#x27;index&#x27;</span></span><br><span class="line">        request.name=<span class="string">&#x27;index&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        g.name = <span class="string">&#x27;其他&#x27;</span></span><br><span class="line">        request.name = <span class="string">&#x27;其他&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>():</span><br><span class="line">    <span class="built_in">print</span>(g.name)</span><br><span class="line">    <span class="built_in">print</span>(request.name)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="built_in">print</span>(g.name)</span><br><span class="line">    add()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/home&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">home</span>():</span><br><span class="line">    <span class="built_in">print</span>(g.name)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;home&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="�-】g和session的区�">�?】g和session的区�?</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 区别很大</span></span><br><span class="line"><span class="comment"># g只在当前请求中有�?</span></span><br><span class="line"><span class="comment"># session可以跨请�?---长期有效</span></span><br><span class="line"><span class="comment"># 闪现也可以跨请求，因为他的本质就是session，但是它用一次就没了(它是一次性的)</span></span><br></pre></td></tr></table></figure>
<h1>【五】蓝�?</h1>
<h2 id="�-】前言-4">�?】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flask 中的蓝图（Blueprint）是一种组织和结构�?Flask 应用程序的方式，特别适合于大型应用或需要模块化的项目。蓝图允许你将应用程序的功能分开，使得代码更加清晰和可维�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用蓝图划分目录</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">蓝图使用步骤</span></span><br><span class="line"><span class="string">1 蓝图类实例化得到一个对�?</span></span><br><span class="line"><span class="string">    from flask import Blueprint</span></span><br><span class="line"><span class="string">    # 第一个参数是蓝图�?</span></span><br><span class="line"><span class="string">    order_blue=Blueprint(&#x27;order&#x27;,__name__)</span></span><br><span class="line"><span class="string">2 在视图函数上，使用蓝图注册路�?-&gt;蓝图也有请求扩展</span></span><br><span class="line"><span class="string">    @order_blue.before_request</span></span><br><span class="line"><span class="string">    def before():</span></span><br><span class="line"><span class="string">        print(&#x27;来了&#x27;)</span></span><br><span class="line"><span class="string">    @order_blue.route(&#x27;/order&#x27;)</span></span><br><span class="line"><span class="string">    def order():</span></span><br><span class="line"><span class="string">        return &#x27;order-order-order&#x27;</span></span><br><span class="line"><span class="string">3 在app中注册蓝�?</span></span><br><span class="line"><span class="string">	app.register_blueprint(user_blue)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="�-】不使用蓝图">�?】不使用蓝图</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">````</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## �?】蓝图小项目</span></span><br><span class="line"></span><br><span class="line">````python</span><br><span class="line"><span class="comment">###################app.py</span></span><br><span class="line">    <span class="keyword">from</span> src <span class="keyword">import</span> app</span><br><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">        app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8080</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">###################__init__.py</span></span><br><span class="line">    <span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">    app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 注册蓝图</span></span><br><span class="line">    <span class="keyword">from</span> .view <span class="keyword">import</span> view</span><br><span class="line">    app.register_blueprint(view)</span><br><span class="line"></span><br><span class="line"><span class="comment">#####################view.py</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint, render_template</span><br><span class="line"></span><br><span class="line">view = Blueprint(<span class="string">&#x27;view&#x27;</span>, __name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@view.route(<span class="params"><span class="string">&#x27;/login&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;login&#x27;</span></span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240923160202458.png" alt="image-20240923160202458"></p>
<h2 id="�-】蓝图大项目">�?】蓝图大项目</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############flask_little里面有很多的app</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############每个app都在__init__.py中写</span></span><br><span class="line">    <span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line">    <span class="comment"># 在view.py中直接导入使�?</span></span><br><span class="line">    user = Blueprint(<span class="string">&#x27;user&#x27;</span>, __name__, template_folder=<span class="string">&#x27;templates&#x27;</span>, static_folder=<span class="string">&#x27;static&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 一定要把view导入一下，不然它不执行</span></span><br><span class="line">    <span class="keyword">from</span> . <span class="keyword">import</span> view</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 在flask_little/__init__.py中注�?</span></span><br><span class="line">    <span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">    app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 注册每个app的蓝�?</span></span><br><span class="line">    <span class="keyword">from</span> .goods <span class="keyword">import</span> goods</span><br><span class="line">    <span class="keyword">from</span> .user <span class="keyword">import</span> user</span><br><span class="line"></span><br><span class="line">    <span class="comment"># url_prefix路径的前缀</span></span><br><span class="line">    app.register_blueprint(goods, url_prefix=<span class="string">&#x27;/goods&#x27;</span>)</span><br><span class="line">    app.register_blueprint(user, url_prefix=<span class="string">&#x27;/user&#x27;</span>)</span><br><span class="line"><span class="comment"># 在app.py中启�?</span></span><br><span class="line"><span class="keyword">from</span> flask_little <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">8080</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">########################注意在html中使用img标签加上app前缀</span></span><br><span class="line">&lt;img src=<span class="string">&quot;/user/static/1.0.png&quot;</span> alt=<span class="string">&quot;&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240923163930316.png" alt="image-20240923163930316"></p>
<h1>【六】flask-session</h1>
<h2 id="�-】前言-5">�?】前言</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flask_session它是一个第三方的，可以将session保存�?</span></span><br><span class="line">	 - 服务�?</span><br><span class="line">	 - rtedis</span><br><span class="line">      - 数据�?</span><br><span class="line">      - 文件</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">	- pip install flask-session</span><br></pre></td></tr></table></figure>
<h2 id="�-】方式一">�?】方式一</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template, redirect, session</span><br><span class="line"><span class="keyword">from</span> flask_session.redis <span class="keyword">import</span> RedisSessionInterface</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.secret_key = <span class="string">&#x27;daekndjahodaw&#x27;</span></span><br><span class="line"><span class="comment"># 连接redis</span></span><br><span class="line">conn = redis.Redis(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置会话接口</span></span><br><span class="line"><span class="comment"># 1 client:redis链接对象</span></span><br><span class="line"><span class="comment"># 2 key_prefix:放到redis中得前缀</span></span><br><span class="line"><span class="comment"># 3 use_signer:是否使用secret_key 签名，如果是true，浏览器上的cookie会有两段</span></span><br><span class="line"><span class="comment"># 4 permanent:关闭浏览器，cookie是否失效</span></span><br><span class="line"><span class="comment"># 5 生成session_key的长�?</span></span><br><span class="line">app.session_interface = RedisSessionInterface(app, client=conn, key_prefix=<span class="string">&#x27;session&#x27;</span>, use_signer=<span class="literal">True</span>, permanent=<span class="literal">True</span>,</span><br><span class="line">                                              sid_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        username = request.form[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">        password = request.form[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">        <span class="keyword">if</span> username == <span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">            <span class="comment"># 保存session</span></span><br><span class="line">            session[<span class="string">&#x27;username&#x27;</span>] = username</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            error = <span class="string">&#x27;用户名或密码错误&#x27;</span></span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>, error=error)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h2 id="�-】方式二">�?】方式二</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式二是将app包裹起来</span></span><br><span class="line"><span class="comment"># 从配置文件中导入如配�?----app.config.from_pyfile(&#x27;./settings.py&#x27;)</span></span><br><span class="line"><span class="comment">###########################settings.py</span></span><br><span class="line">	<span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line">    <span class="comment"># 指定会话类型为redis，表示数据保存到redis�?</span></span><br><span class="line">    SESSION_TYPE = <span class="string">&#x27;redis&#x27;</span></span><br><span class="line">    <span class="comment"># 连接redis</span></span><br><span class="line">    SESSION_REDIS = Redis(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>, db=<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># 为储存的数据设置前缀</span></span><br><span class="line">    SESSION_KEY_PREFIX = <span class="string">&#x27;sessio&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###########################py文件</span></span><br><span class="line">    <span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, render_template, session</span><br><span class="line">    <span class="keyword">from</span> flask_session <span class="keyword">import</span> Session</span><br><span class="line"></span><br><span class="line">    app = Flask(__name__)</span><br><span class="line">    app.secret_key = <span class="string">&#x27;daekndjahodaw&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 加载配置文件</span></span><br><span class="line">    app.config.from_pyfile(<span class="string">&#x27;./settings.py&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用Session包裹一下：允许你在多个请求之间存储和访问用户数�?</span></span><br><span class="line">    Session(app)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, endpoint=<span class="string">&#x27;login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>():</span><br><span class="line">        <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            username = request.form[<span class="string">&#x27;username&#x27;</span>]</span><br><span class="line">            password = request.form[<span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> username == <span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123456&#x27;</span>:</span><br><span class="line">                <span class="comment"># 保存session</span></span><br><span class="line">                session[<span class="string">&#x27;username&#x27;</span>] = username</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                error = <span class="string">&#x27;用户名或密码错误&#x27;</span></span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">&#x27;login.html&#x27;</span>, error=error)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">        app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240923190306788.png" alt="image-20240923190306788"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2025/10/10/flask%E4%BA%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/10/10/flask%E4%BA%94/" class="post-title-link" itemprop="url">Flask五</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-10-10 15:54:29" itemprop="dateCreated datePublished" datetime="2025-10-10T15:54:29+08:00">2025-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:39" itemprop="dateModified" datetime="2025-10-11T17:47:39+08:00">2025-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>【一】sqlalchemy 快速使用</h1>
<h2 id="【1】介绍">【1】介绍</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sqlalchemy</span></span><br><span class="line">	- sqlalchemy企业级orm框架</span><br><span class="line">    </span><br><span class="line"><span class="comment"># python界的orm框架</span></span><br><span class="line">	------------------下面是同步orm框架</span><br><span class="line">	- django-orm    <span class="comment"># 只可以django框架使用</span></span><br><span class="line">    - peewee         <span class="comment"># 小型orm框架：https://docs.peewee-orm.com/en/latest/peewee/quickstart.html</span></span><br><span class="line">    -------------------下面是异步框架</span><br><span class="line">    - sqlalchemy    <span class="comment"># 企业级，使用非常广泛：https://docs.sqlalchemy.org/en/20/orm/quickstart.html，可以用在flask上，还可以用在fastapi</span></span><br><span class="line"><span class="comment"># django ，flask---》同步框架--》新版本支持异步</span></span><br><span class="line"><span class="comment"># fastapi，sanic，tornado---》异步框架--》支持同步的写法--》如果在异步框架上写同步</span></span><br><span class="line">	-众多第三方库---》都是同步的--》导致异步框架性能发挥不出来</span><br><span class="line">    -redis：aioredis  --》redis-py</span><br><span class="line">    -mysql：aiomysql  --》pymysql</span><br><span class="line"><span class="comment"># 异步框架上用同步框架第三方模块，不能发挥最佳性能</span></span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240923105313683.png" alt="image-20240923105313683"></p>
<h2 id="【2】快速使用">【2】快速使用</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  1 安装 pip3 insatll sqlalchemy   </span></span><br><span class="line">	- <span class="number">2.0</span><span class="number">.35</span>版本</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2 架构</span></span><br><span class="line">    Engine，框架的引擎</span><br><span class="line">    Connection Pooling ，数据库连接池</span><br><span class="line">    Dialect，选择连接数据库的DB API种类 </span><br><span class="line">    SQL Exprression Language，SQL表达式语言</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 3 链接不同数据库</span></span><br><span class="line"><span class="comment">## 3.1 postgresql</span></span><br><span class="line"><span class="comment"># default</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;postgresql://scott:tiger@localhost/mydatabase&quot;</span>)</span><br><span class="line"><span class="comment"># psycopg2</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;postgresql+psycopg2://scott:tiger@localhost/mydatabase&quot;</span>)</span><br><span class="line"><span class="comment"># pg8000</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;postgresql+pg8000://scott:tiger@localhost/mydatabase&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.2 Mysql</span></span><br><span class="line"><span class="comment"># default</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;mysql://scott:tiger@localhost/foo&quot;</span>)</span><br><span class="line"><span class="comment"># mysqlclient (a maintained fork of MySQL-Python)</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;mysql+mysqldb://scott:tiger@localhost/foo&quot;</span>)</span><br><span class="line"><span class="comment"># PyMySQL</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;mysql+pymysql://scott:tiger@localhost/foo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.3 oracle</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;oracle://scott:tiger@127.0.0.1:1521/sidname&quot;</span>)</span><br><span class="line">engine = create_engine(<span class="string">&quot;oracle+cx_oracle://scott:tiger@tnsname&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.4 Microsoft SQL Server</span></span><br><span class="line"><span class="comment"># pyodbc</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;mssql+pyodbc://scott:tiger@mydsn&quot;</span>)</span><br><span class="line"><span class="comment"># pymssql</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;mssql+pymssql://scott:tiger@hostname:port/dbname&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3.5 sqlite</span></span><br><span class="line"><span class="comment"># Unix/Mac - 4 initial slashes in total</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;sqlite:////absolute/path/to/foo.db&quot;</span>)</span><br><span class="line"><span class="comment"># Windows</span></span><br><span class="line">engine = create_engine(<span class="string">&quot;sqlite:///C:\\path\\to\\foo.db&quot;</span>)</span><br><span class="line"><span class="comment"># Windows alternative using raw string</span></span><br><span class="line">engine = create_engine(<span class="string">r&quot;sqlite:///C:\path\to\foo.db&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240923110133722.png" alt="image-20240923110133722"></p>
<h1>【二】sqlalchemy原生操作----mysql</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建engine对象</span></span><br><span class="line">engine = create_engine(</span><br><span class="line">    <span class="string">&quot;mysql+pymysql://root:710912@127.0.0.1:3308/luffy_data?charset=utf8&quot;</span>,</span><br><span class="line">    max_overflow=<span class="number">0</span>,  <span class="comment"># 超出连接池大小外最多创建的连接</span></span><br><span class="line">    pool_size=<span class="number">5</span>,  <span class="comment"># 连接池大小</span></span><br><span class="line">    pool_timeout=<span class="number">30</span>,  <span class="comment"># 池中没有线程最多等待的时间，否则报错</span></span><br><span class="line">    pool_recycle=-<span class="number">1</span>,  <span class="comment"># 多久之后对线程池中的线程进行一次连接的回收（重置）</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 原生操作mysql----用了连接池----就可以不用dbutils模块</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>():</span><br><span class="line">    <span class="comment"># 创建连接</span></span><br><span class="line">    conn = engine.raw_connection()</span><br><span class="line">    <span class="comment"># 创建游标</span></span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    <span class="comment"># 执行sql</span></span><br><span class="line">    cursor.execute(<span class="string">&quot;select * from luffy_user&quot;</span>)</span><br><span class="line">    <span class="comment"># 提交</span></span><br><span class="line">    result = cursor.fetchall()</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">    <span class="comment"># 关闭游标</span></span><br><span class="line">    cursor.close()</span><br><span class="line">    <span class="comment"># 关闭连接</span></span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行</span></span><br><span class="line"><span class="comment"># if __name__ == &#x27;__main__&#x27;:</span></span><br><span class="line"><span class="comment">#     task()</span></span><br><span class="line"><span class="comment"># 线程执行</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=task)</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure>
<h1>【三】sqlalchemy操作表</h1>
<h2 id="【1】创建删除表">【1】创建删除表</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, Text, ForeignKey, DateTime, UniqueConstraint, Index</span><br><span class="line"><span class="comment"># Column：就是列---都是用这个，在内部确定是什么类型</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步：创建基类，以后所有类都必须继承基类</span></span><br><span class="line"><span class="comment"># 老版本创建基类---不建议使用</span></span><br><span class="line"><span class="comment"># from sqlalchemy.ext.declarative import declarative_base</span></span><br><span class="line"><span class="comment"># Base = declarative_base()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先版本创建基类</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> DeclarativeBase</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">DeclarativeBase</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二步：写一个类，继承创建的基类</span></span><br><span class="line"><span class="comment"># 第三步：写字段，写字段</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="comment"># 表的名字</span></span><br><span class="line">    __tablename__ = <span class="string">&quot;user&quot;</span></span><br><span class="line">    <span class="comment"># 主键自增</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 辅助索引，不可以为空</span></span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># 这个字段是唯一的</span></span><br><span class="line">    email = Column(String(<span class="number">32</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># datetime.datetime.now不能加括号，加了括号，以后永远是当前时间</span></span><br><span class="line">    ctime = Column(DateTime, default=datetime.datetime.now)</span><br><span class="line">    extra = Column(Text, nullable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line">	</span><br><span class="line">    <span class="comment"># 后期的是用的使用可以将engine放在一个文件中，使用的时候直接引入即可</span></span><br><span class="line">    engine = create_engine(</span><br><span class="line">        <span class="string">&quot;mysql+pymysql://root:710912@127.0.0.1:3308/demo_1?charset=utf8mb4&quot;</span>,</span><br><span class="line">        max_overflow=<span class="number">0</span>,  <span class="comment"># 超出连接池大小外最多创建的连接</span></span><br><span class="line">        pool_size=<span class="number">5</span>,  <span class="comment"># 连接池大小</span></span><br><span class="line">        pool_timeout=<span class="number">30</span>,  <span class="comment"># 池中没有线程最多等待的时间，否则报错</span></span><br><span class="line">        pool_recycle=-<span class="number">1</span>,  <span class="comment"># 多久之后对线程池中的线程进行一次连接的回收（重置）</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 第四步：创建表(不能创建库，只能新增或删除表，不能增加删除字段)</span></span><br><span class="line">    <span class="comment"># Base.metadata.create_all(engine)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 第五步：删除表</span></span><br><span class="line">    Base.metadata.drop_all(engine)</span><br></pre></td></tr></table></figure>
<h2 id="【2】基本的增删改查">【2】基本的增删改查</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> engine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一：创建session对象--------老版本</span></span><br><span class="line"><span class="comment"># from sqlalchemy.orm import sessionmaker</span></span><br><span class="line"><span class="comment"># Session = sessionmaker(bind=engine)</span></span><br><span class="line"><span class="comment"># session = Session()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 二：创建session对象--------新版本</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session</span><br><span class="line">session = Session(engine)</span><br><span class="line"></span><br><span class="line"><span class="comment">##########################查</span></span><br><span class="line"><span class="comment"># 新版本使用查询---借助于session</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> select</span><br><span class="line"><span class="comment"># stmt = select(User).where(User.name==&quot;lsk&quot;)</span></span><br><span class="line"><span class="comment"># 执行</span></span><br><span class="line"><span class="comment"># result = session.execute(stmt)</span></span><br><span class="line"><span class="comment"># print(result)  # 得到对象</span></span><br><span class="line"><span class="comment"># 可能是多个</span></span><br><span class="line"><span class="comment"># scalars：只想获取某个列的值，而不是整行数据--只想获取name</span></span><br><span class="line"><span class="comment"># for user_obj in result.scalars():</span></span><br><span class="line"><span class="comment">#     print(user_obj)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 老版本使用查询---借助于session</span></span><br><span class="line"><span class="comment"># res = session.query(User).filter_by(name=&quot;lsk&quot;).all()</span></span><br><span class="line"><span class="comment"># print(res)  # [lsk]</span></span><br><span class="line"><span class="comment"># print(res[0])  # lsk</span></span><br><span class="line"><span class="comment"># res = session.query(User).filter_by(name=&quot;lsk&quot;).first()</span></span><br><span class="line"><span class="comment"># print(res)  # lsk</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##################增</span></span><br><span class="line"><span class="comment"># user_1 = User(name=&#x27;pop&#x27;, email=&#x27;12@qq.com&#x27;)</span></span><br><span class="line"><span class="comment"># user_2 = User(name=&#x27;opp&#x27;, email=&#x27;123@qq.com&#x27;)</span></span><br><span class="line"><span class="comment"># user_3 = User(name=&#x27;obb&#x27;, email=&#x27;123456@qq.com&#x27;)</span></span><br><span class="line"><span class="comment"># 单挑新增</span></span><br><span class="line"><span class="comment"># session.add(user_1)</span></span><br><span class="line"><span class="comment"># 增多条</span></span><br><span class="line"><span class="comment"># session.add_all([user_2,user_3])</span></span><br><span class="line"><span class="comment"># 记得提交</span></span><br><span class="line"><span class="comment"># session.commit()</span></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line"><span class="comment"># session.close()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#########################################删</span></span><br><span class="line"><span class="comment"># res = session.query(User).filter_by(name=&#x27;obb&#x27;).delete()</span></span><br><span class="line"><span class="comment"># print(res) # 删除几条</span></span><br><span class="line"><span class="comment"># 记得提交</span></span><br><span class="line"><span class="comment"># session.commit()</span></span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line"><span class="comment"># session.close()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#######################################改</span></span><br><span class="line"><span class="comment"># 方式一</span></span><br><span class="line">user = session.query(User).filter_by(<span class="built_in">id</span>=<span class="number">1</span>).first()</span><br><span class="line">user.name=<span class="string">&#x27;改了&#x27;</span></span><br><span class="line">session.add(user) <span class="comment">#[id字段在不在] 如果对象不存在，就是新增，如果对象存在，就是修改</span></span><br><span class="line"><span class="comment"># 记得提交</span></span><br><span class="line">session.commit()</span><br><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">session.close()</span><br></pre></td></tr></table></figure>
<h1>【四】一对多关系</h1>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一对一</span></span><br><span class="line"><span class="comment"># 一对多</span></span><br><span class="line"><span class="comment"># 多对多</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  上面这些都是外键关系</span></span><br></pre></td></tr></table></figure>
<h2 id="【1】创建一对多的表">【1】创建一对多的表</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Person表---》Hohhy表</span></span><br><span class="line"><span class="comment"># 自己规定</span></span><br><span class="line"> <span class="comment"># 一个人只能有一个爱好</span></span><br><span class="line"> <span class="comment"># 一个爱好可以对应多个人</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, Text, DateTime, ForeignKey</span><br><span class="line"><span class="comment"># 先版本创建基类</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> DeclarativeBase, relationship</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">DeclarativeBase</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment">####  一对多关系</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hobby</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;hobby&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    caption = Column(String(<span class="number">50</span>), default=<span class="string">&#x27;篮球&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.caption</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;person&#x27;</span></span><br><span class="line">    nid = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># hobby指的是tablename而不是类名</span></span><br><span class="line">    hobby_id = Column(Integer, ForeignKey(<span class="string">&quot;hobby.id&quot;</span>))  <span class="comment"># 一个爱好，可以被多个人喜欢，一个人只能喜欢一个爱好</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 跟数据库无关，不会新增字段，只用于快速链表操作</span></span><br><span class="line">    <span class="comment"># 类名，backref用于反向查询</span></span><br><span class="line">    hobby = relationship(<span class="string">&#x27;Hobby&#x27;</span>, backref=<span class="string">&#x27;pers&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br></pre></td></tr></table></figure>
<h2 id="【2】增删查改">【2】增删查改</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> engine</span><br><span class="line"><span class="keyword">from</span> models <span class="keyword">import</span> Person, Hobby</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建session对象</span></span><br><span class="line">session = Session(engine)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">###############增</span></span><br><span class="line">    <span class="comment"># hobby = Hobby(caption=&#x27;篮球&#x27;)</span></span><br><span class="line">    <span class="comment"># session.add(hobby)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 新增person,必须要有hobby_id</span></span><br><span class="line">    <span class="comment"># person = Person(name=&#x27;小明&#x27;, hobby_id=1)</span></span><br><span class="line">    <span class="comment"># session.add(person)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 新增person的同时添加hobby</span></span><br><span class="line">    <span class="comment"># hobby：快速操作</span></span><br><span class="line">    <span class="comment"># person = Person(name=&#x27;六六&#x27;, hobby=Hobby(caption=&#x27;羽毛球&#x27;))</span></span><br><span class="line">    <span class="comment"># session.add(person)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line">    <span class="comment"># 还有一个方式</span></span><br><span class="line">    <span class="comment"># hobby=session.query(Hobby).filter_by(id=2).first()</span></span><br><span class="line">    <span class="comment"># person = Person(name=&#x27;小红&#x27;, hobby=hobby)</span></span><br><span class="line">    <span class="comment"># session.add(person)</span></span><br><span class="line">    <span class="comment"># session.commit()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">################基于对象的夸表查询---正向</span></span><br><span class="line">    <span class="comment"># person = session.query(Person).filter_by(nid=1).first()</span></span><br><span class="line">    <span class="comment"># print(person)  # 小明</span></span><br><span class="line">    <span class="comment"># print(person.hobby_id)  # 1</span></span><br><span class="line">    <span class="comment"># print(person.hobby)  # 足球</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">################基于对象的夸表查询---反向</span></span><br><span class="line">    hobby = session.query(Hobby).filter_by(<span class="built_in">id</span>=<span class="number">1</span>).first()</span><br><span class="line">    <span class="built_in">print</span>(hobby.caption)</span><br><span class="line">    <span class="comment"># 在person表中，定义的反向查询字段</span></span><br><span class="line">    <span class="built_in">print</span>(hobby.pers)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> common <span class="keyword">import</span> engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, Text, DateTime, ForeignKey</span><br><span class="line"><span class="comment"># 先版本创建基类</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> DeclarativeBase, relationship</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>(<span class="title class_ inherited__">DeclarativeBase</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="comment"># 表的名字</span></span><br><span class="line">    __tablename__ = <span class="string">&quot;user&quot;</span></span><br><span class="line">    <span class="comment"># 主键自增</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># 索引，不可以为空</span></span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment"># 这个字段是唯一的</span></span><br><span class="line">    email = Column(String(<span class="number">32</span>), unique=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># datetime.datetime.now不能加括号，加了括号，以后永远是当前时间</span></span><br><span class="line">    ctime = Column(DateTime, default=datetime.datetime.now)</span><br><span class="line">    extra = Column(Text, nullable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印对象的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 打印列表的时候显示名字</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"><span class="comment"># Person表---》Hohhy表</span></span><br><span class="line"><span class="comment"># 自己规定</span></span><br><span class="line"> <span class="comment"># 一个人只能有一个爱好</span></span><br><span class="line"> <span class="comment"># 一个爱好可以对应多个人</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####  一对多关系</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hobby</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;hobby&#x27;</span></span><br><span class="line">    <span class="built_in">id</span> = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    caption = Column(String(<span class="number">50</span>), default=<span class="string">&#x27;篮球&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.caption</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    __tablename__ = <span class="string">&#x27;person&#x27;</span></span><br><span class="line">    nid = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">32</span>), index=<span class="literal">True</span>, nullable=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># hobby指的是tablename而不是类名</span></span><br><span class="line">    hobby_id = Column(Integer, ForeignKey(<span class="string">&quot;hobby.id&quot;</span>))  <span class="comment"># 一个爱好，可以被多个人喜欢，一个人只能喜欢一个爱好</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 跟数据库无关，不会新增字段，只用于快速链表操作</span></span><br><span class="line">    <span class="comment"># 类名，backref用于反向查询</span></span><br><span class="line">    hobby = relationship(<span class="string">&#x27;Hobby&#x27;</span>, backref=<span class="string">&#x27;pers&#x27;</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建表</span></span><br><span class="line">    Base.metadata.create_all(engine)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line">engine = create_engine(</span><br><span class="line">    <span class="string">&quot;mysql+pymysql://root:710912@127.0.0.1:3308/demo_1?charset=utf8mb4&quot;</span>,</span><br><span class="line">    max_overflow=<span class="number">0</span>,  <span class="comment"># 超出连接池大小外最多创建的连接</span></span><br><span class="line">    pool_size=<span class="number">5</span>,  <span class="comment"># 连接池大小</span></span><br><span class="line">    pool_timeout=<span class="number">30</span>,  <span class="comment"># 池中没有线程最多等待的时间，否则报错</span></span><br><span class="line">    pool_recycle=-<span class="number">1</span>,  <span class="comment"># 多久之后对线程池中的线程进行一次连接的回收（重置）</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2023/01/01/1.0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/01/1.0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">1.0 ���������</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-01T00:00:00+08:00">2023-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:38" itemprop="dateModified" datetime="2025-10-11T17:47:38+08:00">2025-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>计算机基础</h1>
<h1>[一]编程语言和编�?</h1>
<h2 id="�-】什么是语言�">�?】什么是语言�?</h2>
<ul>
<li>语言是一种人与人之间进行沟通的媒介，例如英语、汉语、俄语等�?</li>
</ul>
<h2 id="2-什么是编程语言�">[2]什么是编程语言�?</h2>
<ul>
<li>编程语言是一种人与计算机之间进行沟通的媒介�?</li>
</ul>
<h2 id="�-】为什么会有编程语言">�?】为什么会有编程语言</h2>
<ul>
<li>是为了能够让人类与计算机能够进行有效的交�?</li>
<li>计算机在编程者的控制下按照指定的逻辑执行任务，从而实现自动化�?</li>
</ul>
<blockquote>
<p>通俗理解为在人与计算机的世界里，人是奴隶主，计算机是奴隶</p>
<p>人与计算机沟通的目的就是为了奴役计算机，让计算机按照人类的思维逻辑自发地去工作，从而解放人力，节约成本�?</p>
</blockquote>
<h2 id="4-什么是编程�">[4]什么是编程�?</h2>
<ul>
<li>就是用人类的思维翻译成计算机能够理解和执行命令，将这些指令写入程序形成指令�?</li>
</ul>
<h2 id="5-编程的目�">[5]编程的目�?</h2>
<ul>
<li>为了让计算机按照人类的意愿完成特定的任务，实现自动化，提高工作效率，解放人力，以及创造各种应用和软件�?</li>
</ul>
<h1>【二】计算机组成原理</h1>
<h2 id="�-】什么是计算机？">�?】什么是计算机？</h2>
<ul>
<li>它是一个通电的设备，又叫做电脑，拥有处理数据、执行指令的能力</li>
<li>能够批量处理人类的指令和数据</li>
</ul>
<h2 id="�-】为什么要有计算机">�?】为什么要有计算机</h2>
<ul>
<li>就是为了提高效率，可�?4小时不间断的工作</li>
<li>节约劳动成本，提高效�?</li>
</ul>
<h2 id="�-】计算机的五大组成部�">�?】计算机的五大组成部�?</h2>
<h3 id="�-）控制器">�?）控制器</h3>
<ul>
<li>
<p>*<em>功能�?</em> 控制器相当于计算机的大脑，负责指挥和协调其他部件的工作�?</p>
</li>
<li>
<p>相当于人类的大脑，相互协调工作，完成工作（非常核心的部分�?</p>
</li>
</ul>
<h3 id="�-】运算器">�?】运算器</h3>
<ul>
<li>
<p>功能�?</p>
<p>运算器执行各种算术和逻辑运算，实现计算机的计算功能�?</p>
<ul>
<li>算术运算：数字之间的运算，例�?+ - * /</li>
<li>逻辑运算：根据某个条件是否成立，决定是否要做事情</li>
</ul>
</li>
<li>
<p>相当于我们的大脑进行逻辑运算和数字运算的功能</p>
<ul>
<li>逻辑运算包括与或非，如果，但�?..</li>
<li>数字运算包括加减乘除�?..</li>
</ul>
</li>
</ul>
<h3 id="�-】存储器">�?】存储器</h3>
<ul>
<li>
<p>*<em>功能�?</em> 存储器用于存储计算机运行时所需的数据和指令�?</p>
</li>
<li>
<p>人类的记忆在于大脑中（海马体�?</p>
<ul>
<li>分为长期和短期记�?
<ul>
<li>长期记忆就是你一直记得的事情</li>
<li>短期记忆就是你睡一觉你就忘记啦</li>
</ul>
</li>
</ul>
</li>
<li>
<p>存储器也分为两种：内存和外存</p>
</li>
</ul>
<h4 id="�-）内�">�?）内�?</h4>
<ul>
<li>
<p>*<em>功能�?</em> 内存是计算机用于临时存储数据和程序的地方，是CPU能够直接访问的存储介质�?</p>
</li>
<li>
<p>就是短时间存储的数据</p>
</li>
<li>
<p>断电或者重启电脑就会消�?</p>
<ul>
<li>比如你写一篇作文几百字突然断电，所写的内容就会消失</li>
</ul>
</li>
<li>
<p>特点�?</p>
<ul>
<li>断电数据丢失：内存是一种易失性存储器，断电后存储在其中的数据将丢失�?</li>
<li>读取速度快：由于内存是直接与CPU相连的，因此读取速度非常快�?</li>
</ul>
</li>
<li>
<p>*<em>作用�?</em> 在运行程序时，数据必须先加载到内存中，CPU才能够快速访问和处理这些数据�?</p>
</li>
</ul>
<h4 id="�-）外�">�?）外�?</h4>
<ul>
<li>
<p>*<em>功能�?</em> 外存用于永久存储数据，即使在断电的情况下数据也不会丢失�?</p>
</li>
<li>
<p>外存又叫硬盘</p>
</li>
<li>
<p>硬盘分两�?</p>
<ul>
<li>机械硬盘
<ul>
<li>可以存储大量的数据，但是读取速度比较慢，并且价格很低</li>
</ul>
</li>
<li>固态硬�?
<ul>
<li>可以存储大量的数据，读取速度非常快，但是价格太高</li>
</ul>
</li>
</ul>
</li>
<li>
<p>持久性的存储数据，并且断电不会消�?</p>
</li>
<li>
<p><strong>特点</strong>�?</p>
<ul>
<li>断电数据不会丢失：外存是一种非易失性存储器，数据在断电后依然保持�?</li>
<li>读取速度慢：与内存相比，外存的读取速度较慢，因为需要通过外部设备进行读取</li>
</ul>
</li>
</ul>
<h3 id="�-】输入设�">�?】输入设�?</h3>
<ul>
<li>
<p>*<em>功能�?</em> 输入设备用于将外部信息输入到计算机，让计算机能够处理�?</p>
</li>
<li>
<p>电脑输入内容的设�?</p>
</li>
<li>
<p>鼠标键盘，麦克风，手写笔…</p>
</li>
</ul>
<h3 id="�-】输出设�">�?】输出设�?</h3>
<ul>
<li>
<p>*<em>功能�?</em> 输出设备将计算机处理后的结果呈现给用户或其他设备�?</p>
</li>
<li>
<p>计算机展示信息的平台和设�?</p>
</li>
<li>
<p>投影仪和打印机，显示�?..</p>
</li>
</ul>
<h3 id="�-】总结">�?】总结</h3>
<ul>
<li>cpu是人的大脑，负责控制全身和计�?</li>
<li>内存是人的记忆，负责临时存储</li>
<li>硬盘是人的笔记本，负责永久存�?</li>
<li>输入设备是耳朵或眼睛或嘴巴，负责接收外部的信息存入内存</li>
<li>输出设备是你的脸�?表情)或者屁股，负责经过处理后输出的结果</li>
<li>以上所有的设备都通过总线连接，总线相当于人的神�?</li>
</ul>
<h2 id="�-】计算机三大核心硬件">�?】计算机三大核心硬件</h2>
<h3 id="�-）cpu">�?）cpu</h3>
<ul>
<li>控制�?运算�?cpu</li>
<li>中央控制处理�?</li>
<li>控制整个电脑的调度和运算�?</li>
</ul>
<h3 id="�-）内�-2">�?）内�?</h3>
<ul>
<li>临时存储数据的地�?</li>
<li>突然断电数据消失，数据安全性低，但是读取速度极快</li>
</ul>
<h3 id="�-）硬�">�?）硬�?</h3>
<ul>
<li>持久化储存数据的地方</li>
<li>断电了数据也不会消失，数据安全性能高，只要硬盘不发生损坏，就不会数据丢失，读取速度很慢�?</li>
</ul>
<h2 id="�-】程序的执行过程">�?】程序的执行过程</h2>
<ul>
<li>数据准备
<ul>
<li>想用QQ，应该要下载 QQ 的应用程�?</li>
<li>QQ的文件夹内，你会看到很多的文件数据，这些数据就是QQ的启动程�?</li>
</ul>
</li>
<li>数据读取
<ul>
<li>从硬盘中将QQ的数据读取到内存中，进行临时存储</li>
<li>双击QQ的图标，出现QQ登录界面这个操作就是数据从硬盘中读取到内存中的过�?</li>
</ul>
</li>
<li>数据写入
<ul>
<li>输入账号和密码，点击登陆进行登陆�?</li>
<li>进入到QQ聊天界面的过程就是CPU从内存中将数据读取出来进行调度和运算的过�?</li>
</ul>
</li>
<li>关闭QQ ，CPU负责调度当前程序进行杀死，杀死过后要释放当前的内内存资源
<ul>
<li>点击关闭QQ，慢慢的消失</li>
<li>CPU将QQ的数据保存到内存�?</li>
<li>内存中的数据再写入到硬盘中，进行持久化存�?</li>
<li>QQ完全退出了</li>
</ul>
</li>
</ul>
<h1>【三】操作系统的概念</h1>
<h2 id="�-】操作系统的历史">�?】操作系统的历史</h2>
<ul>
<li>它的出现是为了简化我们硬件的操作
<ul>
<li>最开始的时候电脑就是一堆零件拼凑的</li>
</ul>
</li>
</ul>
<blockquote>
<p>计算机是属于电工作的，电流有正负，高低电频之分，0/1</p>
</blockquote>
<ul>
<li>想要简化一系列操作指令，我们只能是找到这些指令的替代品</li>
</ul>
<h2 id="�-】操作系�">�?】操作系�?</h2>
<ul>
<li>操作系统其实就是在一堆硬件的基础上实现功能和接口的封装，我们可以通过这些接口和程序进行硬件的调度</li>
</ul>
<h2 id="�-】开发一套操作系�">�?】开发一套操作系�?</h2>
<ul>
<li>比如我们开发暴风影�?
<ul>
<li>核心业务就是播放视频，输出音�?</li>
<li>你在公司里，有这个需求就要完成这个需求，将这个功能开发一�?
<ul>
<li>将视频文件数据从硬盘中读取出来放到内存中，再经过播放器进行转�?</li>
<li>进行音视频输�?</li>
</ul>
</li>
<li>你的同桌在另一个公司，也需要开发这么一套功�?
<ul>
<li>从零开�?</li>
</ul>
</li>
</ul>
</li>
<li>所有开发者遵循共同的一套规�?
<ul>
<li>我们共同研发出一个功能和接口
<ul>
<li>有一个所但是我们都有要是的副�?</li>
</ul>
</li>
<li>我们都遵循一个规�?
<ul>
<li>核心业务就是播放视频，输出音频做成一个公共的</li>
</ul>
</li>
</ul>
</li>
<li>下次谁需要这个功能谁就来直接拿着�?</li>
</ul>
<h2 id="�-】常见的操作系统">�?】常见的操作系统</h2>
<h3 id="�-）Windows平台">�?）Windows平台</h3>
<ul>
<li>Window7</li>
<li>Windowxp</li>
<li>Window 8</li>
<li>Window 10</li>
<li>Window 11</li>
</ul>
<h3 id="�-）Mac平台">�?）Mac平台</h3>
<ul>
<li>IOS系统</li>
<li>intel</li>
</ul>
<h3 id="�-）Linux平台">�?）Linux平台</h3>
<ul>
<li>centos</li>
<li>蓝鲸</li>
<li>…</li>
</ul>
<h3 id="�-）Andoraid">�?）Andoraid</h3>
<h3 id="�-）IOS">�?）IOS</h3>
<h3 id="�-）鸿�">�?）鸿�?</h3>
<h2 id="�-】系统软件和操作软件的区�">�?】系统软件和操作软件的区�?</h2>
<h3 id="�-）什么是系统软件">�?）什么是系统软件</h3>
<ul>
<li>系统软件是就是建立在硬件至上的软件，负责调度整个硬件</li>
<li>Window、MacOS、Linux</li>
<li>功能包括调度计算机服务，读取文件，进程管�?</li>
</ul>
<h3 id="�-）什么是操作软件">�?）什么是操作软件</h3>
<h4 id="1-系统软件">[1]系统软件</h4>
<ul>
<li>系统自带的服�?网卡服务、文件管理器</li>
</ul>
<h4 id="2-应用软件">[2]应用软件</h4>
<ul>
<li>就是我们基于Window系统至上安装的其他软�?</li>
<li>QQ、微信、QQ音乐、网易云、WeGame</li>
</ul>
<h2 id="�-】计算机系统的三层架�">�?】计算机系统的三层架�?</h2>
<ul>
<li>底层叫硬件层
<ul>
<li>所有操作都属于硬件</li>
</ul>
</li>
<li>中层叫操作系统层
<ul>
<li>所有的硬件调度服务都属于操作系�?</li>
</ul>
</li>
<li>顶层叫做应用�?
<ul>
<li>进行工作和开发的软件</li>
</ul>
</li>
</ul>
<h2 id="�-】平�">�?】平�?</h2>
<ul>
<li>平台就是你的操作系统+硬件</li>
<li>Linux平台
<ul>
<li>用在服务器上</li>
<li>只需要一�?CPU+显卡+内存+硬盘</li>
</ul>
</li>
<li>Window平台
<ul>
<li>Window系统 + CPU + …</li>
</ul>
</li>
<li>MacOS平台
<ul>
<li>macOS + Mac相关硬件</li>
</ul>
</li>
</ul>
<h1>【四】为啥要学python</h1>
<ul>
<li>
<p>跨平台性高，学习成本低</p>
<ul>
<li>电脑配置低也可以使用</li>
</ul>
</li>
<li>
<p>window上能用，Linux上也能用（不建议�?..</p>
</li>
<li>
<p>java需要java虚拟�?</p>
</li>
</ul>
<h1>【五】编程语言</h1>
<h2 id="�-】编程语言的分�">�?】编程语言的分�?</h2>
<ul>
<li>编程语言的发展史，最开始的编程语言肯定不是我们现在学习的python（编程语言就是人与计算机之间的交流�?</li>
</ul>
<h3 id="第一类：机器语言">第一类：机器语言</h3>
<ul>
<li>机器语言就是计算机可以理解的语言，操作计算机的系统硬�?</li>
<li>机器语言是最低级的语言，因为只有计算机能看懂�?</li>
</ul>
<h4 id="机器指令">机器指令</h4>
<ul>
<li>控制高低电频的变化组成一系列的指令就叫机器指令，能控制电脑硬�?</li>
</ul>
<h4 id="如何写机器指�">如何写机器指�?</h4>
<ul>
<li>首先你得必须记住计算机的全部指令及核心代码的含义</li>
<li>在编写机器指令程序的时候需要自己处理每一条数据，以及数据随时可可能会发生的意外情�?</li>
<li>这个过程是一件及其繁琐且耗费经历的工�?</li>
<li>一般发生在源头厂家中，原头厂家调控硬件内部设备的时候会用得�?</li>
</ul>
<h4 id="机器语言的示�">机器语言的示�?</h4>
<ul>
<li>机器语言及其繁琐且难以记�?</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;指令部份的示�?&#x27;&#x27;</span></span><br><span class="line"><span class="string"> 0000 代表 加载（LOAD�?</span></span><br><span class="line"><span class="string"> 0001 代表 存储（STORE�?</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">LOAD 0000  # 加载寄存器A</span></span><br><span class="line"><span class="string">STORE 0001 # 存储到寄存器B</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>暂存器部份的示例<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0000 代表暂存�?A </span></span><br><span class="line"><span class="string">0001 代表暂存�?B </span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>存储器部份的示例<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">000000000000 代表地址�?0 的存储器</span></span><br><span class="line"><span class="string">000000000001 代表地址�?1 的存储器 </span></span><br><span class="line"><span class="string">000000010000 代表地址�?16 的存储器</span></span><br><span class="line"><span class="string">100000000000 代表地址�?2^11 的存储器</span></span><br></pre></td></tr></table></figure>
<h4 id="机器语言的优缺点">机器语言的优缺点</h4>
<ul>
<li>优点：执行效率高，可以直接操作底层硬�?</li>
<li>缺点：开发效率低，学习成本高
<ul>
<li>跨平台性差，更换系统硬件就会导致机器指令失�?</li>
<li>理解原码、反码、补码、位运算�?&amp; | �?</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">底层单位数据的换�?</span><br><span class="line"></span><br><span class="line"><span class="comment"># 00000001 表示1字节，有256种排列方式，�?�?55�?</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 八个字节表示一�?bytes</span></span><br><span class="line"><span class="comment"># 8 字节 = 1 bytes</span></span><br><span class="line"><span class="comment"># 1024 bytes = 1 kB</span></span><br><span class="line"><span class="comment"># 1024 kb = 1 MB </span></span><br><span class="line"><span class="comment"># 1024 mb = 1GB</span></span><br><span class="line"><span class="comment"># 1024 GB = 1 TB</span></span><br><span class="line"><span class="comment"># 1024 TB = 1 ZB</span></span><br></pre></td></tr></table></figure>
<h3 id="第二类：汇编语言">第二类：汇编语言</h3>
<ul>
<li>汇编语言仍然可以直接操作底层硬件，但是美国人可以用一个字母或者一串字母来声明这串机器指令代表的含�?</li>
<li>但是对比与机器语言来书，汇编语言就是一种进步，一定程度上降低了开发成�?</li>
</ul>
<h4 id="什么是汇编语言">什么是汇编语言</h4>
<ul>
<li>是用一个英文字母或者一串单词来代表机器语言的语言</li>
</ul>
<h4 id="示例">示例</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">; hello.asm </span><br><span class="line">section .data            		; 数据段声�?</span><br><span class="line">    msg db <span class="string">&quot;Hello, world!&quot;</span>, <span class="number">0xA</span> ; 要输出的字符�?</span><br><span class="line">    <span class="built_in">len</span> equ $ - msg             ; 字串长度</span><br><span class="line">section .text            		; 代码段声�?</span><br><span class="line">    <span class="keyword">global</span> _start            	; 指定入口函数</span><br><span class="line">_start:                			; 在屏幕上显示一个字符串</span><br><span class="line">    mov edx, <span class="built_in">len</span>            	; 参数三：字符串长�?</span><br><span class="line">    mov ecx, msg            	; 参数二：要显示的字符�?</span><br><span class="line">    mov ebx, <span class="number">1</span>            		; 参数一：文件描述符(stdout) </span><br><span class="line">    mov eax, <span class="number">4</span>            		; 系统调用�?sys_write) </span><br><span class="line">    <span class="built_in">int</span> <span class="number">0x80</span>            		; 调用内核功能</span><br><span class="line">                    			; 退出程�?</span><br><span class="line">    mov ebx, <span class="number">0</span>            		; 参数一：退出代�?</span><br><span class="line">    mov eax, <span class="number">1</span>            		; 系统调用�?sys_exit) </span><br><span class="line">    <span class="built_in">int</span> <span class="number">0x80</span>            		; 调用内核功能</span><br></pre></td></tr></table></figure>
<h4 id="优缺�">优缺�?</h4>
<ul>
<li>优点：执行效率高，直接操作底层硬�?
<ul>
<li>操作灵活，简化了一些机械指令何以让我们快速实现代码编�?</li>
<li>可执行文件很�?</li>
</ul>
</li>
<li>缺点：开发效率底，也需要记住很多指�?
<ul>
<li>发杂度很高，一些代码还是需要记住很多指�?</li>
<li>跨平台型很差，直接操作底层硬�?</li>
</ul>
</li>
</ul>
<h3 id="第三类：高级语言">第三类：高级语言</h3>
<ul>
<li>高级语言就是从人类的角度出发，用人的思维将人的语言转换为计算机可以识别的语言
<ul>
<li>可以通过人类的指令实现操作计算机等硬�?</li>
</ul>
</li>
<li>我们不需要考虑底层硬件而是直接操作系统</li>
<li>更贴近与人类</li>
</ul>
<h4 id="高级语言的分�">高级语言的分�?</h4>
<ul>
<li>
<p>按照编译方式分为：编译型和解释型语言</p>
<ul>
<li>
<p>第一种编译型语言：就是将源代码一次性翻译成目标代码，然后生成一个可执行文件</p>
<ul>
<li>下次执行代码只需要执�?翻译过后的文件即�?</li>
<li>如果我觉得代码中某些代码需要修改和完善，修改完代码以后就需要再重新编译</li>
</ul>
</li>
<li>
<p>比如：一次性将整篇文献翻译成汉语，直接使用</p>
<ul>
<li>下次如果不改动，直接使用翻译稿即�?</li>
<li>一旦发生改动。整篇文章重新翻�?</li>
</ul>
</li>
<li>
<p>优缺�?</p>
<ul>
<li>
<p>优点：一次编译处处执行，只需要编译一次，下一次可以直接拿过来用，效率很高</p>
<ul>
<li>缺点：但是修改过后需要重新编译，跨平台性很�?
<ul>
<li>Window系统上编译出来的可执行文�?</li>
</ul>
</li>
</ul>
</li>
<li>
<p>编译型语言的代表：c，c++,c#,java</p>
</li>
</ul>
</li>
<li>
<p>第二种解释型语言：解释性语言就是在执行代码的过程中，不是一次性变异而是用到哪里就编译到哪里</p>
<ul>
<li>一点一点的进行编译后执�?</li>
<li>比如说我们拿到一篇英文文�?
<ul>
<li>翻译一段就用一段，用到哪就翻译到哪</li>
<li>效率就变低了</li>
</ul>
</li>
</ul>
</li>
<li>
<p>优缺�?</p>
<ul>
<li>优点：不需要改动就可以编译，开发效率高，跨平台性强</li>
<li>缺点：执行效率变慢啦</li>
</ul>
</li>
<li>
<p>编译语言的代表：go，python</p>
</li>
</ul>
</li>
</ul>
<h2 id="�-】开发语言的对�">�?】开发语言的对�?</h2>
<h3 id="�-）执行效�">�?）执行效�?</h3>
<ul>
<li>机器语言</li>
<li>汇编语言</li>
<li>高级语言
<ul>
<li>编译�?</li>
<li>解释�?</li>
</ul>
</li>
</ul>
<h3 id="�-）开发效�">�?）开发效�?</h3>
<ul>
<li>高级语言
<ul>
<li>解释�?</li>
<li>编译�?</li>
</ul>
</li>
<li>汇编�?</li>
<li>机器语言</li>
</ul>
<h3 id="�-）跨平台�">�?）跨平台�?</h3>
<ul>
<li>高级语言
<ul>
<li>解释�?</li>
<li>编译�?</li>
</ul>
</li>
<li>汇编�?</li>
<li>机器语言</li>
</ul>
<h1>【六】python语言</h1>
<h2 id="�-】创建人">�?】创建人</h2>
<ul>
<li>吉多·范罗苏姆（Guido van Rossum）。（俗称龟叔�?</li>
</ul>
<h2 id="�-】名字的由来">�?】名字的由来</h2>
<ul>
<li>Python这个名字，来自Guido所挚爱的电视剧《Monty Python’s Flying Circus》，他希望这个新的叫做Python的语言，能符合他的理想�?</li>
<li>创造一种C和shell之间，语法能够像shell一样简洁，易学易用、可拓展性强，同时兼顾C的强大功能�?</li>
</ul>
<h2 id="�-】全球语言排行�">�?】全球语言排行�?</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.tiobe.com/tiobe-index/">TIOBE Index - TIOBE</a></li>
</ul>
<p><img src="http://192.168.1.96:1314/d/Python%E5%85%A8%E6%A0%88%E8%AE%B2%E8%AF%BE%E8%B5%84%E6%BA%90/Python%E5%85%A8%E6%A0%8829%E6%9C%9F/%E3%80%901.0%E3%80%91Python/day02/%E7%AC%94%E8%AE%B0/day02.assets/image-20240326103955978.png" alt="image-20240326103955978"></p>
<h2 id="�-】Python语言的应用领�">�?】Python语言的应用领�?</h2>
<ul>
<li>人工智能、数据分析、爬虫、金融量化、云计算、WEB开发、自动化运维/测试、游戏开发、网络服务、图像处理等众多领域�?</li>
<li>图像处理比如人脸识别</li>
<li>数据分析</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/dream-ze/p/17580119.html">【补充】Python全栈开发可从事方向 - Chimengmeng - 博客�?(cnblogs.com)</a></p>
<h2 id="�-】国内大厂都在用">�?】国内大厂都在用</h2>
<ul>
<li>目前业内几乎所有大中型互联网企业都在使用Python
<ul>
<li>Youtube、Dropbox、BT、Quora（中国知乎）、豆瓣、知乎、Google、Yahoo!、Facebook、NASA、百度、腾讯、汽车之家、美团等�?</li>
</ul>
</li>
</ul>
<h2 id="�-】Python解释器的发展�">�?】Python解释器的发展�?</h2>
<ul>
<li>1989年，Guido开始写Python语言的编译器�?</li>
<li>1991年，第一个Python编译器诞生�?
<ul>
<li>它是用C语言实现的，并能够调用C语言的库文件�?</li>
<li>从一出生，Python已经具有了：类，函数，异常处理，包含表和词典在内的核心数据类型，以及模块为基础的拓展系统�?</li>
</ul>
</li>
<li>Python 2.7 - July 3, 2010</li>
<li>Python 3.6 - 2016-12-23 发布python3.6.0�?</li>
<li>Python3.10版本我们�?</li>
<li>最新版本的解释器不稳定存在bug</li>
</ul>
<h2 id="�-】Python的解释器的种�">�?】Python的解释器的种�?</h2>
<h3 id="�-）Cpython解释�">�?）Cpython解释�?</h3>
<ul>
<li>基于C语言开发的解释器版�?</li>
<li>我们学习使用的解释器就是基于C语言开发出来的CPython解释�?</li>
<li>底层源码都是C语言，如果从Python代码开源码，看不到C代码</li>
<li>从Python解释器的官网 GitHub</li>
</ul>
<h3 id="�-）jpython">�?）jpython</h3>
<ul>
<li>基于Java写的Python解释器，没人�?</li>
</ul>
<h3 id="�-）ipython">�?）ipython</h3>
<ul>
<li>可以进行交互的解释器版本�?</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2023/01/01/1.0MySQL%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B,%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/01/1.0MySQL%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B,%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">1.0MySQL��װ�̳�,���ݿ�����</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-01T00:00:00+08:00">2023-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:38" itemprop="dateModified" datetime="2025-10-11T17:47:38+08:00">2025-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>数据库初�?</h1>
<h2 id="【一】存储数据的演变过程">【一】存储数据的演变过程</h2>
<h3 id="�-】文件储�">�?】文件储�?</h3>
<ul>
<li>在早期，随意地存放到一个文件中、数据格式也是千差万别的，完全取决于个人</li>
</ul>
<h3 id="�-】软件开发目录规�">�?】软件开发目录规�?</h3>
<h4 id="�-）概�">�?）概�?</h4>
<ul>
<li>限制了存储数据的具体位置</li>
<li>建立专门的文件夹存储数据</li>
</ul>
<h3 id="�-）软件开发目录规�">�?）软件开发目录规�?</h3>
<ul>
<li>bin：主要存放主程序文件，例如main.py�?</li>
<li>conf：主要存放配置文件，例如settings.py�?</li>
<li>lib：主要存放公用函数或类库，例如common.py�?</li>
<li>core：主要存放核心模块代码，例如src.py�?</li>
<li>interface：主要存放用户界面代码，例如interface.py�?</li>
<li>db：主要存放数据库模块和操作脚本，例如moduls.py和db_hander.py�?</li>
<li>log：主要存放日志文件，例如logs.log�?</li>
<li><a target="_blank" rel="noopener" href="http://README.md">README.md</a>：主要存放项目说明文档�?</li>
</ul>
<h4 id="�-）数据存储在本地">�?）数据存储在本地</h4>
<ul>
<li>假设上面是一个游�?</li>
<li>每一个人的游戏数据只会保存在本地</li>
<li>注册登录账号也只能在本地有效</li>
</ul>
<h3 id="�-）单机变成联�">�?）单机变成联�?</h3>
<ul>
<li>然而，在现代互联网环境下，单机模式已经不能满足需求，需要将数据库服务端建立起来，将数据库保存部分统一到一个位置�?</li>
<li>所有的数据操作都会经过这个总的数据库�?</li>
<li>这样不仅可以实现数据共享，还可以保证数据的安全性和稳定性�?</li>
<li>同时，也可以通过增加服务器集群等方式，提高系统的性能和可扩展性�?</li>
</ul>
<h2 id="【二】数据库的本�">【二】数据库的本�?</h2>
<ul>
<li>数据库就是一块基于网络通信的应用程�?</li>
<li>每个人都有开发一块数据库的能�?</li>
</ul>
<h2 id="【三】数据库介绍">【三】数据库介绍</h2>
<h3 id="�-】关系型数据�">�?】关系型数据�?</h3>
<ul>
<li>MySQL</li>
<li>Oracle</li>
<li>db2</li>
<li>access</li>
<li>sql server</li>
<li>这些数据库都是采用关系模型来组织数据，并且支持SQL查询语言</li>
</ul>
<h3 id="�-】非关系型数据库">�?】非关系型数据库</h3>
<ul>
<li>Redis</li>
<li>MongoDB</li>
<li>Memcached</li>
</ul>
<p>这些数据库不采用关系模型来组织数据，而是采用了其他的模型，例如键值对模型、文档模型、图形模型等�?</p>
<h3 id="�-】关系型（存储数据）">�?】关系型（存储数据）</h3>
<ul>
<li>彼此之间有关�?</li>
<li>储存数据的表型形式通常以表格形式存�?</li>
<li>每个字段限制每个字段下的存储数据的格式例如字符串、数字、日期等�?</li>
<li>同时，关系型数据库还支持各种数据操作，例如插入、删除、更新和查询等�?</li>
</ul>
<h3 id="�-】非关系型（缓存数据�">�?】非关系型（缓存数据�?</h3>
<ul>
<li>存储数据通常是K:V形式存储数据</li>
<li>非关系型数据库通常用于存储临时性的、高速访问的数据，这些数据通常以键值对的形式存储，其中“键”表示数据的唯一标识，“值”表示实际的数据内容�?</li>
<li>由于非关系型数据库通常不提供事务支持和复杂的查询功能，因此不适合存储长期保存的历史数据�?</li>
</ul>
<h2 id="【四】数据库的应用场�">【四】数据库的应用场�?</h2>
<h3 id="�-】需�">�?】需�?</h3>
<ul>
<li>假设现在你已经是某大型互联网公司的高级程序员，让你写一个火车票购票系统，来hold住十一期间全国的购票需求，你怎么写？</li>
<li>在同一时段抢票的人数如果太多，那么你的程序不可能运行在一台机器上，应该是多台机器一起分担用户的购票请求�?</li>
</ul>
<p><img src="http://zhaochunze.dream521.site/2322215-20230402201944811-1991410752.png" alt="img"></p>
<h2 id="�-】实现需�">�?】实现需�?</h2>
<ul>
<li>
<p>那么问题就来了，票务信息的数据存在哪里？存在文件里么�?</p>
</li>
<li>
<p>如果存储在文件里，那么存储在哪一台机器上呢？是每台机器上都存储一份么�?</p>
</li>
<li>
<ul>
<li>首先，如果其中一台机器上卖出的票另外两台机器是感知不到的�?</li>
<li>其次，如果我们将数据和程序放在同一个机器上，如果程序和数据有一个出了问题都会导致整个服务不可用�?</li>
<li>最后，操作或修改文件中的内容对python代码来说是一件很麻烦的事�?</li>
</ul>
</li>
<li>
<p>基于上面这些问题，单纯的将数据存储在和程序同一台机器上的文件中是非常不明智的�?</p>
</li>
<li>
<p>根据上面的例子，我们可以知道，将文件和程序存在一台机器上是很不合理的，同时，操作文件是一件很麻烦的事，所以我们可以使用数据库来存储数据�?</p>
</li>
</ul>
<h1>MySQL安装教程</h1>
<h2 id="�-】下载路�">�?】下载路�?</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></li>
</ul>
<h2 id="�-】下载安装包，解压文�">�?】下载安装包，解压文�?</h2>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110418727.png" alt="image-20240527110418727"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110503302.png" alt="image-20240527110503302"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110633760.png" alt="image-20240527110633760"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110656825.png" alt="image-20240527110656825"></p>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110729477.png" alt="image-20240527110729477"></p>
<ul>
<li>填好下载的路�?</li>
<li>进行解压�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527110832193.png" alt="image-20240527110832193"></p>
<h2 id="�-】添加环境变�">�?】添加环境变�?</h2>
<ul>
<li>设置搜索</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527111016688.png" alt="image-20240527111016688"></p>
<ul>
<li>把你解压的mysql的包里面的bin目录的路径添加到环境变量�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527111119294-17167794803561.png" alt="image-20240527111119294"></p>
<ul>
<li>解压包里面创建一个data文件，创建一个mysqm.ini</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527111355844.png" alt="image-20240527111355844"></p>
<ul>
<li>MySQL在windows下的配置文件，叫my.ini，默认是没有的需要自己创�?</li>
<li>配置的文件内容如�?
<ul>
<li>注意下面的配置内�?
<ul>
<li>*<em>basedir和datadir的路径要根据自己的路径如实填�?</em></li>
</ul>
</li>
<li>把下面额信息粘贴到你的配置文件里�?</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目�?</span></span><br><span class="line">basedir=<span class="string">&quot;C:\WinApps\MySQL&quot;</span></span><br><span class="line"><span class="comment"># 设置mysql数据库的数据的存放目录，就是前面手动创建的data目录</span></span><br><span class="line">datadir=<span class="string">&quot;C:\WinApps\MySQL\data&quot;</span></span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line">max_connections=<span class="number">200</span></span><br><span class="line"><span class="comment"># 允许连接失败的次数�?</span></span><br><span class="line">max_connect_errors=<span class="number">10</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为utf8mb4</span></span><br><span class="line">character-<span class="built_in">set</span>-server=utf8mb4</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引�?</span></span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"><span class="comment"># 默认使用“mysql_native_password”插件认�? mysql_native_password</span></span><br><span class="line">default_authentication_plugin=mysql_native_password</span><br><span class="line">[mysql]</span><br><span class="line"><span class="comment"># 设置mysql网络通信的默认字符集</span></span><br><span class="line">default-character-<span class="built_in">set</span>=utf8mb4</span><br><span class="line">[client]</span><br><span class="line"><span class="comment"># 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql客户端的默认字符�?</span></span><br><span class="line">default-character-<span class="built_in">set</span>=utf8mb4</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527112403265.png" alt="image-20240527112403265"></p>
<h2 id="�-】初始化数据�">�?】初始化数据�?</h2>
<h3 id="�-）打开cmd命令窗口">�?）打开cmd命令窗口</h3>
<p>win+r</p>
<h3 id="�-）执行初始化">�?）执行初始化</h3>
<ul>
<li>输入命令，让数据库完成初始化</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize --console</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化成功结果如�?</li>
<li>初始化自动生成一串随机的MySQL秘钥，保存下来，后面要用</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527112826830.png" alt="image-20240527112826830"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\86177&gt;mysqld --initialize --console</span><br><span class="line">mysqld: Could not create or access the registry key needed for the MySQL application</span><br><span class="line">to log to the Windows EventLog. Run the application with sufficient</span><br><span class="line">privileges once to create the key, add the key manually, or turn off</span><br><span class="line">logging for that application.</span><br><span class="line">2024-05-27T03:27:01.422633Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).</span><br><span class="line">2024-05-27T03:27:01.424069Z 0 [ERROR] Cannot open Windows EventLog; check privileges, or start server with --log_syslog=0</span><br><span class="line">2024-05-27T03:27:01.575732Z 0 [Warning] InnoDB: New log files created, LSN=45790</span><br><span class="line">2024-05-27T03:27:01.598272Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2024-05-27T03:27:01.677040Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: fb6b2245-1bd8-11ef-94b8-84a938bfaa23.</span><br><span class="line">2024-05-27T03:27:01.680349Z 0 [Warning] Gtid table is not ready to be used. Table &#x27;mysql.gtid_executed&#x27; cannot be opened.</span><br><span class="line">2024-05-27T03:27:02.275399Z 0 [Warning] A deprecated TLS version TLSv1 is enabled. Please use TLSv1.2 or higher.</span><br><span class="line">2024-05-27T03:27:02.275453Z 0 [Warning] A deprecated TLS version TLSv1.1 is enabled. Please use TLSv1.2 or higher.</span><br><span class="line">2024-05-27T03:27:02.279583Z 0 [Warning] CA certificate ca.pem is self signed.</span><br><span class="line">2024-05-27T03:27:02.388705Z 1 [Note] A temporary password is generated for root@localhost: S*#mL=bw2v5!</span><br></pre></td></tr></table></figure>
<h2 id="�-】注册系统服�">�?】注册系统服�?</h2>
<h3 id="�-）注册服务系�">�?）注册服务系�?</h3>
<ul>
<li>
<p>把mysql注册到操作系统作为服务系统，保证将来电脑重启了就可以开机自启了</p>
</li>
<li>
<p>以管理员身份运行cmd命令窗口</p>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527130018132.png" alt="image-20240527130018132"></p>
<ul>
<li>输入下面代码注册MySQL</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install</span><br></pre></td></tr></table></figure>
<ul>
<li>打开计算机管�?或者cmd输入<code>services.msc</code>打开计算机管理服�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527130601184.png" alt="image-20240527130601184"></p>
<ul>
<li>注册是看不到MySQL系统服务�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527130151397.png" alt="image-20240527130151397"></p>
<ul>
<li>
<p>输入<code>mysqld --install</code></p>
</li>
<li>
<p>注册成功</p>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527130328184.png" alt="image-20240527130328184"></p>
<ul>
<li>注册成功后在系统服务里面多了一个MySQL服务</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527131358783.png" alt="image-20240527131358783"></p>
<h3 id="�-）注销系统服务">�?）注销系统服务</h3>
<ul>
<li>注销服务用于卸载MySQL的不要乱�?</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --remove</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527131932666.png" alt="image-20240527131932666"></p>
<h2 id="�-】启动MySQL服务">�?】启动MySQL服务</h2>
<h3 id="�-）启动方式一">�?）启动方式一</h3>
<ul>
<li>直接在计算机服务里面打开–》点击启�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527132602150.png" alt="image-20240527132602150"></p>
<h3 id="�-）启动方式二">�?）启动方式二</h3>
<ul>
<li>在cmd命令里面输入</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start MySQL</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527141037132.png" alt="image-20240527141037132"></p>
<h3 id="3-关闭">(3)关闭</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop MySQL</span><br></pre></td></tr></table></figure>
<h3 id="4-重启">(4)重启</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net restart MySQL</span><br></pre></td></tr></table></figure>
<h1>MySQL数据库配�?</h1>
<h2 id="�-】登入和退�">�?】登入和退�?</h2>
<h3 id="�-）登�">�?）登�?</h3>
<ul>
<li>通过下面命令</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>
<ul>
<li>u:username</li>
<li>p:passowrd</li>
<li>root:安装成功后默认存在一个用�?</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527141926434.png" alt="image-20240527141926434"></p>
<ul>
<li>连接远程服务登入</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h 127.0.0.1 -P 3306 -uroot -p</span><br></pre></td></tr></table></figure>
<h3 id="�-）退�">�?）退�?</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit/quit</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527142302514.png" alt="image-20240527142302514"></p>
<h2 id="�-】修改用户名和密�">�?】修改用户名和密�?</h2>
<ul>
<li>修改密码的前提是进入到客户端内部</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<ul>
<li>参数介绍
<ul>
<li>“root”:就是修改密码的用户名</li>
<li>“localhost”：表示允许用户在什么地址下可以使用密码登陆到数据库服务器，localhost表示本地登陆
<ul>
<li>localhost：本地主�?</li>
</ul>
</li>
<li>“123456”:就是新的密码了，注意，不要设置空密码！以后公司里面的密码一定要非常难记的才最好�?</li>
</ul>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527143210007.png" alt="image-20240527143210007"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改成功</span></span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<h2 id="�-】跳过授权表重置密码">�?】跳过授权表重置密码</h2>
<ul>
<li>原理就是：将登入验证装饰器的校验功能取消</li>
</ul>
<h3 id="�-）先关闭MySQL服务">�?）先关闭MySQL服务</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop MySQL</span><br></pre></td></tr></table></figure>
<h3 id="2-执行跳表命令">(2)执行跳表命令</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --skip-grant-tables</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527144436229.png" alt="image-20240527144436229"></p>
<ul>
<li>
<p>光标一直再闪，是对�?</p>
</li>
<li>
<p>再开一个cmd命令窗口</p>
</li>
<li>
<p>登入，不用输入密码直接回车（enter�?</p>
</li>
<li>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527144601986.png" alt="image-20240527144601986"></p>
<ul>
<li>输入刷新权限</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<ul>
<li>在输入修改的密码</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;1234567&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>在输入刷新权�?</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240527151044039.png" alt="image-20240527151044039"></p>
<ul>
<li>无密码修改成�?</li>
</ul>
<h2 id="�-】跳过密码直接登�">�?】跳过密码直接登�?</h2>
<ul>
<li>在配置文件增加下述配�?</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysql]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不需要每次输入验证码即可登陆</span></span><br><span class="line">user=&quot;root&quot;</span><br><span class="line">password=你的密码</span><br><span class="line">default-character-set=utf8mb4</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2023/01/01/1.0Scrapy%E6%A1%86%E6%9E%B6%E4%B9%8B%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/01/1.0Scrapy%E6%A1%86%E6%9E%B6%E4%B9%8B%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">1.0Scrapy���֮����</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-01T00:00:00+08:00">2023-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:38" itemprop="dateModified" datetime="2025-10-11T17:47:38+08:00">2025-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Scrapy框架</h1>
<h2 id="【一】介�">【一】介�?</h2>
<ul>
<li>
<p>其最初是为了页面抓取 (更确切来�? 网络抓取 )所设计的，</p>
</li>
<li>
<p>使用它可以以快速、简单、可扩展的方式从网站中提取所需的数据�?</p>
</li>
<li>
<p>但目前Scrapy的用途十分广泛，可用于如数据挖掘、监测和自动化测试等领域，也可以应用在获取API所返回的数�?例如 Amazon Associates Web Services ) 或者通用的网络爬虫�?</p>
</li>
<li>
<p>Scrapy 是基于twisted框架开发而来，twisted是一个流行的事件驱动的python网络框架�?</p>
</li>
<li>
<p>因此Scrapy使用了一种非阻塞（又名异步）的代码来实现并发�?</p>
</li>
<li>
<p><strong>Scrapy框架类似于Django框架</strong></p>
</li>
</ul>
<h2 id="【二】整体架构大致如�">【二】整体架构大致如�?</h2>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5C80b4b3e3-d0f9-464b-810d-34403f41b66e.png" alt="80b4b3e3-d0f9-464b-810d-34403f41b66e"></p>
<h3 id="�-】引擎（EGINE�">�?】引擎（EGINE�?</h3>
<ul>
<li>引擎负责控制系统所有组件之间的数据流，并在某些动作发生时触发事件�?</li>
</ul>
<h3 id="�-】调度器（SCHEDULER�">�?】调度器（SCHEDULER�?</h3>
<ul>
<li>用来接受引擎发过来的请求, 压入队列�? 并在引擎再次请求的时候返�?</li>
<li>可以想像成一个URL的优先级队列, 由它来决定下一个要抓取的网址是什�? 同时去除重复的网址</li>
</ul>
<h3 id="�-】下载器（DOWLOADER�">�?】下载器（DOWLOADER�?</h3>
<ul>
<li>用于下载网页内容, 并将网页内容返回给EGINE，下载器是建立在twisted这个高效的异步模型上�?</li>
</ul>
<h3 id="�-】爬虫（SPIDERS�">�?】爬虫（SPIDERS�?</h3>
<ul>
<li>SPIDERS是开发人员自定义的类，用来解析responses，并且提取items，或者发送新的请�?</li>
</ul>
<h3 id="�-】项目管道（ITEM-PIPLINES�">�?】项目管道（ITEM PIPLINES�?</h3>
<ul>
<li>在items被提取后负责处理它们，主要包括清理、验证、持久化（比如存到数据库）等操作</li>
<li>下载器中间件(Downloader Middlewares)位于Scrapy引擎和下载器之间，主要用来处理从EGINE传到DOWLOADER的请求request，已经从DOWNLOADER传到EGINE的响应response</li>
</ul>
<h3 id="�-】爬虫中间件（Spider-Middlewares�">�?】爬虫中间件（Spider Middlewares�?</h3>
<ul>
<li>位于EGINE和SPIDERS之间，主要工作是处理SPIDERS的输入（即responses）和输出（即requests�?</li>
</ul>
<h2 id="【三】官网链�">【三】官网链�?</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https:_docs.scrapy.org_en_latest_topics_architecture">https://docs.scrapy.org/en/latest/topics/architecture.htm</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aurora-lsk.asia/2023/01/01/1.0cs%E6%A8%A1%E5%9D%97%E5%92%8Cbs%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="坤">
      <meta itemprop="description" content="选择有时候比努力更重要，但是你不努力，选择就只是空谈">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="坤博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/01/1.0cs%E6%A8%A1%E5%9D%97%E5%92%8Cbs%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">1.0csģ���bsģ��</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-01T00:00:00+08:00">2023-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-11 17:47:38" itemprop="dateModified" datetime="2025-10-11T17:47:38+08:00">2025-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blog/" itemprop="url" rel="index"><span itemprop="name">Blog</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>cs模块和bs模块</h1>
<h2 id="【一】c-s模块">【一】c/s模块</h2>
<ul>
<li>c:是客户端的意思（client�?</li>
<li>c/s：（client/server），又叫&quot;客户�?服务�?模式.
<ul>
<li>比如：拼多多app</li>
</ul>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240514190205694.png" alt="image-20240514190205694"></p>
<h2 id="【二】b-s模型">【二】b/s模型</h2>
<ul>
<li>b:浏览器（browser�?</li>
<li>s:服务器（server�?</li>
<li>B/S就是“Browser/Server”的缩写</li>
<li>又叫“浏览器/服务器”模�?
<ul>
<li>例如：淘宝网，京东网</li>
</ul>
</li>
</ul>
<p><img src="D:%5Cpycharm%5CTemporary_notes%5C%E5%9B%BE%E7%89%87%5Cimage-20240514190804560.png" alt="image-20240514190804560"></p>
<h2 id="【三】两大模型比�">【三】两大模型比�?</h2>
<h3 id="�-）cs的架构的优势和劣�">�?）cs的架构的优势和劣�?</h3>
<ul>
<li>优点
<ul>
<li>针对客户端可以高度定�?</li>
<li>意思就是：写出各种各样的样式和平台</li>
</ul>
</li>
<li>缺点
<ul>
<li>必须下载之后才能使用</li>
</ul>
</li>
</ul>
<ol>
<li>减轻服务器的负载
<ul>
<li>将一部分资源协程客户端放到客户端的数据目录下，直接渲染本地的数据</li>
<li>例如王者荣耀的单机模�?</li>
</ul>
</li>
<li>更加方便的管理数�?
<ul>
<li>有些数据是直接保存到本地的，我可以直接修改本地文件的数据达到破解</li>
</ul>
</li>
<li>维护成本�?</li>
</ol>
<h3 id="�-）BS架构的优势和劣势">�?）BS架构的优势和劣势</h3>
<ul>
<li>优点
<ul>
<li>维护升级比较方便
<ul>
<li>一个项目部署到服务器上,docker启动容器</li>
<li>利用docker启动容器，可以使一个程序不停服继续使用
<ul>
<li>docker启动容器的意思就是：相当于镜像，把一个程序复制出来一份运�?</li>
</ul>
</li>
</ul>
</li>
<li>成本降低，选择性较�?
<ul>
<li>服务器上线的项目因为是部署在服务器上</li>
<li>只需要给一个地址给你，通过地址访问就能访问到指定的资源</li>
<li>不会因为操作系统更改而更�?</li>
</ul>
</li>
</ul>
</li>
<li>缺点
<ul>
<li>服务器负载比较重
<ul>
<li>所有的数据都是存储在服务器�?</li>
<li>导致当前启动服务变卡</li>
<li>一下子开了好多打开了很多个程序，就会很�?</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">坤</p>
  <div class="site-description" itemprop="description">选择有时候比努力更重要，但是你不努力，选择就只是空谈</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">201</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">坤</span>
</div>
  <div class="powered-by">由 <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">lsk-0912</a> & <a href="https://github.com/lsk-0912" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
